/*! For license information please see main.a461252f.js.LICENSE.txt */
(function(){var __webpack_modules__={593:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=(e.type||"").toLowerCase(),i=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?i===t.replace(/\/.*$/,""):a===t}))}return!0}},998:function(e,t,n){"use strict";var r=n(458),a={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,o,s,u,l,c=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),s=document.createRange(),u=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=a[t.format]||a.default;window.clipboardData.setData(i,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(l),s.selectNodeContents(l),u.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(f){n&&console.error("unable to copy using execCommand: ",f),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(f){n&&console.error("unable to copy using clipboardData: ",f),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(s):u.removeAllRanges()),l&&document.body.removeChild(l),o()}return c}},304:function(e,t,n){var r,a;!function(){var i={version:"3.5.17"},o=[].slice,s=function(e){return o.call(e)},u=this.document;function l(e){return e&&(e.ownerDocument||e.document||e).documentElement}function c(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}if(u)try{s(u.documentElement.childNodes)[0].nodeType}catch(hu){s=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(pu){var f=this.Element.prototype,d=f.setAttribute,h=f.setAttributeNS,p=this.CSSStyleDeclaration.prototype,v=p.setProperty;f.setAttribute=function(e,t){d.call(this,e,t+"")},f.setAttributeNS=function(e,t,n){h.call(this,e,t,n+"")},p.setProperty=function(e,t,n){v.call(this,e,t+"",n)}}function g(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return null===e?NaN:+e}function y(e){return!isNaN(e)}function b(e){return{left:function(t,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)<0?r=i+1:a=i}return r},right:function(t,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)>0?a=i:r=i+1}return r}}}i.ascending=g,i.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},i.min=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r>=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&n>r&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&n>r&&(n=r)}return n},i.max=function(e,t){var n,r,a=-1,i=e.length;if(1===arguments.length){for(;++a<i;)if(null!=(r=e[a])&&r>=r){n=r;break}for(;++a<i;)null!=(r=e[a])&&r>n&&(n=r)}else{for(;++a<i;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=r;break}for(;++a<i;)null!=(r=t.call(e,e[a],a))&&r>n&&(n=r)}return n},i.extent=function(e,t){var n,r,a,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=a=r;break}for(;++i<o;)null!=(r=e[i])&&(n>r&&(n=r),a<r&&(a=r))}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=a=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&(n>r&&(n=r),a<r&&(a=r))}return[n,a]},i.sum=function(e,t){var n,r=0,a=e.length,i=-1;if(1===arguments.length)for(;++i<a;)y(n=+e[i])&&(r+=n);else for(;++i<a;)y(n=+t.call(e,e[i],i))&&(r+=n);return r},i.mean=function(e,t){var n,r=0,a=e.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)y(n=m(e[i]))?r+=n:--o;else for(;++i<a;)y(n=m(t.call(e,e[i],i)))?r+=n:--o;if(o)return r/o},i.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),a=+e[r-1],i=n-r;return i?a+i*(e[r]-a):a},i.median=function(e,t){var n,r=[],a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)y(n=m(e[o]))&&r.push(n);else for(;++o<a;)y(n=m(t.call(e,e[o],o)))&&r.push(n);if(r.length)return i.quantile(r.sort(g),.5)},i.variance=function(e,t){var n,r,a=e.length,i=0,o=0,s=-1,u=0;if(1===arguments.length)for(;++s<a;)y(n=m(e[s]))&&(o+=(r=n-i)*(n-(i+=r/++u)));else for(;++s<a;)y(n=m(t.call(e,e[s],s)))&&(o+=(r=n-i)*(n-(i+=r/++u)));if(u>1)return o/(u-1)},i.deviation=function(){var e=i.variance.apply(this,arguments);return e?Math.sqrt(e):e};var x=b(g);function k(e){return e.length}i.bisectLeft=x.left,i.bisect=i.bisectRight=x.right,i.bisector=function(e){return b(1===e.length?function(t,n){return g(e(t),n)}:e)},i.shuffle=function(e,t,n){(i=arguments.length)<3&&(n=e.length,i<2&&(t=0));for(var r,a,i=n-t;i;)a=Math.random()*i--|0,r=e[i+t],e[i+t]=e[a+t],e[a+t]=r;return e},i.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},i.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],a=new Array(n<0?0:n);t<n;)a[t]=[r,r=e[++t]];return a},i.transpose=function(e){if(!(a=e.length))return[];for(var t=-1,n=i.min(e,k),r=new Array(n);++t<n;)for(var a,o=-1,s=r[t]=new Array(a);++o<a;)s[o]=e[o][t];return r},i.zip=function(){return i.transpose(arguments)},i.keys=function(e){var t=[];for(var n in e)t.push(n);return t},i.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},i.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},i.merge=function(e){for(var t,n,r,a=e.length,i=-1,o=0;++i<a;)o+=e[i].length;for(n=new Array(o);--a>=0;)for(t=(r=e[a]).length;--t>=0;)n[--o]=r[t];return n};var w=Math.abs;function S(e){for(var t=1;e*t%1;)t*=10;return t}function _(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function C(){this._=Object.create(null)}i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,a=[],i=S(w(n)),o=-1;if(e*=i,t*=i,(n*=i)<0)for(;(r=e+n*++o)>t;)a.push(r/i);else for(;(r=e+n*++o)<t;)a.push(r/i);return a},i.map=function(e,t){var n=new C;if(e instanceof C)e.forEach((function(e,t){n.set(e,t)}));else if(Array.isArray(e)){var r,a=-1,i=e.length;if(1===arguments.length)for(;++a<i;)n.set(a,e[a]);else for(;++a<i;)n.set(t.call(e,r=e[a],a),r)}else for(var o in e)n.set(o,e[o]);return n};function E(e){return"__proto__"===(e+="")||"\0"===e[0]?"\0"+e:e}function A(e){return"\0"===(e+="")[0]?e.slice(1):e}function I(e){return E(e)in this._}function T(e){return(e=E(e))in this._&&delete this._[e]}function R(){var e=[];for(var t in this._)e.push(A(t));return e}function N(){var e=0;for(var t in this._)++e;return e}function M(){for(var e in this._)return!1;return!0}function O(){this._=Object.create(null)}function P(e){return e}function F(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function D(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=L.length;n<r;++n){var a=L[n]+t;if(a in e)return a}}_(C,{has:I,get:function(e){return this._[E(e)]},set:function(e,t){return this._[E(e)]=t},remove:T,keys:R,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:A(t),value:this._[t]});return e},size:N,empty:M,forEach:function(e){for(var t in this._)e.call(this,A(t),this._[t])}}),i.nest=function(){var e,t,n={},r=[],a=[];function o(a,i,s){if(s>=r.length)return t?t.call(n,i):e?i.sort(e):i;for(var u,l,c,f,d=-1,h=i.length,p=r[s++],v=new C;++d<h;)(f=v.get(u=p(l=i[d])))?f.push(l):v.set(u,[l]);return a?(l=a(),c=function(e,t){l.set(e,o(a,t,s))}):(l={},c=function(e,t){l[e]=o(a,t,s)}),v.forEach(c),l}function s(e,t){if(t>=r.length)return e;var n=[],i=a[t++];return e.forEach((function(e,r){n.push({key:e,values:s(r,t)})})),i?n.sort((function(e,t){return i(e.key,t.key)})):n}return n.map=function(e,t){return o(t,e,0)},n.entries=function(e){return s(o(i.map,e,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return a[r.length-1]=e,n},n.sortValues=function(t){return e=t,n},n.rollup=function(e){return t=e,n},n},i.set=function(e){var t=new O;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},_(O,{has:I,add:function(e){return this._[E(e+="")]=!0,e},remove:T,values:R,size:N,empty:M,forEach:function(e){for(var t in this._)e.call(this,A(t))}}),i.behavior={},i.rebind=function(e,t){for(var n,r=1,a=arguments.length;++r<a;)e[n=arguments[r]]=F(e,t,t[n]);return e};var L=["webkit","ms","moz","Moz","o","O"];function z(){}function j(){}function B(e){var t=[],n=new C;function r(){for(var n,r=t,a=-1,i=r.length;++a<i;)(n=r[a].on)&&n.apply(this,arguments);return e}return r.on=function(r,a){var i,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,t=t.slice(0,i=t.indexOf(o)).concat(t.slice(i+1)),n.remove(r)),a&&t.push(n.set(r,{on:a})),e)},r}function W(){i.event.preventDefault()}function U(){for(var e,t=i.event;e=t.sourceEvent;)t=e;return t}function V(e){for(var t=new j,n=0,r=arguments.length;++n<r;)t[arguments[n]]=B(t);return t.of=function(n,r){return function(a){try{var o=a.sourceEvent=i.event;a.target=e,i.event=a,t[a.type].apply(n,r)}finally{i.event=o}}},t}i.dispatch=function(){for(var e=new j,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=B(e);return e},j.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},i.event=null,i.requote=function(e){return e.replace(H,"\\$&")};var H=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};function q(e){return G(e,$),e}var X=function(e,t){return t.querySelector(e)},Y=function(e,t){return t.querySelectorAll(e)},K=function(e,t){var n=e.matches||e[D(e,"matchesSelector")];return K=function(e,t){return n.call(e,t)},K(e,t)};"function"===typeof Sizzle&&(X=function(e,t){return Sizzle(e,t)[0]||null},Y=Sizzle,K=Sizzle.matchesSelector),i.selection=function(){return i.select(u.documentElement)};var $=i.selection.prototype=[];function Z(e){return"function"===typeof e?e:function(){return X(e,this)}}function Q(e){return"function"===typeof e?e:function(){return Y(e,this)}}$.select=function(e){var t,n,r,a,i=[];e=Z(e);for(var o=-1,s=this.length;++o<s;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(a=r[u])?(t.push(n=e.call(a,a.__data__,u,o)),n&&"__data__"in a&&(n.__data__=a.__data__)):t.push(null)}return q(i)},$.selectAll=function(e){var t,n,r=[];e=Q(e);for(var a=-1,i=this.length;++a<i;)for(var o=this[a],u=-1,l=o.length;++u<l;)(n=o[u])&&(r.push(t=s(e.call(n,n.__data__,u,a))),t.parentNode=n);return q(r)};var J="http://www.w3.org/1999/xhtml",ee={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function te(e,t){return e=i.ns.qualify(e),null==t?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"===typeof t?e.local?function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}:function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}:e.local?function(){this.setAttributeNS(e.space,e.local,t)}:function(){this.setAttribute(e,t)}}function ne(e){return e.trim().replace(/\s+/g," ")}function re(e){return new RegExp("(?:^|\\s+)"+i.requote(e)+"(?:\\s+|$)","g")}function ae(e){return(e+"").trim().split(/^|\s+/)}function ie(e,t){var n=(e=ae(e).map(oe)).length;return"function"===typeof t?function(){for(var r=-1,a=t.apply(this,arguments);++r<n;)e[r](this,a)}:function(){for(var r=-1;++r<n;)e[r](this,t)}}function oe(e){var t=re(e);return function(n,r){if(a=n.classList)return r?a.add(e):a.remove(e);var a=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(a)||n.setAttribute("class",ne(a+" "+e))):n.setAttribute("class",ne(a.replace(t," ")))}}function se(e,t,n){return null==t?function(){this.style.removeProperty(e)}:"function"===typeof t?function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}:function(){this.style.setProperty(e,t,n)}}function ue(e,t){return null==t?function(){delete this[e]}:"function"===typeof t?function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}:function(){this[e]=t}}function le(e){return"function"===typeof e?e:(e=i.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===J&&t.documentElement.namespaceURI===J?t.createElement(e):t.createElementNS(n,e)}}function ce(){var e=this.parentNode;e&&e.removeChild(this)}function fe(e){return{__data__:e}}function de(e){return function(){return K(this,e)}}function he(e){return arguments.length||(e=g),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function pe(e,t){for(var n=0,r=e.length;n<r;n++)for(var a,i=e[n],o=0,s=i.length;o<s;o++)(a=i[o])&&t(a,o,n);return e}function ve(e){return G(e,ge),e}i.ns={prefix:ee,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),ee.hasOwnProperty(n)?{space:ee[n],local:e}:e}},$.attr=function(e,t){if(arguments.length<2){if("string"===typeof e){var n=this.node();return(e=i.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(te(t,e[t]));return this}return this.each(te(e,t))},$.classed=function(e,t){if(arguments.length<2){if("string"===typeof e){var n=this.node(),r=(e=ae(e)).length,a=-1;if(t=n.classList){for(;++a<r;)if(!t.contains(e[a]))return!1}else for(t=n.getAttribute("class");++a<r;)if(!re(e[a]).test(t))return!1;return!0}for(t in e)this.each(ie(t,e[t]));return this}return this.each(ie(e,t))},$.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!==typeof e){for(n in r<2&&(t=""),e)this.each(se(n,e[n],t));return this}if(r<2){var a=this.node();return c(a).getComputedStyle(a,null).getPropertyValue(e)}n=""}return this.each(se(e,t,n))},$.property=function(e,t){if(arguments.length<2){if("string"===typeof e)return this.node()[e];for(t in e)this.each(ue(t,e[t]));return this}return this.each(ue(e,t))},$.text=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},$.html=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},$.append=function(e){return e=le(e),this.select((function(){return this.appendChild(e.apply(this,arguments))}))},$.insert=function(e,t){return e=le(e),t=Z(t),this.select((function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)}))},$.remove=function(){return this.each(ce)},$.data=function(e,t){var n,r,a=-1,i=this.length;if(!arguments.length){for(e=new Array(i=(n=this[0]).length);++a<i;)(r=n[a])&&(e[a]=r.__data__);return e}function o(e,n){var r,a,i,o=e.length,c=n.length,f=Math.min(o,c),d=new Array(c),h=new Array(c),p=new Array(o);if(t){var v,g=new C,m=new Array(o);for(r=-1;++r<o;)(a=e[r])&&(g.has(v=t.call(a,a.__data__,r))?p[r]=a:g.set(v,a),m[r]=v);for(r=-1;++r<c;)(a=g.get(v=t.call(n,i=n[r],r)))?!0!==a&&(d[r]=a,a.__data__=i):h[r]=fe(i),g.set(v,!0);for(r=-1;++r<o;)r in m&&!0!==g.get(m[r])&&(p[r]=e[r])}else{for(r=-1;++r<f;)a=e[r],i=n[r],a?(a.__data__=i,d[r]=a):h[r]=fe(i);for(;r<c;++r)h[r]=fe(n[r]);for(;r<o;++r)p[r]=e[r]}h.update=d,h.parentNode=d.parentNode=p.parentNode=e.parentNode,s.push(h),u.push(d),l.push(p)}var s=ve([]),u=q([]),l=q([]);if("function"===typeof e)for(;++a<i;)o(n=this[a],e.call(n,n.parentNode.__data__,a));else for(;++a<i;)o(n=this[a],e);return u.enter=function(){return s},u.exit=function(){return l},u},$.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},$.filter=function(e){var t,n,r,a=[];"function"!==typeof e&&(e=de(e));for(var i=0,o=this.length;i<o;i++){a.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return q(a)},$.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],a=r.length-1,i=r[a];--a>=0;)(n=r[a])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},$.sort=function(e){e=he.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},$.each=function(e){return pe(this,(function(t,n,r){e.call(t,t.__data__,n,r)}))},$.call=function(e){var t=s(arguments);return e.apply(t[0]=this,t),this},$.empty=function(){return!this.node()},$.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,a=n.length;r<a;r++){var i=n[r];if(i)return i}return null},$.size=function(){var e=0;return pe(this,(function(){++e})),e};var ge=[];function me(e){var t,n;return function(r,a,i){var o,s=e[i].update,u=s.length;for(i!=n&&(n=i,t=0),a>=t&&(t=a+1);!(o=s[t])&&++t<u;);return o}}function ye(e,t,n){var r="__on"+e,a=e.indexOf("."),o=xe;a>0&&(e=e.slice(0,a));var u=be.get(e);function l(){var t=this[r];t&&(this.removeEventListener(e,t,t.$),delete this[r])}return u&&(e=u,o=ke),a?t?function(){var a=o(t,s(arguments));l.call(this),this.addEventListener(e,this[r]=a,a.$=n),a._=t}:l:t?z:function(){var t,n=new RegExp("^__on([^.]+)"+i.requote(e)+"$");for(var r in this)if(t=r.match(n)){var a=this[r];this.removeEventListener(t[1],a,a.$),delete this[r]}}}i.selection.enter=ve,i.selection.enter.prototype=ge,ge.append=$.append,ge.empty=$.empty,ge.node=$.node,ge.call=$.call,ge.size=$.size,ge.select=function(e){for(var t,n,r,a,i,o=[],s=-1,u=this.length;++s<u;){r=(a=this[s]).update,o.push(t=[]),t.parentNode=a.parentNode;for(var l=-1,c=a.length;++l<c;)(i=a[l])?(t.push(r[l]=n=e.call(a.parentNode,i.__data__,l,s)),n.__data__=i.__data__):t.push(null)}return q(o)},ge.insert=function(e,t){return arguments.length<2&&(t=me(this)),$.insert.call(this,e,t)},i.select=function(e){var t;return"string"===typeof e?(t=[X(e,u)]).parentNode=u.documentElement:(t=[e]).parentNode=l(e),q([t])},i.selectAll=function(e){var t;return"string"===typeof e?(t=s(Y(e,u))).parentNode=u.documentElement:(t=s(e)).parentNode=null,q([t])},$.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!==typeof e){for(n in r<2&&(t=!1),e)this.each(ye(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(ye(e,t,n))};var be=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});function xe(e,t){return function(n){var r=i.event;i.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{i.event=r}}}function ke(e,t){var n=xe(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}u&&be.forEach((function(e){"on"+e in u&&be.remove(e)}));var we,Se=0;function _e(e){var t=".dragsuppress-"+ ++Se,n="click"+t,r=i.select(c(e)).on("touchmove"+t,W).on("dragstart"+t,W).on("selectstart"+t,W);if(null==we&&(we=!("onselectstart"in e)&&D(e.style,"userSelect")),we){var a=l(e).style,o=a[we];a[we]="none"}return function(e){if(r.on(t,null),we&&(a[we]=o),e){var i=function(){r.on(n,null)};r.on(n,(function(){W(),i()}),!0),setTimeout(i,0)}}}i.mouse=function(e){return Ee(e,U())};var Ce=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ee(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(Ce<0){var a=c(e);if(a.scrollX||a.scrollY){var o=(n=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ce=!(o.f||o.e),n.remove()}}return Ce?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function Ae(){return i.event.changedTouches[0].identifier}i.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=U().changedTouches),t)for(var r,a=0,i=t.length;a<i;++a)if((r=t[a]).identifier===n)return Ee(e,r)},i.behavior.drag=function(){var e=V(a,"drag","dragstart","dragend"),t=null,n=o(z,i.mouse,c,"mousemove","mouseup"),r=o(Ae,i.touch,P,"touchmove","touchend");function a(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,a,o,s){return function(){var u,l=this,c=i.event.target.correspondingElement||i.event.target,f=l.parentNode,d=e.of(l,arguments),h=0,p=n(),v=".drag"+(null==p?"":"-"+p),g=i.select(a(c)).on(o+v,b).on(s+v,x),m=_e(c),y=r(f,p);function b(){var e,t,n=r(f,p);n&&(e=n[0]-y[0],t=n[1]-y[1],h|=e|t,y=n,d({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:e,dy:t}))}function x(){r(f,p)&&(g.on(o+v,null).on(s+v,null),m(h),d({type:"dragend"}))}u=t?[(u=t.apply(l,arguments)).x-y[0],u.y-y[1]]:[0,0],d({type:"dragstart"})}}return a.origin=function(e){return arguments.length?(t=e,a):t},i.rebind(a,e,"on")},i.touches=function(e,t){return arguments.length<2&&(t=U().touches),t?s(t).map((function(t){var n=Ee(e,t);return n.identifier=t.identifier,n})):[]};var Ie=1e-6,Te=Ie*Ie,Re=Math.PI,Ne=2*Re,Me=Ne-Ie,Oe=Re/2,Pe=Re/180,Fe=180/Re;function De(e){return e>0?1:e<0?-1:0}function Le(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ze(e){return e>1?0:e<-1?Re:Math.acos(e)}function je(e){return e>1?Oe:e<-1?-Oe:Math.asin(e)}function Be(e){return((e=Math.exp(e))+1/e)/2}function We(e){return(e=Math.sin(e/2))*e}var Ue=Math.SQRT2;i.interpolateZoom=function(e,t){var n,r,a=e[0],i=e[1],o=e[2],s=t[0],u=t[1],l=t[2],c=s-a,f=u-i,d=c*c+f*f;if(d<Te)r=Math.log(l/o)/Ue,n=function(e){return[a+e*c,i+e*f,o*Math.exp(Ue*e*r)]};else{var h=Math.sqrt(d),p=(l*l-o*o+4*d)/(2*o*2*h),v=(l*l-o*o-4*d)/(2*l*2*h),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/Ue,n=function(e){var t,n=e*r,s=Be(g),u=o/(2*h)*(s*(t=Ue*n+g,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[a+u*c,i+u*f,o*s/Be(Ue*n+g)]}}return n.duration=1e3*r,n},i.behavior.zoom=function(){var e,t,n,r,a,o,s,l,f,d={x:0,y:0,k:1},h=[960,500],p=Ge,v=250,g=0,m="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",k=V(w,"zoomstart","zoom","zoomend");function w(e){e.on(m,N).on(He+".zoom",O).on("dblclick.zoom",P).on(x,M)}function S(e){return[(e[0]-d.x)/d.k,(e[1]-d.y)/d.k]}function _(e){d.k=Math.max(p[0],Math.min(p[1],e))}function C(e,t){t=function(e){return[e[0]*d.k+d.x,e[1]*d.k+d.y]}(t),d.x+=e[0]-t[0],d.y+=e[1]-t[1]}function E(e,n,r,a){e.__chart__={x:d.x,y:d.y,k:d.k},_(Math.pow(2,a)),C(t=n,r),e=i.select(e),v>0&&(e=e.transition().duration(v)),e.call(w.event)}function A(){s&&s.domain(o.range().map((function(e){return(e-d.x)/d.k})).map(o.invert)),f&&f.domain(l.range().map((function(e){return(e-d.y)/d.k})).map(l.invert))}function I(e){g++||e({type:"zoomstart"})}function T(e){A(),e({type:"zoom",scale:d.k,translate:[d.x,d.y]})}function R(e){--g||(e({type:"zoomend"}),t=null)}function N(){var e=this,t=k.of(e,arguments),n=0,r=i.select(c(e)).on(y,s).on(b,u),a=S(i.mouse(e)),o=_e(e);function s(){n=1,C(i.mouse(e),a),T(t)}function u(){r.on(y,null).on(b,null),o(n),R(t)}Ds.call(e),I(t)}function M(){var e,t=this,n=k.of(t,arguments),r={},o=0,s=".zoom-"+i.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,c=[],f=i.select(t),h=_e(t);function p(){var n=i.touches(t);return e=d.k,n.forEach((function(e){e.identifier in r&&(r[e.identifier]=S(e))})),n}function v(){var e=i.event.target;i.select(e).on(u,g).on(l,y),c.push(e);for(var n=i.event.changedTouches,s=0,f=n.length;s<f;++s)r[n[s].identifier]=null;var h=p(),v=Date.now();if(1===h.length){if(v-a<500){var m=h[0];E(t,m,r[m.identifier],Math.floor(Math.log(d.k)/Math.LN2)+1),W()}a=v}else if(h.length>1){m=h[0];var b=h[1],x=m[0]-b[0],k=m[1]-b[1];o=x*x+k*k}}function g(){var s,u,l,c,f=i.touches(t);Ds.call(t);for(var d=0,h=f.length;d<h;++d,c=null)if(l=f[d],c=r[l.identifier]){if(u)break;s=l,u=c}if(c){var p=(p=l[0]-s[0])*p+(p=l[1]-s[1])*p,v=o&&Math.sqrt(p/o);s=[(s[0]+l[0])/2,(s[1]+l[1])/2],u=[(u[0]+c[0])/2,(u[1]+c[1])/2],_(v*e)}a=null,C(s,u),T(n)}function y(){if(i.event.touches.length){for(var e=i.event.changedTouches,t=0,a=e.length;t<a;++t)delete r[e[t].identifier];for(var o in r)return void p()}i.selectAll(c).on(s,null),f.on(m,N).on(x,M),h(),R(n)}v(),I(n),f.on(m,null).on(x,v)}function O(){var a=k.of(this,arguments);r?clearTimeout(r):(Ds.call(this),e=S(t=n||i.mouse(this)),I(a)),r=setTimeout((function(){r=null,R(a)}),50),W(),_(Math.pow(2,.002*Ve())*d.k),C(t,e),T(a)}function P(){var e=i.mouse(this),t=Math.log(d.k)/Math.LN2;E(this,e,S(e),i.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}return He||(He="onwheel"in u?(Ve=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(Ve=function(){return i.event.wheelDelta},"mousewheel"):(Ve=function(){return-i.event.detail},"MozMousePixelScroll")),w.event=function(e){e.each((function(){var e=k.of(this,arguments),n=d;js?i.select(this).transition().each("start.zoom",(function(){d=this.__chart__||{x:0,y:0,k:1},I(e)})).tween("zoom:zoom",(function(){var r=h[0],a=h[1],o=t?t[0]:r/2,s=t?t[1]:a/2,u=i.interpolateZoom([(o-d.x)/d.k,(s-d.y)/d.k,r/d.k],[(o-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(t){var n=u(t),a=r/n[2];this.__chart__=d={x:o-n[0]*a,y:s-n[1]*a,k:a},T(e)}})).each("interrupt.zoom",(function(){R(e)})).each("end.zoom",(function(){R(e)})):(this.__chart__=d,I(e),T(e),R(e))}))},w.translate=function(e){return arguments.length?(d={x:+e[0],y:+e[1],k:d.k},A(),w):[d.x,d.y]},w.scale=function(e){return arguments.length?(d={x:d.x,y:d.y,k:null},_(+e),A(),w):d.k},w.scaleExtent=function(e){return arguments.length?(p=null==e?Ge:[+e[0],+e[1]],w):p},w.center=function(e){return arguments.length?(n=e&&[+e[0],+e[1]],w):n},w.size=function(e){return arguments.length?(h=e&&[+e[0],+e[1]],w):h},w.duration=function(e){return arguments.length?(v=+e,w):v},w.x=function(e){return arguments.length?(s=e,o=e.copy(),d={x:0,y:0,k:1},w):s},w.y=function(e){return arguments.length?(f=e,l=e.copy(),d={x:0,y:0,k:1},w):f},i.rebind(w,k,"on")};var Ve,He,Ge=[0,1/0];function qe(){}function Xe(e,t,n){return this instanceof Xe?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof Xe?new Xe(e.h,e.s,e.l):pt(""+e,vt,Xe):new Xe(e,t,n)}i.color=qe,qe.prototype.toString=function(){return this.rgb()+""},i.hsl=Xe;var Ye=Xe.prototype=new qe;function Ke(e,t,n){var r,a;function i(e){return Math.round(255*function(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(a-r)*e/60:e<180?a:e<240?r+(a-r)*(240-e)/60:r}(e))}return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)||t<0?0:t>1?1:t,r=2*(n=n<0?0:n>1?1:n)-(a=n<=.5?n*(1+t):n+t-n*t),new lt(i(e+120),i(e),i(e-120))}function $e(e,t,n){return this instanceof $e?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof $e?new $e(e.h,e.c,e.l):it(e instanceof Je?e.l:(e=gt((e=i.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new $e(e,t,n)}Ye.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new Xe(this.h,this.s,this.l/e)},Ye.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new Xe(this.h,this.s,e*this.l)},Ye.rgb=function(){return Ke(this.h,this.s,this.l)},i.hcl=$e;var Ze=$e.prototype=new qe;function Qe(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new Je(n,Math.cos(e*=Pe)*t,Math.sin(e)*t)}function Je(e,t,n){return this instanceof Je?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof Je?new Je(e.l,e.a,e.b):e instanceof $e?Qe(e.h,e.c,e.l):gt((e=lt(e)).r,e.g,e.b):new Je(e,t,n)}Ze.brighter=function(e){return new $e(this.h,this.c,Math.min(100,this.l+et*(arguments.length?e:1)))},Ze.darker=function(e){return new $e(this.h,this.c,Math.max(0,this.l-et*(arguments.length?e:1)))},Ze.rgb=function(){return Qe(this.h,this.c,this.l).rgb()},i.lab=Je;var et=18,tt=.95047,nt=1.08883,rt=Je.prototype=new qe;function at(e,t,n){var r=(e+16)/116,a=r+t/500,i=r-n/200;return new lt(ut(3.2404542*(a=ot(a)*tt)-1.5371385*(r=1*ot(r))-.4985314*(i=ot(i)*nt)),ut(-.969266*a+1.8760108*r+.041556*i),ut(.0556434*a-.2040259*r+1.0572252*i))}function it(e,t,n){return e>0?new $e(Math.atan2(n,t)*Fe,Math.sqrt(t*t+n*n),e):new $e(NaN,NaN,e)}function ot(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function st(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ut(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function lt(e,t,n){return this instanceof lt?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof lt?new lt(e.r,e.g,e.b):pt(""+e,lt,Ke):new lt(e,t,n)}function ct(e){return new lt(e>>16,e>>8&255,255&e)}function ft(e){return ct(e)+""}rt.brighter=function(e){return new Je(Math.min(100,this.l+et*(arguments.length?e:1)),this.a,this.b)},rt.darker=function(e){return new Je(Math.max(0,this.l-et*(arguments.length?e:1)),this.a,this.b)},rt.rgb=function(){return at(this.l,this.a,this.b)},i.rgb=lt;var dt=lt.prototype=new qe;function ht(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function pt(e,t,n){var r,a,i,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(a=r[2].split(","),r[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return t(yt(a[0]),yt(a[1]),yt(a[2]))}return(i=bt.get(e))?t(i.r,i.g,i.b):(null==e||"#"!==e.charAt(0)||isNaN(i=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&i)>>4,o|=o>>4,s=240&i,s|=s>>4,u=15&i,u|=u<<4):7===e.length&&(o=(16711680&i)>>16,s=(65280&i)>>8,u=255&i)),t(o,s,u))}function vt(e,t,n){var r,a,i=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-i,u=(o+i)/2;return s?(a=u<.5?s/(o+i):s/(2-o-i),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,a=u>0&&u<1?0:r),new Xe(r,a,u)}function gt(e,t,n){var r=st((.4124564*(e=mt(e))+.3575761*(t=mt(t))+.1804375*(n=mt(n)))/tt),a=st((.2126729*e+.7151522*t+.072175*n)/1);return Je(116*a-16,500*(r-a),200*(a-st((.0193339*e+.119192*t+.9503041*n)/nt)))}function mt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function yt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}dt.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,a=30;return t||n||r?(t&&t<a&&(t=a),n&&n<a&&(n=a),r&&r<a&&(r=a),new lt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new lt(a,a,a)},dt.darker=function(e){return new lt((e=Math.pow(.7,arguments.length?e:1))*this.r,e*this.g,e*this.b)},dt.hsl=function(){return vt(this.r,this.g,this.b)},dt.toString=function(){return"#"+ht(this.r)+ht(this.g)+ht(this.b)};var bt=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function xt(e){return"function"===typeof e?e:function(){return e}}function kt(e){return function(t,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=null),wt(t,n,e,r)}}function wt(e,t,n,r){var a={},o=i.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;function f(){var e,t=l.status;if(!t&&function(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}(l)||t>=200&&t<300||304===t){try{e=n.call(a,l)}catch(hu){return void o.error.call(a,hu)}o.load.call(a,e)}else o.error.call(a,l)}return this.XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(e)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()},l.onprogress=function(e){var t=i.event;i.event=e;try{o.progress.call(a,l)}finally{i.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(c=e,a):c},a.response=function(e){return n=e,a},["get","post"].forEach((function(e){a[e]=function(){return a.send.apply(a,[e].concat(s(arguments)))}})),a.send=function(n,r,i){if(2===arguments.length&&"function"===typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),l.setRequestHeader)for(var s in u)l.setRequestHeader(s,u[s]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=i&&a.on("error",i).on("load",(function(e){i(null,e)})),o.beforesend.call(a,l),l.send(null==r?null:r),a},a.abort=function(){return l.abort(),a},i.rebind(a,o,"on"),null==r?a:a.get(function(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}(r))}bt.forEach((function(e,t){bt.set(e,ct(t))})),i.functor=xt,i.xhr=kt(P),i.dsv=function(e,t){var n=new RegExp('["'+e+"\n]"),r=e.charCodeAt(0);function a(e,n,r){arguments.length<3&&(r=n,n=null);var a=wt(e,t,null==n?i:o(n),r);return a.row=function(e){return arguments.length?a.response(null==(n=e)?i:o(e)):n},a}function i(e){return a.parse(e.responseText)}function o(e){return function(t){return a.parse(t.responseText,e)}}function s(t){return t.map(u).join(e)}function u(e){return n.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}return a.parse=function(e,t){var n;return a.parseRows(e,(function(e,r){if(n)return n(e,r-1);var a=new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+"]"})).join(",")+"}");n=t?function(e,n){return t(a(e),n)}:a}))},a.parseRows=function(e,t){var n,a,i={},o={},s=[],u=e.length,l=0,c=0;function f(){if(l>=u)return o;if(a)return a=!1,i;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return l=n+2,13===(s=e.charCodeAt(n+1))?(a=!0,10===e.charCodeAt(n+2)&&++l):10===s&&(a=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l<u;){var s,c=1;if(10===(s=e.charCodeAt(l++)))a=!0;else if(13===s)a=!0,10===e.charCodeAt(l)&&(++l,++c);else if(s!==r)continue;return e.slice(t,l-c)}return e.slice(t)}for(;(n=f())!==o;){for(var d=[];n!==i&&n!==o;)d.push(n),n=f();t&&null==(d=t(d,c++))||s.push(d)}return s},a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var n=new O,r=[];return t.forEach((function(e){for(var t in e)n.has(t)||r.push(n.add(t))})),[r.map(u).join(e)].concat(t.map((function(t){return r.map((function(e){return u(t[e])})).join(e)}))).join("\n")},a.formatRows=function(e){return e.map(s).join("\n")},a},i.csv=i.dsv(",","text/csv"),i.tsv=i.dsv("\t","text/tab-separated-values");var St,_t,Ct,Et,At=this[D(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};function It(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var a=n+t,i={c:e,t:a,n:null};return _t?_t.n=i:St=i,_t=i,Ct||(Et=clearTimeout(Et),Ct=1,At(Tt)),i}function Tt(){var e=Rt(),t=Nt()-e;t>24?(isFinite(t)&&(clearTimeout(Et),Et=setTimeout(Tt,t)),Ct=0):(Ct=1,At(Tt))}function Rt(){for(var e=Date.now(),t=St;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Nt(){for(var e,t=St,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:St=t.n;return _t=e,n}function Mt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}i.timer=function(){It.apply(this,arguments)},i.timer.flush=function(){Rt(),Nt()},i.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Ot=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map((function(e,t){var n=Math.pow(10,3*w(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}));function Pt(e){var t=e.decimal,n=e.thousands,r=e.grouping,a=e.currency,o=r&&n?function(e,t){for(var a=e.length,i=[],o=0,s=r[0],u=0;a>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),i.push(e.substring(a-=s,a+s)),!((u+=s+1)>t));)s=r[o=(o+1)%r.length];return i.reverse().join(n)}:P;return function(e){var n=Ft.exec(e),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",l=n[4]||"",c=n[5],f=+n[6],d=n[7],h=n[8],p=n[9],v=1,g="",m="",y=!1,b=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===s)&&(c=r="0",s="="),p){case"n":d=!0,p="g";break;case"%":v=100,m="%",p="f";break;case"p":v=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":b=!1;case"d":y=!0,h=0;break;case"s":v=-1,p="r"}"$"===l&&(g=a[0],m=a[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=Dt.get(p)||Lt;var x=c&&d;return function(e){var n=m;if(y&&e%1)return"";var a=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===u?"":u;if(v<0){var l=i.formatPrefix(e,h);e=l.scale(e),n=l.symbol+m}else e*=v;var k,w,S=(e=p(e,h)).lastIndexOf(".");if(S<0){var _=b?e.lastIndexOf("e"):-1;_<0?(k=e,w=""):(k=e.substring(0,_),w=e.substring(_))}else k=e.substring(0,S),w=t+e.substring(S+1);!c&&d&&(k=o(k,1/0));var C=g.length+k.length+w.length+(x?0:a.length),E=C<f?new Array(C=f-C+1).join(r):"";return x&&(k=o(E+k,E.length?f-w.length:1/0)),a+=g,e=k+w,("<"===s?a+e+E:">"===s?E+a+e:"^"===s?E.substring(0,C>>=1)+a+e+E.substring(C):a+(x?e:E+e))+n}}}i.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=i.round(e,Mt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ot[8+n/3]};var Ft=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Dt=i.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=i.round(e,Mt(e,t))).toFixed(Math.max(0,Math.min(20,Mt(e*(1+1e-15),t))))}});function Lt(e){return e+""}var zt=i.time={},jt=Date;function Bt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Bt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Wt.setUTCDate.apply(this._,arguments)},setDay:function(){Wt.setUTCDay.apply(this._,arguments)},setFullYear:function(){Wt.setUTCFullYear.apply(this._,arguments)},setHours:function(){Wt.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Wt.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Wt.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Wt.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Wt.setUTCSeconds.apply(this._,arguments)},setTime:function(){Wt.setTime.apply(this._,arguments)}};var Wt=Date.prototype;function Ut(e,t,n){function r(t){var n=e(t),r=i(n,1);return t-n<r-t?n:r}function a(n){return t(n=e(new jt(n-1)),1),n}function i(e,n){return t(e=new jt(+e),n),e}function o(e,r,i){var o=a(e),s=[];if(i>1)for(;o<r;)n(o)%i||s.push(new Date(+o)),t(o,1);else for(;o<r;)s.push(new Date(+o)),t(o,1);return s}e.floor=e,e.round=r,e.ceil=a,e.offset=i,e.range=o;var s=e.utc=Vt(e);return s.floor=s,s.round=Vt(r),s.ceil=Vt(a),s.offset=Vt(i),s.range=function(e,t,n){try{jt=Bt;var r=new Bt;return r._=e,o(r,t,n)}finally{jt=Date}},e}function Vt(e){return function(t,n){try{jt=Bt;var r=new Bt;return r._=t,e(r,n)._}finally{jt=Date}}}function Ht(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,s=e.shortDays,u=e.months,l=e.shortMonths;function c(e){var t=e.length;function n(n){for(var r,a,i,o=[],s=-1,u=0;++s<t;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(a=Gt[r=e.charAt(++s)])&&(r=e.charAt(++s)),(i=k[r])&&(r=i(n,null==a?"e"===r?" ":"0":a)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}return n.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(n,e,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&jt!==Bt,a=new(r?Bt:jt);return"j"in n?a.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),a.setFullYear(n.y,0,1),a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(a.getDay()+5)%7:n.w+7*n.U-(a.getDay()+6)%7)):a.setFullYear(n.y,n.m,n.d),a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?a._:a},n.toString=function(){return e},n}function f(e,t,n,r){for(var a,i,o,s=0,u=t.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(a=t.charCodeAt(s++))){if(o=t.charAt(s++),!(i=w[o in Gt?t.charAt(s++):o])||(r=i(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}c.utc=function(e){var t=c(e);function n(e){try{var n=new(jt=Bt);return n._=e,t(n)}finally{jt=Date}}return n.parse=function(e){try{jt=Bt;var n=t.parse(e);return n&&n._}finally{jt=Date}},n.toString=t.toString,n},c.multi=c.utc.multi=hn;var d=i.map(),h=Kt(o),p=$t(o),v=Kt(s),g=$t(s),m=Kt(u),y=$t(u),b=Kt(l),x=$t(l);a.forEach((function(e,t){d.set(e.toLowerCase(),t)}));var k={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:c(t),d:function(e,t){return Yt(e.getDate(),t,2)},e:function(e,t){return Yt(e.getDate(),t,2)},H:function(e,t){return Yt(e.getHours(),t,2)},I:function(e,t){return Yt(e.getHours()%12||12,t,2)},j:function(e,t){return Yt(1+zt.dayOfYear(e),t,3)},L:function(e,t){return Yt(e.getMilliseconds(),t,3)},m:function(e,t){return Yt(e.getMonth()+1,t,2)},M:function(e,t){return Yt(e.getMinutes(),t,2)},p:function(e){return a[+(e.getHours()>=12)]},S:function(e,t){return Yt(e.getSeconds(),t,2)},U:function(e,t){return Yt(zt.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Yt(zt.mondayOfYear(e),t,2)},x:c(n),X:c(r),y:function(e,t){return Yt(e.getFullYear()%100,t,2)},Y:function(e,t){return Yt(e.getFullYear()%1e4,t,4)},Z:fn,"%":function(){return"%"}},w={a:function(e,t,n){v.lastIndex=0;var r=v.exec(t.slice(n));return r?(e.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){h.lastIndex=0;var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){m.lastIndex=0;var r=m.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,t,n){return f(e,k.c.toString(),t,n)},d:an,e:an,H:sn,I:sn,j:on,L:cn,m:rn,M:un,p:function(e,t,n){var r=d.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)},S:ln,U:Qt,w:Zt,W:Jt,x:function(e,t,n){return f(e,k.x.toString(),t,n)},X:function(e,t,n){return f(e,k.X.toString(),t,n)},y:tn,Y:en,Z:nn,"%":dn};return c}zt.year=Ut((function(e){return(e=zt.day(e)).setMonth(0,1),e}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e){return e.getFullYear()})),zt.years=zt.year.range,zt.years.utc=zt.year.utc.range,zt.day=Ut((function(e){var t=new jt(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e){return e.getDate()-1})),zt.days=zt.day.range,zt.days.utc=zt.day.utc.range,zt.dayOfYear=function(e){var t=zt.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(e,t){t=7-t;var n=zt[e]=Ut((function(e){return(e=zt.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e}),(function(e,t){e.setDate(e.getDate()+7*Math.floor(t))}),(function(e){var n=zt.year(e).getDay();return Math.floor((zt.dayOfYear(e)+(n+t)%7)/7)-(n!==t)}));zt[e+"s"]=n.range,zt[e+"s"].utc=n.utc.range,zt[e+"OfYear"]=function(e){var n=zt.year(e).getDay();return Math.floor((zt.dayOfYear(e)+(n+t)%7)/7)}})),zt.week=zt.sunday,zt.weeks=zt.sunday.range,zt.weeks.utc=zt.sunday.utc.range,zt.weekOfYear=zt.sundayOfYear;var Gt={"-":"",_:" ",0:"0"},qt=/^\s*\d+/,Xt=/^%/;function Yt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Kt(e){return new RegExp("^(?:"+e.map(i.requote).join("|")+")","i")}function $t(e){for(var t=new C,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Zt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Qt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Jt(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function en(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function tn(e,t,n){qt.lastIndex=0;var r,a=qt.exec(t.slice(n,n+2));return a?(e.y=(r=+a[0])+(r>68?1900:2e3),n+a[0].length):-1}function nn(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function rn(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function an(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function on(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function sn(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function un(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ln(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function cn(e,t,n){qt.lastIndex=0;var r=qt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function fn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=w(t)/60|0,a=w(t)%60;return n+Yt(r,"0",2)+Yt(a,"0",2)}function dn(e,t,n){Xt.lastIndex=0;var r=Xt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function hn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}i.locale=function(e){return{numberFormat:Pt(e),timeFormat:Ht(e)}};var pn=i.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vn(){}i.format=pn.numberFormat,i.geo={},vn.prototype={s:0,t:0,add:function(e){mn(e,this.t,gn),mn(gn.s,this.s,this),this.s?this.t+=gn.t:this.s=gn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gn=new vn;function mn(e,t,n){var r=n.s=e+t,a=r-e,i=r-a;n.t=e-i+(t-a)}function yn(e,t){e&&xn.hasOwnProperty(e.type)&&xn[e.type](e,t)}i.geo.stream=function(e,t){e&&bn.hasOwnProperty(e.type)?bn[e.type](e,t):yn(e,t)};var bn={Feature:function(e,t){yn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,a=n.length;++r<a;)yn(n[r].geometry,t)}},xn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){kn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)kn(n[r],t,0)},Polygon:function(e,t){wn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,a=n.length;++r<a;)wn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,a=n.length;++r<a;)yn(n[r],t)}};function kn(e,t,n){var r,a=-1,i=e.length-n;for(t.lineStart();++a<i;)r=e[a],t.point(r[0],r[1],r[2]);t.lineEnd()}function wn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)kn(e[n],t,1);t.polygonEnd()}i.geo.area=function(e){return Sn=0,i.geo.stream(e,Dn),Sn};var Sn,_n,Cn,En,An,In,Tn,Rn,Nn,Mn,On,Pn,Fn=new vn,Dn={sphere:function(){Sn+=4*Re},point:z,lineStart:z,lineEnd:z,polygonStart:function(){Fn.reset(),Dn.lineStart=Ln},polygonEnd:function(){var e=2*Fn;Sn+=e<0?4*Re+e:e,Dn.lineStart=Dn.lineEnd=Dn.point=z}};function Ln(){var e,t,n,r,a;function i(e,t){t=t*Pe/2+Re/4;var i=(e*=Pe)-n,o=i>=0?1:-1,s=o*i,u=Math.cos(t),l=Math.sin(t),c=a*l,f=r*u+c*Math.cos(s),d=c*o*Math.sin(s);Fn.add(Math.atan2(d,f)),n=e,r=u,a=l}Dn.point=function(o,s){Dn.point=i,n=(e=o)*Pe,r=Math.cos(s=(t=s)*Pe/2+Re/4),a=Math.sin(s)},Dn.lineEnd=function(){i(e,t)}}function zn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function jn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Bn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Wn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Un(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Vn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Hn(e){return[Math.atan2(e[1],e[0]),je(e[2])]}function Gn(e,t){return w(e[0]-t[0])<Ie&&w(e[1]-t[1])<Ie}i.geo.bounds=function(){var e,t,n,r,a,o,s,u,l,c,f,d={point:h,lineStart:v,lineEnd:g,polygonStart:function(){d.point=m,d.lineStart=y,d.lineEnd=b,l=0,Dn.polygonStart()},polygonEnd:function(){Dn.polygonEnd(),d.point=h,d.lineStart=v,d.lineEnd=g,Fn<0?(e=-(n=180),t=-(r=90)):l>Ie?r=90:l<-Ie&&(t=-90),f[0]=e,f[1]=n}};function h(a,i){c.push(f=[e=a,n=a]),i<t&&(t=i),i>r&&(r=i)}function p(i,o){var s=zn([i*Pe,o*Pe]);if(u){var l=Bn(u,s),c=Bn([l[1],-l[0],0],l);Vn(c),c=Hn(c);var f=i-a,d=f>0?1:-1,p=c[0]*Fe*d,v=w(f)>180;if(v^(d*a<p&&p<d*i))(g=c[1]*Fe)>r&&(r=g);else if(v^(d*a<(p=(p+360)%360-180)&&p<d*i)){var g;(g=-c[1]*Fe)<t&&(t=g)}else o<t&&(t=o),o>r&&(r=o);v?i<a?x(e,i)>x(e,n)&&(n=i):x(i,n)>x(e,n)&&(e=i):n>=e?(i<e&&(e=i),i>n&&(n=i)):i>a?x(e,i)>x(e,n)&&(n=i):x(i,n)>x(e,n)&&(e=i)}else h(i,o);u=s,a=i}function v(){d.point=p}function g(){f[0]=e,f[1]=n,d.point=h,u=null}function m(e,t){if(u){var n=e-a;l+=w(n)>180?n+(n>0?360:-360):n}else o=e,s=t;Dn.point(e,t),p(e,t)}function y(){Dn.lineStart()}function b(){m(o,s),Dn.lineEnd(),w(l)>Ie&&(e=-(n=180)),f[0]=e,f[1]=n,u=null}function x(e,t){return(t-=e)<0?t+360:t}function k(e,t){return e[0]-t[0]}function S(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}return function(a){if(r=n=-(e=t=1/0),c=[],i.geo.stream(a,d),l=c.length){c.sort(k);for(var o=1,s=[v=c[0]];o<l;++o)S((h=c[o])[0],v)||S(h[1],v)?(x(v[0],h[1])>x(v[0],v[1])&&(v[1]=h[1]),x(h[0],v[1])>x(v[0],v[1])&&(v[0]=h[0])):s.push(v=h);for(var u,l,h,p=-1/0,v=(o=0,s[l=s.length-1]);o<=l;v=h,++o)h=s[o],(u=x(v[1],h[0]))>p&&(p=u,e=h[0],n=v[1])}return c=f=null,e===1/0||t===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,t],[n,r]]}}(),i.geo.centroid=function(e){_n=Cn=En=An=In=Tn=Rn=Nn=Mn=On=Pn=0,i.geo.stream(e,qn);var t=Mn,n=On,r=Pn,a=t*t+n*n+r*r;return a<Te&&(t=Tn,n=Rn,r=Nn,Cn<Ie&&(t=En,n=An,r=In),(a=t*t+n*n+r*r)<Te)?[NaN,NaN]:[Math.atan2(n,t)*Fe,je(r/Math.sqrt(a))*Fe]};var qn={sphere:z,point:Xn,lineStart:Kn,lineEnd:$n,polygonStart:function(){qn.lineStart=Zn},polygonEnd:function(){qn.lineStart=Kn}};function Xn(e,t){e*=Pe;var n=Math.cos(t*=Pe);Yn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Yn(e,t,n){++_n,En+=(e-En)/_n,An+=(t-An)/_n,In+=(n-In)/_n}function Kn(){var e,t,n;function r(r,a){r*=Pe;var i=Math.cos(a*=Pe),o=i*Math.cos(r),s=i*Math.sin(r),u=Math.sin(a),l=Math.atan2(Math.sqrt((l=t*u-n*s)*l+(l=n*o-e*u)*l+(l=e*s-t*o)*l),e*o+t*s+n*u);Cn+=l,Tn+=l*(e+(e=o)),Rn+=l*(t+(t=s)),Nn+=l*(n+(n=u)),Yn(e,t,n)}qn.point=function(a,i){a*=Pe;var o=Math.cos(i*=Pe);e=o*Math.cos(a),t=o*Math.sin(a),n=Math.sin(i),qn.point=r,Yn(e,t,n)}}function $n(){qn.point=Xn}function Zn(){var e,t,n,r,a;function i(e,t){e*=Pe;var i=Math.cos(t*=Pe),o=i*Math.cos(e),s=i*Math.sin(e),u=Math.sin(t),l=r*u-a*s,c=a*o-n*u,f=n*s-r*o,d=Math.sqrt(l*l+c*c+f*f),h=n*o+r*s+a*u,p=d&&-ze(h)/d,v=Math.atan2(d,h);Mn+=p*l,On+=p*c,Pn+=p*f,Cn+=v,Tn+=v*(n+(n=o)),Rn+=v*(r+(r=s)),Nn+=v*(a+(a=u)),Yn(n,r,a)}qn.point=function(o,s){e=o,t=s,qn.point=i,o*=Pe;var u=Math.cos(s*=Pe);n=u*Math.cos(o),r=u*Math.sin(o),a=Math.sin(s),Yn(n,r,a)},qn.lineEnd=function(){i(e,t),qn.lineEnd=$n,qn.point=Xn}}function Qn(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Jn(){return!0}function er(e,t,n,r,a){var i=[],o=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Gn(n,r)){a.lineStart();for(var s=0;s<t;++s)a.point((n=e[s])[0],n[1]);a.lineEnd()}else{var u=new nr(n,e,null,!0),l=new nr(n,null,u,!1);u.o=l,i.push(u),o.push(l),u=new nr(r,e,null,!1),l=new nr(r,null,u,!0),u.o=l,i.push(u),o.push(l)}}})),o.sort(t),tr(i),tr(o),i.length){for(var s=0,u=n,l=o.length;s<l;++s)o[s].e=u=!u;for(var c,f,d=i[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,a.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(s=0,l=c.length;s<l;++s)a.point((f=c[s])[0],f[1]);else r(h.x,h.n.x,1,a);h=h.n}else{if(p)for(s=(c=h.p.z).length-1;s>=0;--s)a.point((f=c[s])[0],f[1]);else r(h.x,h.p.x,-1,a);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);a.lineEnd()}}}function tr(e){if(t=e.length){for(var t,n,r=0,a=e[0];++r<t;)a.n=n=e[r],n.p=a,a=n;a.n=n=e[0],n.p=a}}function nr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function rr(e,t,n,r){return function(a,o){var s,u=t(o),l=a.invert(r[0],r[1]),c={point:f,lineStart:h,lineEnd:p,polygonStart:function(){c.point=x,c.lineStart=k,c.lineEnd=w,s=[],v=[]},polygonEnd:function(){c.point=f,c.lineStart=h,c.lineEnd=p,s=i.merge(s);var e=function(e,t){var n=e[0],r=e[1],a=[Math.sin(n),-Math.cos(n),0],i=0,o=0;Fn.reset();for(var s=0,u=t.length;s<u;++s){var l=t[s],c=l.length;if(c)for(var f=l[0],d=f[0],h=f[1]/2+Re/4,p=Math.sin(h),v=Math.cos(h),g=1;;){g===c&&(g=0);var m=(e=l[g])[0],y=e[1]/2+Re/4,b=Math.sin(y),x=Math.cos(y),k=m-d,w=k>=0?1:-1,S=w*k,_=S>Re,C=p*b;if(Fn.add(Math.atan2(C*w*Math.sin(S),v*x+C*Math.cos(S))),i+=_?k+w*Ne:k,_^d>=n^m>=n){var E=Bn(zn(f),zn(e));Vn(E);var A=Bn(a,E);Vn(A);var I=(_^k>=0?-1:1)*je(A[2]);(r>I||r===I&&(E[0]||E[1]))&&(o+=_^k>=0?1:-1)}if(!g++)break;d=m,p=b,v=x,f=e}}return(i<-Ie||i<Ie&&Fn<-Ie)^1&o}(l,v);s.length?(b||(o.polygonStart(),b=!0),er(s,or,e,n,o)):e&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),s=v=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(t,n){var r=a(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function d(e,t){var n=a(e,t);u.point(n[0],n[1])}function h(){c.point=d,u.lineStart()}function p(){c.point=f,u.lineEnd()}var v,g,m=ir(),y=t(m),b=!1;function x(e,t){g.push([e,t]);var n=a(e,t);y.point(n[0],n[1])}function k(){y.lineStart(),g=[]}function w(){x(g[0][0],g[0][1]),y.lineEnd();var e,t=y.clean(),n=m.buffer(),r=n.length;if(g.pop(),v.push(g),g=null,r)if(1&t){var a,i=-1;if((r=(e=n[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++i<r;)o.point((a=e[i])[0],a[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),s.push(n.filter(ar))}return c}}function ar(e){return e.length>1}function ir(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:z,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function or(e,t){return((e=e.x)[0]<0?e[1]-Oe-Ie:Oe-e[1])-((t=t.x)[0]<0?t[1]-Oe-Ie:Oe-t[1])}var sr=rr(Jn,(function(e){var t,n=NaN,r=NaN,a=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(i,o){var s=i>0?Re:-Re,u=w(i-n);w(u-Re)<Ie?(e.point(n,r=(r+o)/2>0?Oe:-Oe),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(i,r),t=0):a!==s&&u>=Re&&(w(n-a)<Ie&&(n-=a*Ie),w(i-s)<Ie&&(i-=s*Ie),r=function(e,t,n,r){var a,i,o=Math.sin(e-n);return w(o)>Ie?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(a=Math.cos(t))*Math.sin(e))/(a*i*o)):(t+r)/2}(n,r,i,o),e.point(a,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=i,r=o),a=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var a;if(null==e)a=n*Oe,r.point(-Re,a),r.point(0,a),r.point(Re,a),r.point(Re,0),r.point(Re,-a),r.point(0,-a),r.point(-Re,-a),r.point(-Re,0),r.point(-Re,a);else if(w(e[0]-t[0])>Ie){var i=e[0]<t[0]?Re:-Re;a=n*i/2,r.point(-i,a),r.point(0,a),r.point(i,a)}else r.point(t[0],t[1])}),[-Re,-Re/2]);function ur(e){var t=Math.cos(e),n=t>0,r=w(t)>Ie;return rr(a,(function(e){var t,s,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],v=a(f,d),g=n?v?0:o(f,d):v?o(f+(f<0?Re:-Re),d):0;if(!t&&(l=u=v)&&e.lineStart(),v!==u&&(h=i(t,p),(Gn(t,h)||Gn(p,h))&&(p[0]+=Ie,p[1]+=Ie,v=a(p[0],p[1]))),v!==u)c=0,v?(e.lineStart(),h=i(p,t),e.point(h[0],h[1])):(h=i(t,p),e.point(h[0],h[1]),e.lineEnd()),t=h;else if(r&&t&&n^v){var m;g&s||!(m=i(p,t,!0))||(c=0,n?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!v||t&&Gn(t,p)||e.point(p[0],p[1]),t=p,u=v,s=g},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),Gr(e,6*Pe),n?[0,-e]:[-Re,e-Re]);function a(e,n){return Math.cos(e)*Math.cos(n)>t}function i(e,n,r){var a=[1,0,0],i=Bn(zn(e),zn(n)),o=jn(i,i),s=i[0],u=o-s*s;if(!u)return!r&&e;var l=t*o/u,c=-t*s/u,f=Bn(a,i),d=Un(a,l);Wn(d,Un(i,c));var h=f,p=jn(d,h),v=jn(h,h),g=p*p-v*(jn(d,d)-1);if(!(g<0)){var m=Math.sqrt(g),y=Un(h,(-p-m)/v);if(Wn(y,d),y=Hn(y),!r)return y;var b,x=e[0],k=n[0],S=e[1],_=n[1];k<x&&(b=x,x=k,k=b);var C=k-x,E=w(C-Re)<Ie;if(!E&&_<S&&(b=S,S=_,_=b),E||C<Ie?E?S+_>0^y[1]<(w(y[0]-x)<Ie?S:_):S<=y[1]&&y[1]<=_:C>Re^(x<=y[0]&&y[0]<=k)){var A=Un(h,(-p+m)/v);return Wn(A,d),[y,Hn(A)]}}}function o(t,r){var a=n?e:Re-e,i=0;return t<-a?i|=1:t>a&&(i|=2),r<-a?i|=4:r>a&&(i|=8),i}}function lr(e,t,n,r){return function(a){var i,o=a.a,s=a.b,u=o.x,l=o.y,c=0,f=1,d=s.x-u,h=s.y-l;if(i=e-u,d||!(i>0)){if(i/=d,d<0){if(i<c)return;i<f&&(f=i)}else if(d>0){if(i>f)return;i>c&&(c=i)}if(i=n-u,d||!(i<0)){if(i/=d,d<0){if(i>f)return;i>c&&(c=i)}else if(d>0){if(i<c)return;i<f&&(f=i)}if(i=t-l,h||!(i>0)){if(i/=h,h<0){if(i<c)return;i<f&&(f=i)}else if(h>0){if(i>f)return;i>c&&(c=i)}if(i=r-l,h||!(i<0)){if(i/=h,h<0){if(i>f)return;i>c&&(c=i)}else if(h>0){if(i<c)return;i<f&&(f=i)}return c>0&&(a.a={x:u+c*d,y:l+c*h}),f<1&&(a.b={x:u+f*d,y:l+f*h}),a}}}}}}var cr=1e9;function fr(e,t,n,r){return function(u){var l,c,f,d,h,p,v,g,m,y,b,x=u,k=ir(),w=lr(e,t,n,r),S={point:E,lineStart:function(){S.point=A,c&&c.push(f=[]);y=!0,m=!1,v=g=NaN},lineEnd:function(){l&&(A(d,h),p&&m&&k.rejoin(),l.push(k.buffer()));S.point=E,m&&u.lineEnd()},polygonStart:function(){u=k,l=[],c=[],b=!0},polygonEnd:function(){u=x,l=i.merge(l);var t=function(e){for(var t=0,n=c.length,r=e[1],a=0;a<n;++a)for(var i,o=1,s=c[a],u=s.length,l=s[0];o<u;++o)i=s[o],l[1]<=r?i[1]>r&&Le(l,i,e)>0&&++t:i[1]<=r&&Le(l,i,e)<0&&--t,l=i;return 0!==t}([e,r]),n=b&&t,a=l.length;(n||a)&&(u.polygonStart(),n&&(u.lineStart(),_(null,null,1,u),u.lineEnd()),a&&er(l,o,t,_,u),u.polygonEnd()),l=c=f=null}};function _(i,o,u,l){var c=0,f=0;if(null==i||(c=a(i,u))!==(f=a(o,u))||s(i,o)<0^u>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+u+4)%4)!==f);else l.point(o[0],o[1])}function C(a,i){return e<=a&&a<=n&&t<=i&&i<=r}function E(e,t){C(e,t)&&u.point(e,t)}function A(e,t){var n=C(e=Math.max(-1e9,Math.min(cr,e)),t=Math.max(-1e9,Math.min(cr,t)));if(c&&f.push([e,t]),y)d=e,h=t,p=n,y=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&m)u.point(e,t);else{var r={a:{x:v,y:g},b:{x:e,y:t}};w(r)?(m||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),b=!1):n&&(u.lineStart(),u.point(e,t),b=!1)}v=e,g=t,m=n}return S};function a(r,a){return w(r[0]-e)<Ie?a>0?0:3:w(r[0]-n)<Ie?a>0?2:1:w(r[1]-t)<Ie?a>0?1:0:a>0?3:2}function o(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}}function dr(e){var t=0,n=Re/3,r=Lr(e),a=r(t,n);return a.parallels=function(e){return arguments.length?r(t=e[0]*Re/180,n=e[1]*Re/180):[t/Re*180,n/Re*180]},a}function hr(e,t){var n=Math.sin(e),r=(n+Math.sin(t))/2,a=1+n*(2*r-n),i=Math.sqrt(a)/r;function o(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),i-n*Math.cos(e)]}return o.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/r,je((a-(e*e+n*n)*r*r)/(2*r))]},o}i.geo.clipExtent=function(){var e,t,n,r,a,i,o={stream:function(e){return a&&(a.valid=!1),(a=i(e)).valid=!0,a},extent:function(s){return arguments.length?(i=fr(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),a&&(a.valid=!1,a=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(i.geo.conicEqualArea=function(){return dr(hr)}).raw=hr,i.geo.albers=function(){return i.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},i.geo.albersUsa=function(){var e,t,n,r,a=i.geo.albers(),o=i.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=i.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,n){e=[t,n]}};function l(a){var i=a[0],o=a[1];return e=null,t(i,o),e||(n(i,o),e)||r(i,o),e}return l.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(e)},l.stream=function(e){var t=a.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,a){t.point(e,a),n.point(e,a),r.point(e,a)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),s.precision(e),l):a.precision()},l.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),s.scale(e),l.translate(a.translate())):a.scale()},l.translate=function(e){if(!arguments.length)return a.translate();var i=a.scale(),c=+e[0],f=+e[1];return t=a.translate(e).clipExtent([[c-.455*i,f-.238*i],[c+.455*i,f+.238*i]]).stream(u).point,n=o.translate([c-.307*i,f+.201*i]).clipExtent([[c-.425*i+Ie,f+.12*i+Ie],[c-.214*i-Ie,f+.234*i-Ie]]).stream(u).point,r=s.translate([c-.205*i,f+.212*i]).clipExtent([[c-.214*i+Ie,f+.166*i+Ie],[c-.115*i-Ie,f+.234*i-Ie]]).stream(u).point,l},l.scale(1070)};var pr,vr,gr,mr,yr,br,xr={point:z,lineStart:z,lineEnd:z,polygonStart:function(){vr=0,xr.lineStart=kr},polygonEnd:function(){xr.lineStart=xr.lineEnd=xr.point=z,pr+=w(vr/2)}};function kr(){var e,t,n,r;function a(e,t){vr+=r*e-n*t,n=e,r=t}xr.point=function(i,o){xr.point=a,e=n=i,t=r=o},xr.lineEnd=function(){a(e,t)}}var wr={point:function(e,t){e<gr&&(gr=e);e>yr&&(yr=e);t<mr&&(mr=t);t>br&&(br=t)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z};function Sr(){var e=_r(4.5),t=[],n={point:r,lineStart:function(){n.point=a},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=_r(t),n},result:function(){if(t.length){var e=t.join("");return t=[],e}}};function r(n,r){t.push("M",n,",",r,e)}function a(e,r){t.push("M",e,",",r),n.point=i}function i(e,n){t.push("L",e,",",n)}function o(){n.point=r}function s(){t.push("Z")}return n}function _r(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}var Cr,Er={point:Ar,lineStart:Ir,lineEnd:Tr,polygonStart:function(){Er.lineStart=Rr},polygonEnd:function(){Er.point=Ar,Er.lineStart=Ir,Er.lineEnd=Tr}};function Ar(e,t){En+=e,An+=t,++In}function Ir(){var e,t;function n(n,r){var a=n-e,i=r-t,o=Math.sqrt(a*a+i*i);Tn+=o*(e+n)/2,Rn+=o*(t+r)/2,Nn+=o,Ar(e=n,t=r)}Er.point=function(r,a){Er.point=n,Ar(e=r,t=a)}}function Tr(){Er.point=Ar}function Rr(){var e,t,n,r;function a(e,t){var a=e-n,i=t-r,o=Math.sqrt(a*a+i*i);Tn+=o*(n+e)/2,Rn+=o*(r+t)/2,Nn+=o,Mn+=(o=r*e-n*t)*(n+e),On+=o*(r+t),Pn+=3*o,Ar(n=e,r=t)}Er.point=function(i,o){Er.point=a,Ar(e=n=i,t=r=o)},Er.lineEnd=function(){a(e,t)}}function Nr(e){var t=4.5,n={point:r,lineStart:function(){n.point=a},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=e,n},result:z};function r(n,r){e.moveTo(n+t,r),e.arc(n,r,t,0,Ne)}function a(t,r){e.moveTo(t,r),n.point=i}function i(t,n){e.lineTo(t,n)}function o(){n.point=r}function s(){e.closePath()}return n}function Mr(e){var t=.5,n=Math.cos(30*Pe),r=16;function a(e){return(r?o:i)(e)}function i(t){return Fr(t,(function(n,r){n=e(n,r),t.point(n[0],n[1])}))}function o(t){var n,a,i,o,u,l,c,f,d,h,p,v,g={point:m,lineStart:y,lineEnd:x,polygonStart:function(){t.polygonStart(),g.lineStart=k},polygonEnd:function(){t.polygonEnd(),g.lineStart=y}};function m(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){f=NaN,g.point=b,t.lineStart()}function b(n,a){var i=zn([n,a]),o=e(n,a);s(f,d,c,h,p,v,f=o[0],d=o[1],c=n,h=i[0],p=i[1],v=i[2],r,t),t.point(f,d)}function x(){g.point=m,t.lineEnd()}function k(){y(),g.point=w,g.lineEnd=S}function w(e,t){b(n=e,t),a=f,i=d,o=h,u=p,l=v,g.point=b}function S(){s(f,d,c,h,p,v,a,i,n,o,u,l,r,t),g.lineEnd=x,x()}return g}function s(r,a,i,o,u,l,c,f,d,h,p,v,g,m){var y=c-r,b=f-a,x=y*y+b*b;if(x>4*t&&g--){var k=o+h,S=u+p,_=l+v,C=Math.sqrt(k*k+S*S+_*_),E=Math.asin(_/=C),A=w(w(_)-1)<Ie||w(i-d)<Ie?(i+d)/2:Math.atan2(S,k),I=e(A,E),T=I[0],R=I[1],N=T-r,M=R-a,O=b*N-y*M;(O*O/x>t||w((y*N+b*M)/x-.5)>.3||o*h+u*p+l*v<n)&&(s(r,a,i,o,u,l,T,R,A,k/=C,S/=C,_,g,m),m.point(T,R),s(T,R,A,k,S,_,c,f,d,h,p,v,g,m))}}return a.precision=function(e){return arguments.length?(r=(t=e*e)>0&&16,a):Math.sqrt(t)},a}function Or(e){var t=Mr((function(t,n){return e([t*Fe,n*Fe])}));return function(e){return zr(t(e))}}function Pr(e){this.stream=e}function Fr(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function Dr(e){return Lr((function(){return e}))()}function Lr(e){var t,n,r,a,o,s,u=Mr((function(e,n){return[(e=t(e,n))[0]*l+a,o-e[1]*l]})),l=150,c=480,f=250,d=0,h=0,p=0,v=0,g=0,m=sr,y=P,b=null,x=null;function k(e){return[(e=r(e[0]*Pe,e[1]*Pe))[0]*l+a,o-e[1]*l]}function w(e){return(e=r.invert((e[0]-a)/l,(o-e[1])/l))&&[e[0]*Fe,e[1]*Fe]}function S(){r=Qn(n=Wr(p,v,g),t);var e=t(d,h);return a=c-e[0]*l,o=f+e[1]*l,_()}function _(){return s&&(s.valid=!1,s=null),k}return k.stream=function(e){return s&&(s.valid=!1),(s=zr(m(n,u(y(e))))).valid=!0,s},k.clipAngle=function(e){return arguments.length?(m=null==e?(b=e,sr):ur((b=+e)*Pe),_()):b},k.clipExtent=function(e){return arguments.length?(x=e,y=e?fr(e[0][0],e[0][1],e[1][0],e[1][1]):P,_()):x},k.scale=function(e){return arguments.length?(l=+e,S()):l},k.translate=function(e){return arguments.length?(c=+e[0],f=+e[1],S()):[c,f]},k.center=function(e){return arguments.length?(d=e[0]%360*Pe,h=e[1]%360*Pe,S()):[d*Fe,h*Fe]},k.rotate=function(e){return arguments.length?(p=e[0]%360*Pe,v=e[1]%360*Pe,g=e.length>2?e[2]%360*Pe:0,S()):[p*Fe,v*Fe,g*Fe]},i.rebind(k,u,"precision"),function(){return t=e.apply(this,arguments),k.invert=t.invert&&w,S()}}function zr(e){return Fr(e,(function(t,n){e.point(t*Pe,n*Pe)}))}function jr(e,t){return[e,t]}function Br(e,t){return[e>Re?e-Ne:e<-Re?e+Ne:e,t]}function Wr(e,t,n){return e?t||n?Qn(Vr(e),Hr(t,n)):Vr(e):t||n?Hr(t,n):Br}function Ur(e){return function(t,n){return[(t+=e)>Re?t-Ne:t<-Re?t+Ne:t,n]}}function Vr(e){var t=Ur(e);return t.invert=Ur(-e),t}function Hr(e,t){var n=Math.cos(e),r=Math.sin(e),a=Math.cos(t),i=Math.sin(t);function o(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*n+s*r;return[Math.atan2(u*a-c*i,s*n-l*r),je(c*a+u*i)]}return o.invert=function(e,t){var o=Math.cos(t),s=Math.cos(e)*o,u=Math.sin(e)*o,l=Math.sin(t),c=l*a-u*i;return[Math.atan2(u*a+l*i,s*n+c*r),je(c*n-s*r)]},o}function Gr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(a,i,o,s){var u=o*t;null!=a?(a=qr(n,a),i=qr(n,i),(o>0?a<i:a>i)&&(a+=o*Ne)):(a=e+o*Ne,i=e-.5*u);for(var l,c=a;o>0?c>i:c<i;c-=u)s.point((l=Hn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function qr(e,t){var n=zn(t);n[0]-=e,Vn(n);var r=ze(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ie)%(2*Math.PI)}function Xr(e,t,n){var r=i.range(e,t-Ie,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Yr(e,t,n){var r=i.range(e,t-Ie,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Kr(e){return e.source}function $r(e){return e.target}i.geo.path=function(){var e,t,n,r,a,o=4.5;function s(e){return e&&("function"===typeof o&&r.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=n(r)),i.geo.stream(e,a)),r.result()}function u(){return a=null,s}return s.area=function(e){return pr=0,i.geo.stream(e,n(xr)),pr},s.centroid=function(e){return En=An=In=Tn=Rn=Nn=Mn=On=Pn=0,i.geo.stream(e,n(Er)),Pn?[Mn/Pn,On/Pn]:Nn?[Tn/Nn,Rn/Nn]:In?[En/In,An/In]:[NaN,NaN]},s.bounds=function(e){return yr=br=-(gr=mr=1/0),i.geo.stream(e,n(wr)),[[gr,mr],[yr,br]]},s.projection=function(t){return arguments.length?(n=(e=t)?t.stream||Or(t):P,u()):e},s.context=function(e){return arguments.length?(r=null==(t=e)?new Sr:new Nr(e),"function"!==typeof o&&r.pointRadius(o),u()):t},s.pointRadius=function(e){return arguments.length?(o="function"===typeof e?e:(r.pointRadius(+e),+e),s):o},s.projection(i.geo.albersUsa()).context(null)},i.geo.transform=function(e){return{stream:function(t){var n=new Pr(t);for(var r in e)n[r]=e[r];return n}}},Pr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},i.geo.projection=Dr,i.geo.projectionMutator=Lr,(i.geo.equirectangular=function(){return Dr(jr)}).raw=jr.invert=jr,i.geo.rotation=function(e){function t(t){return(t=e(t[0]*Pe,t[1]*Pe))[0]*=Fe,t[1]*=Fe,t}return e=Wr(e[0]%360*Pe,e[1]*Pe,e.length>2?e[2]*Pe:0),t.invert=function(t){return(t=e.invert(t[0]*Pe,t[1]*Pe))[0]*=Fe,t[1]*=Fe,t},t},Br.invert=jr,i.geo.circle=function(){var e,t,n=[0,0],r=6;function a(){var e="function"===typeof n?n.apply(this,arguments):n,r=Wr(-e[0]*Pe,-e[1]*Pe,0).invert,a=[];return t(null,null,1,{point:function(e,t){a.push(e=r(e,t)),e[0]*=Fe,e[1]*=Fe}}),{type:"Polygon",coordinates:[a]}}return a.origin=function(e){return arguments.length?(n=e,a):n},a.angle=function(n){return arguments.length?(t=Gr((e=+n)*Pe,r*Pe),a):e},a.precision=function(n){return arguments.length?(t=Gr(e*Pe,(r=+n)*Pe),a):r},a.angle(90)},i.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Pe,a=e[1]*Pe,i=t[1]*Pe,o=Math.sin(r),s=Math.cos(r),u=Math.sin(a),l=Math.cos(a),c=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},i.geo.graticule=function(){var e,t,n,r,a,o,s,u,l,c,f,d,h=10,p=h,v=90,g=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return i.range(Math.ceil(r/v)*v,n,v).map(f).concat(i.range(Math.ceil(u/g)*g,s,g).map(d)).concat(i.range(Math.ceil(t/h)*h,e,h).filter((function(e){return w(e%v)>Ie})).map(l)).concat(i.range(Math.ceil(o/p)*p,a,p).filter((function(e){return w(e%g)>Ie})).map(c))}return y.lines=function(){return b().map((function(e){return{type:"LineString",coordinates:e}}))},y.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(d(s).slice(1),f(n).reverse().slice(1),d(u).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.majorExtent(e).minorExtent(e):y.minorExtent()},y.majorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],s=+e[1][1],r>n&&(e=r,r=n,n=e),u>s&&(e=u,u=s,s=e),y.precision(m)):[[r,u],[n,s]]},y.minorExtent=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],a=+n[1][1],t>e&&(n=t,t=e,e=n),o>a&&(n=o,o=a,a=n),y.precision(m)):[[t,o],[e,a]]},y.step=function(e){return arguments.length?y.majorStep(e).minorStep(e):y.minorStep()},y.majorStep=function(e){return arguments.length?(v=+e[0],g=+e[1],y):[v,g]},y.minorStep=function(e){return arguments.length?(h=+e[0],p=+e[1],y):[h,p]},y.precision=function(i){return arguments.length?(m=+i,l=Xr(o,a,90),c=Yr(t,e,m),f=Xr(u,s,90),d=Yr(r,n,m),y):m},y.majorExtent([[-180,-90+Ie],[180,90-Ie]]).minorExtent([[-180,-80-Ie],[180,80+Ie]])},i.geo.greatArc=function(){var e,t,n=Kr,r=$r;function a(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),t||r.apply(this,arguments)]}}return a.distance=function(){return i.geo.distance(e||n.apply(this,arguments),t||r.apply(this,arguments))},a.source=function(t){return arguments.length?(n=t,e="function"===typeof t?null:t,a):n},a.target=function(e){return arguments.length?(r=e,t="function"===typeof e?null:e,a):r},a.precision=function(){return arguments.length?a:0},a},i.geo.interpolate=function(e,t){return function(e,t,n,r){var a=Math.cos(t),i=Math.sin(t),o=Math.cos(r),s=Math.sin(r),u=a*Math.cos(e),l=a*Math.sin(e),c=o*Math.cos(n),f=o*Math.sin(n),d=2*Math.asin(Math.sqrt(We(r-t)+a*o*We(n-e))),h=1/Math.sin(d),p=d?function(e){var t=Math.sin(e*=d)*h,n=Math.sin(d-e)*h,r=n*u+t*c,a=n*l+t*f,o=n*i+t*s;return[Math.atan2(a,r)*Fe,Math.atan2(o,Math.sqrt(r*r+a*a))*Fe]}:function(){return[e*Fe,t*Fe]};return p.distance=d,p}(e[0]*Pe,e[1]*Pe,t[0]*Pe,t[1]*Pe)},i.geo.length=function(e){return Cr=0,i.geo.stream(e,Zr),Cr};var Zr={sphere:z,point:z,lineStart:function(){var e,t,n;function r(r,a){var i=Math.sin(a*=Pe),o=Math.cos(a),s=w((r*=Pe)-e),u=Math.cos(s);Cr+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*i-t*o*u)*s),t*i+n*o*u),e=r,t=i,n=o}Zr.point=function(a,i){e=a*Pe,t=Math.sin(i*=Pe),n=Math.cos(i),Zr.point=r},Zr.lineEnd=function(){Zr.point=Zr.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z};function Qr(e,t){function n(t,n){var r=Math.cos(t),a=Math.cos(n),i=e(r*a);return[i*a*Math.sin(t),i*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),a=t(r),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(e*i,r*o),Math.asin(r&&n*i/r)]},n}var Jr=Qr((function(e){return Math.sqrt(2/(1+e))}),(function(e){return 2*Math.asin(e/2)}));(i.geo.azimuthalEqualArea=function(){return Dr(Jr)}).raw=Jr;var ea=Qr((function(e){var t=Math.acos(e);return t&&t/Math.sin(t)}),P);function ta(e,t){var n=Math.cos(e),r=function(e){return Math.tan(Re/4+e/2)},a=e===t?Math.sin(e):Math.log(n/Math.cos(t))/Math.log(r(t)/r(e)),i=n*Math.pow(r(e),a)/a;if(!a)return aa;function o(e,t){i>0?t<-Oe+Ie&&(t=-Oe+Ie):t>Oe-Ie&&(t=Oe-Ie);var n=i/Math.pow(r(t),a);return[n*Math.sin(a*e),i-n*Math.cos(a*e)]}return o.invert=function(e,t){var n=i-t,r=De(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(i/r,1/a))-Oe]},o}function na(e,t){var n=Math.cos(e),r=e===t?Math.sin(e):(n-Math.cos(t))/(t-e),a=n/r+e;if(w(r)<Ie)return jr;function i(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}return i.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-De(r)*Math.sqrt(e*e+n*n)]},i}(i.geo.azimuthalEquidistant=function(){return Dr(ea)}).raw=ea,(i.geo.conicConformal=function(){return dr(ta)}).raw=ta,(i.geo.conicEquidistant=function(){return dr(na)}).raw=na;var ra=Qr((function(e){return 1/e}),Math.atan);function aa(e,t){return[e,Math.log(Math.tan(Re/4+t/2))]}function ia(e){var t,n=Dr(e),r=n.scale,a=n.translate,i=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=a.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=i.apply(n,arguments);if(o===n){if(t=null==e){var s=Re*r(),u=a();i([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}(i.geo.gnomonic=function(){return Dr(ra)}).raw=ra,aa.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Oe]},(i.geo.mercator=function(){return ia(aa)}).raw=aa;var oa=Qr((function(){return 1}),Math.asin);(i.geo.orthographic=function(){return Dr(oa)}).raw=oa;var sa=Qr((function(e){return 1/(1+e)}),(function(e){return 2*Math.atan(e)}));function ua(e,t){return[Math.log(Math.tan(Re/4+t/2)),-e]}function la(e){return e[0]}function ca(e){return e[1]}function fa(e){for(var t=e.length,n=[0,1],r=2,a=2;a<t;a++){for(;r>1&&Le(e[n[r-2]],e[n[r-1]],e[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function da(e,t){return e[0]-t[0]||e[1]-t[1]}(i.geo.stereographic=function(){return Dr(sa)}).raw=sa,ua.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Oe]},(i.geo.transverseMercator=function(){var e=ia(ua),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90])}).raw=ua,i.geom={},i.geom.hull=function(e){var t=la,n=ca;if(arguments.length)return r(e);function r(e){if(e.length<3)return[];var r,a=xt(t),i=xt(n),o=e.length,s=[],u=[];for(r=0;r<o;r++)s.push([+a.call(this,e[r],r),+i.call(this,e[r],r),r]);for(s.sort(da),r=0;r<o;r++)u.push([s[r][0],-s[r][1]]);var l=fa(s),c=fa(u),f=c[0]===l[0],d=c[c.length-1]===l[l.length-1],h=[];for(r=l.length-1;r>=0;--r)h.push(e[s[l[r]][2]]);for(r=+f;r<c.length-d;++r)h.push(e[s[c[r]][2]]);return h}return r.x=function(e){return arguments.length?(t=e,r):t},r.y=function(e){return arguments.length?(n=e,r):n},r},i.geom.polygon=function(e){return G(e,ha),e};var ha=i.geom.polygon.prototype=[];function pa(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function va(e,t,n,r){var a=e[0],i=n[0],o=t[0]-a,s=r[0]-i,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,d=(s*(u-l)-f*(a-i))/(f*o-s*c);return[a+d*o,u+d*c]}function ga(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}ha.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],a=0;++t<n;)e=r,r=this[t],a+=e[1]*r[0]-e[0]*r[1];return.5*a},ha.centroid=function(e){var t,n,r=-1,a=this.length,i=0,o=0,s=this[a-1];for(arguments.length||(e=-1/(6*this.area()));++r<a;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],i+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[i*e,o*e]},ha.clip=function(e){for(var t,n,r,a,i,o,s=ga(e),u=-1,l=this.length-ga(this),c=this[l-1];++u<l;){for(t=e.slice(),e.length=0,a=this[u],i=t[(r=t.length-s)-1],n=-1;++n<r;)pa(o=t[n],c,a)?(pa(i,c,a)||e.push(va(i,o,c,a)),e.push(o)):pa(i,c,a)&&e.push(va(i,o,c,a)),i=o;s&&e.push(e[0]),c=a}return e};var ma,ya,ba,xa,ka,wa=[],Sa=[];function _a(){Va(this),this.edge=this.site=this.circle=null}function Ca(e){var t=wa.pop()||new _a;return t.site=e,t}function Ea(e){Fa(e),ba.remove(e),wa.push(e),Va(e)}function Aa(e){var t=e.circle,n=t.x,r=t.cy,a={x:n,y:r},i=e.P,o=e.N,s=[e];Ea(e);for(var u=i;u.circle&&w(n-u.circle.x)<Ie&&w(r-u.circle.cy)<Ie;)i=u.P,s.unshift(u),Ea(u),u=i;s.unshift(u),Fa(u);for(var l=o;l.circle&&w(n-l.circle.x)<Ie&&w(r-l.circle.cy)<Ie;)o=l.N,s.push(l),Ea(l),l=o;s.push(l),Fa(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],Ba(l.edge,u.site,l.site,a);u=s[0],(l=s[f-1]).edge=za(u.site,l.site,null,a),Pa(u),Pa(l)}function Ia(e){for(var t,n,r,a,i=e.x,o=e.y,s=ba._;s;)if((r=Ta(s,o)-i)>Ie)s=s.L;else{if(!((a=i-Ra(s,o))>Ie)){r>-Ie?(t=s.P,n=s):a>-Ie?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=Ca(e);if(ba.insert(t,u),t||n){if(t===n)return Fa(t),n=Ca(t.site),ba.insert(u,n),u.edge=n.edge=za(t.site,u.site),Pa(t),void Pa(n);if(n){Fa(t),Fa(n);var l=t.site,c=l.x,f=l.y,d=e.x-c,h=e.y-f,p=n.site,v=p.x-c,g=p.y-f,m=2*(d*g-h*v),y=d*d+h*h,b=v*v+g*g,x={x:(g*y-h*b)/m+c,y:(d*b-v*y)/m+f};Ba(n.edge,l,p,x),u.edge=za(l,e,null,x),n.edge=za(e,p,null,x),Pa(t),Pa(n)}else u.edge=za(t.site,u.site)}}function Ta(e,t){var n=e.site,r=n.x,a=n.y,i=a-t;if(!i)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site).x,u=n.y,l=u-t;if(!l)return s;var c=s-r,f=1/i-1/l,d=c/l;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+a-i/2)))/f+r:(r+s)/2}function Ra(e,t){var n=e.N;if(n)return Ta(n,t);var r=e.site;return r.y===t?r.x:1/0}function Na(e){this.site=e,this.edges=[]}function Ma(e,t){return t.angle-e.angle}function Oa(){Va(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pa(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,a=e.site,i=n.site;if(r!==i){var o=a.x,s=a.y,u=r.x-o,l=r.y-s,c=i.x-o,f=2*(u*(g=i.y-s)-l*c);if(!(f>=-Te)){var d=u*u+l*l,h=c*c+g*g,p=(g*d-l*h)/f,v=(u*h-c*d)/f,g=v+s,m=Sa.pop()||new Oa;m.arc=e,m.site=a,m.x=p+o,m.y=g+Math.sqrt(p*p+v*v),m.cy=g,e.circle=m;for(var y=null,b=ka._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}ka.insert(y,m),y||(xa=m)}}}}function Fa(e){var t=e.circle;t&&(t.P||(xa=t.N),ka.remove(t),Sa.push(t),Va(t),e.circle=null)}function Da(e,t){var n=e.b;if(n)return!0;var r,a,i=e.a,o=t[0][0],s=t[1][0],u=t[0][1],l=t[1][1],c=e.l,f=e.r,d=c.x,h=c.y,p=f.x,v=f.y,g=(d+p)/2,m=(h+v)/2;if(v===h){if(g<o||g>=s)return;if(d>p){if(i){if(i.y>=l)return}else i={x:g,y:u};n={x:g,y:l}}else{if(i){if(i.y<u)return}else i={x:g,y:l};n={x:g,y:u}}}else if(a=m-(r=(d-p)/(v-h))*g,r<-1||r>1)if(d>p){if(i){if(i.y>=l)return}else i={x:(u-a)/r,y:u};n={x:(l-a)/r,y:l}}else{if(i){if(i.y<u)return}else i={x:(l-a)/r,y:l};n={x:(u-a)/r,y:u}}else if(h<v){if(i){if(i.x>=s)return}else i={x:o,y:r*o+a};n={x:s,y:r*s+a}}else{if(i){if(i.x<o)return}else i={x:s,y:r*s+a};n={x:o,y:r*o+a}}return e.a=i,e.b=n,!0}function La(e,t){this.l=e,this.r=t,this.a=this.b=null}function za(e,t,n,r){var a=new La(e,t);return ma.push(a),n&&Ba(a,e,t,n),r&&Ba(a,t,e,r),ya[e.i].edges.push(new Wa(a,e,t)),ya[t.i].edges.push(new Wa(a,t,e)),a}function ja(e,t,n){var r=new La(e,null);return r.a=t,r.b=n,ma.push(r),r}function Ba(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Wa(e,t,n){var r=e.a,a=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function Ua(){this._=null}function Va(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Ha(e,t){var n=t,r=t.R,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ga(e,t){var n=t,r=t.L,a=n.U;a?a.L===n?a.L=r:a.R=r:e._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function qa(e){for(;e.L;)e=e.L;return e}function Xa(e,t){var n,r,a,i=e.sort(Ya).pop();for(ma=[],ya=new Array(e.length),ba=new Ua,ka=new Ua;;)if(a=xa,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===n&&i.y===r||(ya[i.i]=new Na(i),Ia(i),n=i.x,r=i.y),i=e.pop();else{if(!a)break;Aa(a.arc)}t&&(function(e){for(var t,n=ma,r=lr(e[0][0],e[0][1],e[1][0],e[1][1]),a=n.length;a--;)(!Da(t=n[a],e)||!r(t)||w(t.a.x-t.b.x)<Ie&&w(t.a.y-t.b.y)<Ie)&&(t.a=t.b=null,n.splice(a,1))}(t),function(e){for(var t,n,r,a,i,o,s,u,l,c,f=e[0][0],d=e[1][0],h=e[0][1],p=e[1][1],v=ya,g=v.length;g--;)if((i=v[g])&&i.prepare())for(u=(s=i.edges).length,o=0;o<u;)r=(c=s[o].end()).x,a=c.y,t=(l=s[++o%u].start()).x,n=l.y,(w(r-t)>Ie||w(a-n)>Ie)&&(s.splice(o,0,new Wa(ja(i.site,c,w(r-f)<Ie&&p-a>Ie?{x:f,y:w(t-f)<Ie?n:p}:w(a-p)<Ie&&d-r>Ie?{x:w(n-p)<Ie?t:d,y:p}:w(r-d)<Ie&&a-h>Ie?{x:d,y:w(t-d)<Ie?n:h}:w(a-h)<Ie&&r-f>Ie?{x:w(n-h)<Ie?t:f,y:h}:null),i.site,null)),++u)}(t));var o={cells:ya,edges:ma};return ba=ka=ma=ya=null,o}function Ya(e,t){return t.y-e.y||t.x-e.x}Na.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Ma),t.length},Wa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ua.prototype={insert:function(e,t){var n,r,a;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=qa(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(a=r.R)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.R&&(Ha(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ga(this,r)):(a=r.L)&&a.C?(n.C=a.C=!1,r.C=!0,e=r):(e===n.L&&(Ga(this,n),n=(e=n).U),n.C=!1,r.C=!0,Ha(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,a=e.U,i=e.L,o=e.R;if(n=i?o?qa(o):i:o,a?a.L===e?a.L=n:a.R=n:this._=n,i&&o?(r=n.C,n.C=e.C,n.L=i,i.U=n,n!==o?(a=n.U,n.U=e.U,e=n.R,a.L=e,n.R=o,o.U=n):(n.U=a,a=n,e=n.R)):(r=e.C,e=n),e&&(e.U=a),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===a.L){if((t=a.R).C&&(t.C=!1,a.C=!0,Ha(this,a),t=a.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Ga(this,t),t=a.R),t.C=a.C,a.C=t.R.C=!1,Ha(this,a),e=this._;break}}else if((t=a.L).C&&(t.C=!1,a.C=!0,Ga(this,a),t=a.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Ha(this,t),t=a.L),t.C=a.C,a.C=t.L.C=!1,Ga(this,a),e=this._;break}t.C=!0,e=a,a=a.U}while(!e.C);e&&(e.C=!1)}}},i.geom.voronoi=function(e){var t=la,n=ca,r=t,a=n,i=Ka;if(e)return o(e);function o(e){var t=new Array(e.length),n=i[0][0],r=i[0][1],a=i[1][0],o=i[1][1];return Xa(s(e),i).cells.forEach((function(i,s){var u=i.edges,l=i.site;(t[s]=u.length?u.map((function(e){var t=e.start();return[t.x,t.y]})):l.x>=n&&l.x<=a&&l.y>=r&&l.y<=o?[[n,o],[a,o],[a,r],[n,r]]:[]).point=e[s]})),t}function s(e){return e.map((function(e,t){return{x:Math.round(r(e,t)/Ie)*Ie,y:Math.round(a(e,t)/Ie)*Ie,i:t}}))}return o.links=function(e){return Xa(s(e)).edges.filter((function(e){return e.l&&e.r})).map((function(t){return{source:e[t.l.i],target:e[t.r.i]}}))},o.triangles=function(e){var t=[];return Xa(s(e)).cells.forEach((function(n,r){for(var a,i,o,s,u=n.site,l=n.edges.sort(Ma),c=-1,f=l.length,d=l[f-1].edge,h=d.l===u?d.r:d.l;++c<f;)d,a=h,h=(d=l[c].edge).l===u?d.r:d.l,r<a.i&&r<h.i&&(o=a,s=h,((i=u).x-s.x)*(o.y-i.y)-(i.x-o.x)*(s.y-i.y)<0)&&t.push([e[r],e[a.i],e[h.i]])})),t},o.x=function(e){return arguments.length?(r=xt(t=e),o):t},o.y=function(e){return arguments.length?(a=xt(n=e),o):n},o.clipExtent=function(e){return arguments.length?(i=null==e?Ka:e,o):i===Ka?null:i},o.size=function(e){return arguments.length?o.clipExtent(e&&[[0,0],e]):i===Ka?null:i&&i[1]},o};var Ka=[[-1e6,-1e6],[1e6,1e6]];function $a(e){return e.x}function Za(e){return e.y}function Qa(e,t,n,r,a,i){if(!e(t,n,r,a,i)){var o=.5*(n+a),s=.5*(r+i),u=t.nodes;u[0]&&Qa(e,u[0],n,r,o,s),u[1]&&Qa(e,u[1],o,r,a,s),u[2]&&Qa(e,u[2],n,s,o,i),u[3]&&Qa(e,u[3],o,s,a,i)}}function Ja(e,t,n,r,a,i,o){var s,u=1/0;return function e(l,c,f,d,h){if(!(c>i||f>o||d<r||h<a)){if(p=l.point){var p,v=t-l.x,g=n-l.y,m=v*v+g*g;if(m<u){var y=Math.sqrt(u=m);r=t-y,a=n-y,i=t+y,o=n+y,s=p}}for(var b=l.nodes,x=.5*(c+d),k=.5*(f+h),w=(n>=k)<<1|t>=x,S=w+4;w<S;++w)if(l=b[3&w])switch(3&w){case 0:e(l,c,f,x,k);break;case 1:e(l,x,f,d,k);break;case 2:e(l,c,k,x,h);break;case 3:e(l,x,k,d,h)}}}(e,r,a,i,o),s}function ei(e,t){e=i.rgb(e),t=i.rgb(t);var n=e.r,r=e.g,a=e.b,o=t.r-n,s=t.g-r,u=t.b-a;return function(e){return"#"+ht(Math.round(n+o*e))+ht(Math.round(r+s*e))+ht(Math.round(a+u*e))}}function ti(e,t){var n,r={},a={};for(n in e)n in t?r[n]=oi(e[n],t[n]):a[n]=e[n];for(n in t)n in e||(a[n]=t[n]);return function(e){for(n in r)a[n]=r[n](e);return a}}function ni(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ri(e,t){var n,r,a,i=ai.lastIndex=ii.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=ai.exec(e))&&(r=ii.exec(t));)(a=r.index)>i&&(a=t.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:ni(n,r)})),i=ii.lastIndex;return i<t.length&&(a=t.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}i.geom.delaunay=function(e){return i.geom.voronoi().triangles(e)},i.geom.quadtree=function(e,t,n,r,a){var i,o=la,s=ca;if(i=arguments.length)return o=$a,s=Za,3===i&&(a=n,r=t,n=t=0),u(e);function u(e){var u,l,c,f,d,h,p,v,g,m=xt(o),y=xt(s);if(null!=t)h=t,p=n,v=r,g=a;else if(v=g=-(h=p=1/0),l=[],c=[],d=e.length,i)for(f=0;f<d;++f)(u=e[f]).x<h&&(h=u.x),u.y<p&&(p=u.y),u.x>v&&(v=u.x),u.y>g&&(g=u.y),l.push(u.x),c.push(u.y);else for(f=0;f<d;++f){var b=+m(u=e[f],f),x=+y(u,f);b<h&&(h=b),x<p&&(p=x),b>v&&(v=b),x>g&&(g=x),l.push(b),c.push(x)}var k=v-h,S=g-p;function _(e,t,n,r,a,i,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,l=e.y;if(null!=u)if(w(u-n)+w(l-r)<.01)C(e,t,n,r,a,i,o,s);else{var c=e.point;e.x=e.y=e.point=null,C(e,c,u,l,a,i,o,s),C(e,t,n,r,a,i,o,s)}else e.x=n,e.y=r,e.point=t}else C(e,t,n,r,a,i,o,s)}function C(e,t,n,r,a,i,o,s){var u=.5*(a+o),l=.5*(i+s),c=n>=u,f=r>=l,d=f<<1|c;e.leaf=!1,c?a=u:o=u,f?i=l:s=l,_(e=e.nodes[d]||(e.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),t,n,r,a,i,o,s)}k>S?g=p+k:v=h+S;var E={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(e){_(E,e,+m(e,++f),+y(e,f),h,p,v,g)},visit:function(e){Qa(e,E,h,p,v,g)},find:function(e){return Ja(E,e[0],e[1],h,p,v,g)}};if(f=-1,null==t){for(;++f<d;)_(E,e[f],l[f],c[f],h,p,v,g);--f}else e.forEach(E.add);return l=c=e=u=null,E}return u.x=function(e){return arguments.length?(o=e,u):o},u.y=function(e){return arguments.length?(s=e,u):s},u.extent=function(e){return arguments.length?(null==e?t=n=r=a=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],a=+e[1][1]),u):null==t?null:[[t,n],[r,a]]},u.size=function(e){return arguments.length?(null==e?t=n=r=a=null:(t=n=0,r=+e[0],a=+e[1]),u):null==t?null:[r-t,a-n]},u},i.interpolateRgb=ei,i.interpolateObject=ti,i.interpolateNumber=ni,i.interpolateString=ri;var ai=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ii=new RegExp(ai.source,"g");function oi(e,t){for(var n,r=i.interpolators.length;--r>=0&&!(n=i.interpolators[r](e,t)););return n}function si(e,t){var n,r=[],a=[],i=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(oi(e[n],t[n]));for(;n<i;++n)a[n]=e[n];for(;n<o;++n)a[n]=t[n];return function(e){for(n=0;n<s;++n)a[n]=r[n](e);return a}}i.interpolate=oi,i.interpolators=[function(e,t){var n=typeof t;return("string"===n?bt.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?ei:ri:t instanceof qe?ei:Array.isArray(t)?si:"object"===n&&isNaN(t)?ti:ni)(e,t)}],i.interpolateArray=si;var ui=function(){return P},li=i.map({linear:ui,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return pi},cubic:function(){return vi},sin:function(){return mi},exp:function(){return yi},circle:function(){return bi},elastic:function(e,t){var n;arguments.length<2&&(t=.45);arguments.length?n=t/Ne*Math.asin(1/e):(e=1,n=t/4);return function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Ne/t)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return xi}}),ci=i.map({in:P,out:di,"in-out":hi,"out-in":function(e){return hi(di(e))}});function fi(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function di(e){return function(t){return 1-e(1-t)}}function hi(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function pi(e){return e*e}function vi(e){return e*e*e}function gi(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function mi(e){return 1-Math.cos(e*Oe)}function yi(e){return Math.pow(2,10*(e-1))}function bi(e){return 1-Math.sqrt(1-e*e)}function xi(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function ki(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function wi(e){var t,n,r,a=[e.a,e.b],i=[e.c,e.d],o=_i(a),s=Si(a,i),u=_i(((t=i)[0]+=(r=-s)*(n=a)[0],t[1]+=r*n[1],t))||0;a[0]*i[1]<i[0]*a[1]&&(a[0]*=-1,a[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(a[1],a[0]):Math.atan2(-i[0],i[1]))*Fe,this.translate=[e.e,e.f],this.scale=[o,u],this.skew=u?Math.atan2(s,u)*Fe:0}function Si(e,t){return e[0]*t[0]+e[1]*t[1]}function _i(e){var t=Math.sqrt(Si(e,e));return t&&(e[0]/=t,e[1]/=t),t}i.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=li.get(n)||ui,fi((r=ci.get(r)||P)(n.apply(null,o.call(arguments,1))))},i.interpolateHcl=function(e,t){e=i.hcl(e),t=i.hcl(t);var n=e.h,r=e.c,a=e.l,o=t.h-n,s=t.c-r,u=t.l-a;isNaN(s)&&(s=0,r=isNaN(r)?t.c:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Qe(n+o*e,r+s*e,a+u*e)+""}},i.interpolateHsl=function(e,t){e=i.hsl(e),t=i.hsl(t);var n=e.h,r=e.s,a=e.l,o=t.h-n,s=t.s-r,u=t.l-a;isNaN(s)&&(s=0,r=isNaN(r)?t.s:r);isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360);return function(e){return Ke(n+o*e,r+s*e,a+u*e)+""}},i.interpolateLab=function(e,t){e=i.lab(e),t=i.lab(t);var n=e.l,r=e.a,a=e.b,o=t.l-n,s=t.a-r,u=t.b-a;return function(e){return at(n+o*e,r+s*e,a+u*e)+""}},i.interpolateRound=ki,i.transform=function(e){var t=u.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new wi(n?n.matrix:Ci)})(e)},wi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ci={a:1,b:0,c:0,d:1,e:0,f:0};function Ei(e){return e.length?e.pop()+",":""}function Ai(e,t){var n=[],r=[];return e=i.transform(e),t=i.transform(t),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push("translate(",null,",",null,")");r.push({i:a-4,x:ni(e[0],t[0])},{i:a-2,x:ni(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}(e.translate,t.translate,n,r),function(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Ei(n)+"rotate(",null,")")-2,x:ni(e,t)})):t&&n.push(Ei(n)+"rotate("+t+")")}(e.rotate,t.rotate,n,r),function(e,t,n,r){e!==t?r.push({i:n.push(Ei(n)+"skewX(",null,")")-2,x:ni(e,t)}):t&&n.push(Ei(n)+"skewX("+t+")")}(e.skew,t.skew,n,r),function(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var a=n.push(Ei(n)+"scale(",null,",",null,")");r.push({i:a-4,x:ni(e[0],t[0])},{i:a-2,x:ni(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(Ei(n)+"scale("+t+")")}(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,a=-1,i=r.length;++a<i;)n[(t=r[a]).i]=t.x(e);return n.join("")}}function Ii(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Ti(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Ri(e){for(var t=e.source,n=e.target,r=function(e,t){if(e===t)return e;var n=Ni(e),r=Ni(t),a=n.pop(),i=r.pop(),o=null;for(;a===i;)o=a,a=n.pop(),i=r.pop();return o}(t,n),a=[t];t!==r;)t=t.parent,a.push(t);for(var i=a.length;n!==r;)a.splice(i,0,n),n=n.parent;return a}function Ni(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Mi(e){e.fixed|=2}function Oi(e){e.fixed&=-7}function Pi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Fi(e){e.fixed&=-5}function Di(e,t,n){var r=0,a=0;if(e.charge=0,!e.leaf)for(var i,o=e.nodes,s=o.length,u=-1;++u<s;)null!=(i=o[u])&&(Di(i,t,n),e.charge+=i.charge,r+=i.charge*i.cx,a+=i.charge*i.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=t*n[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,a+=l*e.point.y}e.cx=r/e.charge,e.cy=a/e.charge}i.interpolateTransform=Ai,i.layout={},i.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Ri(e[n]));return t}},i.layout.chord=function(){var e,t,n,r,a,o,s,u={},l=0;function c(){var u,c,d,h,p,v={},g=[],m=i.range(r),y=[];for(e=[],t=[],u=0,h=-1;++h<r;){for(c=0,p=-1;++p<r;)c+=n[h][p];g.push(c),y.push(i.range(r)),u+=c}for(a&&m.sort((function(e,t){return a(g[e],g[t])})),o&&y.forEach((function(e,t){e.sort((function(e,r){return o(n[t][e],n[t][r])}))})),u=(Ne-l*r)/u,c=0,h=-1;++h<r;){for(d=c,p=-1;++p<r;){var b=m[h],x=y[b][p],k=n[b][x],w=c,S=c+=k*u;v[b+"-"+x]={index:b,subindex:x,startAngle:w,endAngle:S,value:k}}t[b]={index:b,startAngle:d,endAngle:c,value:g[b]},c+=l}for(h=-1;++h<r;)for(p=h-1;++p<r;){var _=v[h+"-"+p],C=v[p+"-"+h];(_.value||C.value)&&e.push(_.value<C.value?{source:C,target:_}:{source:_,target:C})}s&&f()}function f(){e.sort((function(e,t){return s((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)}))}return u.matrix=function(a){return arguments.length?(r=(n=a)&&n.length,e=t=null,u):n},u.padding=function(n){return arguments.length?(l=n,e=t=null,u):l},u.sortGroups=function(n){return arguments.length?(a=n,e=t=null,u):a},u.sortSubgroups=function(t){return arguments.length?(o=t,e=null,u):o},u.sortChords=function(t){return arguments.length?(s=t,e&&f(),u):s},u.chords=function(){return e||c(),e},u.groups=function(){return t||c(),t},u},i.layout.force=function(){var e,t,n,r,a,o,s={},u=i.dispatch("start","tick","end"),l=[1,1],c=.9,f=Li,d=zi,h=-30,p=ji,v=.1,g=.64,m=[],y=[];function b(e){return function(t,n,r,a){if(t.point!==e){var i=t.cx-e.x,o=t.cy-e.y,s=a-n,u=i*i+o*o;if(s*s/g<u){if(u<p){var l=t.charge/u;e.px-=i*l,e.py-=o*l}return!0}if(t.point&&u&&u<p){l=t.pointCharge/u;e.px-=i*l,e.py-=o*l}}return!t.charge}}function x(e){e.px=i.event.x,e.py=i.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,u.end({type:"end",alpha:n=0}),!0;var t,s,f,d,p,g,x,k,w,S=m.length,_=y.length;for(s=0;s<_;++s)d=(f=y[s]).source,(g=(k=(p=f.target).x-d.x)*k+(w=p.y-d.y)*w)&&(k*=g=n*a[s]*((g=Math.sqrt(g))-r[s])/g,w*=g,p.x-=k*(x=d.weight+p.weight?d.weight/(d.weight+p.weight):.5),p.y-=w*x,d.x+=k*(x=1-x),d.y+=w*x);if((x=n*v)&&(k=l[0]/2,w=l[1]/2,s=-1,x))for(;++s<S;)(f=m[s]).x+=(k-f.x)*x,f.y+=(w-f.y)*x;if(h)for(Di(t=i.geom.quadtree(m),n,o),s=-1;++s<S;)(f=m[s]).fixed||t.visit(b(f));for(s=-1;++s<S;)(f=m[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);u.tick({type:"tick",alpha:n})},s.nodes=function(e){return arguments.length?(m=e,s):m},s.links=function(e){return arguments.length?(y=e,s):y},s.size=function(e){return arguments.length?(l=e,s):l},s.linkDistance=function(e){return arguments.length?(f="function"===typeof e?e:+e,s):f},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(d="function"===typeof e?e:+e,s):d},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(h="function"===typeof e?e:+e,s):h},s.chargeDistance=function(e){return arguments.length?(p=e*e,s):Math.sqrt(p)},s.gravity=function(e){return arguments.length?(v=+e,s):v},s.theta=function(e){return arguments.length?(g=e*e,s):Math.sqrt(g)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,u.end({type:"end",alpha:n=0})):t>0&&(u.start({type:"start",alpha:n=t}),e=It(s.tick)),s):n},s.start=function(){var e,t,n,i=m.length,u=y.length,c=l[0],p=l[1];for(e=0;e<i;++e)(n=m[e]).index=e,n.weight=0;for(e=0;e<u;++e)"number"==typeof(n=y[e]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<i;++e)n=m[e],isNaN(n.x)&&(n.x=v("x",c)),isNaN(n.y)&&(n.y=v("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"===typeof f)for(e=0;e<u;++e)r[e]=+f.call(this,y[e],e);else for(e=0;e<u;++e)r[e]=f;if(a=[],"function"===typeof d)for(e=0;e<u;++e)a[e]=+d.call(this,y[e],e);else for(e=0;e<u;++e)a[e]=d;if(o=[],"function"===typeof h)for(e=0;e<i;++e)o[e]=+h.call(this,m[e],e);else for(e=0;e<i;++e)o[e]=h;function v(n,r){if(!t){for(t=new Array(i),l=0;l<i;++l)t[l]=[];for(l=0;l<u;++l){var a=y[l];t[a.source.index].push(a.target),t[a.target.index].push(a.source)}}for(var o,s=t[e],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][n]))return o;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(t||(t=i.behavior.drag().origin(P).on("dragstart.force",Mi).on("drag.force",x).on("dragend.force",Oi)),!arguments.length)return t;this.on("mouseover.force",Pi).on("mouseout.force",Fi).call(t)},i.rebind(s,u,"on")};var Li=20,zi=1,ji=1/0;function Bi(e,t){return i.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=qi,e}function Wi(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(a=e.children)&&(r=a.length))for(var r,a;--r>=0;)n.push(a[r])}function Ui(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(i=e.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)n.push(i[o]);for(;null!=(e=r.pop());)t(e)}function Vi(e){return e.children}function Hi(e){return e.value}function Gi(e,t){return t.value-e.value}function qi(e){return i.merge(e.map((function(e){return(e.children||[]).map((function(t){return{source:e,target:t}}))})))}i.layout.hierarchy=function(){var e=Gi,t=Vi,n=Hi;function r(a){var i,o=[a],s=[];for(a.depth=0;null!=(i=o.pop());)if(s.push(i),(l=t.call(r,i,i.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=i,c.depth=i.depth+1;n&&(i.value=0),i.children=l}else n&&(i.value=+n.call(r,i,i.depth)||0),delete i.children;return Ui(a,(function(t){var r,a;e&&(r=t.children)&&r.sort(e),n&&(a=t.parent)&&(a.value+=t.value)})),s}return r.sort=function(t){return arguments.length?(e=t,r):e},r.children=function(e){return arguments.length?(t=e,r):t},r.value=function(e){return arguments.length?(n=e,r):n},r.revalue=function(e){return n&&(Wi(e,(function(e){e.children&&(e.value=0)})),Ui(e,(function(e){var t;e.children||(e.value=+n.call(r,e,e.depth)||0),(t=e.parent)&&(t.value+=e.value)}))),e},r},i.layout.partition=function(){var e=i.layout.hierarchy(),t=[1,1];function n(e,t,r,a){var i=e.children;if(e.x=t,e.y=e.depth*a,e.dx=r,e.dy=a,i&&(o=i.length)){var o,s,u,l=-1;for(r=e.value?r/e.value:0;++l<o;)n(s=i[l],t,u=s.value*r,a),t+=u}}function r(e){var t=e.children,n=0;if(t&&(a=t.length))for(var a,i=-1;++i<a;)n=Math.max(n,r(t[i]));return 1+n}function a(a,i){var o=e.call(this,a,i);return n(o[0],0,t[0],t[1]/r(o[0])),o}return a.size=function(e){return arguments.length?(t=e,a):t},Bi(a,e)},i.layout.pie=function(){var e=Number,t=Xi,n=0,r=Ne,a=0;function o(s){var u,l=s.length,c=s.map((function(t,n){return+e.call(o,t,n)})),f=+("function"===typeof n?n.apply(this,arguments):n),d=("function"===typeof r?r.apply(this,arguments):r)-f,h=Math.min(Math.abs(d)/l,+("function"===typeof a?a.apply(this,arguments):a)),p=h*(d<0?-1:1),v=i.sum(c),g=v?(d-l*p)/v:0,m=i.range(l),y=[];return null!=t&&m.sort(t===Xi?function(e,t){return c[t]-c[e]}:function(e,n){return t(s[e],s[n])}),m.forEach((function(e){y[e]={data:s[e],value:u=c[e],startAngle:f,endAngle:f+=u*g+p,padAngle:h}})),y}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(e){return arguments.length?(t=e,o):t},o.startAngle=function(e){return arguments.length?(n=e,o):n},o.endAngle=function(e){return arguments.length?(r=e,o):r},o.padAngle=function(e){return arguments.length?(a=e,o):a},o};var Xi={};function Yi(e){return e.x}function Ki(e){return e.y}function $i(e,t,n){e.y0=t,e.y=n}i.layout.stack=function(){var e=P,t=Ji,n=eo,r=$i,a=Yi,o=Ki;function s(u,l){if(!(h=u.length))return u;var c=u.map((function(t,n){return e.call(s,t,n)})),f=c.map((function(e){return e.map((function(e,t){return[a.call(s,e,t),o.call(s,e,t)]}))})),d=t.call(s,f,l);c=i.permute(c,d),f=i.permute(f,d);var h,p,v,g,m=n.call(s,f,l),y=c[0].length;for(v=0;v<y;++v)for(r.call(s,c[0][v],g=m[v],f[0][v][1]),p=1;p<h;++p)r.call(s,c[p][v],g+=f[p-1][v][1],f[p][v][1]);return u}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(e){return arguments.length?(t="function"===typeof e?e:Zi.get(e)||Ji,s):t},s.offset=function(e){return arguments.length?(n="function"===typeof e?e:Qi.get(e)||eo,s):n},s.x=function(e){return arguments.length?(a=e,s):a},s.y=function(e){return arguments.length?(o=e,s):o},s.out=function(e){return arguments.length?(r=e,s):r},s};var Zi=i.map({"inside-out":function(e){var t,n,r=e.length,a=e.map(to),o=e.map(no),s=i.range(r).sort((function(e,t){return a[e]-a[t]})),u=0,l=0,c=[],f=[];for(t=0;t<r;++t)n=s[t],u<l?(u+=o[n],c.push(n)):(l+=o[n],f.push(n));return f.reverse().concat(c)},reverse:function(e){return i.range(e.length).reverse()},default:Ji}),Qi=i.map({silhouette:function(e){var t,n,r,a=e.length,i=e[0].length,o=[],s=0,u=[];for(n=0;n<i;++n){for(t=0,r=0;t<a;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<i;++n)u[n]=(s-o[n])/2;return u},wiggle:function(e){var t,n,r,a,i,o,s,u,l,c=e.length,f=e[0],d=f.length,h=[];for(h[0]=u=l=0,n=1;n<d;++n){for(t=0,a=0;t<c;++t)a+=e[t][n][1];for(t=0,i=0,s=f[n][0]-f[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;i+=o*e[t][n][1]}h[n]=u-=a?i/a*s:0,u<l&&(l=u)}for(n=0;n<d;++n)h[n]-=l;return h},expand:function(e){var t,n,r,a=e.length,i=e[0].length,o=1/a,s=[];for(n=0;n<i;++n){for(t=0,r=0;t<a;t++)r+=e[t][n][1];if(r)for(t=0;t<a;t++)e[t][n][1]/=r;else for(t=0;t<a;t++)e[t][n][1]=o}for(n=0;n<i;++n)s[n]=0;return s},zero:eo});function Ji(e){return i.range(e.length)}function eo(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function to(e){for(var t,n=1,r=0,a=e[0][1],i=e.length;n<i;++n)(t=e[n][1])>a&&(r=n,a=t);return r}function no(e){return e.reduce(ro,0)}function ro(e,t){return e+t[1]}function ao(e,t){return io(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function io(e,t){for(var n=-1,r=+e[0],a=(e[1]-r)/t,i=[];++n<=t;)i[n]=a*n+r;return i}function oo(e){return[i.min(e),i.max(e)]}function so(e,t){return e.value-t.value}function uo(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function lo(e,t){e._pack_next=t,t._pack_prev=e}function co(e,t){var n=t.x-e.x,r=t.y-e.y,a=e.r+t.r;return.999*a*a>n*n+r*r}function fo(e){if((t=e.children)&&(u=t.length)){var t,n,r,a,i,o,s,u,l=1/0,c=-1/0,f=1/0,d=-1/0;if(t.forEach(ho),(n=t[0]).x=-n.r,n.y=0,b(n),u>1&&((r=t[1]).x=r.r,r.y=0,b(r),u>2))for(go(n,r,a=t[2]),b(a),uo(n,a),n._pack_prev=a,uo(a,r),r=n._pack_next,i=3;i<u;i++){go(n,r,a=t[i]);var h=0,p=1,v=1;for(o=r._pack_next;o!==r;o=o._pack_next,p++)if(co(o,a)){h=1;break}if(1==h)for(s=n._pack_prev;s!==o._pack_prev&&!co(s,a);s=s._pack_prev,v++);h?(p<v||p==v&&r.r<n.r?lo(n,r=o):lo(n=s,r),i--):(uo(n,a),r=a,b(a))}var g=(l+c)/2,m=(f+d)/2,y=0;for(i=0;i<u;i++)(a=t[i]).x-=g,a.y-=m,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,t.forEach(po)}function b(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),f=Math.min(e.y-e.r,f),d=Math.max(e.y+e.r,d)}}function ho(e){e._pack_next=e._pack_prev=e}function po(e){delete e._pack_next,delete e._pack_prev}function vo(e,t,n,r){var a=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,a)for(var i=-1,o=a.length;++i<o;)vo(a[i],t,n,r)}function go(e,t,n){var r=e.r+n.r,a=t.x-e.x,i=t.y-e.y;if(r&&(a||i)){var o=t.r+n.r,s=a*a+i*i,u=.5+((r*=r)-(o*=o))/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*a+l*i,n.y=e.y+u*i-l*a}else n.x=e.x+r,n.y=e.y}function mo(e,t){return e.parent==t.parent?1:2}function yo(e){var t=e.children;return t.length?t[0]:e.t}function bo(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function xo(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ko(e,t,n){return e.a.parent===t.parent?e.a:n}function wo(e){var t=e.children;return t&&t.length?wo(t[0]):e}function So(e){var t,n=e.children;return n&&(t=n.length)?So(n[t-1]):e}function _o(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Co(e,t){var n=e.x+t[3],r=e.y+t[0],a=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];return a<0&&(n+=a/2,a=0),i<0&&(r+=i/2,i=0),{x:n,y:r,dx:a,dy:i}}function Eo(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Ao(e){return e.rangeExtent?e.rangeExtent():Eo(e.range())}function Io(e,t,n,r){var a=n(e[0],e[1]),i=r(t[0],t[1]);return function(e){return i(a(e))}}function To(e,t){var n,r=0,a=e.length-1,i=e[r],o=e[a];return o<i&&(n=r,r=a,a=n,n=i,i=o,o=n),e[r]=t.floor(i),e[a]=t.ceil(o),e}function Ro(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:No}i.layout.histogram=function(){var e=!0,t=Number,n=oo,r=ao;function a(a,o){for(var s,u,l=[],c=a.map(t,this),f=n.call(this,c,o),d=r.call(this,f,c,o),h=(o=-1,c.length),p=d.length-1,v=e?1:1/h;++o<p;)(s=l[o]=[]).dx=d[o+1]-(s.x=d[o]),s.y=0;if(p>0)for(o=-1;++o<h;)(u=c[o])>=f[0]&&u<=f[1]&&((s=l[i.bisect(d,u,1,p)-1]).y+=v,s.push(a[o]));return l}return a.value=function(e){return arguments.length?(t=e,a):t},a.range=function(e){return arguments.length?(n=xt(e),a):n},a.bins=function(e){return arguments.length?(r="number"===typeof e?function(t){return io(t,e)}:xt(e),a):r},a.frequency=function(t){return arguments.length?(e=!!t,a):e},a},i.layout.pack=function(){var e,t=i.layout.hierarchy().sort(so),n=0,r=[1,1];function a(a,i){var o=t.call(this,a,i),s=o[0],u=r[0],l=r[1],c=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};if(s.x=s.y=0,Ui(s,(function(e){e.r=+c(e.value)})),Ui(s,fo),n){var f=n*(e?1:Math.max(2*s.r/u,2*s.r/l))/2;Ui(s,(function(e){e.r+=f})),Ui(s,fo),Ui(s,(function(e){e.r-=f}))}return vo(s,u/2,l/2,e?1:1/Math.max(2*s.r/u,2*s.r/l)),o}return a.size=function(e){return arguments.length?(r=e,a):r},a.radius=function(t){return arguments.length?(e=null==t||"function"===typeof t?t:+t,a):e},a.padding=function(e){return arguments.length?(n=+e,a):n},Bi(a,t)},i.layout.tree=function(){var e=i.layout.hierarchy().sort(null).value(null),t=mo,n=[1,1],r=null;function a(a,i){var l=e.call(this,a,i),c=l[0],f=function(e){var t,n={A:null,children:[e]},r=[n];for(;null!=(t=r.pop());)for(var a,i=t.children,o=0,s=i.length;o<s;++o)r.push((i[o]=a={_:i[o],parent:t,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return n.children[0]}(c);if(Ui(f,o),f.parent.m=-f.z,Wi(f,s),r)Wi(c,u);else{var d=c,h=c,p=c;Wi(c,(function(e){e.x<d.x&&(d=e),e.x>h.x&&(h=e),e.depth>p.depth&&(p=e)}));var v=t(d,h)/2-d.x,g=n[0]/(h.x+t(h,d)/2+v),m=n[1]/(p.depth||1);Wi(c,(function(e){e.x=(e.x+v)*g,e.y=e.depth*m}))}return l}function o(e){var n=e.children,r=e.parent.children,a=e.i?r[e.i-1]:null;if(n.length){!function(e){var t,n=0,r=0,a=e.children,i=a.length;for(;--i>=0;)(t=a[i]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(e);var i=(n[0].z+n[n.length-1].z)/2;a?(e.z=a.z+t(e._,a._),e.m=e.z-i):e.z=i}else a&&(e.z=a.z+t(e._,a._));e.parent.A=function(e,n,r){if(n){for(var a,i=e,o=e,s=n,u=i.parent.children[0],l=i.m,c=o.m,f=s.m,d=u.m;s=bo(s),i=yo(i),s&&i;)u=yo(u),(o=bo(o)).a=e,(a=s.z+f-i.z-l+t(s._,i._))>0&&(xo(ko(s,e,r),e,a),l+=a,c+=a),f+=s.m,l+=i.m,d+=u.m,c+=o.m;s&&!bo(o)&&(o.t=s,o.m+=f-c),i&&!yo(u)&&(u.t=i,u.m+=l-d,r=e)}return r}(e,a,e.parent.A||r[0])}function s(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function u(e){e.x*=n[0],e.y=e.depth*n[1]}return a.separation=function(e){return arguments.length?(t=e,a):t},a.size=function(e){return arguments.length?(r=null==(n=e)?u:null,a):r?null:n},a.nodeSize=function(e){return arguments.length?(r=null==(n=e)?null:u,a):r?n:null},Bi(a,e)},i.layout.cluster=function(){var e=i.layout.hierarchy().sort(null).value(null),t=mo,n=[1,1],r=!1;function a(a,o){var s,u=e.call(this,a,o),l=u[0],c=0;Ui(l,(function(e){var n=e.children;n&&n.length?(e.x=function(e){return e.reduce((function(e,t){return e+t.x}),0)/e.length}(n),e.y=function(e){return 1+i.max(e,(function(e){return e.y}))}(n)):(e.x=s?c+=t(e,s):0,e.y=0,s=e)}));var f=wo(l),d=So(l),h=f.x-t(f,d)/2,p=d.x+t(d,f)/2;return Ui(l,r?function(e){e.x=(e.x-l.x)*n[0],e.y=(l.y-e.y)*n[1]}:function(e){e.x=(e.x-h)/(p-h)*n[0],e.y=(1-(l.y?e.y/l.y:1))*n[1]}),u}return a.separation=function(e){return arguments.length?(t=e,a):t},a.size=function(e){return arguments.length?(r=null==(n=e),a):r?null:n},a.nodeSize=function(e){return arguments.length?(r=null!=(n=e),a):r?n:null},Bi(a,e)},i.layout.treemap=function(){var e,t=i.layout.hierarchy(),n=Math.round,r=[1,1],a=null,o=_o,s=!1,u="squarify",l=.5*(1+Math.sqrt(5));function c(e,t){for(var n,r,a=-1,i=e.length;++a<i;)r=(n=e[a]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function f(e){var t=e.children;if(t&&t.length){var n,r,a,i=o(e),s=[],l=t.slice(),d=1/0,v="slice"===u?i.dx:"dice"===u?i.dy:"slice-dice"===u?1&e.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(c(l,i.dx*i.dy/e.value),s.area=0;(a=l.length)>0;)s.push(n=l[a-1]),s.area+=n.area,"squarify"!==u||(r=h(s,v))<=d?(l.pop(),d=r):(s.area-=s.pop().area,p(s,v,i,!1),v=Math.min(i.dx,i.dy),s.length=s.area=0,d=1/0);s.length&&(p(s,v,i,!0),s.length=s.area=0),t.forEach(f)}}function d(e){var t=e.children;if(t&&t.length){var n,r=o(e),a=t.slice(),i=[];for(c(a,r.dx*r.dy/e.value),i.area=0;n=a.pop();)i.push(n),i.area+=n.area,null!=n.z&&(p(i,n.z?r.dx:r.dy,r,!a.length),i.length=i.area=0);t.forEach(d)}}function h(e,t){for(var n,r=e.area,a=0,i=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<i&&(i=n),n>a&&(a=n));return t*=t,(r*=r)?Math.max(t*a*l/r,r/(t*i*l)):1/0}function p(e,t,r,a){var i,o=-1,s=e.length,u=r.x,l=r.y,c=t?n(e.area/t):0;if(t==r.dx){for((a||c>r.dy)&&(c=r.dy);++o<s;)(i=e[o]).x=u,i.y=l,i.dy=c,u+=i.dx=Math.min(r.x+r.dx-u,c?n(i.area/c):0);i.z=!0,i.dx+=r.x+r.dx-u,r.y+=c,r.dy-=c}else{for((a||c>r.dx)&&(c=r.dx);++o<s;)(i=e[o]).x=u,i.y=l,i.dx=c,l+=i.dy=Math.min(r.y+r.dy-l,c?n(i.area/c):0);i.z=!1,i.dy+=r.y+r.dy-l,r.x+=c,r.dx-=c}}function v(n){var a=e||t(n),i=a[0];return i.x=i.y=0,i.value?(i.dx=r[0],i.dy=r[1]):i.dx=i.dy=0,e&&t.revalue(i),c([i],i.dx*i.dy/i.value),(e?d:f)(i),s&&(e=a),a}return v.size=function(e){return arguments.length?(r=e,v):r},v.padding=function(e){if(!arguments.length)return a;function t(t){var n=e.call(v,t,t.depth);return null==n?_o(t):Co(t,"number"===typeof n?[n,n,n,n]:n)}function n(t){return Co(t,e)}var r;return o=null==(a=e)?_o:"function"===(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,v},v.round=function(e){return arguments.length?(n=e?Math.round:Number,v):n!=Number},v.sticky=function(t){return arguments.length?(s=t,e=null,v):s},v.ratio=function(e){return arguments.length?(l=e,v):l},v.mode=function(e){return arguments.length?(u=e+"",v):u},Bi(v,t)},i.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,a;do{a=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!a||a>1);return e+t*n*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var e=i.random.normal.apply(i,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=i.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},i.scale={};var No={floor:P,ceil:P};function Mo(e,t,n,r){var a=[],o=[],s=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<=u;)a.push(n(e[s-1],e[s])),o.push(r(t[s-1],t[s]));return function(t){var n=i.bisect(e,t,1,u)-1;return o[n](a[n](t))}}function Oo(e,t,n,r){var a,i;function o(){var o=Math.min(e.length,t.length)>2?Mo:Io,u=r?Ti:Ii;return a=o(e,t,u,n),i=o(t,e,u,oi),s}function s(e){return a(e)}return s.invert=function(e){return i(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},s.range=function(e){return arguments.length?(t=e,o()):t},s.rangeRound=function(e){return s.range(e).interpolate(ki)},s.clamp=function(e){return arguments.length?(r=e,o()):r},s.interpolate=function(e){return arguments.length?(n=e,o()):n},s.ticks=function(t){return Lo(e,t)},s.tickFormat=function(t,n){return zo(e,t,n)},s.nice=function(t){return Fo(e,t),o()},s.copy=function(){return Oo(e,t,n,r)},o()}function Po(e,t){return i.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Fo(e,t){return To(e,Ro(Do(e,t)[2])),To(e,Ro(Do(e,t)[2])),e}function Do(e,t){null==t&&(t=10);var n=Eo(e),r=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*a;return i<=.15?a*=10:i<=.35?a*=5:i<=.75&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function Lo(e,t){return i.range.apply(i,Do(e,t))}function zo(e,t,n){var r=Do(e,t);if(n){var a=Ft.exec(n);if(a.shift(),"s"===a[8]){var o=i.formatPrefix(Math.max(w(r[0]),w(r[1])));return a[7]||(a[7]="."+Bo(o.scale(r[2]))),a[8]="f",n=i.format(a.join("")),function(e){return n(o.scale(e))+o.symbol}}a[7]||(a[7]="."+function(e,t){var n=Bo(t[2]);return e in jo?Math.abs(n-Bo(Math.max(w(t[0]),w(t[1]))))+ +("e"!==e):n-2*("%"===e)}(a[8],r)),n=a.join("")}else n=",."+Bo(r[2])+"f";return i.format(n)}i.scale.linear=function(){return Oo([0,1],[0,1],oi,!1)};var jo={s:1,g:1,p:1,r:1,e:1};function Bo(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Wo(e,t,n,r){function a(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function s(t){return e(a(t))}return s.invert=function(t){return o(e.invert(t))},s.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(a)),s):r},s.base=function(n){return arguments.length?(t=+n,e.domain(r.map(a)),s):t},s.nice=function(){var t=To(r.map(a),n?Math:Vo);return e.domain(t),r=t.map(o),s},s.ticks=function(){var e=Eo(r),i=[],s=e[0],u=e[1],l=Math.floor(a(s)),c=Math.ceil(a(u)),f=t%1?2:t;if(isFinite(c-l)){if(n){for(;l<c;l++)for(var d=1;d<f;d++)i.push(o(l)*d);i.push(o(l))}else for(i.push(o(l));l++<c;)for(d=f-1;d>0;d--)i.push(o(l)*d);for(l=0;i[l]<s;l++);for(c=i.length;i[c-1]>u;c--);i=i.slice(l,c)}return i},s.tickFormat=function(e,n){if(!arguments.length)return Uo;arguments.length<2?n=Uo:"function"!==typeof n&&(n=i.format(n));var r=Math.max(1,t*e/s.ticks().length);return function(e){var i=e/o(Math.round(a(e)));return i*t<t-.5&&(i*=t),i<=r?n(e):""}},s.copy=function(){return Wo(e.copy(),t,n,r)},Po(s,e)}i.scale.log=function(){return Wo(i.scale.linear().domain([0,1]),10,!0,[1,10])};var Uo=i.format(".0e"),Vo={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};function Ho(e,t,n){var r=Go(t),a=Go(1/t);function i(t){return e(r(t))}return i.invert=function(t){return a(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),i):n},i.ticks=function(e){return Lo(n,e)},i.tickFormat=function(e,t){return zo(n,e,t)},i.nice=function(e){return i.domain(Fo(n,e))},i.exponent=function(o){return arguments.length?(r=Go(t=o),a=Go(1/t),e.domain(n.map(r)),i):t},i.copy=function(){return Ho(e.copy(),t,n)},Po(i,e)}function Go(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function qo(e,t){var n,r,a;function o(a){return r[((n.get(a)||("range"===t.t?n.set(a,e.push(a)):NaN))-1)%r.length]}function s(t,n){return i.range(e.length).map((function(e){return t+n*e}))}return o.domain=function(r){if(!arguments.length)return e;e=[],n=new C;for(var a,i=-1,s=r.length;++i<s;)n.has(a=r[i])||n.set(a,e.push(a));return o[t.t].apply(o,t.a)},o.range=function(e){return arguments.length?(r=e,a=0,t={t:"range",a:arguments},o):r},o.rangePoints=function(n,i){arguments.length<2&&(i=0);var u=n[0],l=n[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+i);return r=s(u+c*i/2,c),a=0,t={t:"rangePoints",a:arguments},o},o.rangeRoundPoints=function(n,i){arguments.length<2&&(i=0);var u=n[0],l=n[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+i)|0;return r=s(u+Math.round(c*i/2+(l-u-(e.length-1+i)*c)/2),c),a=0,t={t:"rangeRoundPoints",a:arguments},o},o.rangeBands=function(n,i,u){arguments.length<2&&(i=0),arguments.length<3&&(u=i);var l=n[1]<n[0],c=n[l-0],f=n[1-l],d=(f-c)/(e.length-i+2*u);return r=s(c+d*u,d),l&&r.reverse(),a=d*(1-i),t={t:"rangeBands",a:arguments},o},o.rangeRoundBands=function(n,i,u){arguments.length<2&&(i=0),arguments.length<3&&(u=i);var l=n[1]<n[0],c=n[l-0],f=n[1-l],d=Math.floor((f-c)/(e.length-i+2*u));return r=s(c+Math.round((f-c-(e.length-i)*d)/2),d),l&&r.reverse(),a=Math.round(d*(1-i)),t={t:"rangeRoundBands",a:arguments},o},o.rangeBand=function(){return a},o.rangeExtent=function(){return Eo(t.a[0])},o.copy=function(){return qo(e,t)},o.domain(e)}i.scale.pow=function(){return Ho(i.scale.linear(),1,[0,1])},i.scale.sqrt=function(){return i.scale.pow().exponent(.5)},i.scale.ordinal=function(){return qo([],{t:"range",a:[[]]})},i.scale.category10=function(){return i.scale.ordinal().range(Xo)},i.scale.category20=function(){return i.scale.ordinal().range(Yo)},i.scale.category20b=function(){return i.scale.ordinal().range(Ko)},i.scale.category20c=function(){return i.scale.ordinal().range($o)};var Xo=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ft),Yo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ft),Ko=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ft),$o=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ft);function Zo(e,t){var n;function r(){var r=0,o=t.length;for(n=[];++r<o;)n[r-1]=i.quantile(e,r/o);return a}function a(e){if(!isNaN(e=+e))return t[i.bisect(n,e)]}return a.domain=function(t){return arguments.length?(e=t.map(m).filter(y).sort(g),r()):e},a.range=function(e){return arguments.length?(t=e,r()):t},a.quantiles=function(){return n},a.invertExtent=function(r){return(r=t.indexOf(r))<0?[NaN,NaN]:[r>0?n[r-1]:e[0],r<n.length?n[r]:e[e.length-1]]},a.copy=function(){return Zo(e,t)},r()}function Qo(e,t,n){var r,a;function i(t){return n[Math.max(0,Math.min(a,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),a=n.length-1,i}return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},i.range=function(e){return arguments.length?(n=e,o()):n},i.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/r+e,t+1/r]},i.copy=function(){return Qo(e,t,n)},o()}function Jo(e,t){function n(n){if(n<=n)return t[i.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return Jo(e,t)},n}function es(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Lo(e,t)},t.tickFormat=function(t,n){return zo(e,t,n)},t.copy=function(){return es(e)},t}function ts(){return 0}i.scale.quantile=function(){return Zo([],[])},i.scale.quantize=function(){return Qo(0,1,[0,1])},i.scale.threshold=function(){return Jo([.5],[0,1])},i.scale.identity=function(){return es([0,1])},i.svg={},i.svg.arc=function(){var e=rs,t=as,n=ts,r=ns,a=is,i=os,o=ss;function s(){var s=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+t.apply(this,arguments)),c=a.apply(this,arguments)-Oe,f=i.apply(this,arguments)-Oe,d=Math.abs(f-c),h=c>f?0:1;if(l<s&&(p=l,l=s,s=p),d>=Me)return u(l,h)+(s?u(s,1-h):"")+"Z";var p,v,g,m,y,b,x,k,w,S,_,C,E=0,A=0,I=[];if((m=(+o.apply(this,arguments)||0)/2)&&(g=r===ns?Math.sqrt(s*s+l*l):+r.apply(this,arguments),h||(A*=-1),l&&(A=je(g/l*Math.sin(m))),s&&(E=je(g/s*Math.sin(m)))),l){y=l*Math.cos(c+A),b=l*Math.sin(c+A),x=l*Math.cos(f-A),k=l*Math.sin(f-A);var T=Math.abs(f-c-2*A)<=Re?0:1;if(A&&us(y,b,x,k)===h^T){var R=(c+f)/2;y=l*Math.cos(R),b=l*Math.sin(R),x=k=null}}else y=b=0;if(s){w=s*Math.cos(f-E),S=s*Math.sin(f-E),_=s*Math.cos(c+E),C=s*Math.sin(c+E);var N=Math.abs(c-f+2*E)<=Re?0:1;if(E&&us(w,S,_,C)===1-h^N){var M=(c+f)/2;w=s*Math.cos(M),S=s*Math.sin(M),_=C=null}}else w=S=0;if(d>Ie&&(p=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){v=s<l^h?0:1;var O=p,P=p;if(d<Re){var F=null==_?[w,S]:null==x?[y,b]:va([y,b],[_,C],[x,k],[w,S]),D=y-F[0],L=b-F[1],z=x-F[0],j=k-F[1],B=1/Math.sin(Math.acos((D*z+L*j)/(Math.sqrt(D*D+L*L)*Math.sqrt(z*z+j*j)))/2),W=Math.sqrt(F[0]*F[0]+F[1]*F[1]);P=Math.min(p,(s-W)/(B-1)),O=Math.min(p,(l-W)/(B+1))}if(null!=x){var U=ls(null==_?[w,S]:[_,C],[y,b],l,O,h),V=ls([x,k],[w,S],l,O,h);p===O?I.push("M",U[0],"A",O,",",O," 0 0,",v," ",U[1],"A",l,",",l," 0 ",1-h^us(U[1][0],U[1][1],V[1][0],V[1][1]),",",h," ",V[1],"A",O,",",O," 0 0,",v," ",V[0]):I.push("M",U[0],"A",O,",",O," 0 1,",v," ",V[0])}else I.push("M",y,",",b);if(null!=_){var H=ls([y,b],[_,C],s,-P,h),G=ls([w,S],null==x?[y,b]:[x,k],s,-P,h);p===P?I.push("L",G[0],"A",P,",",P," 0 0,",v," ",G[1],"A",s,",",s," 0 ",h^us(G[1][0],G[1][1],H[1][0],H[1][1]),",",1-h," ",H[1],"A",P,",",P," 0 0,",v," ",H[0]):I.push("L",G[0],"A",P,",",P," 0 0,",v," ",H[0])}else I.push("L",w,",",S)}else I.push("M",y,",",b),null!=x&&I.push("A",l,",",l," 0 ",T,",",h," ",x,",",k),I.push("L",w,",",S),null!=_&&I.push("A",s,",",s," 0 ",N,",",1-h," ",_,",",C);return I.push("Z"),I.join("")}function u(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}return s.innerRadius=function(t){return arguments.length?(e=xt(t),s):e},s.outerRadius=function(e){return arguments.length?(t=xt(e),s):t},s.cornerRadius=function(e){return arguments.length?(n=xt(e),s):n},s.padRadius=function(e){return arguments.length?(r=e==ns?ns:xt(e),s):r},s.startAngle=function(e){return arguments.length?(a=xt(e),s):a},s.endAngle=function(e){return arguments.length?(i=xt(e),s):i},s.padAngle=function(e){return arguments.length?(o=xt(e),s):o},s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-Oe;return[Math.cos(r)*n,Math.sin(r)*n]},s};var ns="auto";function rs(e){return e.innerRadius}function as(e){return e.outerRadius}function is(e){return e.startAngle}function os(e){return e.endAngle}function ss(e){return e&&e.padAngle}function us(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function ls(e,t,n,r,a){var i=e[0]-t[0],o=e[1]-t[1],s=(a?r:-r)/Math.sqrt(i*i+o*o),u=s*o,l=-s*i,c=e[0]+u,f=e[1]+l,d=t[0]+u,h=t[1]+l,p=(c+d)/2,v=(f+h)/2,g=d-c,m=h-f,y=g*g+m*m,b=n-r,x=c*h-d*f,k=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),w=(x*m-g*k)/y,S=(-x*g-m*k)/y,_=(x*m+g*k)/y,C=(-x*g+m*k)/y,E=w-p,A=S-v,I=_-p,T=C-v;return E*E+A*A>I*I+T*T&&(w=_,S=C),[[w-u,S-l],[w*n/b,S*n/b]]}function cs(e){var t=la,n=ca,r=Jn,a=ds,i=a.key,o=.7;function s(i){var s,u=[],l=[],c=-1,f=i.length,d=xt(t),h=xt(n);function p(){u.push("M",a(e(l),o))}for(;++c<f;)r.call(this,s=i[c],c)?l.push([+d.call(this,s,c),+h.call(this,s,c)]):l.length&&(p(),l=[]);return l.length&&p(),u.length?u.join(""):null}return s.x=function(e){return arguments.length?(t=e,s):t},s.y=function(e){return arguments.length?(n=e,s):n},s.defined=function(e){return arguments.length?(r=e,s):r},s.interpolate=function(e){return arguments.length?(i="function"===typeof e?a=e:(a=fs.get(e)||ds).key,s):i},s.tension=function(e){return arguments.length?(o=e,s):o},s}i.svg.line=function(){return cs(P)};var fs=i.map({linear:ds,"linear-closed":hs,step:function(e){var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];for(;++t<n;)a.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);n>1&&a.push("H",r[0]);return a.join("")},"step-before":ps,"step-after":vs,basis:ys,"basis-open":function(e){if(e.length<4)return ds(e);var t,n=[],r=-1,a=e.length,i=[0],o=[0];for(;++r<3;)t=e[r],i.push(t[0]),o.push(t[1]);n.push(bs(ws,i)+","+bs(ws,o)),--r;for(;++r<a;)t=e[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),Ss(n,i,o);return n.join("")},"basis-closed":function(e){var t,n,r=-1,a=e.length,i=a+4,o=[],s=[];for(;++r<4;)n=e[r%a],o.push(n[0]),s.push(n[1]);t=[bs(ws,o),",",bs(ws,s)],--r;for(;++r<i;)n=e[r%a],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ss(t,o,s);return t.join("")},bundle:function(e,t){var n=e.length-1;if(n)for(var r,a,i=e[0][0],o=e[0][1],s=e[n][0]-i,u=e[n][1]-o,l=-1;++l<=n;)r=e[l],a=l/n,r[0]=t*r[0]+(1-t)*(i+a*s),r[1]=t*r[1]+(1-t)*(o+a*u);return ys(e)},cardinal:function(e,t){return e.length<3?ds(e):e[0]+gs(e,ms(e,t))},"cardinal-open":function(e,t){return e.length<4?ds(e):e[1]+gs(e.slice(1,-1),ms(e,t))},"cardinal-closed":function(e,t){return e.length<3?hs(e):e[0]+gs((e.push(e[0]),e),ms([e[e.length-2]].concat(e,[e[1]]),t))},monotone:function(e){return e.length<3?ds(e):e[0]+gs(e,function(e){var t,n,r,a,i=[],o=function(e){var t=0,n=e.length-1,r=[],a=e[0],i=e[1],o=r[0]=_s(a,i);for(;++t<n;)r[t]=(o+(o=_s(a=i,i=e[t+1])))/2;return r[t]=o,r}(e),s=-1,u=e.length-1;for(;++s<u;)t=_s(e[s],e[s+1]),w(t)<Ie?o[s]=o[s+1]=0:(a=(n=o[s]/t)*n+(r=o[s+1]/t)*r)>9&&(a=3*t/Math.sqrt(a),o[s]=a*n,o[s+1]=a*r);s=-1;for(;++s<=u;)a=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),i.push([a||0,o[s]*a||0]);return i}(e))}});function ds(e){return e.length>1?e.join("L"):e+"Z"}function hs(e){return e.join("L")+"Z"}function ps(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("V",(r=e[t])[1],"H",r[0]);return a.join("")}function vs(e){for(var t=0,n=e.length,r=e[0],a=[r[0],",",r[1]];++t<n;)a.push("H",(r=e[t])[0],"V",r[1]);return a.join("")}function gs(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ds(e);var n=e.length!=t.length,r="",a=e[0],i=e[1],o=t[0],s=o,u=1;if(n&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=e[1],u=2),t.length>1){s=t[1],i=e[u],u++,r+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,u++)i=e[u],s=t[l],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}if(n){var c=e[u];r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function ms(e,t){for(var n,r=[],a=(1-t)/2,i=e[0],o=e[1],s=1,u=e.length;++s<u;)n=i,i=o,o=e[s],r.push([a*(o[0]-n[0]),a*(o[1]-n[1])]);return r}function ys(e){if(e.length<3)return ds(e);var t=1,n=e.length,r=e[0],a=r[0],i=r[1],o=[a,a,a,(r=e[1])[0]],s=[i,i,i,r[1]],u=[a,",",i,"L",bs(ws,o),",",bs(ws,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ss(u,o,s);return e.pop(),u.push("L",r),u.join("")}function bs(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}fs.forEach((function(e,t){t.key=e,t.closed=/-closed$/.test(e)}));var xs=[0,2/3,1/3,0],ks=[0,1/3,2/3,0],ws=[0,1/6,2/3,1/6];function Ss(e,t,n){e.push("C",bs(xs,t),",",bs(xs,n),",",bs(ks,t),",",bs(ks,n),",",bs(ws,t),",",bs(ws,n))}function _s(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Cs(e){for(var t,n,r,a=-1,i=e.length;++a<i;)n=(t=e[a])[0],r=t[1]-Oe,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Es(e){var t=la,n=la,r=0,a=ca,i=Jn,o=ds,s=o.key,u=o,l="L",c=.7;function f(s){var f,d,h,p=[],v=[],g=[],m=-1,y=s.length,b=xt(t),x=xt(r),k=t===n?function(){return d}:xt(n),w=r===a?function(){return h}:xt(a);function S(){p.push("M",o(e(g),c),l,u(e(v.reverse()),c),"Z")}for(;++m<y;)i.call(this,f=s[m],m)?(v.push([d=+b.call(this,f,m),h=+x.call(this,f,m)]),g.push([+k.call(this,f,m),+w.call(this,f,m)])):v.length&&(S(),v=[],g=[]);return v.length&&S(),p.length?p.join(""):null}return f.x=function(e){return arguments.length?(t=n=e,f):n},f.x0=function(e){return arguments.length?(t=e,f):t},f.x1=function(e){return arguments.length?(n=e,f):n},f.y=function(e){return arguments.length?(r=a=e,f):a},f.y0=function(e){return arguments.length?(r=e,f):r},f.y1=function(e){return arguments.length?(a=e,f):a},f.defined=function(e){return arguments.length?(i=e,f):i},f.interpolate=function(e){return arguments.length?(s="function"===typeof e?o=e:(o=fs.get(e)||ds).key,u=o.reverse||o,l=o.closed?"M":"L",f):s},f.tension=function(e){return arguments.length?(c=e,f):c},f}function As(e){return e.radius}function Is(e){return[e.x,e.y]}function Ts(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Oe;return[n*Math.cos(r),n*Math.sin(r)]}}function Rs(){return 64}function Ns(){return"circle"}function Ms(e){var t=Math.sqrt(e/Re);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}i.svg.line.radial=function(){var e=cs(Cs);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},ps.reverse=vs,vs.reverse=ps,i.svg.area=function(){return Es(P)},i.svg.area.radial=function(){var e=Es(Cs);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},i.svg.chord=function(){var e=Kr,t=$r,n=As,r=is,a=os;function i(n,r){var a,i,l=o(this,e,n,r),c=o(this,t,n,r);return"M"+l.p0+s(l.r,l.p1,l.a1-l.a0)+(i=c,((a=l).a0==i.a0&&a.a1==i.a1?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z")}function o(e,t,i,o){var s=t.call(e,i,o),u=n.call(e,s,o),l=r.call(e,s,o)-Oe,c=a.call(e,s,o)-Oe;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Re)+",1 "+t}function u(e,t,n,r){return"Q 0,0 "+r}return i.radius=function(e){return arguments.length?(n=xt(e),i):n},i.source=function(t){return arguments.length?(e=xt(t),i):e},i.target=function(e){return arguments.length?(t=xt(e),i):t},i.startAngle=function(e){return arguments.length?(r=xt(e),i):r},i.endAngle=function(e){return arguments.length?(a=xt(e),i):a},i},i.svg.diagonal=function(){var e=Kr,t=$r,n=Is;function r(r,a){var i=e.call(this,r,a),o=t.call(this,r,a),s=(i.y+o.y)/2,u=[i,{x:i.x,y:s},{x:o.x,y:s},o];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(t){return arguments.length?(e=xt(t),r):e},r.target=function(e){return arguments.length?(t=xt(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},i.svg.diagonal.radial=function(){var e=i.svg.diagonal(),t=Is,n=e.projection;return e.projection=function(e){return arguments.length?n(Ts(t=e)):t},e},i.svg.symbol=function(){var e=Ns,t=Rs;function n(n,r){return(Os.get(e.call(this,n,r))||Ms)(t.call(this,n,r))}return n.type=function(t){return arguments.length?(e=xt(t),n):e},n.size=function(e){return arguments.length?(t=xt(e),n):t},n};var Os=i.map({circle:Ms,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Fs)),n=t*Fs;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Ps),n=t*Ps/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Ps),n=t*Ps/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});i.svg.symbolTypes=Os.keys();var Ps=Math.sqrt(3),Fs=Math.tan(30*Pe);$.transition=function(e){for(var t,n,r=js||++Us,a=Gs(e),i=[],o=Bs||{time:Date.now(),ease:gi,delay:0,duration:250},s=-1,u=this.length;++s<u;){i.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&qs(n,c,a,r,o),t.push(n)}return zs(i,a,r)},$.interrupt=function(e){return this.each(null==e?Ds:Ls(Gs(e)))};var Ds=Ls(Gs());function Ls(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function zs(e,t,n){return G(e,Ws),e.namespace=t,e.id=n,e}var js,Bs,Ws=[],Us=0;function Vs(e,t,n,r){var a=e.id,i=e.namespace;return pe(e,"function"===typeof n?function(e,o,s){e[i][a].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[i][a].tween.set(t,n)}))}function Hs(e){return null==e&&(e=""),function(){this.textContent=e}}function Gs(e){return null==e?"__transition__":"__transition_"+e+"__"}function qs(e,t,n,r,a){var i,o,s,u,l,c=e[n]||(e[n]={active:0,count:0}),f=c[r];function d(n){var a=c.active,d=c[a];for(var p in d&&(d.timer.c=null,d.timer.t=NaN,--c.count,delete c[a],d.event&&d.event.interrupt.call(e,e.__data__,d.index)),c)if(+p<r){var v=c[p];v.timer.c=null,v.timer.t=NaN,--c.count,delete c[p]}o.c=h,It((function(){return o.c&&h(n||1)&&(o.c=null,o.t=NaN),1}),0,i),c.active=r,f.event&&f.event.start.call(e,e.__data__,t),l=[],f.tween.forEach((function(n,r){(r=r.call(e,e.__data__,t))&&l.push(r)})),u=f.ease,s=f.duration}function h(a){for(var i=a/s,o=u(i),d=l.length;d>0;)l[--d].call(e,o);if(i>=1)return f.event&&f.event.end.call(e,e.__data__,t),--c.count?delete c[r]:delete e[n],1}f||(i=a.time,o=It((function(e){var t=f.delay;if(o.t=t+i,t<=e)return d(e-t);o.c=d}),0,i),f=c[r]={tween:new C,time:i,timer:o,delay:a.delay,duration:a.duration,ease:a.ease,index:t},a=null,++c.count)}Ws.call=$.call,Ws.empty=$.empty,Ws.node=$.node,Ws.size=$.size,i.transition=function(e,t){return e&&e.transition?js?e.transition(t):e:i.selection().transition(e)},i.transition.prototype=Ws,Ws.select=function(e){var t,n,r,a=this.id,i=this.namespace,o=[];e=Z(e);for(var s=-1,u=this.length;++s<u;){o.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),qs(n,c,i,a,r[i][a]),t.push(n)):t.push(null)}return zs(o,i,a)},Ws.selectAll=function(e){var t,n,r,a,i,o=this.id,s=this.namespace,u=[];e=Q(e);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],d=-1,h=f.length;++d<h;)if(r=f[d]){i=r[s][o],n=e.call(r,r.__data__,d,l),u.push(t=[]);for(var p=-1,v=n.length;++p<v;)(a=n[p])&&qs(a,p,s,o,i),t.push(a)}return zs(u,s,o)},Ws.filter=function(e){var t,n,r=[];"function"!==typeof e&&(e=de(e));for(var a=0,i=this.length;a<i;a++){r.push(t=[]);for(var o,s=0,u=(o=this[a]).length;s<u;s++)(n=o[s])&&e.call(n,n.__data__,s,a)&&t.push(n)}return zs(r,this.namespace,this.id)},Ws.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):pe(this,null==t?function(t){t[r][n].tween.remove(e)}:function(a){a[r][n].tween.set(e,t)})},Ws.attr=function(e,t){if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var n="transform"==e?Ai:oi,r=i.ns.qualify(e);function a(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}function s(e){return null==e?a:(e+="",function(){var t,a=this.getAttribute(r);return a!==e&&(t=n(a,e),function(e){this.setAttribute(r,t(e))})})}function u(e){return null==e?o:(e+="",function(){var t,a=this.getAttributeNS(r.space,r.local);return a!==e&&(t=n(a,e),function(e){this.setAttributeNS(r.space,r.local,t(e))})})}return Vs(this,"attr."+e,t,r.local?u:s)},Ws.attrTween=function(e,t){var n=i.ns.qualify(e);return this.tween("attr."+e,n.local?function(e,r){var a=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return a&&function(e){this.setAttributeNS(n.space,n.local,a(e))}}:function(e,r){var a=t.call(this,e,r,this.getAttribute(n));return a&&function(e){this.setAttribute(n,a(e))}})},Ws.style=function(e,t,n){var r=arguments.length;if(r<3){if("string"!==typeof e){for(n in r<2&&(t=""),e)this.style(n,e[n],t);return this}n=""}function a(){this.style.removeProperty(e)}function i(t){return null==t?a:(t+="",function(){var r,a=c(this).getComputedStyle(this,null).getPropertyValue(e);return a!==t&&(r=oi(a,t),function(t){this.style.setProperty(e,r(t),n)})})}return Vs(this,"style."+e,t,i)},Ws.styleTween=function(e,t,n){function r(r,a){var i=t.call(this,r,a,c(this).getComputedStyle(this,null).getPropertyValue(e));return i&&function(t){this.style.setProperty(e,i(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Ws.text=function(e){return Vs(this,"text",e,Hs)},Ws.remove=function(){var e=this.namespace;return this.each("end.transition",(function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)}))},Ws.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!==typeof e&&(e=i.ease.apply(i,arguments)),pe(this,(function(r){r[n][t].ease=e})))},Ws.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:pe(this,"function"===typeof e?function(r,a,i){r[n][t].delay=+e.call(r,r.__data__,a,i)}:(e=+e,function(r){r[n][t].delay=e}))},Ws.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:pe(this,"function"===typeof e?function(r,a,i){r[n][t].duration=Math.max(1,e.call(r,r.__data__,a,i))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Ws.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var a=Bs,o=js;try{js=n,pe(this,(function(t,a,i){Bs=t[r][n],e.call(t,t.__data__,a,i)}))}finally{Bs=a,js=o}}else pe(this,(function(a){var o=a[r][n];(o.event||(o.event=i.dispatch("start","end","interrupt"))).on(e,t)}));return this},Ws.transition=function(){for(var e,t,n,r=this.id,a=++Us,i=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(e=[]);for(var l,c=0,f=(l=this[s]).length;c<f;c++)(t=l[c])&&qs(t,c,i,a,{time:(n=t[i][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),e.push(t)}return zs(o,i,a)},i.svg.axis=function(){var e,t=i.scale.linear(),n=Xs,r=6,a=6,o=3,u=[10],l=null;function c(s){s.each((function(){var s,c=i.select(this),f=this.__chart__||t,d=this.__chart__=t.copy(),h=null==l?d.ticks?d.ticks.apply(d,u):d.domain():l,p=null==e?d.tickFormat?d.tickFormat.apply(d,u):P:e,v=c.selectAll(".tick").data(h,d),g=v.enter().insert("g",".domain").attr("class","tick").style("opacity",Ie),m=i.transition(v.exit()).style("opacity",Ie).remove(),y=i.transition(v.order()).style("opacity",1),b=Math.max(r,0)+o,x=Ao(d),k=c.selectAll(".domain").data([0]),w=(k.enter().append("path").attr("class","domain"),i.transition(k));g.append("line"),g.append("text");var S,_,C,E,A=g.select("line"),I=y.select("line"),T=v.select("text").text(p),R=g.select("text"),N=y.select("text"),M="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=Ks,S="x",C="y",_="x2",E="y2",T.attr("dy",M<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+M*a+"V0H"+x[1]+"V"+M*a)):(s=$s,S="y",C="x",_="y2",E="x2",T.attr("dy",".32em").style("text-anchor",M<0?"end":"start"),w.attr("d","M"+M*a+","+x[0]+"H0V"+x[1]+"H"+M*a)),A.attr(E,M*r),R.attr(C,M*b),I.attr(_,0).attr(E,M*r),N.attr(S,0).attr(C,M*b),d.rangeBand){var O=d,F=O.rangeBand()/2;f=d=function(e){return O(e)+F}}else f.rangeBand?f=d:m.call(s,d,f);g.call(s,f,d),y.call(s,d,d)}))}return c.scale=function(e){return arguments.length?(t=e,c):t},c.orient=function(e){return arguments.length?(n=e in Ys?e+"":Xs,c):n},c.ticks=function(){return arguments.length?(u=s(arguments),c):u},c.tickValues=function(e){return arguments.length?(l=e,c):l},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(e){var t=arguments.length;return t?(r=+e,a=+arguments[t-1],c):r},c.innerTickSize=function(e){return arguments.length?(r=+e,c):r},c.outerTickSize=function(e){return arguments.length?(a=+e,c):a},c.tickPadding=function(e){return arguments.length?(o=+e,c):o},c.tickSubdivide=function(){return arguments.length&&c},c};var Xs="bottom",Ys={top:1,right:1,bottom:1,left:1};function Ks(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"}))}function $s(e,t,n){e.attr("transform",(function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"}))}i.svg.brush=function(){var e,t,n=V(d,"brushstart","brush","brushend"),r=null,a=null,o=[0,0],s=[0,0],u=!0,l=!0,f=Qs[0];function d(e){e.each((function(){var e=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),t=e.selectAll(".background").data([0]);t.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(f,P);n.exit().remove(),n.enter().append("g").attr("class",(function(e){return"resize "+e})).style("cursor",(function(e){return Zs[e]})).append("rect").attr("x",(function(e){return/[ew]$/.test(e)?-3:null})).attr("y",(function(e){return/^[ns]/.test(e)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",d.empty()?"none":null);var o,s=i.transition(e),u=i.transition(t);r&&(o=Ao(r),u.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),a&&(o=Ao(a),u.attr("y",o[0]).attr("height",o[1]-o[0]),v(s)),h(s)}))}function h(e){e.selectAll(".resize").attr("transform",(function(e){return"translate("+o[+/e$/.test(e)]+","+s[+/^s/.test(e)]+")"}))}function p(e){e.select(".extent").attr("x",o[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function v(e){e.select(".extent").attr("y",s[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function g(){var f,g,m=this,y=i.select(i.event.target),b=n.of(m,arguments),x=i.select(m),k=y.datum(),w=!/^(n|s)$/.test(k)&&r,S=!/^(e|w)$/.test(k)&&a,_=y.classed("extent"),C=_e(m),E=i.mouse(m),A=i.select(c(m)).on("keydown.brush",R).on("keyup.brush",N);if(i.event.changedTouches?A.on("touchmove.brush",M).on("touchend.brush",P):A.on("mousemove.brush",M).on("mouseup.brush",P),x.interrupt().selectAll("*").interrupt(),_)E[0]=o[0]-E[0],E[1]=s[0]-E[1];else if(k){var I=+/w$/.test(k),T=+/^n/.test(k);g=[o[1-I]-E[0],s[1-T]-E[1]],E[0]=o[I],E[1]=s[T]}else i.event.altKey&&(f=E.slice());function R(){32==i.event.keyCode&&(_||(f=null,E[0]-=o[1],E[1]-=s[1],_=2),W())}function N(){32==i.event.keyCode&&2==_&&(E[0]+=o[1],E[1]+=s[1],_=0,W())}function M(){var e=i.mouse(m),t=!1;g&&(e[0]+=g[0],e[1]+=g[1]),_||(i.event.altKey?(f||(f=[(o[0]+o[1])/2,(s[0]+s[1])/2]),E[0]=o[+(e[0]<f[0])],E[1]=s[+(e[1]<f[1])]):f=null),w&&O(e,r,0)&&(p(x),t=!0),S&&O(e,a,1)&&(v(x),t=!0),t&&(h(x),b({type:"brush",mode:_?"move":"resize"}))}function O(n,r,a){var i,c,d=Ao(r),h=d[0],p=d[1],v=E[a],g=a?s:o,m=g[1]-g[0];if(_&&(h-=v,p-=m+v),i=(a?l:u)?Math.max(h,Math.min(p,n[a])):n[a],_?c=(i+=v)+m:(f&&(v=Math.max(h,Math.min(p,2*f[a]-i))),v<i?(c=i,i=v):c=v),g[0]!=i||g[1]!=c)return a?t=null:e=null,g[0]=i,g[1]=c,!0}function P(){M(),x.style("pointer-events","all").selectAll(".resize").style("display",d.empty()?"none":null),i.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),i.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),M()}return d.event=function(r){r.each((function(){var r=n.of(this,arguments),a={x:o,y:s,i:e,j:t},u=this.__chart__||a;this.__chart__=a,js?i.select(this).transition().each("start.brush",(function(){e=u.i,t=u.j,o=u.x,s=u.y,r({type:"brushstart"})})).tween("brush:brush",(function(){var n=si(o,a.x),i=si(s,a.y);return e=t=null,function(e){o=a.x=n(e),s=a.y=i(e),r({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=a.i,t=a.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})})):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))}))},d.x=function(e){return arguments.length?(f=Qs[!(r=e)<<1|!a],d):r},d.y=function(e){return arguments.length?(f=Qs[!r<<1|!(a=e)],d):a},d.clamp=function(e){return arguments.length?(r&&a?(u=!!e[0],l=!!e[1]):r?u=!!e:a&&(l=!!e),d):r&&a?[u,l]:r?u:a?l:null},d.extent=function(n){var i,u,l,c,f;return arguments.length?(r&&(i=n[0],u=n[1],a&&(i=i[0],u=u[0]),e=[i,u],r.invert&&(i=r(i),u=r(u)),u<i&&(f=i,i=u,u=f),i==o[0]&&u==o[1]||(o=[i,u])),a&&(l=n[0],c=n[1],r&&(l=l[1],c=c[1]),t=[l,c],a.invert&&(l=a(l),c=a(c)),c<l&&(f=l,l=c,c=f),l==s[0]&&c==s[1]||(s=[l,c])),d):(r&&(e?(i=e[0],u=e[1]):(i=o[0],u=o[1],r.invert&&(i=r.invert(i),u=r.invert(u)),u<i&&(f=i,i=u,u=f))),a&&(t?(l=t[0],c=t[1]):(l=s[0],c=s[1],a.invert&&(l=a.invert(l),c=a.invert(c)),c<l&&(f=l,l=c,c=f))),r&&a?[[i,l],[u,c]]:r?[i,u]:a&&[l,c])},d.clear=function(){return d.empty()||(o=[0,0],s=[0,0],e=t=null),d},d.empty=function(){return!!r&&o[0]==o[1]||!!a&&s[0]==s[1]},i.rebind(d,n,"on")};var Zs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Qs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Js=zt.format=pn.timeFormat,eu=Js.utc,tu=eu("%Y-%m-%dT%H:%M:%S.%LZ");function nu(e){return e.toISOString()}function ru(e,t,n){function r(t){return e(t)}function a(e,n){var r=(e[1]-e[0])/n,a=i.bisect(iu,r);return a==iu.length?[t.year,Do(e.map((function(e){return e/31536e6})),n)[2]]:a?t[r/iu[a-1]<iu[a]/r?a-1:a]:[uu,Do(e,n)[2]]}return r.invert=function(t){return au(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(au)},r.nice=function(e,t){var n=r.domain(),i=Eo(n),o=null==e?a(i,10):"number"===typeof e&&a(i,e);function s(n){return!isNaN(n)&&!e.range(n,au(+n+1),t).length}return o&&(e=o[0],t=o[1]),r.domain(To(n,t>1?{floor:function(t){for(;s(t=e.floor(t));)t=au(t-1);return t},ceil:function(t){for(;s(t=e.ceil(t));)t=au(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Eo(r.domain()),i=null==e?a(n,10):"number"===typeof e?a(n,e):!e.range&&[{range:e},t];return i&&(e=i[0],t=i[1]),e.range(n[0],au(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ru(e.copy(),t,n)},Po(r,e)}function au(e){return new Date(e)}Js.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?nu:tu,nu.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},nu.toString=tu.toString,zt.second=Ut((function(e){return new jt(1e3*Math.floor(e/1e3))}),(function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))}),(function(e){return e.getSeconds()})),zt.seconds=zt.second.range,zt.seconds.utc=zt.second.utc.range,zt.minute=Ut((function(e){return new jt(6e4*Math.floor(e/6e4))}),(function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))}),(function(e){return e.getMinutes()})),zt.minutes=zt.minute.range,zt.minutes.utc=zt.minute.utc.range,zt.hour=Ut((function(e){var t=e.getTimezoneOffset()/60;return new jt(36e5*(Math.floor(e/36e5-t)+t))}),(function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))}),(function(e){return e.getHours()})),zt.hours=zt.hour.range,zt.hours.utc=zt.hour.utc.range,zt.month=Ut((function(e){return(e=zt.day(e)).setDate(1),e}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e){return e.getMonth()})),zt.months=zt.month.range,zt.months.utc=zt.month.utc.range;var iu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ou=[[zt.second,1],[zt.second,5],[zt.second,15],[zt.second,30],[zt.minute,1],[zt.minute,5],[zt.minute,15],[zt.minute,30],[zt.hour,1],[zt.hour,3],[zt.hour,6],[zt.hour,12],[zt.day,1],[zt.day,2],[zt.week,1],[zt.month,1],[zt.month,3],[zt.year,1]],su=Js.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Jn]]),uu={range:function(e,t,n){return i.range(Math.ceil(e/n)*n,+t,n).map(au)},floor:P,ceil:P};ou.year=zt.year,zt.scale=function(){return ru(i.scale.linear(),ou,su)};var lu=ou.map((function(e){return[e[0].utc,e[1]]})),cu=eu.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Jn]]);function fu(e){return JSON.parse(e.responseText)}function du(e){var t=u.createRange();return t.selectNode(u.body),t.createContextualFragment(e.responseText)}lu.year=zt.year.utc,zt.scale.utc=function(){return ru(i.scale.linear(),lu,cu)},i.text=kt((function(e){return e.responseText})),i.json=function(e,t){return wt(e,"application/json",fu,t)},i.html=function(e,t){return wt(e,"text/html",du,t)},i.xml=kt((function(e){return e.responseXML})),this.d3=i,void 0===(a="function"===typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=a)}()},110:function(e,t,n){"use strict";var r=n(441),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=h(n);a&&a!==p&&e(t,a,r)}var o=c(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),g=0;g<o.length;++g){var m=o[g];if(!i[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var y=d(n,m);try{l(t,m,y)}catch(b){}}}}return t}},198:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",a=9007199254740991,i="[object Arguments]",o="[object Function]",s="[object Object]",u=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[i]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c[o]=c["[object Map]"]=c["[object Number]"]=c[s]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1;var f="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,h=f||d||Function("return this")(),p=t&&!t.nodeType&&t,v=p&&e&&!e.nodeType&&e,g=v&&v.exports===p,m=g&&f.process,y=function(){try{var e=v&&v.require&&v.require("util").types;return e||m&&m.binding&&m.binding("util")}catch(t){}}(),b=y&&y.isTypedArray;function x(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var k,w,S=Array.prototype,_=Function.prototype,C=Object.prototype,E=h["__core-js_shared__"],A=_.toString,I=C.hasOwnProperty,T=function(){var e=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),R=C.toString,N=A.call(Object),M=RegExp("^"+A.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=g?h.Buffer:void 0,P=h.Symbol,F=h.Uint8Array,D=O?O.allocUnsafe:void 0,L=(k=Object.getPrototypeOf,w=Object,function(e){return k(w(e))}),z=Object.create,j=C.propertyIsEnumerable,B=S.splice,W=P?P.toStringTag:void 0,U=function(){try{var e=pe(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),V=O?O.isBuffer:void 0,H=Math.max,G=Date.now,q=pe(h,"Map"),X=pe(Object,"create"),Y=function(){function e(){}return function(t){if(!Ee(t))return{};if(z)return z(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function K(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Q(e){var t=this.__data__=new $(e);this.size=t.size}function J(e,t){var n=ke(e),r=!n&&xe(e),a=!n&&!r&&Se(e),i=!n&&!r&&!a&&Ie(e),o=n||r||a||i,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var l in e)!t&&!I.call(e,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ve(l,u))||s.push(l);return s}function ee(e,t,n){(void 0!==n&&!be(e[t],n)||void 0===n&&!(t in e))&&re(e,t,n)}function te(e,t,n){var r=e[t];I.call(e,t)&&be(r,n)&&(void 0!==n||t in e)||re(e,t,n)}function ne(e,t){for(var n=e.length;n--;)if(be(e[n][0],t))return n;return-1}function re(e,t,n){"__proto__"==t&&U?U(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}K.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},K.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},K.prototype.get=function(e){var t=this.__data__;if(X){var n=t[e];return n===r?void 0:n}return I.call(t,e)?t[e]:void 0},K.prototype.has=function(e){var t=this.__data__;return X?void 0!==t[e]:I.call(t,e)},K.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=X&&void 0===t?r:t,this},$.prototype.clear=function(){this.__data__=[],this.size=0},$.prototype.delete=function(e){var t=this.__data__,n=ne(t,e);return!(n<0)&&(n==t.length-1?t.pop():B.call(t,n,1),--this.size,!0)},$.prototype.get=function(e){var t=this.__data__,n=ne(t,e);return n<0?void 0:t[n][1]},$.prototype.has=function(e){return ne(this.__data__,e)>-1},$.prototype.set=function(e,t){var n=this.__data__,r=ne(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Z.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(q||$),string:new K}},Z.prototype.delete=function(e){var t=he(this,e).delete(e);return this.size-=t?1:0,t},Z.prototype.get=function(e){return he(this,e).get(e)},Z.prototype.has=function(e){return he(this,e).has(e)},Z.prototype.set=function(e,t){var n=he(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Q.prototype.clear=function(){this.__data__=new $,this.size=0},Q.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Q.prototype.get=function(e){return this.__data__.get(e)},Q.prototype.has=function(e){return this.__data__.has(e)},Q.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $){var r=n.__data__;if(!q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Z(r)}return n.set(e,t),this.size=n.size,this};var ae,ie=function(e,t,n){for(var r=-1,a=Object(e),i=n(e),o=i.length;o--;){var s=i[ae?o:++r];if(!1===t(a[s],s,a))break}return e};function oe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":W&&W in Object(e)?function(e){var t=I.call(e,W),n=e[W];try{e[W]=void 0;var r=!0}catch(i){}var a=R.call(e);r&&(t?e[W]=n:delete e[W]);return a}(e):function(e){return R.call(e)}(e)}function se(e){return Ae(e)&&oe(e)==i}function ue(e){return!(!Ee(e)||function(e){return!!T&&T in e}(e))&&(_e(e)?M:u).test(function(e){if(null!=e){try{return A.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function le(e){if(!Ee(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ge(e),n=[];for(var r in e)("constructor"!=r||!t&&I.call(e,r))&&n.push(r);return n}function ce(e,t,n,r,a){e!==t&&ie(t,(function(i,o){if(a||(a=new Q),Ee(i))!function(e,t,n,r,a,i,o){var u=me(e,n),l=me(t,n),c=o.get(l);if(c)return void ee(e,n,c);var f=i?i(u,l,n+"",e,t,o):void 0,d=void 0===f;if(d){var h=ke(l),p=!h&&Se(l),v=!h&&!p&&Ie(l);f=l,h||p||v?ke(u)?f=u:Ae(g=u)&&we(g)?f=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(u):p?(d=!1,f=function(e,t){if(t)return e.slice();var n=e.length,r=D?D(n):new e.constructor(n);return e.copy(r),r}(l,!0)):v?(d=!1,f=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new F(t).set(new F(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(l,!0)):f=[]:function(e){if(!Ae(e)||oe(e)!=s)return!1;var t=L(e);if(null===t)return!0;var n=I.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&A.call(n)==N}(l)||xe(l)?(f=u,xe(u)?f=function(e){return function(e,t,n,r){var a=!n;n||(n={});var i=-1,o=t.length;for(;++i<o;){var s=t[i],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),a?re(n,s,u):te(n,s,u)}return n}(e,Te(e))}(u):Ee(u)&&!_e(u)||(f=function(e){return"function"!=typeof e.constructor||ge(e)?{}:Y(L(e))}(l))):d=!1}var g;d&&(o.set(l,f),a(f,l,r,i,o),o.delete(l));ee(e,n,f)}(e,t,o,n,ce,r,a);else{var u=r?r(me(e,o),i,o+"",e,t,a):void 0;void 0===u&&(u=i),ee(e,o,u)}}),Te)}function fe(e,t){return ye(function(e,t,n){return t=H(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=H(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=n(o),x(e,this,s)}}(e,t,Me),e+"")}var de=U?function(e,t){return U(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Me;function he(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function pe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ue(n)?n:void 0}function ve(e,t){var n=typeof e;return!!(t=null==t?a:t)&&("number"==n||"symbol"!=n&&l.test(e))&&e>-1&&e%1==0&&e<t}function ge(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||C)}function me(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var ye=function(e){var t=0,n=0;return function(){var r=G(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(de);function be(e,t){return e===t||e!==e&&t!==t}var xe=se(function(){return arguments}())?se:function(e){return Ae(e)&&I.call(e,"callee")&&!j.call(e,"callee")},ke=Array.isArray;function we(e){return null!=e&&Ce(e.length)&&!_e(e)}var Se=V||function(){return!1};function _e(e){if(!Ee(e))return!1;var t=oe(e);return t==o||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ce(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Ee(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ae(e){return null!=e&&"object"==typeof e}var Ie=b?function(e){return function(t){return e(t)}}(b):function(e){return Ae(e)&&Ce(e.length)&&!!c[oe(e)]};function Te(e){return we(e)?J(e,!0):le(e)}var Re,Ne=(Re=function(e,t,n,r){ce(e,t,n,r)},fe((function(e,t){var n=-1,r=t.length,a=r>1?t[r-1]:void 0,i=r>2?t[2]:void 0;for(a=Re.length>3&&"function"==typeof a?(r--,a):void 0,i&&function(e,t,n){if(!Ee(n))return!1;var r=typeof t;return!!("number"==r?we(n)&&ve(t,n.length):"string"==r&&t in n)&&be(n[t],e)}(t[0],t[1],i)&&(a=r<3?void 0:a,r=1),e=Object(e);++n<r;){var o=t[n];o&&Re(e,o,n,a)}return e})));function Me(e){return e}e.exports=Ne},987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(C){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?m:g;if(t){if(e<0)return m;if(e>=h)return w}else{if(e<=-p)return S;if(e+1>=p)return k}return e<0?s(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var l=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=s(l(n,8)),i=g,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),f=parseInt(e.substring(o,o+u),n);if(u<8){var d=s(l(n,u));i=i.mul(d).add(s(f))}else i=(i=i.mul(a)).add(s(f))}return i.unsigned=t,i}function f(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?c(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=f;var d=4294967296,h=d*d,p=h/2,v=o(1<<24),g=o(0);n.ZERO=g;var m=o(0,!0);n.UZERO=m;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var k=u(-1,2147483647,!1);n.MAX_VALUE=k;var w=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var _=n.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},_.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(l(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),c=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},_.isZero=function(){return 0===this.high&&0===this.low},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return 1===(1&this.low)},_.isEven=function(){return 0===(1&this.low)},_.equals=function(e){return r(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},_.eq=_.equals,_.notEquals=function(e){return!this.eq(e)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(e){return this.comp(e)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(e){return this.comp(e)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(e){return this.comp(e)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(e){return this.comp(e)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(e){if(r(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},_.neg=_.negate,_.add=function(e){r(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,l=e.low>>>16,c=0,d=0,h=0,p=0;return h+=(p+=i+(65535&e.low))>>>16,d+=(h+=a+l)>>>16,c+=(d+=n+s)>>>16,c+=t+o,u((h&=65535)<<16|(p&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},_.subtract=function(e){return r(e)||(e=f(e)),this.add(e.neg())},_.sub=_.subtract,_.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=f(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,h=65535&e.low,p=0,m=0,y=0,b=0;return y+=(b+=o*h)>>>16,m+=(y+=i*h)>>>16,y&=65535,m+=(y+=o*d)>>>16,p+=(m+=a*h)>>>16,m&=65535,p+=(m+=i*d)>>>16,m&=65535,p+=(m+=o*c)>>>16,p+=n*h+a*d+i*c+o*l,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},_.mul=_.multiply,_.divide=function(e){if(r(e)||(e=f(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?m:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return m;if(e.gt(this.shru(1)))return b;i=m}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?m:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),c=o<=48?1:l(2,o-48),d=s(n),h=d.mul(e);h.isNegative()||h.gt(a);)h=(d=s(n-=c,this.unsigned)).mul(e);d.isZero()&&(d=y),i=i.add(d),a=a.sub(h)}return i},_.div=_.divide,_.modulo=function(e){return r(e)||(e=f(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return u(~this.low,~this.high,this.unsigned)},_.and=function(e){return r(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},_.or=function(e){return r(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},_.xor=function(e){return r(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},_.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},_.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},_.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},560:function(module,__unused_webpack_exports,__webpack_require__){var factory;factory=function(){return function(){var __webpack_modules__=[,function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.LinkTarget=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.addLinkAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,r=t.target,a=t.rel,i=t.enabled,s=void 0===i||i;(0,o.assert)(n&&"string"===typeof n,'addLinkAttributes: A valid "url" parameter must provided.');var u=(0,o.removeNullCharacters)(n);s?e.href=e.title=u:(e.href="",e.title="Disabled: ".concat(u),e.onclick=function(){return!1});var l="";switch(r){case R.NONE:break;case R.SELF:l="_self";break;case R.BLANK:l="_blank";break;case R.PARENT:l="_parent";break;case R.TOP:l="_top"}e.target=l,e.rel="string"===typeof a?a:x},t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.getFilenameFromUrl=function(e){var t=e.indexOf("#"),n=e.indexOf("?"),r=Math.min(t>0?t:e.length,n>0?n:e.length);return e.substring(e.lastIndexOf("/",r)+1,r)},t.getPdfFilenameFromUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(N(e))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;var n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=n.exec(e),i=r.exec(a[1])||r.exec(a[2])||r.exec(a[3]);if(i&&(i=i[0]).includes("%"))try{i=r.exec(decodeURIComponent(i))[0]}catch(s){}return i||t},t.getXfaPageViewport=function(e,t){var n=t.scale,r=void 0===n?1:n,a=t.rotation,i=void 0===a?0:a,o=e.attributes.style,s=o.width,u=o.height,l=[0,0,parseInt(s),parseInt(u)];return new I({viewBox:l,scale:r,rotation:i})},t.isDataScheme=N,t.isPdfFile=function(e){return"string"===typeof e&&/\.pdf$/i.test(e)},t.isValidFetchUrl=P,t.loadScript=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n,r){var a=document.createElement("script");a.src=e,a.onload=function(e){t&&a.remove(),n(e)},a.onerror=function(){r(new Error("Cannot load script at: ".concat(a.src)))},(document.head||document.documentElement).appendChild(a)}))};var a,i=(a=n(2))&&a.__esModule?a:{default:a},o=n(4),s=n(135);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){c(i,r,a,o,s,"next",e)}function s(e){c(i,r,a,o,s,"throw",e)}o(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var x="noopener noreferrer nofollow",k={CSS:96,PDF:72,get PDF_TO_CSS_UNITS(){return(0,o.shadow)(this,"PDF_TO_CSS_UNITS",this.CSS/this.PDF)}};t.PixelsPerInch=k;var w=function(e){v(n,e);var t=m(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r.ownerDocument,i=void 0===a?globalThis.document:a;return d(this,n),(e=t.call(this))._document=i,e}return p(n,[{key:"_createCanvas",value:function(e,t){var n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}]),n}(s.BaseCanvasFactory);function S(e){return _.apply(this,arguments)}function _(){return _=f(i.default.mark((function e(t){var n,r,a=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],!P(t,document.baseURI)){e.next=21;break}return e.next=4,fetch(t);case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:if(!n){e.next=15;break}return e.t1=Uint8Array,e.next=11,r.arrayBuffer();case 11:e.t2=e.sent,e.t0=new e.t1(e.t2),e.next=20;break;case 15:return e.t3=o.stringToBytes,e.next=18,r.text();case 18:e.t4=e.sent,e.t0=(0,e.t3)(e.t4);case 20:return e.abrupt("return",e.t0);case 21:return e.abrupt("return",new Promise((function(e,r){var a=new XMLHttpRequest;a.open("GET",t,!0),n&&(a.responseType="arraybuffer"),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE){var t;if((200===a.status||0===a.status)&&(n&&a.response?t=new Uint8Array(a.response):!n&&a.responseText&&(t=(0,o.stringToBytes)(a.responseText)),t))return void e(t);r(new Error(a.statusText))}},a.send(null)})));case 22:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}t.DOMCanvasFactory=w;var C=function(e){v(n,e);var t=m(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_fetchData",value:function(e,t){return S(e,this.isCompressed).then((function(e){return{cMapData:e,compressionType:t}}))}}]),n}(s.BaseCMapReaderFactory);t.DOMCMapReaderFactory=C;var E=function(e){v(n,e);var t=m(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_fetchData",value:function(e){return S(e,!0)}}]),n}(s.BaseStandardFontDataFactory);t.DOMStandardFontDataFactory=E;var A=function(e){v(n,e);var t=m(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_createSVG",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}}]),n}(s.BaseSVGFactory);t.DOMSVGFactory=A;var I=function(){function e(t){var n=t.viewBox,r=t.scale,a=t.rotation,i=t.offsetX,o=void 0===i?0:i,s=t.offsetY,u=void 0===s?0:s,l=t.dontFlip,c=void 0!==l&&l;d(this,e),this.viewBox=n,this.scale=r,this.rotation=a,this.offsetX=o,this.offsetY=u;var f,h,p,v,g,m,y,b,x=(n[2]+n[0])/2,k=(n[3]+n[1])/2;switch((a%=360)<0&&(a+=360),a){case 180:f=-1,h=0,p=0,v=1;break;case 90:f=0,h=1,p=1,v=0;break;case 270:f=0,h=-1,p=-1,v=0;break;case 0:f=1,h=0,p=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(p=-p,v=-v),0===f?(g=Math.abs(k-n[1])*r+o,m=Math.abs(x-n[0])*r+u,y=Math.abs(n[3]-n[1])*r,b=Math.abs(n[2]-n[0])*r):(g=Math.abs(x-n[0])*r+o,m=Math.abs(k-n[1])*r+u,y=Math.abs(n[2]-n[0])*r,b=Math.abs(n[3]-n[1])*r),this.transform=[f*r,h*r,p*r,v*r,g-f*r*x-p*r*k,m-h*r*x-v*r*k],this.width=y,this.height=b}return p(e,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.scale,r=void 0===n?this.scale:n,a=t.rotation,i=void 0===a?this.rotation:a,o=t.offsetX,s=void 0===o?this.offsetX:o,u=t.offsetY,l=void 0===u?this.offsetY:u,c=t.dontFlip,f=void 0!==c&&c;return new e({viewBox:this.viewBox.slice(),scale:r,rotation:i,offsetX:s,offsetY:l,dontFlip:f})}},{key:"convertToViewportPoint",value:function(e,t){return o.Util.applyTransform([e,t],this.transform)}},{key:"convertToViewportRectangle",value:function(e){var t=o.Util.applyTransform([e[0],e[1]],this.transform),n=o.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}},{key:"convertToPdfPoint",value:function(e,t){return o.Util.applyInverseTransform([e,t],this.transform)}}]),e}();t.PageViewport=I;var T=function(e){v(n,e);var t=m(n);function n(e,r){var a;return d(this,n),(a=t.call(this,e,"RenderingCancelledException")).type=r,a}return n}(o.BaseException);t.RenderingCancelledException=T;var R={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function N(e){for(var t=e.length,n=0;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}t.LinkTarget=R;var M,O=function(){function e(){d(this,e),this.started=Object.create(null),this.times=[]}return p(e,[{key:"time",value:function(e){e in this.started&&(0,o.warn)("Timer is already running for ".concat(e)),this.started[e]=Date.now()}},{key:"timeEnd",value:function(e){e in this.started||(0,o.warn)("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}},{key:"toString",value:function(){var e,t=[],n=0,r=u(this.times);try{for(r.s();!(e=r.n()).done;){var a=e.value.name;a.length>n&&(n=a.length)}}catch(c){r.e(c)}finally{r.f()}var i,o=u(this.times);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.end-s.start;t.push("".concat(s.name.padEnd(n)," ").concat(l,"ms\n"))}}catch(c){o.e(c)}finally{o.f()}return t.join("")}}]),e}();function P(e,t){try{var n=(t?new URL(e,t):new URL(e)).protocol;return"http:"===n||"https:"===n}catch(r){return!1}}t.StatTimer=O;var F=function(){function e(){d(this,e)}return p(e,null,[{key:"toDateObject",value:function(e){if(!e||!(0,o.isString)(e))return null;M||(M=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var t=M.exec(e);if(!t)return null;var n=parseInt(t[1],10),r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;var a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;var i=parseInt(t[4],10);i=i>=0&&i<=23?i:0;var s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;var u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;var l=t[7]||"Z",c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;var f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,"-"===l?(i+=c,s+=f):"+"===l&&(i-=c,s-=f),new Date(Date.UTC(n,r,a,i,s,u))}}]),e}();t.PDFDateString=F},function(e,t,n){"use strict";e.exports=n(3)},function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var a=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(M){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new T(r||[]);return i._invoke=function(e,t,n){var r=d;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===a)throw i;return N()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=f(e,t,n);if("normal"===u.type){if(r=n.done?v:h,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=v,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(M){return{type:"throw",arg:M}}}e.wrap=c;var d="suspendedStart",h="suspendedYield",p="executing",v="completed",g={};function m(){}function y(){}function b(){}var x={};l(x,o,(function(){return this}));var k=Object.getPrototypeOf,w=k&&k(k(R([])));w&&w!==n&&a.call(w,o)&&(x=w);var S=b.prototype=m.prototype=Object.create(x);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,s,u){var l=f(e[i],e,o);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===r(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,u)}))}u(l.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var a=f(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function R(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:N}}function N(){return{value:t,done:!0}}return y.prototype=b,l(S,"constructor",b),l(b,"constructor",y),y.displayName=l(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},_(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new C(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(S),l(S,u,"Generator"),l(S,o,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;I(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}("object"===r(e=n.nmd(e))?e.exports:{});try{regeneratorRuntime=a}catch(i){"object"===("undefined"===typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.IsLittleEndianCached=t.IsEvalSupportedCached=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.arrayByteLength=M,t.arraysToBytes=function(e){var t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];for(var n=0,r=0;r<t;r++)n+=M(e[r]);for(var a=0,i=new Uint8Array(n),o=0;o<t;o++){var s=e[o];s instanceof Uint8Array||(s="string"===typeof s?N(s):new Uint8Array(s));var u=s.byteLength;i.set(s,a),a+=u}return i},t.assert=y,t.bytesToString=function(e){y(null!==e&&"object"===s(e)&&void 0!==e.length,"Invalid argument for bytesToString");var t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);for(var r=[],a=0;a<t;a+=n){var i=Math.min(a+n,t),o=e.subarray(a,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")},t.createObjectURL=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!==typeof Blob&&!n)return URL.createObjectURL(new Blob([e],{type:t}));for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="data:".concat(t,";base64,"),i=0,o=e.length;i<o;i+=3){var s=255&e[i],u=255&e[i+1],l=255&e[i+2],c=s>>2,f=(3&s)<<4|u>>4,d=i+1<o?(15&u)<<2|l>>6:64,h=i+2<o?63&l:64;a+=r[c]+r[f]+r[d]+r[h]}return a},t.createPromiseCapability=function(){var e=Object.create(null),t=!1;return Object.defineProperty(e,"settled",{get:function(){return t}}),e.promise=new Promise((function(n,r){e.resolve=function(e){t=!0,n(e)},e.reject=function(e){t=!0,r(e)}})),e},t.createValidAbsoluteUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){var r=e.match(/\./g);r&&r.length>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=z(e)}catch(i){}}var a=t?new URL(e,t):new URL(e);if(b(a))return a}catch(i){}return null},t.escapeString=function(e){return e.replace(/([()\\\n\r])/g,(function(e){return"\n"===e?"\\n":"\r"===e?"\\r":"\\".concat(e)}))},t.getModificationDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")},t.getVerbosityLevel=function(){return v},t.info=function(e){v>=p.INFOS&&console.log("Info: ".concat(e))},t.isArrayBuffer=function(e){return"object"===s(e)&&null!==e&&void 0!==e.byteLength},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},t.isAscii=function(e){return/^[\x00-\x7F]*$/.test(e)},t.isBool=function(e){return"boolean"===typeof e},t.isNum=function(e){return"number"===typeof e},t.isSameOrigin=function(e,t){var n;try{if(!(n=new URL(e)).origin||"null"===n.origin)return!1}catch(a){return!1}var r=new URL(t,n);return n.origin===r.origin},t.isString=function(e){return"string"===typeof e},t.objectFromMap=function(e){var t,n,r,a=Object.create(null),o=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}(e);try{for(o.s();!(t=o.n()).done;){var s=(n=t.value,r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(n,r)||i(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],l=s[1];a[u]=l}}catch(c){o.e(c)}finally{o.f()}return a},t.objectSize=function(e){return Object.keys(e).length},t.removeNullCharacters=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"!==typeof e?(g("The argument for removeNullCharacters must be a string."),e):(t&&(e=e.replace(R," ")),e.replace(T,""))},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(v=e)},t.shadow=x,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=N,t.stringToPDFString=function(e){var t=e.length,n=[];if("\xfe"===e[0]&&"\xff"===e[1])for(var r=2;r<t;r+=2)n.push(String.fromCharCode(e.charCodeAt(r)<<8|e.charCodeAt(r+1)));else if("\xff"===e[0]&&"\xfe"===e[1])for(var a=2;a<t;a+=2)n.push(String.fromCharCode(e.charCodeAt(a+1)<<8|e.charCodeAt(a)));else for(var i=0;i<t;++i){var o=L[e.charCodeAt(i)];n.push(o?String.fromCharCode(o):e.charAt(i))}return n.join("")},t.stringToUTF16BEString=function(e){for(var t=["\xfe\xff"],n=0,r=e.length;n<r;n++){var a=e.charCodeAt(n);t.push(String.fromCharCode(a>>8&255),String.fromCharCode(255&a))}return t.join("")},t.stringToUTF8String=z,t.unreachable=m,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=g,n(5),t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"},t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};var p={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=p,t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var v=p.WARNINGS;function g(e){v>=p.WARNINGS&&console.log("Warning: ".concat(e))}function m(e){throw new Error(e)}function y(e,t){e||m(t)}function b(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function x(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}var k=function(){function e(t,n){this.constructor===e&&m("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();t.BaseException=k;var w=function(e){l(n,e);var t=f(n);function n(e,r){var a;return u(this,n),(a=t.call(this,e,"PasswordException")).code=r,a}return n}(k);t.PasswordException=w;var S=function(e){l(n,e);var t=f(n);function n(e,r){var a;return u(this,n),(a=t.call(this,e,"UnknownErrorException")).details=r,a}return n}(k);t.UnknownErrorException=S;var _=function(e){l(n,e);var t=f(n);function n(e){return u(this,n),t.call(this,e,"InvalidPDFException")}return n}(k);t.InvalidPDFException=_;var C=function(e){l(n,e);var t=f(n);function n(e){return u(this,n),t.call(this,e,"MissingPDFException")}return n}(k);t.MissingPDFException=C;var E=function(e){l(n,e);var t=f(n);function n(e,r){var a;return u(this,n),(a=t.call(this,e,"UnexpectedResponseException")).status=r,a}return n}(k);t.UnexpectedResponseException=E;var A=function(e){l(n,e);var t=f(n);function n(e){return u(this,n),t.call(this,e,"FormatError")}return n}(k);t.FormatError=A;var I=function(e){l(n,e);var t=f(n);function n(e){return u(this,n),t.call(this,e,"AbortException")}return n}(k);t.AbortException=I;var T=/\x00+/g,R=/[\x01-\x1F]/g;function N(e){y("string"===typeof e,"Invalid argument for stringToBytes");for(var t=e.length,n=new Uint8Array(t),r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}function M(e){return void 0!==e.length?e.length:(y(void 0!==e.byteLength,"arrayByteLength - invalid argument."),e.byteLength)}var O={get value(){return x(this,"value",function(){var e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}};t.IsLittleEndianCached=O;var P={get value(){return x(this,"value",function(){try{return new Function(""),!0}catch(e){return!1}}())}};t.IsEvalSupportedCached=P;var F=a(Array(256).keys()).map((function(e){return e.toString(16).padStart(2,"0")})),D=function(){function e(){u(this,e)}var t,n,i;return t=e,i=[{key:"makeHexColor",value:function(e,t,n){return"#".concat(F[e]).concat(F[t]).concat(F[n])}},{key:"transform",value:function(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}},{key:"applyTransform",value:function(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}},{key:"applyInverseTransform",value:function(e,t){var n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}},{key:"getAxialAlignedBoundingBox",value:function(t,n){var r=e.applyTransform(t,n),a=e.applyTransform(t.slice(2,4),n),i=e.applyTransform([t[0],t[3]],n),o=e.applyTransform([t[2],t[1]],n);return[Math.min(r[0],a[0],i[0],o[0]),Math.min(r[1],a[1],i[1],o[1]),Math.max(r[0],a[0],i[0],o[0]),Math.max(r[1],a[1],i[1],o[1])]}},{key:"inverseTransform",value:function(e){var t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}},{key:"apply3dTransform",value:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}},{key:"singularValueDecompose2dScale",value:function(e){var t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],i=e[2]*t[1]+e[3]*t[3],o=(n+i)/2,s=Math.sqrt(Math.pow(n+i,2)-4*(n*i-a*r))/2,u=o+s||1,l=o-s||1;return[Math.sqrt(u),Math.sqrt(l)]}},{key:"normalizeRect",value:function(e){var t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}},{key:"intersect",value:function(t,n){function r(e,t){return e-t}var a=[t[0],t[2],n[0],n[2]].sort(r),i=[t[1],t[3],n[1],n[3]].sort(r),o=[];return t=e.normalizeRect(t),n=e.normalizeRect(n),a[0]===t[0]&&a[1]===n[0]||a[0]===n[0]&&a[1]===t[0]?(o[0]=a[1],o[2]=a[2],i[0]===t[1]&&i[1]===n[1]||i[0]===n[1]&&i[1]===t[1]?(o[1]=i[1],o[3]=i[2],o):null):null}},{key:"bezierBoundingBox",value:function(e,t,n,r,i,o,s,u){for(var l,c,f,d,h,p,v,g,m=[],y=[[],[]],b=0;b<2;++b)if(0===b?(c=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*s,f=3*n-3*e):(c=6*t-12*r+6*o,l=-3*t+9*r-9*o+3*u,f=3*r-3*t),Math.abs(l)<1e-12){if(Math.abs(c)<1e-12)continue;0<(d=-f/c)&&d<1&&m.push(d)}else v=c*c-4*f*l,g=Math.sqrt(v),v<0||(0<(h=(-c+g)/(2*l))&&h<1&&m.push(h),0<(p=(-c-g)/(2*l))&&p<1&&m.push(p));for(var x,k=m.length,w=k;k--;)x=1-(d=m[k]),y[0][k]=x*x*x*e+3*x*x*d*n+3*x*d*d*i+d*d*d*s,y[1][k]=x*x*x*t+3*x*x*d*r+3*x*d*d*o+d*d*d*u;return y[0][w]=e,y[1][w]=t,y[0][w+1]=s,y[1][w+1]=u,y[0].length=y[1].length=w+2,[Math.min.apply(Math,a(y[0])),Math.min.apply(Math,a(y[1])),Math.max.apply(Math,a(y[0])),Math.max.apply(Math,a(y[1]))]}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.Util=D;var L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function z(e){return decodeURIComponent(escape(e))}},function(e,t,n){"use strict";var r=n(6);"undefined"!==typeof globalThis&&globalThis._pdfjsCompatibilityChecked||("undefined"!==typeof globalThis&&globalThis.Math===Math||(globalThis=n(7)),globalThis._pdfjsCompatibilityChecked=!0,!globalThis.btoa&&r.isNodeJS&&(globalThis.btoa=function(e){return Buffer.from(e,"binary").toString("base64")}),!globalThis.atob&&r.isNodeJS&&(globalThis.atob=function(e){return Buffer.from(e,"base64").toString("binary")}),!globalThis.DOMMatrix&&r.isNodeJS&&(globalThis.DOMMatrix=n(69)),Object.fromEntries||n(70),globalThis.Promise.allSettled||(globalThis.Promise=n(97)),!globalThis.ReadableStream&&r.isNodeJS&&(globalThis.ReadableStream=n(134).ReadableStream))},function(e,t){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;var r="object"===("undefined"===typeof process?"undefined":n(process))&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=r},function(e,t,n){n(8),e.exports=n(10)},function(e,t,n){n(9)({global:!0},{globalThis:n(10)})},function(e,t,n){var r=n(10),a=n(11).f,i=n(47),o=n(50),s=n(41),u=n(57),l=n(68);e.exports=function(e,t){var n,c,f,d,h,p=e.target,v=e.global,g=e.stat;if(n=v?r:g?r[p]||s(p,{}):(r[p]||{}).prototype)for(c in t){if(d=t[c],f=e.noTargetGet?(h=a(n,c))&&h.value:n[c],!l(v?c:p+(g?".":"#")+c,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;u(d,f)}(e.sham||f&&f.sham)&&i(d,"sham",!0),o(n,c,d,e)}}},function(e){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof __webpack_require__.g&&__webpack_require__.g)||function(){return this}()||Function("return this")()},function(e,t,n){var r=n(12),a=n(14),i=n(15),o=n(16),s=n(17),u=n(22),l=n(42),c=n(45),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=s(e),t=u(t),c)try{return f(e,t)}catch(n){}if(l(e,t))return o(!a(i.f,e,t),e[t])}},function(e,t,n){var r=n(13);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e){var t=Function.prototype.call;e.exports=t.bind?t.bind(t):function(){return t.apply(t,arguments)}},function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(18),a=n(21);e.exports=function(e){return r(a(e))}},function(e,t,n){var r=n(10),a=n(19),i=n(13),o=n(20),s=r.Object,u=a("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?u(e,""):s(e)}:s},function(e){var t=Function.prototype,n=t.bind,r=t.call,a=n&&n.bind(r);e.exports=n?function(e){return e&&a(r,e)}:function(e){return e&&function(){return r.apply(e,arguments)}}},function(e,t,n){var r=n(19),a=r({}.toString),i=r("".slice);e.exports=function(e){return i(a(e),8,-1)}},function(e,t,n){var r=n(10).TypeError;e.exports=function(e){if(void 0==e)throw r("Can't call method on "+e);return e}},function(e,t,n){var r=n(23),a=n(26);e.exports=function(e){var t=r(e,"string");return a(t)?t:t+""}},function(e,t,n){var r=n(10),a=n(14),i=n(24),o=n(26),s=n(33),u=n(36),l=n(37),c=r.TypeError,f=l("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,r=s(e,f);if(r){if(void 0===t&&(t="default"),n=a(r,e,t),!i(n)||o(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},function(e,t,n){var r=n(25);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},function(e){e.exports=function(e){return"function"==typeof e}},function(e,t,n){var r=n(10),a=n(27),i=n(25),o=n(28),s=n(29),u=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=a("Symbol");return i(t)&&o(t.prototype,u(e))}},function(e,t,n){var r=n(10),a=n(25),i=function(e){return a(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},function(e,t,n){var r=n(19);e.exports=r({}.isPrototypeOf)},function(e,t,n){var r=n(30);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(31),a=n(13);e.exports=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(e,t,n){var r,a,i=n(10),o=n(32),s=i.process,u=i.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(a=(r=c.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(a=+r[1]),e.exports=a},function(e,t,n){var r=n(27);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(34);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},function(e,t,n){var r=n(10),a=n(25),i=n(35),o=r.TypeError;e.exports=function(e){if(a(e))return e;throw o(i(e)+" is not a function")}},function(e,t,n){var r=n(10).String;e.exports=function(e){try{return r(e)}catch(t){return"Object"}}},function(e,t,n){var r=n(10),a=n(14),i=n(25),o=n(24),s=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&i(n=e.toString)&&!o(r=a(n,e)))return r;if(i(n=e.valueOf)&&!o(r=a(n,e)))return r;if("string"!==t&&i(n=e.toString)&&!o(r=a(n,e)))return r;throw s("Can't convert object to primitive value")}},function(e,t,n){var r=n(10),a=n(38),i=n(42),o=n(44),s=n(30),u=n(29),l=a("wks"),c=r.Symbol,f=c&&c.for,d=u?c:c&&c.withoutSetter||o;e.exports=function(e){if(!i(l,e)||!s&&"string"!=typeof l[e]){var t="Symbol."+e;s&&i(c,e)?l[e]=c[e]:l[e]=u&&f?f(t):d(t)}return l[e]}},function(e,t,n){var r=n(39),a=n(40);(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.3",mode:r?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},function(e){e.exports=!1},function(e,t,n){var r=n(10),a=n(41),i="__core-js_shared__",o=r[i]||a(i,{});e.exports=o},function(e,t,n){var r=n(10),a=Object.defineProperty;e.exports=function(e,t){try{a(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(19),a=n(43),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(a(e),t)}},function(e,t,n){var r=n(10),a=n(21),i=r.Object;e.exports=function(e){return i(a(e))}},function(e,t,n){var r=n(19),a=0,i=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++a+i,36)}},function(e,t,n){var r=n(12),a=n(13),i=n(46);e.exports=!r&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(10),a=n(24),i=r.document,o=a(i)&&a(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(12),a=n(48),i=n(16);e.exports=r?function(e,t,n){return a.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(10),a=n(12),i=n(45),o=n(49),s=n(22),u=r.TypeError,l=Object.defineProperty;t.f=a?l:function(e,t,n){if(o(e),t=s(t),o(n),i)try{return l(e,t,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(10),a=n(24),i=r.String,o=r.TypeError;e.exports=function(e){if(a(e))return e;throw o(i(e)+" is not an object")}},function(e,t,n){var r=n(10),a=n(25),i=n(42),o=n(47),s=n(41),u=n(51),l=n(52),c=n(56).CONFIGURABLE,f=l.get,d=l.enforce,h=String(String).split("String");(e.exports=function(e,t,n,u){var l,f=!!u&&!!u.unsafe,p=!!u&&!!u.enumerable,v=!!u&&!!u.noTargetGet,g=u&&void 0!==u.name?u.name:t;a(n)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!i(n,"name")||c&&n.name!==g)&&o(n,"name",g),(l=d(n)).source||(l.source=h.join("string"==typeof g?g:""))),e!==r?(f?!v&&e[t]&&(p=!0):delete e[t],p?e[t]=n:o(e,t,n)):p?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return a(this)&&f(this).source||u(this)}))},function(e,t,n){var r=n(19),a=n(25),i=n(40),o=r(Function.toString);a(i.inspectSource)||(i.inspectSource=function(e){return o(e)}),e.exports=i.inspectSource},function(e,t,n){var r,a,i,o=n(53),s=n(10),u=n(19),l=n(24),c=n(47),f=n(42),d=n(40),h=n(54),p=n(55),v="Object already initialized",g=s.TypeError,m=s.WeakMap;if(o||d.state){var y=d.state||(d.state=new m),b=u(y.get),x=u(y.has),k=u(y.set);r=function(e,t){if(x(y,e))throw new g(v);return t.facade=e,k(y,e,t),t},a=function(e){return b(y,e)||{}},i=function(e){return x(y,e)}}else{var w=h("state");p[w]=!0,r=function(e,t){if(f(e,w))throw new g(v);return t.facade=e,c(e,w,t),t},a=function(e){return f(e,w)?e[w]:{}},i=function(e){return f(e,w)}}e.exports={set:r,get:a,has:i,enforce:function(e){return i(e)?a(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=a(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(10),a=n(25),i=n(51),o=r.WeakMap;e.exports=a(o)&&/native code/.test(i(o))},function(e,t,n){var r=n(38),a=n(44),i=r("keys");e.exports=function(e){return i[e]||(i[e]=a(e))}},function(e){e.exports={}},function(e,t,n){var r=n(12),a=n(42),i=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,s=a(i,"name"),u=s&&"something"===function(){}.name,l=s&&(!r||r&&o(i,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},function(e,t,n){var r=n(42),a=n(58),i=n(11),o=n(48);e.exports=function(e,t){for(var n=a(t),s=o.f,u=i.f,l=0;l<n.length;l++){var c=n[l];r(e,c)||s(e,c,u(t,c))}}},function(e,t,n){var r=n(27),a=n(19),i=n(59),o=n(67),s=n(49),u=a([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=o.f;return n?u(t,n(e)):t}},function(e,t,n){var r=n(60),a=n(66).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},function(e,t,n){var r=n(19),a=n(42),i=n(17),o=n(61).indexOf,s=n(55),u=r([].push);e.exports=function(e,t){var n,r=i(e),l=0,c=[];for(n in r)!a(s,n)&&a(r,n)&&u(c,n);for(;t.length>l;)a(r,n=t[l++])&&(~o(c,n)||u(c,n));return c}},function(e,t,n){var r=n(17),a=n(62),i=n(64),o=function(e){return function(t,n,o){var s,u=r(t),l=i(u),c=a(o,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},function(e,t,n){var r=n(63),a=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):i(n,t)}},function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){var r=+e;return r!==r||0===r?0:(r>0?n:t)(r)}},function(e,t,n){var r=n(65);e.exports=function(e){return r(e.length)}},function(e,t,n){var r=n(63),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(13),a=n(25),i=/#|\.prototype\./,o=function(e,t){var n=u[s(e)];return n==c||n!=l&&(a(t)?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},function(e,t,n){"use strict";var r,a,i;function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}i=function(){function e(e){var t=new f,n=Array.from(e);if(!n.every((function(e){return!Number.isNaN(e)})))throw TypeError('CSSMatrix: "'+e+'" must only have numbers.');if(16===n.length){var r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],d=n[8],h=n[9],p=n[10],v=n[11],g=n[12],m=n[13],y=n[14],b=n[15];t.m11=r,t.a=r,t.m21=s,t.c=s,t.m31=d,t.m41=g,t.e=g,t.m12=a,t.b=a,t.m22=u,t.d=u,t.m32=h,t.m42=m,t.f=m,t.m13=i,t.m23=l,t.m33=p,t.m43=y,t.m14=o,t.m24=c,t.m34=v,t.m44=b}else{if(6!==n.length)throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");var x=n[0],k=n[1],w=n[2],S=n[3],_=n[4],C=n[5];t.m11=x,t.a=x,t.m12=k,t.b=k,t.m21=w,t.c=w,t.m22=S,t.d=S,t.m41=_,t.e=_,t.m42=C,t.f=C}return t}function t(t){var n=Object.keys(new f);if("object"===o(t)&&n.every((function(e){return e in t})))return e([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError('CSSMatrix: "'+t+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function n(t){if("string"!==typeof t)throw TypeError('CSSMatrix: "'+t+'" is not a string.');var n=String(t).replace(/\s/g,""),r=new f,a='CSSMatrix: invalid transform string "'+t+'"';return n.split(")").filter((function(e){return e})).forEach((function(t){var n=t.split("("),i=n[0],o=n[1];if(!o)throw TypeError(a);var s=o.split(",").map((function(e){return e.includes("rad")?parseFloat(e)*(180/Math.PI):parseFloat(e)})),u=s[0],l=s[1],c=s[2],f=s[3],d=[u,l,c],h=[u,l,c,f];if("perspective"===i&&u&&[l,c].every((function(e){return void 0===e})))r.m34=-1/u;else if(i.includes("matrix")&&[6,16].includes(s.length)&&s.every((function(e){return!Number.isNaN(+e)}))){var p=s.map((function(e){return Math.abs(e)<1e-6?0:e}));r=r.multiply(e(p))}else if("translate3d"===i&&d.every((function(e){return!Number.isNaN(+e)})))r=r.translate(u,l,c);else if("translate"===i&&u&&void 0===c)r=r.translate(u,l||0,0);else if("rotate3d"===i&&h.every((function(e){return!Number.isNaN(+e)}))&&f)r=r.rotateAxisAngle(u,l,c,f);else if("rotate"===i&&u&&[l,c].every((function(e){return void 0===e})))r=r.rotate(0,0,u);else if("scale3d"===i&&d.every((function(e){return!Number.isNaN(+e)}))&&d.some((function(e){return 1!==e})))r=r.scale(u,l,c);else if("scale"!==i||Number.isNaN(u)||1===u||void 0!==c)if("skew"===i&&u&&void 0===c)r=r.skewX(u),r=l?r.skewY(l):r;else{if(!(/[XYZ]/.test(i)&&u&&[l,c].every((function(e){return void 0===e}))&&["translate","rotate","scale","skew"].some((function(e){return i.includes(e)}))))throw TypeError(a);if(["skewX","skewY"].includes(i))r=r[i](u);else{var v=i.replace(/[XYZ]/,""),g=i.replace(v,""),m=["X","Y","Z"].indexOf(g),y=[0===m?u:0,1===m?u:0,2===m?u:0];r=r[v].apply(r,y)}}else{var b=Number.isNaN(+l)?u:l;r=r.scale(u,b,1)}})),r}function r(e,t,n){var r=new f;return r.m41=e,r.e=e,r.m42=t,r.f=t,r.m43=n,r}function a(e,t,n){var r=new f,a=Math.PI/180,i=e*a,o=t*a,s=n*a,u=Math.cos(i),l=-Math.sin(i),c=Math.cos(o),d=-Math.sin(o),h=Math.cos(s),p=-Math.sin(s),v=c*h,g=-c*p;r.m11=v,r.a=v,r.m12=g,r.b=g,r.m13=d;var m=l*d*h+u*p;r.m21=m,r.c=m;var y=u*h-l*d*p;return r.m22=y,r.d=y,r.m23=-l*c,r.m31=l*p-u*d*h,r.m32=l*h+u*d*p,r.m33=u*c,r}function i(e,t,n,r){var a=new f,i=r*(Math.PI/360),o=Math.sin(i),s=Math.cos(i),u=o*o,l=Math.sqrt(e*e+t*t+n*n),c=e,d=t,h=n;0===l?(c=0,d=0,h=1):(c/=l,d/=l,h/=l);var p=c*c,v=d*d,g=h*h,m=1-2*(v+g)*u;a.m11=m,a.a=m;var y=2*(c*d*u+h*o*s);a.m12=y,a.b=y,a.m13=2*(c*h*u-d*o*s);var b=2*(d*c*u-h*o*s);a.m21=b,a.c=b;var x=1-2*(g+p)*u;return a.m22=x,a.d=x,a.m23=2*(d*h*u+c*o*s),a.m31=2*(h*c*u+d*o*s),a.m32=2*(h*d*u-c*o*s),a.m33=1-2*(p+v)*u,a}function s(e,t,n){var r=new f;return r.m11=e,r.a=e,r.m22=t,r.d=t,r.m33=n,r}function u(e){var t=new f,n=e*Math.PI/180,r=Math.tan(n);return t.m21=r,t.c=r,t}function l(e){var t=new f,n=e*Math.PI/180,r=Math.tan(n);return t.m12=r,t.b=r,t}function c(t,n){return e([n.m11*t.m11+n.m12*t.m21+n.m13*t.m31+n.m14*t.m41,n.m11*t.m12+n.m12*t.m22+n.m13*t.m32+n.m14*t.m42,n.m11*t.m13+n.m12*t.m23+n.m13*t.m33+n.m14*t.m43,n.m11*t.m14+n.m12*t.m24+n.m13*t.m34+n.m14*t.m44,n.m21*t.m11+n.m22*t.m21+n.m23*t.m31+n.m24*t.m41,n.m21*t.m12+n.m22*t.m22+n.m23*t.m32+n.m24*t.m42,n.m21*t.m13+n.m22*t.m23+n.m23*t.m33+n.m24*t.m43,n.m21*t.m14+n.m22*t.m24+n.m23*t.m34+n.m24*t.m44,n.m31*t.m11+n.m32*t.m21+n.m33*t.m31+n.m34*t.m41,n.m31*t.m12+n.m32*t.m22+n.m33*t.m32+n.m34*t.m42,n.m31*t.m13+n.m32*t.m23+n.m33*t.m33+n.m34*t.m43,n.m31*t.m14+n.m32*t.m24+n.m33*t.m34+n.m34*t.m44,n.m41*t.m11+n.m42*t.m21+n.m43*t.m31+n.m44*t.m41,n.m41*t.m12+n.m42*t.m22+n.m43*t.m32+n.m44*t.m42,n.m41*t.m13+n.m42*t.m23+n.m43*t.m33+n.m44*t.m43,n.m41*t.m14+n.m42*t.m24+n.m43*t.m34+n.m44*t.m44])}var f=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this;if(n.a=1,n.b=0,n.c=0,n.d=1,n.e=0,n.f=0,n.m11=1,n.m12=0,n.m13=0,n.m14=0,n.m21=0,n.m22=1,n.m23=0,n.m24=0,n.m31=0,n.m32=0,n.m33=1,n.m34=0,n.m41=0,n.m42=0,n.m43=0,n.m44=1,e&&e.length){var r=[16,6].some((function(t){return t===e.length}))?e:e[0];return n.setMatrixValue(r)}return n},d={isIdentity:{configurable:!0},is2D:{configurable:!0}};return d.isIdentity.set=function(e){this.isIdentity=e},d.isIdentity.get=function(){var e=this;return 1===e.m11&&0===e.m12&&0===e.m13&&0===e.m14&&0===e.m21&&1===e.m22&&0===e.m23&&0===e.m24&&0===e.m31&&0===e.m32&&1===e.m33&&0===e.m34&&0===e.m41&&0===e.m42&&0===e.m43&&1===e.m44},d.is2D.get=function(){var e=this;return 0===e.m31&&0===e.m32&&1===e.m33&&0===e.m34&&0===e.m43&&1===e.m44},d.is2D.set=function(e){this.is2D=e},f.prototype.setMatrixValue=function(r){return[Array,Float64Array,Float32Array].some((function(e){return r instanceof e}))?e(r):"string"===typeof r&&r.length&&"none"!==r?n(r):"object"===o(r)?t(r):this},f.prototype.toArray=function(){var e=this,t=Math.pow(10,6);return(e.is2D?[e.a,e.b,e.c,e.d,e.e,e.f]:[e.m11,e.m12,e.m13,e.m14,e.m21,e.m22,e.m23,e.m24,e.m31,e.m32,e.m33,e.m34,e.m41,e.m42,e.m43,e.m44]).map((function(e){return Math.abs(e)<1e-6?0:(e*t>>0)/t}))},f.prototype.toString=function(){var e=this.toArray();return(this.is2D?"matrix":"matrix3d")+"("+e+")"},f.prototype.toJSON=function(){var e=this,t=e.is2D,n=e.isIdentity;return Object.assign({},e,{is2D:t,isIdentity:n})},f.prototype.multiply=function(e){return c(this,e)},f.prototype.translate=function(e,t,n){var a=t,i=n;return void 0===i&&(i=0),void 0===a&&(a=0),c(this,r(e,a,i))},f.prototype.scale=function(e,t,n){var r=t,a=n;return void 0===r&&(r=e),void 0===a&&(a=1),c(this,s(e,r,a))},f.prototype.rotate=function(e,t,n){var r=e,i=t,o=n;return void 0===i&&(i=0),void 0===o&&(o=r,r=0),c(this,a(r,i,o))},f.prototype.rotateAxisAngle=function(e,t,n,r){if([e,t,n,r].some((function(e){return Number.isNaN(e)})))throw new TypeError("CSSMatrix: expecting 4 values");return c(this,i(e,t,n,r))},f.prototype.skewX=function(e){return c(this,u(e))},f.prototype.skewY=function(e){return c(this,l(e))},f.prototype.transformPoint=function(e){var t=r(e.x,e.y,e.z);return t.m44=e.w||1,{x:(t=this.multiply(t)).m41,y:t.m42,z:t.m43,w:t.m44}},f.prototype.transform=function(e){var t=this,n=t.m11*e.x+t.m12*e.y+t.m13*e.z+t.m14*e.w,r=t.m21*e.x+t.m22*e.y+t.m23*e.z+t.m24*e.w,a=t.m31*e.x+t.m32*e.y+t.m33*e.z+t.m34*e.w,i=t.m41*e.x+t.m42*e.y+t.m43*e.z+t.m44*e.w;return{x:n/i,y:r/i,z:a/i,w:i}},Object.defineProperties(f.prototype,d),Object.assign(f,{Translate:r,Rotate:a,RotateAxisAngle:i,Scale:s,SkewX:u,SkewY:l,Multiply:c,fromArray:e,fromMatrix:t,fromString:n}),Object.assign(f,{Version:"0.0.24"}),f},"object"===o(t)?e.exports=i():void 0===(a="function"===typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=a)},function(e,t,n){n(71),n(86);var r=n(96);e.exports=r.Object.fromEntries},function(e,t,n){"use strict";var r=n(17),a=n(72),i=n(77),o=n(52),s=n(78),u="Array Iterator",l=o.set,c=o.getterFor(u);e.exports=s(Array,"Array",(function(e,t){l(this,{type:u,target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,a("keys"),a("values"),a("entries")},function(e,t,n){var r=n(37),a=n(73),i=n(48),o=r("unscopables"),s=Array.prototype;void 0==s[o]&&i.f(s,o,{configurable:!0,value:a(null)}),e.exports=function(e){s[o][e]=!0}},function(e,t,n){var r,a=n(49),i=n(74),o=n(66),s=n(55),u=n(76),l=n(46),c=n(54),f=c("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},p=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}v="undefined"!=typeof document?document.domain&&r?p(r):function(){var e,t=l("iframe");return t.style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F}():p(r);for(var e=o.length;e--;)delete v.prototype[o[e]];return v()};s[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=a(e),n=new d,d.prototype=null,n[f]=e):n=v(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(12),a=n(48),i=n(49),o=n(17),s=n(75);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=o(t),u=s(t),l=u.length,c=0;l>c;)a.f(e,n=u[c++],r[n]);return e}},function(e,t,n){var r=n(60),a=n(66);e.exports=Object.keys||function(e){return r(e,a)}},function(e,t,n){var r=n(27);e.exports=r("document","documentElement")},function(e){e.exports={}},function(e,t,n){"use strict";var r=n(9),a=n(14),i=n(39),o=n(56),s=n(25),u=n(79),l=n(81),c=n(84),f=n(83),d=n(47),h=n(50),p=n(37),v=n(77),g=n(80),m=o.PROPER,y=o.CONFIGURABLE,b=g.IteratorPrototype,x=g.BUGGY_SAFARI_ITERATORS,k=p("iterator"),w="keys",S="values",_="entries",C=function(){return this};e.exports=function(e,t,n,o,p,g,E){u(n,t,o);var A,I,T,R=function(e){if(e===p&&F)return F;if(!x&&e in O)return O[e];switch(e){case w:case S:case _:return function(){return new n(this,e)}}return function(){return new n(this)}},N=t+" Iterator",M=!1,O=e.prototype,P=O[k]||O["@@iterator"]||p&&O[p],F=!x&&P||R(p),D="Array"==t&&O.entries||P;if(D&&(A=l(D.call(new e)))!==Object.prototype&&A.next&&(i||l(A)===b||(c?c(A,b):s(A[k])||h(A,k,C)),f(A,N,!0,!0),i&&(v[N]=C)),m&&p==S&&P&&P.name!==S&&(!i&&y?d(O,"name",S):(M=!0,F=function(){return a(P,this)})),p)if(I={values:R(S),keys:g?F:R(w),entries:R(_)},E)for(T in I)(x||M||!(T in O))&&h(O,T,I[T]);else r({target:t,proto:!0,forced:x||M},I);return i&&!E||O[k]===F||h(O,k,F,{name:p}),v[t]=F,I}},function(e,t,n){"use strict";var r=n(80).IteratorPrototype,a=n(73),i=n(16),o=n(83),s=n(77),u=function(){return this};e.exports=function(e,t,n,l){var c=t+" Iterator";return e.prototype=a(r,{next:i(+!l,n)}),o(e,c,!1,!0),s[c]=u,e}},function(e,t,n){"use strict";var r,a,i,o=n(13),s=n(25),u=n(73),l=n(81),c=n(50),f=n(37),d=n(39),h=f("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(a=l(l(i)))!==Object.prototype&&(r=a):p=!0),void 0==r||o((function(){var e={};return r[h].call(e)!==e}))?r={}:d&&(r=u(r)),s(r[h])||c(r,h,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(e,t,n){var r=n(10),a=n(42),i=n(25),o=n(43),s=n(54),u=n(82),l=s("IE_PROTO"),c=r.Object,f=c.prototype;e.exports=u?c.getPrototypeOf:function(e){var t=o(e);if(a(t,l))return t[l];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof c?f:null}},function(e,t,n){var r=n(13);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(48).f,a=n(42),i=n(37)("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(19),a=n(49),i=n(85);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(o){}return function(n,r){return a(n),i(r),t?e(n,r):n.__proto__=r,n}}():void 0)},function(e,t,n){var r=n(10),a=n(25),i=r.String,o=r.TypeError;e.exports=function(e){if("object"==typeof e||a(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},function(e,t,n){var r=n(9),a=n(87),i=n(95);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return a(e,(function(e,n){i(t,e,n)}),{AS_ENTRIES:!0}),t}})},function(e,t,n){var r=n(10),a=n(88),i=n(14),o=n(49),s=n(35),u=n(89),l=n(64),c=n(28),f=n(90),d=n(91),h=n(94),p=r.TypeError,v=function(e,t){this.stopped=e,this.result=t},g=v.prototype;e.exports=function(e,t,n){var r,m,y,b,x,k,w,S=n&&n.that,_=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),A=a(t,S),I=function(e){return r&&h(r,"normal",e),new v(!0,e)},T=function(e){return _?(o(e),E?A(e[0],e[1],I):A(e[0],e[1])):E?A(e,I):A(e)};if(C)r=e;else{if(!(m=d(e)))throw p(s(e)+" is not iterable");if(u(m)){for(y=0,b=l(e);b>y;y++)if((x=T(e[y]))&&c(g,x))return x;return new v(!1)}r=f(e,m)}for(k=r.next;!(w=i(k,r)).done;){try{x=T(w.value)}catch(R){h(r,"throw",R)}if("object"==typeof x&&x&&c(g,x))return x}return new v(!1)}},function(e,t,n){var r=n(19),a=n(34),i=r(r.bind);e.exports=function(e,t){return a(e),void 0===t?e:i?i(e,t):function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(37),a=n(77),i=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[i]===e)}},function(e,t,n){var r=n(10),a=n(14),i=n(34),o=n(49),s=n(35),u=n(91),l=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?u(e):t;if(i(n))return o(a(n,e));throw l(s(e)+" is not iterable")}},function(e,t,n){var r=n(92),a=n(33),i=n(77),o=n(37)("iterator");e.exports=function(e){if(void 0!=e)return a(e,o)||a(e,"@@iterator")||i[r(e)]}},function(e,t,n){var r=n(10),a=n(93),i=n(25),o=n(20),s=n(37)("toStringTag"),u=r.Object,l="Arguments"==o(function(){return arguments}());e.exports=a?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=u(e),s))?n:l?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},function(e,t,n){var r={};r[n(37)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(14),a=n(49),i=n(33);e.exports=function(e,t,n){var o,s;a(e);try{if(!(o=i(e,"return"))){if("throw"===t)throw n;return n}o=r(o,e)}catch(u){s=!0,o=u}if("throw"===t)throw n;if(s)throw o;return a(o),n}},function(e,t,n){"use strict";var r=n(22),a=n(48),i=n(16);e.exports=function(e,t,n){var o=r(t);o in e?a.f(e,o,i(0,n)):e[o]=n}},function(e,t,n){var r=n(10);e.exports=r},function(e,t,n){n(98),n(71),n(105),n(107),n(129),n(130),n(131),n(132);var r=n(96);e.exports=r.Promise},function(e,t,n){"use strict";var r=n(9),a=n(10),i=n(28),o=n(81),s=n(84),u=n(57),l=n(73),c=n(47),f=n(16),d=n(99),h=n(101),p=n(87),v=n(102),g=n(37),m=n(104),y=g("toStringTag"),b=a.Error,x=[].push,k=function(e,t){var n,r=arguments.length>2?arguments[2]:void 0,a=i(w,this);s?n=s(new b(void 0),a?o(this):w):(n=a?this:l(w),c(n,y,"Error")),c(n,"message",v(t,"")),m&&c(n,"stack",d(n.stack,1)),h(n,r);var u=[];return p(e,x,{that:u}),c(n,"errors",u),n};s?s(k,b):u(k,b);var w=k.prototype=l(b.prototype,{constructor:f(1,k),message:f(1,""),name:f(1,"AggregateError")});r({global:!0},{AggregateError:k})},function(e,t,n){var r=n(19),a=n(100),i=r("".replace),o=r("".split),s=r([].join),u=String(Error("zxcasd").stack),l=/\n\s*at [^:]*:[^\n]*/,c=l.test(u),f=/@[^\n]*\n/.test(u)&&!/zxcasd/.test(u);e.exports=function(e,t){if("string"!=typeof e)return e;if(c)for(;t--;)e=i(e,l,"");else if(f)return s(a(o(e,"\n"),t),"\n");return e}},function(e,t,n){var r=n(10),a=n(62),i=n(64),o=n(95),s=r.Array,u=Math.max;e.exports=function(e,t,n){for(var r=i(e),l=a(t,r),c=a(void 0===n?r:n,r),f=s(u(c-l,0)),d=0;l<c;l++,d++)o(f,d,e[l]);return f.length=d,f}},function(e,t,n){var r=n(24),a=n(47);e.exports=function(e,t){r(t)&&"cause"in t&&a(e,"cause",t.cause)}},function(e,t,n){var r=n(103);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},function(e,t,n){var r=n(10),a=n(92),i=r.String;e.exports=function(e){if("Symbol"===a(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},function(e,t,n){var r=n(13),a=n(16);e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",a(1,7)),7!==e.stack)}))},function(e,t,n){var r=n(93),a=n(50),i=n(106);r||a(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,n){"use strict";var r=n(93),a=n(92);e.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},function(e,t,n){"use strict";var r,a,i,o,s=n(9),u=n(39),l=n(10),c=n(27),f=n(14),d=n(108),h=n(50),p=n(109),v=n(84),g=n(83),m=n(110),y=n(34),b=n(25),x=n(24),k=n(111),w=n(51),S=n(87),_=n(112),C=n(113),E=n(116).set,A=n(121),I=n(124),T=n(126),R=n(125),N=n(127),M=n(52),O=n(68),P=n(37),F=n(128),D=n(120),L=n(31),z=P("species"),j="Promise",B=M.getterFor(j),W=M.set,U=M.getterFor(j),V=d&&d.prototype,H=d,G=V,q=l.TypeError,X=l.document,Y=l.process,K=R.f,$=K,Z=!!(X&&X.createEvent&&l.dispatchEvent),Q=b(l.PromiseRejectionEvent),J="unhandledrejection",ee=!1,te=O(j,(function(){var e=w(H),t=e!==String(H);if(!t&&66===L)return!0;if(u&&!G.finally)return!0;if(L>=51&&/native code/.test(e))return!1;var n=new H((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[z]=r,!(ee=n.then((function(){}))instanceof r)||!t&&F&&!Q})),ne=te||!_((function(e){H.all(e).catch((function(){}))})),re=function(e){var t;return!(!x(e)||!b(t=e.then))&&t},ae=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;A((function(){for(var r=e.value,a=1==e.state,i=0;n.length>i;){var o,s,u,l=n[i++],c=a?l.ok:l.fail,d=l.resolve,h=l.reject,p=l.domain;try{c?(a||(2===e.rejection&&ue(e),e.rejection=1),!0===c?o=r:(p&&p.enter(),o=c(r),p&&(p.exit(),u=!0)),o===l.promise?h(q("Promise-chain cycle")):(s=re(o))?f(s,o,d,h):d(o)):h(r)}catch(v){p&&!u&&p.exit(),h(v)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},ie=function(e,t,n){var r,a;Z?((r=X.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),l.dispatchEvent(r)):r={promise:t,reason:n},!Q&&(a=l["on"+e])?a(r):e===J&&T("Unhandled promise rejection",n)},oe=function(e){f(E,l,(function(){var t,n=e.facade,r=e.value;if(se(e)&&(t=N((function(){D?Y.emit("unhandledRejection",r,n):ie(J,n,r)})),e.rejection=D||se(e)?2:1,t.error))throw t.value}))},se=function(e){return 1!==e.rejection&&!e.parent},ue=function(e){f(E,l,(function(){var t=e.facade;D?Y.emit("rejectionHandled",t):ie("rejectionhandled",t,e.value)}))},le=function(e,t,n){return function(r){e(t,r,n)}},ce=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ae(e,!0))},fe=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw q("Promise can't be resolved itself");var a=re(n);a?A((function(){var r={done:!1};try{f(a,n,le(e,r,t),le(ce,r,t))}catch(i){ce(r,i,t)}})):(t.value=n,t.state=1,ae(t,!1))}catch(i){ce({done:!1},i,t)}}};if(te&&(G=(H=function(e){k(this,G),y(e),f(r,this);var t=B(this);try{e(le(fe,t),le(ce,t))}catch(n){ce(t,n)}}).prototype,(r=function(e){W(this,{type:j,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(G,{then:function(e,t){var n=U(this),r=n.reactions,a=K(C(this,H));return a.ok=!b(e)||e,a.fail=b(t)&&t,a.domain=D?Y.domain:void 0,n.parent=!0,r[r.length]=a,0!=n.state&&ae(n,!1),a.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new r,t=B(e);this.promise=e,this.resolve=le(fe,t),this.reject=le(ce,t)},R.f=K=function(e){return e===H||e===i?new a(e):$(e)},!u&&b(d)&&V!==Object.prototype)){o=V.then,ee||(h(V,"then",(function(e,t){var n=this;return new H((function(e,t){f(o,n,e,t)})).then(e,t)}),{unsafe:!0}),h(V,"catch",G.catch,{unsafe:!0}));try{delete V.constructor}catch(de){}v&&v(V,G)}s({global:!0,wrap:!0,forced:te},{Promise:H}),g(H,j,!1,!0),m(j),i=c(j),s({target:j,stat:!0,forced:te},{reject:function(e){var t=K(this);return f(t.reject,void 0,e),t.promise}}),s({target:j,stat:!0,forced:u||te},{resolve:function(e){return I(u&&this===i?H:this,e)}}),s({target:j,stat:!0,forced:ne},{all:function(e){var t=this,n=K(t),r=n.resolve,a=n.reject,i=N((function(){var n=y(t.resolve),i=[],o=0,s=1;S(e,(function(e){var u=o++,l=!1;s++,f(n,t,e).then((function(e){l||(l=!0,i[u]=e,--s||r(i))}),a)})),--s||r(i)}));return i.error&&a(i.value),n.promise},race:function(e){var t=this,n=K(t),r=n.reject,a=N((function(){var a=y(t.resolve);S(e,(function(e){f(a,t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}})},function(e,t,n){var r=n(10);e.exports=r.Promise},function(e,t,n){var r=n(50);e.exports=function(e,t,n){for(var a in t)r(e,a,t[a],n);return e}},function(e,t,n){"use strict";var r=n(27),a=n(48),i=n(37),o=n(12),s=i("species");e.exports=function(e){var t=r(e),n=a.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(10),a=n(28),i=r.TypeError;e.exports=function(e,t){if(a(t,e))return e;throw i("Incorrect invocation")}},function(e,t,n){var r=n(37)("iterator"),a=!1;try{var i=0,o={next:function(){return{done:!!i++}},return:function(){a=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(s){}return n}},function(e,t,n){var r=n(49),a=n(114),i=n(37)("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||void 0==(n=r(o)[i])?t:a(n)}},function(e,t,n){var r=n(10),a=n(115),i=n(35),o=r.TypeError;e.exports=function(e){if(a(e))return e;throw o(i(e)+" is not a constructor")}},function(e,t,n){var r=n(19),a=n(13),i=n(25),o=n(92),s=n(27),u=n(51),l=function(){},c=[],f=s("Reflect","construct"),d=/^\s*(?:class|function)\b/,h=r(d.exec),p=!d.exec(l),v=function(e){if(!i(e))return!1;try{return f(l,c,e),!0}catch(t){return!1}};e.exports=!f||a((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?function(e){if(!i(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return p||!!h(d,u(e))}:v},function(e,t,n){var r,a,i,o,s=n(10),u=n(117),l=n(88),c=n(25),f=n(42),d=n(13),h=n(76),p=n(118),v=n(46),g=n(119),m=n(120),y=s.setImmediate,b=s.clearImmediate,x=s.process,k=s.Dispatch,w=s.Function,S=s.MessageChannel,_=s.String,C=0,E={},A="onreadystatechange";try{r=s.location}catch(M){}var I=function(e){if(f(E,e)){var t=E[e];delete E[e],t()}},T=function(e){return function(){I(e)}},R=function(e){I(e.data)},N=function(e){s.postMessage(_(e),r.protocol+"//"+r.host)};y&&b||(y=function(e){var t=p(arguments,1);return E[++C]=function(){u(c(e)?e:w(e),void 0,t)},a(C),C},b=function(e){delete E[e]},m?a=function(e){x.nextTick(T(e))}:k&&k.now?a=function(e){k.now(T(e))}:S&&!g?(o=(i=new S).port2,i.port1.onmessage=R,a=l(o.postMessage,o)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!d(N)?(a=N,s.addEventListener("message",R,!1)):a=A in v("script")?function(e){h.appendChild(v("script")).onreadystatechange=function(){h.removeChild(this),I(e)}}:function(e){setTimeout(T(e),0)}),e.exports={set:y,clear:b}},function(e){var t=Function.prototype,n=t.apply,r=t.bind,a=t.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(n):function(){return a.apply(n,arguments)})},function(e,t,n){var r=n(19);e.exports=r([].slice)},function(e,t,n){var r=n(32);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(e,t,n){var r=n(20),a=n(10);e.exports="process"==r(a.process)},function(e,t,n){var r,a,i,o,s,u,l,c,f=n(10),d=n(88),h=n(11).f,p=n(116).set,v=n(119),g=n(122),m=n(123),y=n(120),b=f.MutationObserver||f.WebKitMutationObserver,x=f.document,k=f.process,w=f.Promise,S=h(f,"queueMicrotask"),_=S&&S.value;_||(r=function(){var e,t;for(y&&(e=k.domain)&&e.exit();a;){t=a.fn,a=a.next;try{t()}catch(n){throw a?o():i=void 0,n}}i=void 0,e&&e.enter()},v||y||m||!b||!x?!g&&w&&w.resolve?((l=w.resolve(void 0)).constructor=w,c=d(l.then,l),o=function(){c(r)}):y?o=function(){k.nextTick(r)}:(p=d(p,f),o=function(){p(r)}):(s=!0,u=x.createTextNode(""),new b(r).observe(u,{characterData:!0}),o=function(){u.data=s=!s})),e.exports=_||function(e){var t={fn:e,next:void 0};i&&(i.next=t),a||(a=t,o()),i=t}},function(e,t,n){var r=n(32),a=n(10);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==a.Pebble},function(e,t,n){var r=n(32);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,t,n){var r=n(49),a=n(24),i=n(125);e.exports=function(e,t){if(r(e),a(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(34),a=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new a(e)}},function(e,t,n){var r=n(10);e.exports=function(e,t){var n=r.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},function(e){e.exports="object"==typeof window},function(e,t,n){"use strict";var r=n(9),a=n(14),i=n(34),o=n(125),s=n(127),u=n(87);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=o.f(t),r=n.resolve,l=n.reject,c=s((function(){var n=i(t.resolve),o=[],s=0,l=1;u(e,(function(e){var i=s++,u=!1;l++,a(n,t,e).then((function(e){u||(u=!0,o[i]={status:"fulfilled",value:e},--l||r(o))}),(function(e){u||(u=!0,o[i]={status:"rejected",reason:e},--l||r(o))}))})),--l||r(o)}));return c.error&&l(c.value),n.promise}})},function(e,t,n){"use strict";var r=n(9),a=n(34),i=n(27),o=n(14),s=n(125),u=n(127),l=n(87),c="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=i("AggregateError"),r=s.f(t),f=r.resolve,d=r.reject,h=u((function(){var r=a(t.resolve),i=[],s=0,u=1,h=!1;l(e,(function(e){var a=s++,l=!1;u++,o(r,t,e).then((function(e){l||h||(h=!0,f(e))}),(function(e){l||h||(l=!0,i[a]=e,--u||d(new n(i,c)))}))})),--u||d(new n(i,c))}));return h.error&&d(h.value),r.promise}})},function(e,t,n){"use strict";var r=n(9),a=n(39),i=n(108),o=n(13),s=n(27),u=n(25),l=n(113),c=n(124),f=n(50);if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&o((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,s("Promise")),n=u(e);return this.then(n?function(n){return c(t,e()).then((function(){return n}))}:e,n?function(n){return c(t,e()).then((function(){throw n}))}:e)}}),!a&&u(i)){var d=s("Promise").prototype.finally;i.prototype.finally!==d&&f(i.prototype,"finally",d,{unsafe:!0})}},function(e,t,n){"use strict";var r=n(133).charAt,a=n(103),i=n(52),o=n(78),s="String Iterator",u=i.set,l=i.getterFor(s);o(String,"String",(function(e){u(this,{type:s,string:a(e),index:0})}),(function(){var e,t=l(this),n=t.string,a=t.index;return a>=n.length?{value:void 0,done:!0}:(e=r(n,a),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(19),a=n(63),i=n(103),o=n(21),s=r("".charAt),u=r("".charCodeAt),l=r("".slice),c=function(e){return function(t,n){var r,c,f=i(o(t)),d=a(n),h=f.length;return d<0||d>=h?e?"":void 0:(r=u(f,d))<55296||r>56319||d+1===h||(c=u(f,d+1))<56320||c>57343?e?s(f,d):r:e?l(f,d,d+2):c-56320+(r-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},function(e,t){!function(e){"use strict";var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol:function(e){return"Symbol("+e+")"};function n(){}function r(){return"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof __webpack_require__.g?__webpack_require__.g:void 0}var a=r();function i(e){return"object"===typeof e&&null!==e||"function"===typeof e}var o=n,s=Promise,u=Promise.prototype.then,l=Promise.resolve.bind(s),c=Promise.reject.bind(s);function f(e){return new s(e)}function d(e){return l(e)}function h(e){return c(e)}function p(e,t,n){return u.call(e,t,n)}function v(e,t,n){p(p(e,t,n),void 0,o)}function g(e,t){v(e,t)}function m(e,t){v(e,void 0,t)}function y(e,t,n){return p(e,t,n)}function b(e){p(e,void 0,o)}var x=function(){var e=a&&a.queueMicrotask;if("function"===typeof e)return e;var t=d(void 0);return function(e){return p(t,e)}}();function k(e,t,n){if("function"!==typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}function w(e,t,n){try{return d(k(e,t,n))}catch(r){return h(r)}}var S=16384,_=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(e){var t=this._back,n=t;t._elements.length===S-1&&(n={_elements:[],_next:void 0}),t._elements.push(e),n!==t&&(this._back=n,t._next=n),++this._size},e.prototype.shift=function(){var e=this._front,t=e,n=this._cursor,r=n+1,a=e._elements,i=a[n];return r===S&&(t=e._next,r=0),--this._size,this._cursor=r,e!==t&&(this._front=t),a[n]=void 0,i},e.prototype.forEach=function(e){for(var t=this._cursor,n=this._front,r=n._elements;(t!==r.length||void 0!==n._next)&&(t!==r.length||(t=0,0!==(r=(n=n._next)._elements).length));)e(r[t]),++t},e.prototype.peek=function(){var e=this._front,t=this._cursor;return e._elements[t]},e}();function C(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?T(e):"closed"===t._state?N(e):R(e,t._storedError)}function E(e,t){return Cr(e._ownerReadableStream,t)}function A(e){"readable"===e._ownerReadableStream._state?M(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):O(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function I(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function T(e){e._closedPromise=f((function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n}))}function R(e,t){T(e),M(e,t)}function N(e){T(e),P(e)}function M(e,t){void 0!==e._closedPromise_reject&&(b(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function O(e,t){R(e,t)}function P(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var F=t("[[AbortSteps]]"),D=t("[[ErrorSteps]]"),L=t("[[CancelSteps]]"),z=t("[[PullSteps]]"),j=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},B=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function W(e){return"object"===typeof e||"function"===typeof e}function U(e,t){if(void 0!==e&&!W(e))throw new TypeError(t+" is not an object.")}function V(e,t){if("function"!==typeof e)throw new TypeError(t+" is not a function.")}function H(e){return"object"===typeof e&&null!==e||"function"===typeof e}function G(e,t){if(!H(e))throw new TypeError(t+" is not an object.")}function q(e,t,n){if(void 0===e)throw new TypeError("Parameter "+t+" is required in '"+n+"'.")}function X(e,t,n){if(void 0===e)throw new TypeError(t+" is required in '"+n+"'.")}function Y(e){return Number(e)}function K(e){return 0===e?0:e}function $(e){return K(B(e))}function Z(e,t){var n=0,r=Number.MAX_SAFE_INTEGER,a=Number(e);if(a=K(a),!j(a))throw new TypeError(t+" is not a finite number");if((a=$(a))<n||a>r)throw new TypeError(t+" is outside the accepted range of "+n+" to "+r+", inclusive");return j(a)&&0!==a?a:0}function Q(e,t){if(!Sr(e))throw new TypeError(t+" is not a ReadableStream.")}function J(e){return new oe(e)}function ee(e,t){e._reader._readRequests.push(t)}function te(e,t,n){var r=e._reader._readRequests.shift();n?r._closeSteps():r._chunkSteps(t)}function ne(e){return e._reader._readRequests.length}function re(e){var t=e._reader;return void 0!==t&&!!se(t)}var ae,ie,oe=function(){function e(e){if(q(e,1,"ReadableStreamDefaultReader"),Q(e,"First parameter"),_r(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");C(this,e),this._readRequests=new _}return Object.defineProperty(e.prototype,"closed",{get:function(){return se(this)?this._closedPromise:h(le("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return void 0===e&&(e=void 0),se(this)?void 0===this._ownerReadableStream?h(I("cancel")):E(this,e):h(le("cancel"))},e.prototype.read=function(){if(!se(this))return h(le("read"));if(void 0===this._ownerReadableStream)return h(I("read from"));var e,t,n=f((function(n,r){e=n,t=r}));return ue(this,{_chunkSteps:function(t){return e({value:t,done:!1})},_closeSteps:function(){return e({value:void 0,done:!0})},_errorSteps:function(e){return t(e)}}),n},e.prototype.releaseLock=function(){if(!se(this))throw le("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");A(this)}},e}();function se(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof oe}function ue(e,t){var n=e._ownerReadableStream;n._disturbed=!0,"closed"===n._state?t._closeSteps():"errored"===n._state?t._errorSteps(n._storedError):n._readableStreamController[z](t)}function le(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}Object.defineProperties(oe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(oe.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0}),"symbol"===typeof t.asyncIterator&&((ae={})[t.asyncIterator]=function(){return this},ie=ae,Object.defineProperty(ie,t.asyncIterator,{enumerable:!1}));var ce=function(){function e(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}return e.prototype.next=function(){var e=this,t=function(){return e._nextSteps()};return this._ongoingPromise=this._ongoingPromise?y(this._ongoingPromise,t,t):t(),this._ongoingPromise},e.prototype.return=function(e){var t=this,n=function(){return t._returnSteps(e)};return this._ongoingPromise?y(this._ongoingPromise,n,n):n()},e.prototype._nextSteps=function(){var e=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var t,n,r=this._reader;if(void 0===r._ownerReadableStream)return h(I("iterate"));var a=f((function(e,r){t=e,n=r}));return ue(r,{_chunkSteps:function(n){e._ongoingPromise=void 0,x((function(){return t({value:n,done:!1})}))},_closeSteps:function(){e._ongoingPromise=void 0,e._isFinished=!0,A(r),t({value:void 0,done:!0})},_errorSteps:function(t){e._ongoingPromise=void 0,e._isFinished=!0,A(r),n(t)}}),a},e.prototype._returnSteps=function(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;var t=this._reader;if(void 0===t._ownerReadableStream)return h(I("finish iterating"));if(!this._preventCancel){var n=E(t,e);return A(t),y(n,(function(){return{value:e,done:!0}}))}return A(t),d({value:e,done:!0})},e}(),fe={next:function(){return he(this)?this._asyncIteratorImpl.next():h(pe("next"))},return:function(e){return he(this)?this._asyncIteratorImpl.return(e):h(pe("return"))}};function de(e,t){var n=J(e),r=new ce(n,t),a=Object.create(fe);return a._asyncIteratorImpl=r,a}function he(e){if(!i(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ce}catch(ae){return!1}}function pe(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}void 0!==ie&&Object.setPrototypeOf(fe,ie);var ve=Number.isNaN||function(e){return e!==e};function ge(e){return e.slice()}function me(e,t,n,r,a){new Uint8Array(e).set(new Uint8Array(n,r,a),t)}function ye(e){return e}function be(e){return!1}function xe(e,t,n){if(e.slice)return e.slice(t,n);var r=n-t,a=new ArrayBuffer(r);return me(a,0,e,t,r),a}function ke(e){return"number"===typeof e&&!ve(e)&&!(e<0)}function we(e){var t=xe(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function Se(e){var t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function _e(e,t,n){if(!ke(n)||n===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:n}),e._queueTotalSize+=n}function Ce(e){return e._queue.peek().value}function Ee(e){e._queue=new _,e._queueTotalSize=0}var Ae=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!Re(this))throw at("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(e){if(!Re(this))throw at("respond");if(q(e,1,"respond"),e=Z(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");be(this._view.buffer),Je(this._associatedReadableByteStreamController,e)},e.prototype.respondWithNewView=function(e){if(!Re(this))throw at("respondWithNewView");if(q(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");be(e.buffer),et(this._associatedReadableByteStreamController,e)},e}();Object.defineProperties(Ae.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(Ae.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var Ie=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!Te(this))throw it("byobRequest");return Ze(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Te(this))throw it("desiredSize");return Qe(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!Te(this))throw it("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");Ye(this)},e.prototype.enqueue=function(e){if(!Te(this))throw it("enqueue");if(q(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");Ke(this,e)},e.prototype.error=function(e){if(void 0===e&&(e=void 0),!Te(this))throw it("error");$e(this,e)},e.prototype[L]=function(e){Me(this),Ee(this);var t=this._cancelAlgorithm(e);return Xe(this),t},e.prototype[z]=function(e){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0){var n=this._queue.shift();this._queueTotalSize-=n.byteLength,ze(this);var r=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);e._chunkSteps(r)}else{var a=this._autoAllocateChunkSize;if(void 0!==a){var i=void 0;try{i=new ArrayBuffer(a)}catch(s){return void e._errorSteps(s)}var o={buffer:i,bufferByteLength:a,byteOffset:0,byteLength:a,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}ee(t,e),Ne(this)}},e}();function Te(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof Ie}function Re(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof Ae}function Ne(e){qe(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,v(e._pullAlgorithm(),(function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ne(e))}),(function(t){$e(e,t)}))))}function Me(e){je(e),e._pendingPullIntos=new _}function Oe(e,t){var n=!1;"closed"===e._state&&(n=!0);var r=Pe(t);"default"===t.readerType?te(e,r,n):ut(e,r,n)}function Pe(e){var t=e.bytesFilled,n=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/n)}function Fe(e,t,n,r){e._queue.push({buffer:t,byteOffset:n,byteLength:r}),e._queueTotalSize+=r}function De(e,t){var n=t.elementSize,r=t.bytesFilled-t.bytesFilled%n,a=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),i=t.bytesFilled+a,o=i-i%n,s=a,u=!1;o>r&&(s=o-t.bytesFilled,u=!0);for(var l=e._queue;s>0;){var c=l.peek(),f=Math.min(s,c.byteLength),d=t.byteOffset+t.bytesFilled;me(t.buffer,d,c.buffer,c.byteOffset,f),c.byteLength===f?l.shift():(c.byteOffset+=f,c.byteLength-=f),e._queueTotalSize-=f,Le(e,f,t),s-=f}return u}function Le(e,t,n){n.bytesFilled+=t}function ze(e){0===e._queueTotalSize&&e._closeRequested?(Xe(e),Er(e._controlledReadableByteStream)):Ne(e)}function je(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Be(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;var t=e._pendingPullIntos.peek();De(e,t)&&(Ge(e),Oe(e._controlledReadableByteStream,t))}}function We(e,t,n){var r=e._controlledReadableByteStream,a=1;t.constructor!==DataView&&(a=t.constructor.BYTES_PER_ELEMENT);var i=t.constructor,o=ye(t.buffer),s={buffer:o,bufferByteLength:o.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:a,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(s),void st(r,n);if("closed"!==r._state){if(e._queueTotalSize>0){if(De(e,s)){var u=Pe(s);return ze(e),void n._chunkSteps(u)}if(e._closeRequested){var l=new TypeError("Insufficient bytes to fill elements in the given buffer");return $e(e,l),void n._errorSteps(l)}}e._pendingPullIntos.push(s),st(r,n),Ne(e)}else{var c=new i(s.buffer,s.byteOffset,0);n._closeSteps(c)}}function Ue(e,t){var n=e._controlledReadableByteStream;if(ct(n))for(;lt(n)>0;)Oe(n,Ge(e))}function Ve(e,t,n){if(Le(e,t,n),!(n.bytesFilled<n.elementSize)){Ge(e);var r=n.bytesFilled%n.elementSize;if(r>0){var a=n.byteOffset+n.bytesFilled,i=xe(n.buffer,a-r,a);Fe(e,i,0,i.byteLength)}n.bytesFilled-=r,Oe(e._controlledReadableByteStream,n),Be(e)}}function He(e,t){var n=e._pendingPullIntos.peek();je(e),"closed"===e._controlledReadableByteStream._state?Ue(e):Ve(e,t,n),Ne(e)}function Ge(e){return e._pendingPullIntos.shift()}function qe(e){var t=e._controlledReadableByteStream;return"readable"===t._state&&!e._closeRequested&&!!e._started&&(!!(re(t)&&ne(t)>0)||!!(ct(t)&&lt(t)>0)||Qe(e)>0)}function Xe(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ye(e){var t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){var n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw $e(e,n),n}Xe(e),Er(t)}}function Ke(e,t){var n=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===n._state){var r=t.buffer,a=t.byteOffset,i=t.byteLength,o=ye(r);if(e._pendingPullIntos.length>0){var s=e._pendingPullIntos.peek();be(s.buffer),s.buffer=ye(s.buffer)}je(e),re(n)?0===ne(n)?Fe(e,o,a,i):(e._pendingPullIntos.length>0&&Ge(e),te(n,new Uint8Array(o,a,i),!1)):ct(n)?(Fe(e,o,a,i),Be(e)):Fe(e,o,a,i),Ne(e)}}function $e(e,t){var n=e._controlledReadableByteStream;"readable"===n._state&&(Me(e),Ee(e),Xe(e),Ar(n,t))}function Ze(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){var t=e._pendingPullIntos.peek(),n=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),r=Object.create(Ae.prototype);rt(r,e,n),e._byobRequest=r}return e._byobRequest}function Qe(e){var t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Je(e,t){var n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=ye(n.buffer),He(e,t)}function et(e,t){var n=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+t.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var r=t.byteLength;n.buffer=ye(t.buffer),He(e,r)}function tt(e,t,n,r,a,i,o){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Ee(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=r,t._cancelAlgorithm=a,t._autoAllocateChunkSize=o,t._pendingPullIntos=new _,e._readableStreamController=t,v(d(n()),(function(){t._started=!0,Ne(t)}),(function(e){$e(t,e)}))}function nt(e,t,n){var r=Object.create(Ie.prototype),a=function(){},i=function(){return d(void 0)},o=function(){return d(void 0)};void 0!==t.start&&(a=function(){return t.start(r)}),void 0!==t.pull&&(i=function(){return t.pull(r)}),void 0!==t.cancel&&(o=function(e){return t.cancel(e)});var s=t.autoAllocateChunkSize;if(0===s)throw new TypeError("autoAllocateChunkSize must be greater than 0");tt(e,r,a,i,o,n,s)}function rt(e,t,n){e._associatedReadableByteStreamController=t,e._view=n}function at(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function it(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function ot(e){return new ft(e)}function st(e,t){e._reader._readIntoRequests.push(t)}function ut(e,t,n){var r=e._reader._readIntoRequests.shift();n?r._closeSteps(t):r._chunkSteps(t)}function lt(e){return e._reader._readIntoRequests.length}function ct(e){var t=e._reader;return void 0!==t&&!!dt(t)}Object.defineProperties(Ie.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(Ie.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});var ft=function(){function e(e){if(q(e,1,"ReadableStreamBYOBReader"),Q(e,"First parameter"),_r(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Te(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");C(this,e),this._readIntoRequests=new _}return Object.defineProperty(e.prototype,"closed",{get:function(){return dt(this)?this._closedPromise:h(pt("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return void 0===e&&(e=void 0),dt(this)?void 0===this._ownerReadableStream?h(I("cancel")):E(this,e):h(pt("cancel"))},e.prototype.read=function(e){if(!dt(this))return h(pt("read"));if(!ArrayBuffer.isView(e))return h(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return h(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return h(new TypeError("view's buffer must have non-zero byteLength"));if(be(e.buffer),void 0===this._ownerReadableStream)return h(I("read from"));var t,n,r=f((function(e,r){t=e,n=r}));return ht(this,e,{_chunkSteps:function(e){return t({value:e,done:!1})},_closeSteps:function(e){return t({value:e,done:!0})},_errorSteps:function(e){return n(e)}}),r},e.prototype.releaseLock=function(){if(!dt(this))throw pt("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");A(this)}},e}();function dt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof ft}function ht(e,t,n){var r=e._ownerReadableStream;r._disturbed=!0,"errored"===r._state?n._errorSteps(r._storedError):We(r._readableStreamController,t,n)}function pt(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function vt(e,t){var n=e.highWaterMark;if(void 0===n)return t;if(ve(n)||n<0)throw new RangeError("Invalid highWaterMark");return n}function gt(e){var t=e.size;return t||function(){return 1}}function mt(e,t){U(e,t);var n=null===e||void 0===e?void 0:e.highWaterMark,r=null===e||void 0===e?void 0:e.size;return{highWaterMark:void 0===n?void 0:Y(n),size:void 0===r?void 0:yt(r,t+" has member 'size' that")}}function yt(e,t){return V(e,t),function(t){return Y(e(t))}}function bt(e,t){U(e,t);var n=null===e||void 0===e?void 0:e.abort,r=null===e||void 0===e?void 0:e.close,a=null===e||void 0===e?void 0:e.start,i=null===e||void 0===e?void 0:e.type,o=null===e||void 0===e?void 0:e.write;return{abort:void 0===n?void 0:xt(n,e,t+" has member 'abort' that"),close:void 0===r?void 0:kt(r,e,t+" has member 'close' that"),start:void 0===a?void 0:wt(a,e,t+" has member 'start' that"),write:void 0===o?void 0:St(o,e,t+" has member 'write' that"),type:i}}function xt(e,t,n){return V(e,n),function(n){return w(e,t,[n])}}function kt(e,t,n){return V(e,n),function(){return w(e,t,[])}}function wt(e,t,n){return V(e,n),function(n){return k(e,t,[n])}}function St(e,t,n){return V(e,n),function(n,r){return w(e,t,[n,r])}}function _t(e,t){if(!Mt(e))throw new TypeError(t+" is not a WritableStream.")}function Ct(e){if("object"!==typeof e||null===e)return!1;try{return"boolean"===typeof e.aborted}catch(ae){return!1}}Object.defineProperties(ft.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(ft.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});var Et="function"===typeof AbortController;function At(){if(Et)return new AbortController}var It=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),void 0===e?e=null:G(e,"First parameter");var n=mt(t,"Second parameter"),r=bt(e,"First parameter");if(Nt(this),void 0!==r.type)throw new RangeError("Invalid type is specified");var a=gt(n);fn(this,r,vt(n,1),a)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!Mt(this))throw Sn("locked");return Ot(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){return void 0===e&&(e=void 0),Mt(this)?Ot(this)?h(new TypeError("Cannot abort a stream that already has a writer")):Pt(this,e):h(Sn("abort"))},e.prototype.close=function(){return Mt(this)?Ot(this)?h(new TypeError("Cannot close a stream that already has a writer")):Ht(this)?h(new TypeError("Cannot close an already-closing stream")):Ft(this):h(Sn("close"))},e.prototype.getWriter=function(){if(!Mt(this))throw Sn("getWriter");return Tt(this)},e}();function Tt(e){return new $t(e)}function Rt(e,t,n,r,a,i){void 0===a&&(a=1),void 0===i&&(i=function(){return 1});var o=Object.create(It.prototype);return Nt(o),cn(o,Object.create(un.prototype),e,t,n,r,a,i),o}function Nt(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new _,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Mt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof It}function Ot(e){return void 0!==e._writer}function Pt(e,t){var n;if("closed"===e._state||"errored"===e._state)return d(void 0);e._writableStreamController._abortReason=t,null===(n=e._writableStreamController._abortController)||void 0===n||n.abort();var r=e._state;if("closed"===r||"errored"===r)return d(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;var a=!1;"erroring"===r&&(a=!0,t=void 0);var i=f((function(n,r){e._pendingAbortRequest={_promise:void 0,_resolve:n,_reject:r,_reason:t,_wasAlreadyErroring:a}}));return e._pendingAbortRequest._promise=i,a||zt(e,t),i}function Ft(e){var t=e._state;if("closed"===t||"errored"===t)return h(new TypeError("The stream (in "+t+" state) is not in the writable state and cannot be closed"));var n=f((function(t,n){var r={_resolve:t,_reject:n};e._closeRequest=r})),r=e._writer;return void 0!==r&&e._backpressure&&"writable"===t&&jn(r),hn(e._writableStreamController),n}function Dt(e){return f((function(t,n){var r={_resolve:t,_reject:n};e._writeRequests.push(r)}))}function Lt(e,t){"writable"!==e._state?jt(e):zt(e,t)}function zt(e,t){var n=e._writableStreamController;e._state="erroring",e._storedError=t;var r=e._writer;void 0!==r&&nn(r,t),!Gt(e)&&n._started&&jt(e)}function jt(e){e._state="errored",e._writableStreamController[D]();var t=e._storedError;if(e._writeRequests.forEach((function(e){e._reject(t)})),e._writeRequests=new _,void 0!==e._pendingAbortRequest){var n=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,n._wasAlreadyErroring)return n._reject(t),void Yt(e);v(e._writableStreamController[F](n._reason),(function(){n._resolve(),Yt(e)}),(function(t){n._reject(t),Yt(e)}))}else Yt(e)}function Bt(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Wt(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,Lt(e,t)}function Ut(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var t=e._writer;void 0!==t&&Mn(t)}function Vt(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),Lt(e,t)}function Ht(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function Gt(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}function qt(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Xt(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Yt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var t=e._writer;void 0!==t&&Rn(t,e._storedError)}function Kt(e,t){var n=e._writer;void 0!==n&&t!==e._backpressure&&(t?Ln(n):jn(n)),e._backpressure=t}Object.defineProperties(It.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(It.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});var $t=function(){function e(e){if(q(e,1,"WritableStreamDefaultWriter"),_t(e,"First parameter"),Ot(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;var t=e._state;if("writable"===t)!Ht(e)&&e._backpressure?On(this):Fn(this),An(this);else if("erroring"===t)Pn(this,e._storedError),An(this);else if("closed"===t)Fn(this),Tn(this);else{var n=e._storedError;Pn(this,n),In(this,n)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return Zt(this)?this._closedPromise:h(Cn("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Zt(this))throw Cn("desiredSize");if(void 0===this._ownerWritableStream)throw En("desiredSize");return rn(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return Zt(this)?this._readyPromise:h(Cn("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){return void 0===e&&(e=void 0),Zt(this)?void 0===this._ownerWritableStream?h(En("abort")):Qt(this,e):h(Cn("abort"))},e.prototype.close=function(){if(!Zt(this))return h(Cn("close"));var e=this._ownerWritableStream;return void 0===e?h(En("close")):Ht(e)?h(new TypeError("Cannot close an already-closing stream")):Jt(this)},e.prototype.releaseLock=function(){if(!Zt(this))throw Cn("releaseLock");void 0!==this._ownerWritableStream&&an(this)},e.prototype.write=function(e){return void 0===e&&(e=void 0),Zt(this)?void 0===this._ownerWritableStream?h(En("write to")):on(this,e):h(Cn("write"))},e}();function Zt(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof $t}function Qt(e,t){return Pt(e._ownerWritableStream,t)}function Jt(e){return Ft(e._ownerWritableStream)}function en(e){var t=e._ownerWritableStream,n=t._state;return Ht(t)||"closed"===n?d(void 0):"errored"===n?h(t._storedError):Jt(e)}function tn(e,t){"pending"===e._closedPromiseState?Rn(e,t):Nn(e,t)}function nn(e,t){"pending"===e._readyPromiseState?Dn(e,t):zn(e,t)}function rn(e){var t=e._ownerWritableStream,n=t._state;return"errored"===n||"erroring"===n?null:"closed"===n?0:vn(t._writableStreamController)}function an(e){var t=e._ownerWritableStream,n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");nn(e,n),tn(e,n),t._writer=void 0,e._ownerWritableStream=void 0}function on(e,t){var n=e._ownerWritableStream,r=n._writableStreamController,a=pn(r,t);if(n!==e._ownerWritableStream)return h(En("write to"));var i=n._state;if("errored"===i)return h(n._storedError);if(Ht(n)||"closed"===i)return h(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return h(n._storedError);var o=Dt(n);return gn(r,t,a),o}Object.defineProperties($t.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty($t.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});var sn={},un=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"abortReason",{get:function(){if(!ln(this))throw _n("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){if(!ln(this))throw _n("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),e.prototype.error=function(e){if(void 0===e&&(e=void 0),!ln(this))throw _n("error");"writable"===this._controlledWritableStream._state&&wn(this,e)},e.prototype[F]=function(e){var t=this._abortAlgorithm(e);return dn(this),t},e.prototype[D]=function(){Ee(this)},e}();function ln(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof un}function cn(e,t,n,r,a,i,o,s){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Ee(t),t._abortReason=void 0,t._abortController=At(),t._started=!1,t._strategySizeAlgorithm=s,t._strategyHWM=o,t._writeAlgorithm=r,t._closeAlgorithm=a,t._abortAlgorithm=i;var u=kn(t);Kt(e,u),v(d(n()),(function(){t._started=!0,mn(t)}),(function(n){t._started=!0,Lt(e,n)}))}function fn(e,t,n,r){var a=Object.create(un.prototype),i=function(){},o=function(){return d(void 0)},s=function(){return d(void 0)},u=function(){return d(void 0)};void 0!==t.start&&(i=function(){return t.start(a)}),void 0!==t.write&&(o=function(e){return t.write(e,a)}),void 0!==t.close&&(s=function(){return t.close()}),void 0!==t.abort&&(u=function(e){return t.abort(e)}),cn(e,a,i,o,s,u,n,r)}function dn(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function hn(e){_e(e,sn,0),mn(e)}function pn(e,t){try{return e._strategySizeAlgorithm(t)}catch(n){return yn(e,n),1}}function vn(e){return e._strategyHWM-e._queueTotalSize}function gn(e,t,n){try{_e(e,t,n)}catch(a){return void yn(e,a)}var r=e._controlledWritableStream;Ht(r)||"writable"!==r._state||Kt(r,kn(e)),mn(e)}function mn(e){var t=e._controlledWritableStream;if(e._started&&void 0===t._inFlightWriteRequest)if("erroring"!==t._state){if(0!==e._queue.length){var n=Ce(e);n===sn?bn(e):xn(e,n)}}else jt(t)}function yn(e,t){"writable"===e._controlledWritableStream._state&&wn(e,t)}function bn(e){var t=e._controlledWritableStream;qt(t),Se(e);var n=e._closeAlgorithm();dn(e),v(n,(function(){Ut(t)}),(function(e){Vt(t,e)}))}function xn(e,t){var n=e._controlledWritableStream;Xt(n),v(e._writeAlgorithm(t),(function(){Bt(n);var t=n._state;if(Se(e),!Ht(n)&&"writable"===t){var r=kn(e);Kt(n,r)}mn(e)}),(function(t){"writable"===n._state&&dn(e),Wt(n,t)}))}function kn(e){return vn(e)<=0}function wn(e,t){var n=e._controlledWritableStream;dn(e),zt(n,t)}function Sn(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function _n(e){return new TypeError("WritableStreamDefaultController.prototype."+e+" can only be used on a WritableStreamDefaultController")}function Cn(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function En(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function An(e){e._closedPromise=f((function(t,n){e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"}))}function In(e,t){An(e),Rn(e,t)}function Tn(e){An(e),Mn(e)}function Rn(e,t){void 0!==e._closedPromise_reject&&(b(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Nn(e,t){In(e,t)}function Mn(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function On(e){e._readyPromise=f((function(t,n){e._readyPromise_resolve=t,e._readyPromise_reject=n})),e._readyPromiseState="pending"}function Pn(e,t){On(e),Dn(e,t)}function Fn(e){On(e),jn(e)}function Dn(e,t){void 0!==e._readyPromise_reject&&(b(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Ln(e){On(e)}function zn(e,t){Pn(e,t)}function jn(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(un.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(un.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});var Bn="undefined"!==typeof DOMException?DOMException:void 0;function Wn(e){if("function"!==typeof e&&"object"!==typeof e)return!1;try{return new e,!0}catch(ae){return!1}}function Un(){var e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}var Vn=Wn(Bn)?Bn:Un();function Hn(e,t,r,a,i,o){var s=J(e),u=Tt(t);e._disturbed=!0;var l=!1,c=d(void 0);return f((function(h,y){var x;if(void 0!==o){if(x=function(){var n=new Vn("Aborted","AbortError"),r=[];a||r.push((function(){return"writable"===t._state?Pt(t,n):d(void 0)})),i||r.push((function(){return"readable"===e._state?Cr(e,n):d(void 0)})),I((function(){return Promise.all(r.map((function(e){return e()})))}),!0,n)},o.aborted)return void x();o.addEventListener("abort",x)}function k(){return f((function(e,t){function n(r){r?e():p(w(),n,t)}n(!1)}))}function w(){return l?d(!0):p(u._readyPromise,(function(){return f((function(e,t){ue(s,{_chunkSteps:function(t){c=p(on(u,t),void 0,n),e(!1)},_closeSteps:function(){return e(!0)},_errorSteps:t})}))}))}if(C(e,s._closedPromise,(function(e){a?T(!0,e):I((function(){return Pt(t,e)}),!0,e)})),C(t,u._closedPromise,(function(t){i?T(!0,t):I((function(){return Cr(e,t)}),!0,t)})),E(e,s._closedPromise,(function(){r?T():I((function(){return en(u)}))})),Ht(t)||"closed"===t._state){var S=new TypeError("the destination writable stream closed before all data could be piped to it");i?T(!0,S):I((function(){return Cr(e,S)}),!0,S)}function _(){var e=c;return p(c,(function(){return e!==c?_():void 0}))}function C(e,t,n){"errored"===e._state?n(e._storedError):m(t,n)}function E(e,t,n){"closed"===e._state?n():g(t,n)}function I(e,n,r){function a(){v(e(),(function(){return R(n,r)}),(function(e){return R(!0,e)}))}l||(l=!0,"writable"!==t._state||Ht(t)?a():g(_(),a))}function T(e,n){l||(l=!0,"writable"!==t._state||Ht(t)?R(e,n):g(_(),(function(){return R(e,n)})))}function R(e,t){an(u),A(s),void 0!==o&&o.removeEventListener("abort",x),e?y(t):h(void 0)}b(k())}))}var Gn=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!qn(this))throw ar("desiredSize");return Jn(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!qn(this))throw ar("close");if(!tr(this))throw new TypeError("The stream is not in a state that permits close");$n(this)},e.prototype.enqueue=function(e){if(void 0===e&&(e=void 0),!qn(this))throw ar("enqueue");if(!tr(this))throw new TypeError("The stream is not in a state that permits enqueue");return Zn(this,e)},e.prototype.error=function(e){if(void 0===e&&(e=void 0),!qn(this))throw ar("error");Qn(this,e)},e.prototype[L]=function(e){Ee(this);var t=this._cancelAlgorithm(e);return Kn(this),t},e.prototype[z]=function(e){var t=this._controlledReadableStream;if(this._queue.length>0){var n=Se(this);this._closeRequested&&0===this._queue.length?(Kn(this),Er(t)):Xn(this),e._chunkSteps(n)}else ee(t,e),Xn(this)},e}();function qn(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Gn}function Xn(e){Yn(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,v(e._pullAlgorithm(),(function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Xn(e))}),(function(t){Qn(e,t)}))))}function Yn(e){var t=e._controlledReadableStream;return!!tr(e)&&!!e._started&&(!!(_r(t)&&ne(t)>0)||Jn(e)>0)}function Kn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function $n(e){if(tr(e)){var t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(Kn(e),Er(t))}}function Zn(e,t){if(tr(e)){var n=e._controlledReadableStream;if(_r(n)&&ne(n)>0)te(n,t,!1);else{var r=void 0;try{r=e._strategySizeAlgorithm(t)}catch(a){throw Qn(e,a),a}try{_e(e,t,r)}catch(i){throw Qn(e,i),i}}Xn(e)}}function Qn(e,t){var n=e._controlledReadableStream;"readable"===n._state&&(Ee(e),Kn(e),Ar(n,t))}function Jn(e){var t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function er(e){return!Yn(e)}function tr(e){var t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function nr(e,t,n,r,a,i,o){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Ee(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=o,t._strategyHWM=i,t._pullAlgorithm=r,t._cancelAlgorithm=a,e._readableStreamController=t,v(d(n()),(function(){t._started=!0,Xn(t)}),(function(e){Qn(t,e)}))}function rr(e,t,n,r){var a=Object.create(Gn.prototype),i=function(){},o=function(){return d(void 0)},s=function(){return d(void 0)};void 0!==t.start&&(i=function(){return t.start(a)}),void 0!==t.pull&&(o=function(){return t.pull(a)}),void 0!==t.cancel&&(s=function(e){return t.cancel(e)}),nr(e,a,i,o,s,n,r)}function ar(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function ir(e,t){return Te(e._readableStreamController)?sr(e):or(e)}function or(e,t){var n,r,a,i,o,s=J(e),u=!1,l=!1,c=!1,h=!1,p=f((function(e){o=e}));function v(){return u?(l=!0,d(void 0)):(u=!0,ue(s,{_chunkSteps:function(e){x((function(){l=!1;var t=e,n=e;c||Zn(a._readableStreamController,t),h||Zn(i._readableStreamController,n),u=!1,l&&v()}))},_closeSteps:function(){u=!1,c||$n(a._readableStreamController),h||$n(i._readableStreamController),c&&h||o(void 0)},_errorSteps:function(){u=!1}}),d(void 0))}function g(t){if(c=!0,n=t,h){var a=ge([n,r]),i=Cr(e,a);o(i)}return p}function y(t){if(h=!0,r=t,c){var a=ge([n,r]),i=Cr(e,a);o(i)}return p}function b(){}return a=xr(b,v,g),i=xr(b,v,y),m(s._closedPromise,(function(e){Qn(a._readableStreamController,e),Qn(i._readableStreamController,e),c&&h||o(void 0)})),[a,i]}function sr(e){var t,n,r,a,i,o=J(e),s=!1,u=!1,l=!1,c=!1,h=!1,p=f((function(e){i=e}));function v(e){m(e._closedPromise,(function(t){e===o&&($e(r._readableStreamController,t),$e(a._readableStreamController,t),c&&h||i(void 0))}))}function g(){dt(o)&&(A(o),v(o=J(e))),ue(o,{_chunkSteps:function(t){x((function(){u=!1,l=!1;var n=t,o=t;if(!c&&!h)try{o=we(t)}catch(f){return $e(r._readableStreamController,f),$e(a._readableStreamController,f),void i(Cr(e,f))}c||Ke(r._readableStreamController,n),h||Ke(a._readableStreamController,o),s=!1,u?b():l&&k()}))},_closeSteps:function(){s=!1,c||Ye(r._readableStreamController),h||Ye(a._readableStreamController),r._readableStreamController._pendingPullIntos.length>0&&Je(r._readableStreamController,0),a._readableStreamController._pendingPullIntos.length>0&&Je(a._readableStreamController,0),c&&h||i(void 0)},_errorSteps:function(){s=!1}})}function y(t,n){se(o)&&(A(o),v(o=ot(e)));var f=n?a:r,d=n?r:a;ht(o,t,{_chunkSteps:function(t){x((function(){u=!1,l=!1;var r=n?h:c;if(n?c:h)r||et(f._readableStreamController,t);else{var a=void 0;try{a=we(t)}catch(o){return $e(f._readableStreamController,o),$e(d._readableStreamController,o),void i(Cr(e,o))}r||et(f._readableStreamController,t),Ke(d._readableStreamController,a)}s=!1,u?b():l&&k()}))},_closeSteps:function(e){s=!1;var t=n?h:c,r=n?c:h;t||Ye(f._readableStreamController),r||Ye(d._readableStreamController),void 0!==e&&(t||et(f._readableStreamController,e),!r&&d._readableStreamController._pendingPullIntos.length>0&&Je(d._readableStreamController,0)),t&&r||i(void 0)},_errorSteps:function(){s=!1}})}function b(){if(s)return u=!0,d(void 0);s=!0;var e=Ze(r._readableStreamController);return null===e?g():y(e._view,!1),d(void 0)}function k(){if(s)return l=!0,d(void 0);s=!0;var e=Ze(a._readableStreamController);return null===e?g():y(e._view,!0),d(void 0)}function w(r){if(c=!0,t=r,h){var a=ge([t,n]),o=Cr(e,a);i(o)}return p}function S(r){if(h=!0,n=r,c){var a=ge([t,n]),o=Cr(e,a);i(o)}return p}function _(){}return r=kr(_,b,w),a=kr(_,k,S),v(o),[r,a]}function ur(e,t){U(e,t);var n=e,r=null===n||void 0===n?void 0:n.autoAllocateChunkSize,a=null===n||void 0===n?void 0:n.cancel,i=null===n||void 0===n?void 0:n.pull,o=null===n||void 0===n?void 0:n.start,s=null===n||void 0===n?void 0:n.type;return{autoAllocateChunkSize:void 0===r?void 0:Z(r,t+" has member 'autoAllocateChunkSize' that"),cancel:void 0===a?void 0:lr(a,n,t+" has member 'cancel' that"),pull:void 0===i?void 0:cr(i,n,t+" has member 'pull' that"),start:void 0===o?void 0:fr(o,n,t+" has member 'start' that"),type:void 0===s?void 0:dr(s,t+" has member 'type' that")}}function lr(e,t,n){return V(e,n),function(n){return w(e,t,[n])}}function cr(e,t,n){return V(e,n),function(n){return w(e,t,[n])}}function fr(e,t,n){return V(e,n),function(n){return k(e,t,[n])}}function dr(e,t){if("bytes"!==(e=""+e))throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamType");return e}function hr(e,t){U(e,t);var n=null===e||void 0===e?void 0:e.mode;return{mode:void 0===n?void 0:pr(n,t+" has member 'mode' that")}}function pr(e,t){if("byob"!==(e=""+e))throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode");return e}function vr(e,t){U(e,t);var n=null===e||void 0===e?void 0:e.preventCancel;return{preventCancel:Boolean(n)}}function gr(e,t){U(e,t);var n=null===e||void 0===e?void 0:e.preventAbort,r=null===e||void 0===e?void 0:e.preventCancel,a=null===e||void 0===e?void 0:e.preventClose,i=null===e||void 0===e?void 0:e.signal;return void 0!==i&&mr(i,t+" has member 'signal' that"),{preventAbort:Boolean(n),preventCancel:Boolean(r),preventClose:Boolean(a),signal:i}}function mr(e,t){if(!Ct(e))throw new TypeError(t+" is not an AbortSignal.")}function yr(e,t){U(e,t);var n=null===e||void 0===e?void 0:e.readable;X(n,"readable","ReadableWritablePair"),Q(n,t+" has member 'readable' that");var r=null===e||void 0===e?void 0:e.writable;return X(r,"writable","ReadableWritablePair"),_t(r,t+" has member 'writable' that"),{readable:n,writable:r}}Object.defineProperties(Gn.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(Gn.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});var br=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),void 0===e?e=null:G(e,"First parameter");var n=mt(t,"Second parameter"),r=ur(e,"First parameter");if(wr(this),"bytes"===r.type){if(void 0!==n.size)throw new RangeError("The strategy for a byte stream cannot have a size function");nt(this,r,vt(n,0))}else{var a=gt(n);rr(this,r,vt(n,1),a)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!Sr(this))throw Ir("locked");return _r(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(e){return void 0===e&&(e=void 0),Sr(this)?_r(this)?h(new TypeError("Cannot cancel a stream that already has a reader")):Cr(this,e):h(Ir("cancel"))},e.prototype.getReader=function(e){if(void 0===e&&(e=void 0),!Sr(this))throw Ir("getReader");return void 0===hr(e,"First parameter").mode?J(this):ot(this)},e.prototype.pipeThrough=function(e,t){if(void 0===t&&(t={}),!Sr(this))throw Ir("pipeThrough");q(e,1,"pipeThrough");var n=yr(e,"First parameter"),r=gr(t,"Second parameter");if(_r(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ot(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return b(Hn(this,n.writable,r.preventClose,r.preventAbort,r.preventCancel,r.signal)),n.readable},e.prototype.pipeTo=function(e,t){if(void 0===t&&(t={}),!Sr(this))return h(Ir("pipeTo"));if(void 0===e)return h("Parameter 1 is required in 'pipeTo'.");if(!Mt(e))return h(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var n;try{n=gr(t,"Second parameter")}catch(r){return h(r)}return _r(this)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ot(e)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Hn(this,e,n.preventClose,n.preventAbort,n.preventCancel,n.signal)},e.prototype.tee=function(){if(!Sr(this))throw Ir("tee");return ge(ir(this))},e.prototype.values=function(e){if(void 0===e&&(e=void 0),!Sr(this))throw Ir("values");return de(this,vr(e,"First parameter").preventCancel)},e}();function xr(e,t,n,r,a){void 0===r&&(r=1),void 0===a&&(a=function(){return 1});var i=Object.create(br.prototype);return wr(i),nr(i,Object.create(Gn.prototype),e,t,n,r,a),i}function kr(e,t,n){var r=Object.create(br.prototype);return wr(r),tt(r,Object.create(Ie.prototype),e,t,n,0,void 0),r}function wr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Sr(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof br}function _r(e){return void 0!==e._reader}function Cr(e,t){if(e._disturbed=!0,"closed"===e._state)return d(void 0);if("errored"===e._state)return h(e._storedError);Er(e);var r=e._reader;return void 0!==r&&dt(r)&&(r._readIntoRequests.forEach((function(e){e._closeSteps(void 0)})),r._readIntoRequests=new _),y(e._readableStreamController[L](t),n)}function Er(e){e._state="closed";var t=e._reader;void 0!==t&&(P(t),se(t)&&(t._readRequests.forEach((function(e){e._closeSteps()})),t._readRequests=new _))}function Ar(e,t){e._state="errored",e._storedError=t;var n=e._reader;void 0!==n&&(M(n,t),se(n)?(n._readRequests.forEach((function(e){e._errorSteps(t)})),n._readRequests=new _):(n._readIntoRequests.forEach((function(e){e._errorSteps(t)})),n._readIntoRequests=new _))}function Ir(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function Tr(e,t){U(e,t);var n=null===e||void 0===e?void 0:e.highWaterMark;return X(n,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Y(n)}}Object.defineProperties(br.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(br.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"===typeof t.asyncIterator&&Object.defineProperty(br.prototype,t.asyncIterator,{value:br.prototype.values,writable:!0,configurable:!0});var Rr=function(e){return e.byteLength};Object.defineProperty(Rr,"name",{value:"size",configurable:!0});var Nr=function(){function e(e){q(e,1,"ByteLengthQueuingStrategy"),e=Tr(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Or(this))throw Mr("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Or(this))throw Mr("size");return Rr},enumerable:!1,configurable:!0}),e}();function Mr(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function Or(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Nr}Object.defineProperties(Nr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(Nr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});var Pr=function(){return 1};Object.defineProperty(Pr,"name",{value:"size",configurable:!0});var Fr=function(){function e(e){q(e,1,"CountQueuingStrategy"),e=Tr(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Lr(this))throw Dr("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Lr(this))throw Dr("size");return Pr},enumerable:!1,configurable:!0}),e}();function Dr(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function Lr(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof Fr}function zr(e,t){U(e,t);var n=null===e||void 0===e?void 0:e.flush,r=null===e||void 0===e?void 0:e.readableType,a=null===e||void 0===e?void 0:e.start,i=null===e||void 0===e?void 0:e.transform,o=null===e||void 0===e?void 0:e.writableType;return{flush:void 0===n?void 0:jr(n,e,t+" has member 'flush' that"),readableType:r,start:void 0===a?void 0:Br(a,e,t+" has member 'start' that"),transform:void 0===i?void 0:Wr(i,e,t+" has member 'transform' that"),writableType:o}}function jr(e,t,n){return V(e,n),function(n){return w(e,t,[n])}}function Br(e,t,n){return V(e,n),function(n){return k(e,t,[n])}}function Wr(e,t,n){return V(e,n),function(n,r){return w(e,t,[n,r])}}Object.defineProperties(Fr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(Fr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});var Ur=function(){function e(e,t,n){void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n={}),void 0===e&&(e=null);var r=mt(t,"Second parameter"),a=mt(n,"Third parameter"),i=zr(e,"First parameter");if(void 0!==i.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==i.writableType)throw new RangeError("Invalid writableType specified");var o,s=vt(a,0),u=gt(a),l=vt(r,1),c=gt(r);Vr(this,f((function(e){o=e})),l,c,s,u),Zr(this,i),void 0!==i.start?o(i.start(this._transformStreamController)):o(void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!Hr(this))throw ua("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!Hr(this))throw ua("writable");return this._writable},enumerable:!1,configurable:!0}),e}();function Vr(e,t,n,r,a,i){function o(){return t}function s(t){return ra(e,t)}function u(t){return aa(e,t)}function l(){return ia(e)}function c(){return oa(e)}function f(t){return qr(e,t),d(void 0)}e._writable=Rt(o,s,l,u,n,r),e._readable=xr(o,c,f,a,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Xr(e,!0),e._transformStreamController=void 0}function Hr(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Ur}function Gr(e,t){Qn(e._readable._readableStreamController,t),qr(e,t)}function qr(e,t){Qr(e._transformStreamController),yn(e._writable._writableStreamController,t),e._backpressure&&Xr(e,!1)}function Xr(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=f((function(t){e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(Ur.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(Ur.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});var Yr=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Kr(this))throw sa("desiredSize");return Jn(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(e){if(void 0===e&&(e=void 0),!Kr(this))throw sa("enqueue");Jr(this,e)},e.prototype.error=function(e){if(void 0===e&&(e=void 0),!Kr(this))throw sa("error");ea(this,e)},e.prototype.terminate=function(){if(!Kr(this))throw sa("terminate");na(this)},e}();function Kr(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof Yr}function $r(e,t,n,r){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=n,t._flushAlgorithm=r}function Zr(e,t){var n=Object.create(Yr.prototype),r=function(e){try{return Jr(n,e),d(void 0)}catch(t){return h(t)}},a=function(){return d(void 0)};void 0!==t.transform&&(r=function(e){return t.transform(e,n)}),void 0!==t.flush&&(a=function(){return t.flush(n)}),$r(e,n,r,a)}function Qr(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Jr(e,t){var n=e._controlledTransformStream,r=n._readable._readableStreamController;if(!tr(r))throw new TypeError("Readable side is not in a state that permits enqueue");try{Zn(r,t)}catch(a){throw qr(n,a),n._readable._storedError}er(r)!==n._backpressure&&Xr(n,!0)}function ea(e,t){Gr(e._controlledTransformStream,t)}function ta(e,t){return y(e._transformAlgorithm(t),void 0,(function(t){throw Gr(e._controlledTransformStream,t),t}))}function na(e){var t=e._controlledTransformStream;$n(t._readable._readableStreamController),qr(t,new TypeError("TransformStream terminated"))}function ra(e,t){var n=e._transformStreamController;return e._backpressure?y(e._backpressureChangePromise,(function(){var r=e._writable;if("erroring"===r._state)throw r._storedError;return ta(n,t)})):ta(n,t)}function aa(e,t){return Gr(e,t),d(void 0)}function ia(e){var t=e._readable,n=e._transformStreamController,r=n._flushAlgorithm();return Qr(n),y(r,(function(){if("errored"===t._state)throw t._storedError;$n(t._readableStreamController)}),(function(n){throw Gr(e,n),t._storedError}))}function oa(e){return Xr(e,!1),e._backpressureChangePromise}function sa(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function ua(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}Object.defineProperties(Yr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"===typeof t.toStringTag&&Object.defineProperty(Yr.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Nr,e.CountQueuingStrategy=Fr,e.ReadableByteStreamController=Ie,e.ReadableStream=br,e.ReadableStreamBYOBReader=ft,e.ReadableStreamBYOBRequest=Ae,e.ReadableStreamDefaultController=Gn,e.ReadableStreamDefaultReader=oe,e.TransformStream=Ur,e.TransformStreamDefaultController=Yr,e.WritableStream=It,e.WritableStreamDefaultController=un,e.WritableStreamDefaultWriter=$t,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},i=n(4);function o(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,u,"next",e)}function u(e){o(i,r,a,s,u,"throw",e)}s(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var f=function(){function e(){u(this,e),this.constructor===e&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}return c(e,[{key:"create",value:function(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");var n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}},{key:"reset",value:function(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}},{key:"destroy",value:function(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}},{key:"_createCanvas",value:function(e,t){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}]),e}();t.BaseCanvasFactory=f;var d=function(){function e(t){var n=t.baseUrl,r=void 0===n?null:n,a=t.isCompressed,o=void 0!==a&&a;u(this,e),this.constructor===e&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=r,this.isCompressed=o}return c(e,[{key:"fetch",value:function(){var e=s(a.default.mark((function e(t){var n,r,o,s=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,this.baseUrl){e.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(n){e.next=5;break}throw new Error("CMap name must be specified.");case 5:return r=this.baseUrl+n+(this.isCompressed?".bcmap":""),o=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE,e.abrupt("return",this._fetchData(r,o).catch((function(e){throw new Error("Unable to load ".concat(s.isCompressed?"binary ":"","CMap at: ").concat(r))})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchData",value:function(e,t){(0,i.unreachable)("Abstract method `_fetchData` called.")}}]),e}();t.BaseCMapReaderFactory=d;var h=function(){function e(t){var n=t.baseUrl,r=void 0===n?null:n;u(this,e),this.constructor===e&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=r}return c(e,[{key:"fetch",value:function(){var e=s(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filename,this.baseUrl){e.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(n){e.next=5;break}throw new Error("Font filename must be specified.");case 5:return r="".concat(this.baseUrl).concat(n),e.abrupt("return",this._fetchData(r).catch((function(e){throw new Error("Unable to load font data at: ".concat(r))})));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchData",value:function(e){(0,i.unreachable)("Abstract method `_fetchData` called.")}}]),e}();t.BaseStandardFontDataFactory=h;var p=function(){function e(){u(this,e),this.constructor===e&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}return c(e,[{key:"create",value:function(e,t){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");var n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),n.setAttribute("width","".concat(e,"px")),n.setAttribute("height","".concat(t,"px")),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),n}},{key:"createElement",value:function(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}},{key:"_createSVG",value:function(e){(0,i.unreachable)("Abstract method `_createSVG` called.")}}]),e}();t.BaseSVGFactory=p},function(__unused_webpack_module,exports,__w_pdfjs_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _regenerator=_interopRequireDefault(__w_pdfjs_require__(2)),_util=__w_pdfjs_require__(4),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(137),_node_utils=__w_pdfjs_require__(138),_annotation_storage=__w_pdfjs_require__(139),_canvas=__w_pdfjs_require__(140),_worker_options=__w_pdfjs_require__(142),_is_node=__w_pdfjs_require__(6),_message_handler=__w_pdfjs_require__(143),_metadata=__w_pdfjs_require__(144),_optional_content_config=__w_pdfjs_require__(145),_transport_stream=__w_pdfjs_require__(146),_xfa_text=__w_pdfjs_require__(147);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classPrivateFieldInitSpec(e,t,n){_checkPrivateRedeclaration(e,t),t.set(e,n)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(e,t,n){return _classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,t,"set"),n),n}function _classApplyDescriptorSet(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function asyncGeneratorStep(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){asyncGeneratorStep(i,r,a,o,s,"next",e)}function s(e){asyncGeneratorStep(i,r,a,o,s,"throw",e)}o(void 0)}))}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"===typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return _typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){var t,n=new PDFDocumentLoadingTask;if("string"===typeof e||e instanceof URL)t={url:e};else if((0,_util.isArrayBuffer)(e))t={data:e};else if(e instanceof PDFDataRangeTransport)t={range:e};else{if("object"!==_typeof(e))throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=e}var r=Object.create(null),a=null,i=null;for(var o in t){var s=t[o];switch(o){case"url":if("undefined"!==typeof window)try{r[o]=new URL(s,window.location).href;continue}catch(c){(0,_util.warn)('Cannot create valid URL: "'.concat(c,'".'))}else if("string"===typeof s||s instanceof URL){r[o]=s.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":a=s;continue;case"worker":i=s;continue;case"data":if(_is_node.isNodeJS&&"undefined"!==typeof Buffer&&s instanceof Buffer)r[o]=new Uint8Array(s);else{if(s instanceof Uint8Array)break;if("string"===typeof s)r[o]=(0,_util.stringToBytes)(s);else if("object"!==_typeof(s)||null===s||isNaN(s.length)){if(!(0,_util.isArrayBuffer)(s))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");r[o]=new Uint8Array(s)}else r[o]=new Uint8Array(s)}continue}r[o]=s}if(r.rangeChunkSize=r.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory,r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory,r.ignoreErrors=!0!==r.stopAtErrors,r.fontExtraProperties=!0===r.fontExtraProperties,r.pdfBug=!0===r.pdfBug,r.enableXfa=!0===r.enableXfa,("string"!==typeof r.docBaseUrl||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null),Number.isInteger(r.maxImageSize)||(r.maxImageSize=-1),"boolean"!==typeof r.useWorkerFetch&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!==typeof r.isEvalSupported&&(r.isEvalSupported=!0),"boolean"!==typeof r.disableFontFace&&(r.disableFontFace=_is_node.isNodeJS),"boolean"!==typeof r.useSystemFonts&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace),"undefined"===typeof r.ownerDocument&&(r.ownerDocument=globalThis.document),"boolean"!==typeof r.disableRange&&(r.disableRange=!1),"boolean"!==typeof r.disableStream&&(r.disableStream=!1),"boolean"!==typeof r.disableAutoFetch&&(r.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(r.verbosity),!i){var u={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};i=u.port?PDFWorker.fromPort(u):new PDFWorker(u),n._worker=i}var l=n.docId;return i.promise.then((function(){if(n.destroyed)throw new Error("Loading aborted");var e=_fetchDocument(i,r,a,l),t=new Promise((function(e){var t;a?t=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},a):r.data||(t=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream})),e(t)}));return Promise.all([e,t]).then((function(e){var t=_slicedToArray(e,2),a=t[0],o=t[1];if(n.destroyed)throw new Error("Loading aborted");var s=new _message_handler.MessageHandler(l,a,i.port),u=new WorkerTransport(s,n,o,r);n._transport=u,s.send("Ready",null)}))})).catch(n._capability.reject),n}function _fetchDocument(e,t,n,r){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(_regenerator.default.mark((function e(t,n,r,a){var i;return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.destroyed){e.next=2;break}throw new Error("Worker was destroyed");case 2:return r&&(n.length=r.length,n.initialData=r.initialData,n.progressiveDone=r.progressiveDone,n.contentDispositionFilename=r.contentDispositionFilename),e.next=5,t.messageHandler.sendWithPromise("GetDocRequest",{docId:a,apiVersion:"2.12.313",source:{data:n.data,url:n.url,password:n.password,disableAutoFetch:n.disableAutoFetch,rangeChunkSize:n.rangeChunkSize,length:n.length},maxImageSize:n.maxImageSize,disableFontFace:n.disableFontFace,docBaseUrl:n.docBaseUrl,ignoreErrors:n.ignoreErrors,isEvalSupported:n.isEvalSupported,fontExtraProperties:n.fontExtraProperties,enableXfa:n.enableXfa,useSystemFonts:n.useSystemFonts,cMapUrl:n.useWorkerFetch?n.cMapUrl:null,standardFontDataUrl:n.useWorkerFetch?n.standardFontDataUrl:null});case 5:if(i=e.sent,!t.destroyed){e.next=8;break}throw new Error("Worker was destroyed");case 8:return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;var PDFDocumentLoadingTask=function(){function e(){_classCallCheck(this,e),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat(e.idCounters.doc++),this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return _createClass(e,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:function(){var e=_asyncToGenerator(_regenerator.default.mark((function e(){var t;return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.destroyed=!0,e.next=3,null===(t=this._transport)||void 0===t?void 0:t.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"idCounters",get:function(){return(0,_util.shadow)(this,"idCounters",{doc:0})}}]),e}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var PDFDataRangeTransport=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.length=t,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(e,[{key:"addRangeListener",value:function(e){this._rangeListeners.push(e)}},{key:"addProgressListener",value:function(e){this._progressListeners.push(e)}},{key:"addProgressiveReadListener",value:function(e){this._progressiveReadListeners.push(e)}},{key:"addProgressiveDoneListener",value:function(e){this._progressiveDoneListeners.push(e)}},{key:"onDataRange",value:function(e,t){var n,r=_createForOfIteratorHelper(this._rangeListeners);try{for(r.s();!(n=r.n()).done;)(0,n.value)(e,t)}catch(a){r.e(a)}finally{r.f()}}},{key:"onDataProgress",value:function(e,t){var n=this;this._readyCapability.promise.then((function(){var r,a=_createForOfIteratorHelper(n._progressListeners);try{for(a.s();!(r=a.n()).done;)(0,r.value)(e,t)}catch(i){a.e(i)}finally{a.f()}}))}},{key:"onDataProgressiveRead",value:function(e){var t=this;this._readyCapability.promise.then((function(){var n,r=_createForOfIteratorHelper(t._progressiveReadListeners);try{for(r.s();!(n=r.n()).done;)(0,n.value)(e)}catch(a){r.e(a)}finally{r.f()}}))}},{key:"onDataProgressiveDone",value:function(){var e=this;this._readyCapability.promise.then((function(){var t,n=_createForOfIteratorHelper(e._progressiveDoneListeners);try{for(n.s();!(t=n.n()).done;)(0,t.value)()}catch(r){n.e(r)}finally{n.f()}}))}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),e}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._pdfInfo=t,this._transport=n,Object.defineProperty(this,"fingerprint",{get:function(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:function(){var e=_asyncToGenerator(_regenerator.default.mark((function e(){return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),e.abrupt("return",r.stats||{streamTypes:{},fontTypes:{}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})}return _createClass(e,[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"stats",get:function(){return this._transport.stats}},{key:"isPureXfa",get:function(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(e){return this._transport.getPage(e)}},{key:"getPageIndex",value:function(e){return this._transport.getPageIndex(e)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(e){return this._transport.getDestination(e)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"saveDocument",value:function(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),e}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this._pageIndex=t,this._pageInfo=n,this._ownerDocument=a,this._transport=r,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}return _createClass(e,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scale,n=e.rotation,r=void 0===n?this.rotate:n,a=e.offsetX,i=void 0===a?0:a,o=e.offsetY,s=void 0===o?0:o,u=e.dontFlip,l=void 0!==u&&u;return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:r,offsetX:i,offsetY:s,dontFlip:l})}},{key:"getAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.intent,n=void 0===t?"display":t,r=this._transport.getRenderingIntent(n),a=this._annotationPromises.get(r.cacheKey);return a||(a=this._transport.getAnnotations(this._pageIndex,r.renderingIntent),this._annotationPromises.set(r.cacheKey,a),a=a.then((function(e){var t,n=_createForOfIteratorHelper(e);try{var r=function(){var e=t.value;void 0!==e.titleObj&&Object.defineProperty(e,"title",{get:function(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),e.titleObj.str}}),void 0!==e.contentsObj&&Object.defineProperty(e,"contents",{get:function(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),e.contentsObj.str}})};for(n.s();!(t=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}return e}))),a}},{key:"getJSActions",value:function(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:function(){var e=_asyncToGenerator(_regenerator.default.mark((function e(){var t;return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null===(t=this._transport._htmlForXfa)||void 0===t?void 0:t.children[this._pageIndex])||null);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(e){var t,n,r,a=this,i=e.canvasContext,o=e.viewport,s=e.intent,u=void 0===s?"display":s,l=e.annotationMode,c=void 0===l?_util.AnnotationMode.ENABLE:l,f=e.transform,d=void 0===f?null:f,h=e.imageLayer,p=void 0===h?null:h,v=e.canvasFactory,g=void 0===v?null:v,m=e.background,y=void 0===m?null:m,b=e.optionalContentConfigPromise,x=void 0===b?null:b,k=e.annotationCanvasMap,w=void 0===k?null:k;void 0!==(null===(t=arguments[0])||void 0===t?void 0:t.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&c===_util.AnnotationMode.ENABLE&&(c=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null===(n=arguments[0])||void 0===n?void 0:n.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&c===_util.AnnotationMode.ENABLE&&(c=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");var S=this._transport.getRenderingIntent(u,c);this.pendingCleanup=!1,x||(x=this._transport.getOptionalContentConfig());var _=this._intentStates.get(S.cacheKey);_||(_=Object.create(null),this._intentStates.set(S.cacheKey,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);var C=g||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),E=!!(S.renderingIntent&_util.RenderingIntentFlag.PRINT);_.displayReadyCapability||(_.displayReadyCapability=(0,_util.createPromiseCapability)(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(S));var A=function(e){_.renderTasks.delete(I),(a.cleanupAfterRender||E)&&(a.pendingCleanup=!0),a._tryCleanup(),e?(I.capability.reject(e),a._abortOperatorList({intentState:_,reason:e instanceof Error?e:new Error(e)})):I.capability.resolve(),a._stats&&(a._stats.timeEnd("Rendering"),a._stats.timeEnd("Overall"))},I=new InternalRenderTask({callback:A,params:{canvasContext:i,viewport:o,transform:d,imageLayer:p,background:y},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:w,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:C,useRequestAnimationFrame:!E,pdfBug:this._pdfBug});((r=_).renderTasks||(r.renderTasks=new Set)).add(I);var T=I.task;return Promise.all([_.displayReadyCapability.promise,x]).then((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];a.pendingCleanup?A():(a._stats&&a._stats.time("Rendering"),I.initializeGraphics({transparency:n,optionalContentConfig:r}),I.operatorListChanged())})).catch(A),T}},{key:"getOperatorList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.intent,n=void 0===t?"display":t,r=e.annotationMode,a=void 0===r?_util.AnnotationMode.ENABLE:r;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(o))}var o,s,u=this._transport.getRenderingIntent(n,a,!0),l=this._intentStates.get(u.cacheKey);return l||(l=Object.create(null),this._intentStates.set(u.cacheKey,l)),l.opListReadCapability||((o=Object.create(null)).operatorListChanged=i,l.opListReadCapability=(0,_util.createPromiseCapability)(),((s=l).renderTasks||(s.renderTasks=new Set)).add(o),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(u)),l.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.normalizeWhitespace,n=void 0!==t&&t,r=e.disableCombineTextItems,a=void 0!==r&&r,i=e.includeMarkedContent,o=void 0!==i&&i,s=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:!0===n,combineTextItems:!0!==a,includeMarkedContent:!0===o},{highWaterMark:s,size:function(e){return e.items.length}})}},{key:"getTextContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((function(e){return _xfa_text.XfaText.textContent(e)}));var t=this.streamTextContent(e);return new Promise((function(e,n){var r=t.getReader(),a={items:[],styles:Object.create(null)};!function t(){r.read().then((function(n){var r,i=n.value;n.done?e(a):(Object.assign(a.styles,i.styles),(r=a.items).push.apply(r,_toConsumableArray(i.items)),t())}),n)}()}))}},{key:"getStructTree",value:function(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function(){this.destroyed=!0;var e,t=[],n=_createForOfIteratorHelper(this._intentStates.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability){var a,i=_createForOfIteratorHelper(r.renderTasks);try{for(i.s();!(a=i.n()).done;){var o=a.value;t.push(o.completed),o.cancel()}}catch(s){i.e(s)}finally{i.f()}}}}catch(s){n.e(s)}finally{n.f()}return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}},{key:"cleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pendingCleanup=!0,this._tryCleanup(e)}},{key:"_tryCleanup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;var t,n=_createForOfIteratorHelper(this._intentStates.values());try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.renderTasks,i=r.operatorList;if(a.size>0||!i.lastChunk)return!1}}catch(o){n.e(o)}finally{n.f()}return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(e,t){var n=this._intentStates.get(t);n&&(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(e))}},{key:"_renderPageChunk",value:function(e,t){for(var n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk;var a,i=_createForOfIteratorHelper(t.renderTasks);try{for(i.s();!(a=i.n()).done;)a.value.operatorListChanged()}catch(o){i.e(o)}finally{i.f()}e.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(e){var t=this,n=e.renderingIntent,r=e.cacheKey,a=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:r,annotationStorage:n&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),i=this._intentStates.get(r);i.streamReader=a,function e(){a.read().then((function(n){var r=n.value;n.done?i.streamReader=null:t._transport.destroyed||(t._renderPageChunk(r,i),e())}),(function(e){if(i.streamReader=null,!t._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;var n,r=_createForOfIteratorHelper(i.renderTasks);try{for(r.s();!(n=r.n()).done;)n.value.operatorListChanged()}catch(a){r.e(a)}finally{r.f()}t._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(e);else{if(!i.opListReadCapability)throw e;i.opListReadCapability.reject(e)}}}))}()}},{key:"_abortOperatorList",value:function(e){var t=this,n=e.intentState,r=e.reason,a=e.force,i=void 0!==a&&a;if(n.streamReader){if(!i){if(n.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException)return void(n.streamReaderCancelTimeout=setTimeout((function(){t._abortOperatorList({intentState:n,reason:r,force:!0}),n.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(n.streamReader.cancel(new _util.AbortException(r.message)).catch((function(){})),n.streamReader=null,!this._transport.destroyed){var o,s=_createForOfIteratorHelper(this._intentStates);try{for(s.s();!(o=s.n()).done;){var u=_slicedToArray(o.value,2),l=u[0];if(u[1]===n){this._intentStates.delete(l);break}}}catch(c){s.e(c)}finally{s.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]),e}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function e(){_classCallCheck(this,e),this._listeners=[],this._deferred=Promise.resolve()}return _createClass(e,[{key:"postMessage",value:function(e,t){var n=this,r={data:function(e){if(globalThis.structuredClone)return globalThis.structuredClone(e,t);var n=new WeakMap;return function e(r){if("function"===typeof r||"symbol"===_typeof(r)||r instanceof URL)throw new Error("LoopbackPort.postMessage - cannot clone: ".concat(null===r||void 0===r?void 0:r.toString()));if("object"!==_typeof(r)||null===r)return r;if(n.has(r))return n.get(r);var a,i;if((a=r.buffer)&&(0,_util.isArrayBuffer)(a))return i=null!==t&&void 0!==t&&t.includes(a)?new r.constructor(a,r.byteOffset,r.byteLength):new r.constructor(r),n.set(r,i),i;if(r instanceof Map){i=new Map,n.set(r,i);var o,s=_createForOfIteratorHelper(r);try{for(s.s();!(o=s.n()).done;){var u=_slicedToArray(o.value,2),l=u[0],c=u[1];i.set(l,e(c))}}catch(y){s.e(y)}finally{s.f()}return i}if(r instanceof Set){i=new Set,n.set(r,i);var f,d=_createForOfIteratorHelper(r);try{for(d.s();!(f=d.n()).done;){var h=f.value;i.add(e(h))}}catch(y){d.e(y)}finally{d.f()}return i}for(var p in i=Array.isArray(r)?[]:Object.create(null),n.set(r,i),r){for(var v,g=void 0,m=r;!(g=Object.getOwnPropertyDescriptor(m,p));)m=Object.getPrototypeOf(m);"undefined"!==typeof g.value&&("function"!==typeof g.value||null!==(v=r.hasOwnProperty)&&void 0!==v&&v.call(r,p))&&(i[p]=e(g.value))}return i}(e)}(e)};this._deferred.then((function(){var e,t=_createForOfIteratorHelper(n._listeners);try{for(t.s();!(e=t.n()).done;)e.value.call(n,r)}catch(a){t.e(a)}finally{t.f()}}))}},{key:"addEventListener",value:function(e,t){this._listeners.push(t)}},{key:"removeEventListener",value:function(e,t){var n=this._listeners.indexOf(t);this._listeners.splice(n,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),e}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"===("undefined"===typeof document?"undefined":_typeof(document))){var _document,_document$currentScri,pdfjsFilePath=null===(_document=document)||void 0===_document||null===(_document$currentScri=_document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(e){var t='importScripts("'.concat(e,'");');return URL.createObjectURL(new Blob([t]))};var PDFWorker=function(){function PDFWorker(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?null:t,r=e.port,a=void 0===r?null:r,i=e.verbosity,o=void 0===i?(0,_util.getVerbosityLevel)():i;if(_classCallCheck(this,PDFWorker),a&&PDFWorker._workerPorts.has(a))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=n,this.destroyed=!1,this.verbosity=o,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,a)return PDFWorker._workerPorts.set(a,this),void this._initializeFromPort(a);this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var e=this;if("undefined"!==typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var t=PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));var n=new Worker(t),r=new _message_handler.MessageHandler("main","worker",n),a=function(){n.removeEventListener("error",i),r.destroy(),n.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},i=function(){e._webWorker||a()};n.addEventListener("error",i),r.on("test",(function(t){n.removeEventListener("error",i),e.destroyed?a():t?(e._messageHandler=r,e._port=n,e._webWorker=n,e._readyCapability.resolve(),r.send("configure",{verbosity:e.verbosity})):(e._setupFakeWorker(),r.destroy(),n.terminate())})),r.on("ready",(function(t){if(n.removeEventListener("error",i),e.destroyed)a();else try{o()}catch(r){e._setupFakeWorker()}}));var o=function(){var e=new Uint8Array([255]);try{r.send("test",e,[e.buffer])}catch(t){(0,_util.warn)("Cannot use postMessage transfers."),e[0]=0,r.send("test",e)}};return void o()}catch(s){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((function(t){if(e.destroyed)e._readyCapability.reject(new Error("Worker was destroyed"));else{var n=new LoopbackPort;e._port=n;var r="fake".concat(PDFWorkerUtil.fakeWorkerId++),a=new _message_handler.MessageHandler(r+"_worker",r,n);t.setup(a,n);var i=new _message_handler.MessageHandler(r,r+"_worker",n);e._messageHandler=i,e._readyCapability.resolve(),i.send("configure",{verbosity:e.verbosity})}})).catch((function(t){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))}))}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"_workerPorts",get:function(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}},{key:"fromPort",value:function(e){if(null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(e.port)?this._workerPorts.get(e.port):new PDFWorker(e)}},{key:"workerSrc",get:function(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch(t){return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this11=this,loader=function(){var _ref15=_asyncToGenerator(_regenerator.default.mark((function _callee4(){var mainWorkerMessageHandler,worker;return _regenerator.default.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(mainWorkerMessageHandler=_this11._mainThreadWorkerMessageHandler,!mainWorkerMessageHandler){_context4.next=3;break}return _context4.abrupt("return",mainWorkerMessageHandler);case 3:if(!_is_node.isNodeJS){_context4.next=6;break}return worker=eval("require")(_this11.workerSrc),_context4.abrupt("return",worker.WorkerMessageHandler);case 6:return _context4.next=8,(0,_display_utils.loadScript)(_this11.workerSrc);case 8:return _context4.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context4.stop()}}),_callee4)})));return function(){return _ref15.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]),PDFWorker}();exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap,WorkerTransport=function(){function e(t,n,r,a){_classCallCheck(this,e),_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=t,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:n.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,a.useWorkerFetch||(this.CMapReaderFactory=new a.CMapReaderFactory({baseUrl:a.cMapUrl,isCompressed:a.cMapPacked}),this.StandardFontDataFactory=new a.StandardFontDataFactory({baseUrl:a.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}return _createClass(e,[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"stats",get:function(){return _classPrivateFieldGet(this,_docStats)}},{key:"getRenderingIntent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=_util.RenderingIntentFlag.DISPLAY,a="";switch(e){case"any":r=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":r=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(e))}switch(t){case _util.AnnotationMode.DISABLE:r+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:r+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:r+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,a=this.annotationStorage.lastModified;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(t))}return n&&(r+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:r,cacheKey:"".concat(r,"_").concat(a)}}},{key:"destroy",value:function(){var e=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var t,n=[],r=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a._destroy())}}catch(o){r.e(o)}finally{r.f()}_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var i=this.messageHandler.sendWithPromise("Terminate",null);return n.push(i),Promise.all(n).then((function(){e.commonObjs.clear(),e.fontLoader.clear(),_classPrivateFieldSet(e,_metadataPromise,null),e._getFieldObjectsPromise=null,e._hasJSActionsPromise=null,e._networkStream&&e._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),e.messageHandler&&(e.messageHandler.destroy(),e.messageHandler=null),e.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var e=this,t=this.messageHandler,n=this.loadingTask;t.on("GetReader",(function(t,n){(0,_util.assert)(e._networkStream,"GetReader - no `IPDFStream` instance available."),e._fullReader=e._networkStream.getFullReader(),e._fullReader.onProgress=function(t){e._lastProgress={loaded:t.loaded,total:t.total}},n.onPull=function(){e._fullReader.read().then((function(e){var t=e.value;e.done?n.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(t),1,[t]))})).catch((function(e){n.error(e)}))},n.onCancel=function(t){e._fullReader.cancel(t),n.ready.catch((function(t){if(!e.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(function(t){var r=(0,_util.createPromiseCapability)(),a=e._fullReader;return a.headersReady.then((function(){var t;a.isStreamingSupported&&a.isRangeSupported||(e._lastProgress&&(null===(t=n.onProgress)||void 0===t||t.call(n,e._lastProgress)),a.onProgress=function(e){var t;null===(t=n.onProgress)||void 0===t||t.call(n,{loaded:e.loaded,total:e.total})});r.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})}),r.reject),r.promise})),t.on("GetRangeReader",(function(t,n){(0,_util.assert)(e._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var r=e._networkStream.getRangeReader(t.begin,t.end);r?(n.onPull=function(){r.read().then((function(e){var t=e.value;e.done?n.close():((0,_util.assert)((0,_util.isArrayBuffer)(t),"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(t),1,[t]))})).catch((function(e){n.error(e)}))},n.onCancel=function(t){r.cancel(t),n.ready.catch((function(t){if(!e.destroyed)throw t}))}):n.close()})),t.on("GetDoc",(function(t){var r=t.pdfInfo;e._numPages=r.numPages,e._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(r,e))})),t.on("DocException",(function(e){var t;switch(e.name){case"PasswordException":t=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":t=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":t=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":t=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":t=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(t)})),t.on("PasswordRequest",(function(t){if(e._passwordCapability=(0,_util.createPromiseCapability)(),n.onPassword)try{n.onPassword((function(t){e._passwordCapability.resolve({password:t})}),t.code)}catch(r){e._passwordCapability.reject(r)}else e._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return e._passwordCapability.promise})),t.on("DataLoaded",(function(t){var r;null===(r=n.onProgress)||void 0===r||r.call(n,{loaded:t.length,total:t.length}),e.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(function(t){e.destroyed||_classPrivateFieldGet(e,_pageCache).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(function(n){var r,a=_slicedToArray(n,3),i=a[0],o=a[1],s=a[2];if(!e.destroyed&&!e.commonObjs.has(i))switch(o){case"Font":var u=e._params;if("error"in s){var l=s.error;(0,_util.warn)("Error during font loading: ".concat(l)),e.commonObjs.resolve(i,l);break}var c=null;u.pdfBug&&null!==(r=globalThis.FontInspector)&&void 0!==r&&r.enabled&&(c={registerFont:function(e,t){globalThis.FontInspector.fontAdded(e,t)}});var f=new _font_loader.FontFaceObject(s,{isEvalSupported:u.isEvalSupported,disableFontFace:u.disableFontFace,ignoreErrors:u.ignoreErrors,onUnsupportedFeature:e._onUnsupportedFeature.bind(e),fontRegistry:c});e.fontLoader.bind(f).catch((function(e){return t.sendWithPromise("FontFallback",{id:i})})).finally((function(){!u.fontExtraProperties&&f.data&&(f.data=null),e.commonObjs.resolve(i,f)}));break;case"FontPath":case"Image":e.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(o))}})),t.on("obj",(function(t){var n,r=_slicedToArray(t,4),a=r[0],i=r[1],o=r[2],s=r[3];if(!e.destroyed){var u=_classPrivateFieldGet(e,_pageCache).get(i);if(!u.objs.has(a))switch(o){case"Image":u.objs.resolve(a,s),(null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.length)>8e6&&(u.cleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(a,s);break;default:throw new Error("Got unknown object type ".concat(o))}}})),t.on("DocProgress",(function(t){var r;e.destroyed||null===(r=n.onProgress)||void 0===r||r.call(n,{loaded:t.loaded,total:t.total})})),t.on("DocStats",(function(t){e.destroyed||_classPrivateFieldSet(e,_docStats,Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))})),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",(function(t){return e.destroyed?Promise.reject(new Error("Worker was destroyed.")):e.CMapReaderFactory?e.CMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))})),t.on("FetchStandardFontData",(function(t){return e.destroyed?Promise.reject(new Error("Worker was destroyed.")):e.StandardFontDataFactory?e.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))}))}},{key:"_onUnsupportedFeature",value:function(e){var t,n,r=e.featureId;this.destroyed||null===(t=(n=this.loadingTask).onUnsupportedFeature)||void 0===t||t.call(n,r)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(e){var t=this;if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request"));var n=e-1,r=_classPrivateFieldGet(this,_pagePromises).get(n);if(r)return r;var a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then((function(e){if(t.destroyed)throw new Error("Transport destroyed");var r=new PDFPageProxy(n,e,t,t._params.ownerDocument,t._params.pdfBug);return _classPrivateFieldGet(t,_pageCache).set(n,r),r}));return _classPrivateFieldGet(this,_pagePromises).set(n,a),a}},{key:"getPageIndex",value:function(e){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:e})}},{key:"getAnnotations",value:function(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}},{key:"saveDocument",value:function(){var e,t,n=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null}).finally((function(){n.annotationStorage.resetModified()}))}},{key:"getFieldObjects",value:function(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}},{key:"getStructTree",value:function(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((function(e){return new _optional_content_config.OptionalContentConfig(e)}))}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var e=this;return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then((function(t){var n,r,a,i;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:null!==(n=null===(r=e._fullReader)||void 0===r?void 0:r.filename)&&void 0!==n?n:null,contentLength:null!==(a=null===(i=e._fullReader)||void 0===i?void 0:i.contentLength)&&void 0!==a?a:null}})))}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:function(){var e=_asyncToGenerator(_regenerator.default.mark((function e(){var t,n,r,a,i=arguments;return _regenerator.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],e.next=3,this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){e.next=5;break}return e.abrupt("return");case 5:n=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),e.prev=6,n.s();case 8:if((r=n.n()).done){e.next=15;break}if((a=r.value).cleanup()){e.next=13;break}throw new Error("startCleanup: Page ".concat(a.pageNumber," is currently rendering."));case 13:e.next=8;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(6),n.e(e.t0);case 20:return e.prev=20,n.f(),e.finish(20);case 23:this.commonObjs.clear(),t||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null;case 28:case"end":return e.stop()}}),e,this,[[6,17,20,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadingParams",get:function(){var e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}]),e}(),PDFObjects=function(){function e(){_classCallCheck(this,e),this._objs=Object.create(null)}return _createClass(e,[{key:"_ensureObj",value:function(e){return this._objs[e]?this._objs[e]:this._objs[e]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return this._ensureObj(e).capability.promise.then(t),null;var n=this._objs[e];if(!n||!n.resolved)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}},{key:"has",value:function(e){var t=this._objs[e];return(null===t||void 0===t?void 0:t.resolved)||!1}},{key:"resolve",value:function(e,t){var n=this._ensureObj(e);n.resolved=!0,n.data=t,n.capability.resolve(t)}},{key:"clear",value:function(){this._objs=Object.create(null)}}]),e}(),RenderTask=function(){function e(t){_classCallCheck(this,e),this._internalRenderTask=t,this.onContinue=null}return _createClass(e,[{key:"promise",get:function(){return this._internalRenderTask.capability.promise}},{key:"cancel",value:function(){this._internalRenderTask.cancel()}}]),e}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function e(t){var n=t.callback,r=t.params,a=t.objs,i=t.commonObjs,o=t.annotationCanvasMap,s=t.operatorList,u=t.pageIndex,l=t.canvasFactory,c=t.useRequestAnimationFrame,f=void 0!==c&&c,d=t.pdfBug,h=void 0!==d&&d;_classCallCheck(this,e),this.callback=n,this.params=r,this.objs=a,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=u,this.canvasFactory=l,this._pdfBug=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===f&&"undefined"!==typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}return _createClass(e,[{key:"completed",get:function(){return this.capability.promise.catch((function(){}))}},{key:"initializeGraphics",value:function(t){var n,r=t.transparency,a=void 0!==r&&r,i=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(e.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e.canvasInUse.add(this._canvas)}this._pdfBug&&null!==(n=globalThis.StepperManager)&&void 0!==n&&n.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var o=this.params,s=o.canvasContext,u=o.viewport,l=o.transform,c=o.imageLayer,f=o.background;this.gfx=new _canvas.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,c,i,this.annotationCanvasMap),this.gfx.beginDrawing({transform:l,viewport:u,transparency:a,background:f}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&e.canvasInUse.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}},{key:"_continue",value:function(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var e=this;this._useRequestAnimationFrame?window.requestAnimationFrame((function(){e._nextBound().catch(e._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:function(){var t=_asyncToGenerator(_regenerator.default.mark((function t(){return _regenerator.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cancelled){t.next=2;break}return t.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&e.canvasInUse.delete(this._canvas),this.callback()));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}],[{key:"canvasInUse",get:function(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}}]),e}(),version="2.12.313";exports.version=version;var build="a2ae56f39";exports.build=build},function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var a,i=(a=n(2))&&a.__esModule?a:{default:a},o=n(4);function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function f(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}var m,y=function(){function e(t){var n=t.docId,r=t.onUnsupportedFeature,a=t.ownerDocument,i=void 0===a?globalThis.document:a;t.styleElement,p(this,e),this.constructor===e&&(0,o.unreachable)("Cannot initialize BaseFontLoader."),this.docId=n,this._onUnsupportedFeature=r,this._document=i,this.nativeFontFaces=[],this.styleElement=null}return g(e,[{key:"addNativeFontFace",value:function(e){this.nativeFontFaces.push(e),this._document.fonts.add(e)}},{key:"insertRule",value:function(e){var t=this.styleElement;t||((t=this.styleElement=this._document.createElement("style")).id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].appendChild(t));var n=t.sheet;n.insertRule(e,n.cssRules.length)}},{key:"clear",value:function(){var e,t=d(this.nativeFontFaces);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._document.fonts.delete(n)}}catch(r){t.e(r)}finally{t.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:function(){var e,t=(e=i.default.mark((function e(t){var n,r,a=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.attached&&!t.missingFile){e.next=2;break}return e.abrupt("return");case 2:if(t.attached=!0,!this.isFontLoadingAPISupported){e.next=19;break}if(!(n=t.createNativeFontFace())){e.next=18;break}return this.addNativeFontFace(n),e.prev=7,e.next=10,n.loaded;case 10:e.next=18;break;case 12:throw e.prev=12,e.t0=e.catch(7),this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,o.warn)("Failed to load font '".concat(n.family,"': '").concat(e.t0,"'.")),t.disableFontFace=!0,e.t0;case 18:return e.abrupt("return");case 19:if(!(r=t.createFontFaceRule())){e.next=26;break}if(this.insertRule(r),!this.isSyncFontLoadingSupported){e.next=24;break}return e.abrupt("return");case 24:return e.next=26,new Promise((function(e){var n=a._queueLoadingCallback(e);a._prepareFontLoadEvent([r],[t],n)}));case 26:case"end":return e.stop()}}),e,this,[[7,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){f(i,r,a,o,s,"next",e)}function s(e){f(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}()},{key:"_queueLoadingCallback",value:function(e){(0,o.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function(){var e,t=!(null===(e=this._document)||void 0===e||!e.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",t)}},{key:"isSyncFontLoadingSupported",get:function(){(0,o.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,o.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function(e,t,n){(0,o.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),e}();t.FontLoader=m,t.FontLoader=m=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=u(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).loadingContext={requests:[],nextRequestId:0},r.loadTestFontId=0,r}return g(n,[{key:"isSyncFontLoadingSupported",get:function(){var e=!1;if("undefined"===typeof navigator)e=!0;else{var t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null===t||void 0===t?void 0:t[1])>=14&&(e=!0)}return(0,o.shadow)(this,"isSyncFontLoadingSupported",e)}},{key:"_queueLoadingCallback",value:function(e){var t=this.loadingContext,n={id:"pdfjs-font-loading-".concat(t.nextRequestId++),done:!1,complete:function(){for((0,o.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.requests.length>0&&t.requests[0].done;){var e=t.requests.shift();setTimeout(e.callback,0)}},callback:e};return t.requests.push(n),n}},{key:"_loadTestFont",get:function(){return(0,o.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}},{key:"_prepareFontLoadEvent",value:function(e,t,n){function r(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function a(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}var i,s,u=this._document.createElement("canvas");u.width=1,u.height=1;var l=u.getContext("2d"),c=0,f="lt".concat(Date.now()).concat(this.loadTestFontId++),h=this._loadTestFont,p=1482184792,v=r(h=a(h,976,f.length,f),16);for(i=0,s=f.length-3;i<s;i+=4)v=v-p+r(f,i)|0;i<f.length&&(v=v-p+r(f+"XXX",i)|0),h=a(h,16,4,(0,o.string32)(v));var g="url(data:font/opentype;base64,".concat(btoa(h),");"),m='@font-face {font-family:"'.concat(f,'";src:').concat(g,"}");this.insertRule(m);var y,b=[],x=d(t);try{for(x.s();!(y=x.n()).done;){var k=y.value;b.push(k.loadedName)}}catch(A){x.e(A)}finally{x.f()}b.push(f);var w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(var S=0,_=b;S<_.length;S++){var C=_[S],E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=C,w.appendChild(E)}this._document.body.appendChild(w),function e(t,n){if(++c>30)return(0,o.warn)("Load test font never loaded."),void n();l.font="30px "+t,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(f,(function(){w.remove(),n.complete()}))}}]),n}(y);var b=function(){function e(t,n){var r=n.isEvalSupported,a=void 0===r||r,i=n.disableFontFace,o=void 0!==i&&i,s=n.ignoreErrors,u=void 0!==s&&s,l=n.onUnsupportedFeature,c=n.fontRegistry,f=void 0===c?null:c;for(var d in p(this,e),this.compiledGlyphs=Object.create(null),t)this[d]=t[d];this.isEvalSupported=!1!==a,this.disableFontFace=!0===o,this.ignoreErrors=!0===u,this._onUnsupportedFeature=l,this.fontRegistry=f}return g(e,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var e;if(this.cssFontInfo){var t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),e}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var e,t=(0,o.bytesToString)(this.data),n="url(data:".concat(this.mimetype,";base64,").concat(btoa(t),");");if(this.cssFontInfo){var r="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(r+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),e='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(r,"src:").concat(n,"}")}else e='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(n,"}");return this.fontRegistry&&this.fontRegistry.registerFont(this,n),e}},{key:"getPathGenerator",value:function(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];var n;try{n=e.get(this.loadedName+"_path_"+t)}catch(l){if(!this.ignoreErrors)throw l;return this._onUnsupportedFeature({featureId:o.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,o.warn)('getPathGenerator - ignoring character: "'.concat(l,'".')),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&o.IsEvalSupportedCached.value){var r,a=[],i=d(n);try{for(i.s();!(r=i.n()).done;){var s=r.value,u=void 0!==s.args?s.args.join(","):"";a.push("c.",s.cmd,"(",u,");\n")}}catch(c){i.e(c)}finally{i.f()}return this.compiledGlyphs[t]=new Function("c","size",a.join(""))}return this.compiledGlyphs[t]=function(e,t){var r,a=d(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;"scale"===i.cmd&&(i.args=[t,-t]),e[i.cmd].apply(e,i.args)}}catch(c){a.e(c)}finally{a.f()}}}}]),e}();t.FontFaceObject=b},function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var a=n(135),i=n(6),o=n(4);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v=function e(){p(this,e),(0,o.unreachable)("Not implemented: NodeCanvasFactory")};t.NodeCanvasFactory=v;var g=function e(){p(this,e),(0,o.unreachable)("Not implemented: NodeCMapReaderFactory")};t.NodeCMapReaderFactory=g;var m=function e(){p(this,e),(0,o.unreachable)("Not implemented: NodeStandardFontDataFactory")};if(t.NodeStandardFontDataFactory=m,i.isNodeJS){var y=function(e){return new Promise((function(t,n){__webpack_require__(767).readFile(e,(function(e,r){!e&&r?t(new Uint8Array(r)):n(new Error(e))}))}))};t.NodeCanvasFactory=v=function(e){l(n,e);var t=f(n);function n(){return p(this,n),t.apply(this,arguments)}return u(n,[{key:"_createCanvas",value:function(e,t){return __webpack_require__(798).createCanvas(e,t)}}]),n}(a.BaseCanvasFactory),t.NodeCMapReaderFactory=g=function(e){l(n,e);var t=f(n);function n(){return p(this,n),t.apply(this,arguments)}return u(n,[{key:"_fetchData",value:function(e,t){return y(e).then((function(e){return{cMapData:e,compressionType:t}}))}}]),n}(a.BaseCMapReaderFactory),t.NodeStandardFontDataFactory=m=function(e){l(n,e);var t=f(n);function n(){return p(this,n),t.apply(this,arguments)}return u(n,[{key:"_fetchData",value:function(e){return y(e)}}]),n}(a.BaseStandardFontDataFactory)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationStorage=void 0;var r=n(4);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}var t,n,i;return t=e,(n=[{key:"getValue",value:function(e,t){var n=this._storage.get(e);return void 0===n?t:Object.assign(t,n)}},{key:"setValue",value:function(e,t){var n=this._storage.get(e),r=!1;if(void 0!==n)for(var i=0,o=Object.entries(t);i<o.length;i++){var s=a(o[i],2),u=s[0],l=s[1];n[u]!==l&&(r=!0,n[u]=l)}else r=!0,this._storage.set(e,t);r&&(this._timeStamp=Date.now(),this._setModified())}},{key:"getAll",value:function(){return this._storage.size>0?(0,r.objectFromMap)(this._storage):null}},{key:"size",get:function(){return this._storage.size}},{key:"_setModified",value:function(){this._modified||(this._modified=!0,"function"===typeof this.onSetModified&&this.onSetModified())}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,"function"===typeof this.onResetModified&&this.onResetModified())}},{key:"serializable",get:function(){return this._storage.size>0?this._storage:null}},{key:"lastModified",get:function(){return this._timeStamp.toString()}}])&&o(t.prototype,n),i&&o(t,i),e}();t.AnnotationStorage=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=n(4),a=n(141),i=n(1);function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=4096,v=16;function g(e){if(!e.mozCurrentTransform){e._originalSave=e.save,e._originalRestore=e.restore,e._originalRotate=e.rotate,e._originalScale=e.scale,e._originalTranslate=e.translate,e._originalTransform=e.transform,e._originalSetTransform=e.setTransform,e._originalResetTransform=e.resetTransform,e._transformMatrix=e._transformMatrix||[1,0,0,1,0,0],e._transformStack=[];try{var t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"lineWidth");e._setLineWidth=t.set,e._getLineWidth=t.get,Object.defineProperty(e,"lineWidth",{set:function(e){this._setLineWidth(1.000001*e)},get:function(){return this._getLineWidth()}})}catch(n){}Object.defineProperty(e,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(e,"mozCurrentTransformInverse",{get:function(){var e=f(this._transformMatrix,6),t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=t*a-n*r,u=n*r-t*a;return[a/s,n/u,r/u,t/s,(a*i-r*o)/u,(n*i-t*o)/s]}}),e.save=function(){var e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},e.restore=function(){var e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},e.translate=function(e,t){var n=this._transformMatrix;n[4]=n[0]*e+n[2]*t+n[4],n[5]=n[1]*e+n[3]*t+n[5],this._originalTranslate(e,t)},e.scale=function(e,t){var n=this._transformMatrix;n[0]*=e,n[1]*=e,n[2]*=t,n[3]*=t,this._originalScale(e,t)},e.transform=function(t,n,r,a,i,o){var s=this._transformMatrix;this._transformMatrix=[s[0]*t+s[2]*n,s[1]*t+s[3]*n,s[0]*r+s[2]*a,s[1]*r+s[3]*a,s[0]*i+s[2]*o+s[4],s[1]*i+s[3]*o+s[5]],e._originalTransform(t,n,r,a,i,o)},e.setTransform=function(t,n,r,a,i,o){this._transformMatrix=[t,n,r,a,i,o],e._originalSetTransform(t,n,r,a,i,o)},e.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],e._originalResetTransform()},e.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this._transformMatrix;this._transformMatrix=[r[0]*t+r[2]*n,r[1]*t+r[3]*n,r[0]*-n+r[2]*t,r[1]*-n+r[3]*t,r[4],r[5]],this._originalRotate(e)}}}var m=function(){function e(t){u(this,e),this.canvasFactory=t,this.cache=Object.create(null)}return c(e,[{key:"getCanvas",value:function(e,t,n,r){var a;return void 0!==this.cache[e]?(a=this.cache[e],this.canvasFactory.reset(a,t,n),a.context.setTransform(1,0,0,1,0,0)):(a=this.canvasFactory.create(t,n),this.cache[e]=a),r&&g(a.context),a}},{key:"clear",value:function(){for(var e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}]),e}(),y=function(){function e(t,n){u(this,e),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,t,n])}return c(e,[{key:"clone",value:function(){var e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}},{key:"setCurrentPoint",value:function(e,t){this.x=e,this.y=t}},{key:"updatePathMinMax",value:function(e,t,n){var a=f(r.Util.applyTransform([t,n],e),2);t=a[0],n=a[1],this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}},{key:"updateCurvePathMinMax",value:function(e,t,n,a,i,o,s,u,l){var c=r.Util.bezierBoundingBox(t,n,a,i,o,s,u,l);this.updatePathMinMax(e,c[0],c[1]),this.updatePathMinMax(e,c[2],c[3])}},{key:"getPathBoundingBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[this.minX,this.minY,this.maxX,this.maxY];if(e===a.PathType.STROKE){t||(0,r.unreachable)("Stroke bounding box must include transform.");var i=r.Util.singularValueDecompose2dScale(t),o=i[0]*this.lineWidth/2,s=i[1]*this.lineWidth/2;n[0]-=o,n[1]-=s,n[2]+=o,n[3]+=s}return n}},{key:"updateClipFromPath",value:function(){var e=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}},{key:"startNewPathAndClipBox",value:function(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}]),e}();function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!==typeof ImageData&&t instanceof ImageData)e.putImageData(t,0,0);else{var a,i,o,s,u,l,c,f,d,h=t.height,p=t.width,g=h%v,m=(h-g)/v,y=0===g?m:m+1,b=e.createImageData(p,v),x=0,k=t.data,w=b.data;if(n)switch(n.length){case 1:l=n[0],c=n[0],f=n[0],d=n[0];break;case 4:l=n[0],c=n[1],f=n[2],d=n[3]}if(t.kind===r.ImageKind.GRAYSCALE_1BPP){var S=k.byteLength,_=new Uint32Array(w.buffer,0,w.byteLength>>2),C=_.length,E=p+7>>3,A=4294967295,I=r.IsLittleEndianCached.value?4278190080:255;if(d&&255===d[0]&&0===d[255]){var T=[I,A];A=T[0],I=T[1]}for(i=0;i<y;i++){for(s=i<m?v:g,a=0,o=0;o<s;o++){for(var R=S-x,N=0,M=R>E?p:8*R-7,O=-8&M,P=0,F=0;N<O;N+=8)F=k[x++],_[a++]=128&F?A:I,_[a++]=64&F?A:I,_[a++]=32&F?A:I,_[a++]=16&F?A:I,_[a++]=8&F?A:I,_[a++]=4&F?A:I,_[a++]=2&F?A:I,_[a++]=1&F?A:I;for(;N<M;N++)0===P&&(F=k[x++],P=128),_[a++]=F&P?A:I,P>>=1}for(;a<C;)_[a++]=0;e.putImageData(b,0,i*v)}}else if(t.kind===r.ImageKind.RGBA_32BPP){var D=!!(l||c||f);for(o=0,u=p*v*4,i=0;i<m;i++){if(w.set(k.subarray(x,x+u)),x+=u,D)for(var L=0;L<u;L+=4)l&&(w[L+0]=l[w[L+0]]),c&&(w[L+1]=c[w[L+1]]),f&&(w[L+2]=f[w[L+2]]);e.putImageData(b,0,o),o+=v}if(i<y){if(u=p*g*4,w.set(k.subarray(x,x+u)),D)for(var z=0;z<u;z+=4)l&&(w[z+0]=l[w[z+0]]),c&&(w[z+1]=c[w[z+1]]),f&&(w[z+2]=f[w[z+2]]);e.putImageData(b,0,o)}}else{if(t.kind!==r.ImageKind.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));var j=!!(l||c||f);for(u=p*(s=v),i=0;i<y;i++){for(i>=m&&(u=p*(s=g)),a=0,o=u;o--;)w[a++]=k[x++],w[a++]=k[x++],w[a++]=k[x++],w[a++]=255;if(j)for(var B=0;B<a;B+=4)l&&(w[B+0]=l[w[B+0]]),c&&(w[B+1]=c[w[B+1]]),f&&(w[B+2]=f[w[B+2]]);e.putImageData(b,0,i*v)}}}}function x(e,t){for(var n=t.height,r=t.width,a=n%v,i=(n-a)/v,o=0===a?i:i+1,s=e.createImageData(r,v),u=0,l=t.data,c=s.data,f=0;f<o;f++){for(var d=f<i?v:a,h=3,p=0;p<d;p++)for(var g=void 0,m=0,y=0;y<r;y++)m||(g=l[u++],m=128),c[h]=g&m?0:255,h+=4,m>>=1;e.putImageData(s,0,f*v)}}function k(e,t){for(var n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],r=0,a=n.length;r<a;r++){var i=n[r];void 0!==e[i]&&(t[i]=e[i])}void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function w(e){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0)}function S(e,t,n,r){for(var a=e.length,i=3;i<a;i+=4){var o=e[i];if(0===o)e[i-3]=t,e[i-2]=n,e[i-1]=r;else if(o<255){var s=255-o;e[i-3]=e[i-3]*o+t*s>>8,e[i-2]=e[i-2]*o+n*s>>8,e[i-1]=e[i-1]*o+r*s>>8}}}function _(e,t,n){for(var r=e.length,a=3;a<r;a+=4){var i=n?n[e[a]]:e[a];t[a]=t[a]*i*.00392156862745098|0}}function C(e,t,n){for(var r=e.length,a=3;a<r;a+=4){var i=77*e[a-3]+152*e[a-2]+28*e[a-1];t[a]=n?t[a]*n[i>>8]>>8:t[a]*i>>16}}function E(e,t,n,r){var a=r[0],i=r[1],o=r[2]-a,s=r[3]-i;0!==o&&0!==s&&(function(e,t,n,r,a,i,o,s,u,l,c){var f,d=!!i,h=d?i[0]:0,p=d?i[1]:0,v=d?i[2]:0;f="Luminosity"===a?C:_;for(var g=Math.min(r,Math.ceil(1048576/n)),m=0;m<r;m+=g){var y=Math.min(g,r-m),b=e.getImageData(s-l,m+(u-c),n,y),x=t.getImageData(s,m+u,n,y);d&&S(b.data,h,p,v),f(b.data,x.data,o),t.putImageData(x,s,m+u)}}(t.context,n,o,s,t.subtype,t.backdrop,t.transferMap,a,i,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}function A(e,t){var n=r.Util.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);var a=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==t?t:n[0]<=a||n[1]<=a}var I=["butt","round","square"],T=["miter","round","bevel"],R={},N={},M=function(){function e(t,n,r,a,i,o,s){u(this,e),this.ctx=t,this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=a,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=o,this.cachedCanvases=new m(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,t&&g(t),this._cachedGetSinglePixelWidth=null}return c(e,[{key:"beginDrawing",value:function(e){var t=e.transform,n=e.viewport,r=e.transparency,a=void 0!==r&&r,i=e.background,o=void 0===i?null:i,s=this.ctx.canvas.width,u=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=o||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,s,u),this.ctx.restore(),a){var l=this.cachedCanvases.getCanvas("transparent",s,u,!0);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),w(this.ctx),t&&(this.ctx.transform.apply(this.ctx,t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform.apply(this.ctx,n.transform),this.viewportScale=n.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function(e,t,n,a){var i=e.argsArray,o=e.fnArray,u=t||0,l=i.length;if(l===u)return u;for(var c,f=l-u>10&&"function"===typeof n,d=f?Date.now()+15:0,h=0,p=this.commonObjs,v=this.objs;;){if(void 0!==a&&u===a.nextBreakPoint)return a.breakIt(u,n),u;if((c=o[u])!==r.OPS.dependency)this[c].apply(this,i[u]);else{var g,m=s(i[u]);try{for(m.s();!(g=m.n()).done;){var y=g.value,b=y.startsWith("g_")?p:v;if(!b.has(y))return b.get(y,n),u}}catch(x){m.e(x)}finally{m.f()}}if(++u===l)return u;if(f&&++h>10){if(Date.now()>d)return n(),u;h=0}}}},{key:"endDrawing",value:function(){for(;this.stateStack.length||null!==this.current.activeSMask;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function(e,t){for(var n,r,a=e.width,i=e.height,o=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),u=a,l=i,c="prescale1";o>2&&u>1||s>2&&l>1;){var f=u,d=l;o>2&&u>1&&(o/=u/(f=Math.ceil(u/2))),s>2&&l>1&&(s/=l/(d=Math.ceil(l/2))),(r=(n=this.cachedCanvases.getCanvas(c,f,d)).context).clearRect(0,0,f,d),r.drawImage(e,0,0,u,l,0,0,f,d),e=n.canvas,u=f,l=d,c="prescale1"===c?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:l}}},{key:"_createMaskCanvas",value:function(e){var t=this.ctx,n=e.width,i=e.height,o=this.current.fillColor,s=this.current.patternFill,u=this.cachedCanvases.getCanvas("maskCanvas",n,i);x(u.context,e);var l=t.mozCurrentTransform,c=r.Util.transform(l,[1/n,0,0,-1/i,0,0]);c=r.Util.transform(c,[1,0,0,1,0,-i]);var f=r.Util.applyTransform([0,0],c),d=r.Util.applyTransform([n,i],c),h=r.Util.normalizeRect([f[0],f[1],d[0],d[1]]),p=Math.ceil(h[2]-h[0]),v=Math.ceil(h[3]-h[1]),g=this.cachedCanvases.getCanvas("fillCanvas",p,v,!0),m=g.context,y=Math.min(f[0],d[0]),b=Math.min(f[1],d[1]);m.translate(-y,-b),m.transform.apply(m,c);var k=this._scaleImage(u.canvas,m.mozCurrentTransformInverse);m.imageSmoothingEnabled=A(m.mozCurrentTransform,e.interpolate),m.drawImage(k.img,0,0,k.img.width,k.img.height,0,0,n,i),m.globalCompositeOperation="source-in";var w=r.Util.transform(m.mozCurrentTransformInverse,[1,0,0,1,-y,-b]);return m.fillStyle=s?o.getPattern(t,this,w,a.PathType.FILL):o,m.fillRect(0,0,n,i),{canvas:g.canvas,offsetX:Math.round(y),offsetY:Math.round(b)}}},{key:"setLineWidth",value:function(e){this.current.lineWidth=e,this.ctx.lineWidth=e}},{key:"setLineCap",value:function(e){this.ctx.lineCap=I[e]}},{key:"setLineJoin",value:function(e){this.ctx.lineJoin=T[e]}},{key:"setMiterLimit",value:function(e){this.ctx.miterLimit=e}},{key:"setDash",value:function(e,t){var n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}},{key:"setRenderingIntent",value:function(e){}},{key:"setFlatness",value:function(e){}},{key:"setGState",value:function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],a=r[0],i=r[1];switch(a){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=r[1];break;case"ca":this.current.fillAlpha=r[1],this.ctx.globalAlpha=r[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}},{key:"checkSMaskState",value:function(){var e=!!this.suspendedCtx;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.suspendedCtx)throw new Error("beginSMaskMode called while already in smask mode");var e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t,!0);this.suspendedCtx=this.ctx,this.ctx=r.context;var a=this.ctx;a.setTransform.apply(a,this.suspendedCtx.mozCurrentTransform),k(this.suspendedCtx,a),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=function(){e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,r,a,i,o){t.transform(e,n,r,a,i,o),this.__originalTransform(e,n,r,a,i,o)},e.setTransform=function(e,n,r,a,i,o){t.setTransform(e,n,r,a,i,o),this.__originalSetTransform(e,n,r,a,i,o)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,r,a,i,o){t.bezierCurveTo(e,n,r,a,i,o),this.__originalBezierCurveTo(e,n,r,a,i,o)},e.rect=function(e,n,r,a){t.rect(e,n,r,a),this.__originalRect(e,n,r,a)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.suspendedCtx)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),k(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.current.activeSMask=null,this.suspendedCtx=null}},{key:"compose",value:function(e){if(this.current.activeSMask){e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var t=this.current.activeSMask;E(this.suspendedCtx,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function(){this.ctx.save();var e=this.current;this.stateStack.push(e),this.current=e.clone()}},{key:"restore",value:function(){0===this.stateStack.length&&this.current.activeSMask&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(e,t,n,r,a,i){this.ctx.transform(e,t,n,r,a,i),this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(e,t){for(var n,a,i=this.ctx,o=this.current,s=o.x,u=o.y,l=0,c=0,f=e.length;l<f;l++)switch(0|e[l]){case r.OPS.rectangle:s=t[c++],u=t[c++];var d=t[c++],h=t[c++],p=s+d,v=u+h;i.moveTo(s,u),0===d||0===h?i.lineTo(p,v):(i.lineTo(p,u),i.lineTo(p,v),i.lineTo(s,v)),o.updatePathMinMax(i.mozCurrentTransform,s,u),o.updatePathMinMax(i.mozCurrentTransform,p,v),i.closePath();break;case r.OPS.moveTo:s=t[c++],u=t[c++],i.moveTo(s,u),o.updatePathMinMax(i.mozCurrentTransform,s,u);break;case r.OPS.lineTo:s=t[c++],u=t[c++],i.lineTo(s,u),o.updatePathMinMax(i.mozCurrentTransform,s,u);break;case r.OPS.curveTo:n=s,a=u,s=t[c+4],u=t[c+5],i.bezierCurveTo(t[c],t[c+1],t[c+2],t[c+3],s,u),o.updateCurvePathMinMax(i.mozCurrentTransform,n,a,t[c],t[c+1],t[c+2],t[c+3],s,u),c+=6;break;case r.OPS.curveTo2:n=s,a=u,i.bezierCurveTo(s,u,t[c],t[c+1],t[c+2],t[c+3]),o.updateCurvePathMinMax(i.mozCurrentTransform,n,a,s,u,t[c],t[c+1],t[c+2],t[c+3]),s=t[c+2],u=t[c+3],c+=4;break;case r.OPS.curveTo3:n=s,a=u,s=t[c+2],u=t[c+3],i.bezierCurveTo(t[c],t[c+1],s,u,s,u),o.updateCurvePathMinMax(i.mozCurrentTransform,n,a,t[c],t[c+1],s,u,s,u),c+=4;break;case r.OPS.closePath:i.closePath()}o.setCurrentPoint(s,u)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(e){e="undefined"===typeof e||e;var t=this.ctx,n=this.current.strokeColor;if(t.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===o(n)&&null!==n&&void 0!==n&&n.getPattern){var r=this.getSinglePixelWidth();t.save(),t.strokeStyle=n.getPattern(t,this,t.mozCurrentTransformInverse,a.PathType.STROKE),t.lineWidth=Math.max(r,this.current.lineWidth),t.stroke(),t.restore()}else{var i=this.getSinglePixelWidth();i<0&&-i>=this.current.lineWidth?(t.save(),t.resetTransform(),t.lineWidth=Math.round(this._combinedScaleFactor),t.stroke(),t.restore()):(t.lineWidth=Math.max(i,this.current.lineWidth),t.stroke())}e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(e){e="undefined"===typeof e||e;var t=this.ctx,n=this.current.fillColor,r=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,t.mozCurrentTransformInverse,a.PathType.FILL),r=!0);var i=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==i&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(i)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=R}},{key:"eoClip",value:function(){this.pendingClip=N}},{key:"beginText",value:function(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(var n=0;n<e.length;n++){var r=e[n];t.setTransform.apply(t,r.transform),t.translate(r.x,r.y),r.addToPath(t,r.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}},{key:"setCharSpacing",value:function(e){this.current.charSpacing=e}},{key:"setWordSpacing",value:function(e){this.current.wordSpacing=e}},{key:"setHScale",value:function(e){this.current.textHScale=e/100}},{key:"setLeading",value:function(e){this.current.leading=-e}},{key:"setFont",value:function(e,t){var n=this.commonObjs.get(e),a=this.current;if(!n)throw new Error("Can't find font for ".concat(e));if(a.fontMatrix=n.fontMatrix||r.FONT_IDENTITY_MATRIX,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+e),t<0?(t=-t,a.fontDirection=-1):a.fontDirection=1,this.current.font=n,this.current.fontSize=t,!n.isType3Font){var i=n.loadedName||"sans-serif",o="normal";n.black?o="900":n.bold&&(o="bold");var s=n.italic?"italic":"normal",u='"'.concat(i,'", ').concat(n.fallbackName),l=t;t<16?l=16:t>100&&(l=100),this.current.fontSizeScale=t/l,this.ctx.font="".concat(s," ").concat(o," ").concat(l,"px ").concat(u)}}},{key:"setTextRenderingMode",value:function(e){this.current.textRenderingMode=e}},{key:"setTextRise",value:function(e){this.current.textRise=e}},{key:"moveText",value:function(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}},{key:"setLeadingMoveText",value:function(e,t){this.setLeading(-t),this.moveText(e,t)}},{key:"setTextMatrix",value:function(e,t,n,r,a,i){this.current.textMatrix=[e,t,n,r,a,i],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(e,t,n,a,i){var o,s=this.ctx,u=this.current,l=u.font,c=u.textRenderingMode,f=u.fontSize/u.fontSizeScale,d=c&r.TextRenderingMode.FILL_STROKE_MASK,h=!!(c&r.TextRenderingMode.ADD_TO_PATH_FLAG),p=u.patternFill&&!l.missingFile;(l.disableFontFace||h||p)&&(o=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||p?(s.save(),s.translate(t,n),s.beginPath(),o(s,f),a&&s.setTransform.apply(s,a),d!==r.TextRenderingMode.FILL&&d!==r.TextRenderingMode.FILL_STROKE||s.fill(),d!==r.TextRenderingMode.STROKE&&d!==r.TextRenderingMode.FILL_STROKE||(i&&(s.resetTransform(),s.lineWidth=Math.round(this._combinedScaleFactor)),s.stroke()),s.restore()):(d!==r.TextRenderingMode.FILL&&d!==r.TextRenderingMode.FILL_STROKE||s.fillText(e,t,n),d!==r.TextRenderingMode.STROKE&&d!==r.TextRenderingMode.FILL_STROKE||(i?(s.save(),s.moveTo(t,n),s.resetTransform(),s.lineWidth=Math.round(this._combinedScaleFactor),s.strokeText(e,0,0),s.restore()):s.strokeText(e,t,n))),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:s.mozCurrentTransform,x:t,y:n,fontSize:f,addToPath:o})}},{key:"isFontSubpixelAAEnabled",get:function(){var e=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context;e.scale(1.5,1),e.fillText("I",0,10);for(var t=e.getImageData(0,0,10,10).data,n=!1,a=3;a<t.length;a+=4)if(t[a]>0&&t[a]<255){n=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",n)}},{key:"showText",value:function(e){var t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);var i=t.fontSize;if(0!==i){var o,s=this.ctx,u=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,f=t.fontDirection,d=t.textHScale*f,h=e.length,p=n.vertical,v=p?1:-1,g=n.defaultVMetrics,m=i*t.fontMatrix[0],y=t.textRenderingMode===r.TextRenderingMode.FILL&&!n.disableFontFace&&!t.patternFill;if(s.save(),s.transform.apply(s,t.textMatrix),s.translate(t.x,t.y+t.textRise),f>0?s.scale(d,-1):s.scale(d,1),t.patternFill){s.save();var b=t.fillColor.getPattern(s,this,s.mozCurrentTransformInverse,a.PathType.FILL);o=s.mozCurrentTransform,s.restore(),s.fillStyle=b}var x=t.lineWidth,k=!1,w=t.textMatrixScale;if(0===w||0===x){var S=t.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;S!==r.TextRenderingMode.STROKE&&S!==r.TextRenderingMode.FILL_STROKE||(this._cachedGetSinglePixelWidth=null,k=(x=this.getSinglePixelWidth())<0)}else x/=w;1!==u&&(s.scale(u,u),x/=u),s.lineWidth=x;var _,C=0;for(_=0;_<h;++_){var E=e[_];if((0,r.isNum)(E))C+=v*E*i/1e3;else{var A=!1,I=(E.isSpace?c:0)+l,T=E.fontChar,R=E.accent,N=void 0,M=void 0,O=E.width;if(p){var P=E.vmetric||g,F=-(E.vmetric?P[1]:.5*O)*m,D=P[2]*m;O=P?-P[0]:O,N=F/u,M=(C+D)/u}else N=C/u,M=0;if(n.remeasure&&O>0){var L=1e3*s.measureText(T).width/i*u;if(O<L&&this.isFontSubpixelAAEnabled){var z=O/L;A=!0,s.save(),s.scale(z,1),N/=z}else O!==L&&(N+=(O-L)/2e3*i/u)}if(this.contentVisible&&(E.isInFont||n.missingFile))if(y&&!R)s.fillText(T,N,M);else if(this.paintChar(T,N,M,o,k),R){var j=N+i*R.offset.x/u,B=M-i*R.offset.y/u;this.paintChar(R.fontChar,j,B,o,k)}C+=p?O*m-I*f:O*m+I*f,A&&s.restore()}}p?t.y-=C:t.x+=C*d,s.restore(),this.compose()}}},{key:"showType3Text",value:function(e){var t,n,a,i,o=this.ctx,s=this.current,u=s.font,l=s.fontSize,c=s.fontDirection,f=u.vertical?1:-1,d=s.charSpacing,h=s.wordSpacing,p=s.textHScale*c,v=s.fontMatrix||r.FONT_IDENTITY_MATRIX,g=e.length;if(s.textRenderingMode!==r.TextRenderingMode.INVISIBLE&&0!==l){for(this._cachedGetSinglePixelWidth=null,o.save(),o.transform.apply(o,s.textMatrix),o.translate(s.x,s.y),o.scale(p,c),t=0;t<g;++t)if(n=e[t],(0,r.isNum)(n))i=f*n*l/1e3,this.ctx.translate(i,0),s.x+=i*p;else{var m=(n.isSpace?h:0)+d,y=u.charProcOperatorList[n.operatorListId];y?(this.contentVisible&&(this.processingType3=n,this.save(),o.scale(l,l),o.transform.apply(o,v),this.executeOperatorList(y),this.restore()),a=r.Util.applyTransform([n.width,0],v)[0]*l+m,o.translate(a,0),s.x+=a*p):(0,r.warn)('Type3 character "'.concat(n.operatorListId,'" is not available.'))}o.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(e,t){}},{key:"setCharWidthAndBounds",value:function(e,t,n,r,a,i){this.ctx.rect(n,r,a-n,i-r),this.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(t){var n,r=this;if("TilingPattern"===t[0]){var i=t[1],o=this.baseTransform||this.ctx.mozCurrentTransform.slice(),s={createCanvasGraphics:function(t){return new e(t,r.commonObjs,r.objs,r.canvasFactory)}};n=new a.TilingPattern(t,i,this.ctx,s,o)}else n=this._getPattern(t[1],t[2]);return n}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(e,t,n){var a=r.Util.makeHexColor(e,t,n);this.ctx.strokeStyle=a,this.current.strokeColor=a}},{key:"setFillRGBColor",value:function(e,t,n){var a=r.Util.makeHexColor(e,t,n);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1}},{key:"_getPattern",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=(0,a.getShadingPattern)(this.objs.get(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}},{key:"shadingFill",value:function(e){if(this.contentVisible){var t=this.ctx;this.save();var n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,t.mozCurrentTransformInverse,a.PathType.SHADING);var i=t.mozCurrentTransformInverse;if(i){var o=t.canvas,s=o.width,u=o.height,l=r.Util.applyTransform([0,0],i),c=r.Util.applyTransform([0,u],i),f=r.Util.applyTransform([s,0],i),d=r.Util.applyTransform([s,u],i),h=Math.min(l[0],c[0],f[0],d[0]),p=Math.min(l[1],c[1],f[1],d[1]),v=Math.max(l[0],c[0],f[0],d[0]),g=Math.max(l[1],c[1],f[1],d[1]);this.ctx.fillRect(h,p,v-h,g-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){(0,r.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,r.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,t)){var n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,t[0],t[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,t[2],t[3]),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(e){if(this.contentVisible){this.save();var t=this.suspendedCtx;this.current.activeSMask&&(this.suspendedCtx=null,this.current.activeSMask=null);var n=this.ctx;e.isolated||(0,r.info)("TODO: Support non-isolated groups."),e.knockout&&(0,r.warn)("Knockout groups not supported.");var a=n.mozCurrentTransform;if(e.matrix&&n.transform.apply(n,e.matrix),!e.bbox)throw new Error("Bounding box is required.");var i=r.Util.getAxialAlignedBoundingBox(e.bbox,n.mozCurrentTransform),o=[0,0,n.canvas.width,n.canvas.height];i=r.Util.intersect(i,o)||[0,0,0,0];var s=Math.floor(i[0]),u=Math.floor(i[1]),l=Math.max(Math.ceil(i[2])-s,1),c=Math.max(Math.ceil(i[3])-u,1),f=1,d=1;l>p&&(f=l/p,l=p),c>p&&(d=c/p,c=p),this.current.startNewPathAndClipBox([0,0,l,c]);var h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);var v=this.cachedCanvases.getCanvas(h,l,c,!0),g=v.context;g.scale(1/f,1/d),g.translate(-s,-u),g.transform.apply(g,a),e.smask?this.smaskStack.push({canvas:v.canvas,context:g,offsetX:s,offsetY:u,scaleX:f,scaleY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(s,u),n.scale(f,d),n.save()),k(n,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push({ctx:n,suspendedCtx:t}),this.groupLevel++}}},{key:"endGroup",value:function(e){if(this.contentVisible){this.groupLevel--;var t=this.ctx,n=this.groupStack.pop(),a=n.ctx,i=n.suspendedCtx;if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,i&&(this.suspendedCtx=i),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();var o=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,o);var s=r.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],o);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}}},{key:"beginAnnotations",value:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}},{key:"endAnnotations",value:function(){this.restore()}},{key:"beginAnnotation",value:function(e,t,n,a,i){if(this.save(),Array.isArray(t)&&4===t.length){var o=t[2]-t[0],s=t[3]-t[1];if(i&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=o,t[3]=s;var u=f(r.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),2),l=u[0],c=u[1],d=this.viewportScale,h=Math.ceil(o*this.outputScaleX*d),p=Math.ceil(s*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,p);var v=this.annotationCanvas,m=v.canvas,b=v.context;m.style.width="calc(".concat(o,"px * var(--viewport-scale-factor))"),m.style.height="calc(".concat(s,"px * var(--viewport-scale-factor))"),this.annotationCanvasMap.set(e,m),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.setTransform(l,0,0,-c,0,s*c),g(this.ctx),w(this.ctx)}else w(this.ctx),this.ctx.rect(t[0],t[1],o,s),this.clip(),this.endPath()}this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,n),this.transform.apply(this,a)}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}},{key:"paintImageMaskXObject",value:function(e){if(this.contentVisible){var t=this.ctx,n=e.width,r=e.height,a=this.processingType3;if(a&&void 0===a.compiled&&(a.compiled=n<=1e3&&r<=1e3?function(e){var t,n,r,a,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e.width,s=e.height,u=o+1,l=new Uint8Array(u*(s+1)),c=o+7&-8,f=e.data,d=new Uint8Array(c*s),h=0;for(t=0,n=f.length;t<n;t++)for(var p=f[t],v=128;v>0;)d[h++]=p&v?0:255,v>>=1;var g=0;for(0!==d[h=0]&&(l[0]=1,++g),r=1;r<o;r++)d[h]!==d[h+1]&&(l[r]=d[h]?2:1,++g),h++;for(0!==d[h]&&(l[r]=2,++g),t=1;t<s;t++){a=t*u,d[(h=t*c)-c]!==d[h]&&(l[a]=d[h]?1:8,++g);var m=(d[h]?4:0)+(d[h-c]?8:0);for(r=1;r<o;r++)i[m=(m>>2)+(d[h+1]?4:0)+(d[h-c+1]?8:0)]&&(l[a+r]=i[m],++g),h++;if(d[h-c]!==d[h]&&(l[a+r]=d[h]?2:4,++g),g>1e3)return null}for(a=t*u,0!==d[h=c*(s-1)]&&(l[a]=8,++g),r=1;r<o;r++)d[h]!==d[h+1]&&(l[a+r]=d[h]?4:8,++g),h++;if(0!==d[h]&&(l[a+r]=4,++g),g>1e3)return null;var y=new Int32Array([0,u,-1,0,-u,0,0,0,1]),b=[];for(t=0;g&&t<=s;t++){for(var x=t*u,k=x+o;x<k&&!l[x];)x++;if(x!==k){var w=[x%u,t],S=x,_=l[x];do{var C=y[_];do{x+=C}while(!l[x]);var E=l[x];5!==E&&10!==E?(_=E,l[x]=0):(_=E&51*_>>4,l[x]&=_>>2|_<<2),w.push(x%u,x/u|0),l[x]||--g}while(S!==x);b.push(w),--t}}return function(e){e.save(),e.scale(1/o,-1/s),e.translate(0,-s),e.beginPath();for(var t=0,n=b.length;t<n;t++){var r=b[t];e.moveTo(r[0],r[1]);for(var a=2,i=r.length;a<i;a+=2)e.lineTo(r[a],r[a+1])}e.fill(),e.beginPath(),e.restore()}}({data:e.data,width:n,height:r}):null),null!==a&&void 0!==a&&a.compiled)a.compiled(t);else{var i=this._createMaskCanvas(e),o=i.canvas;t.save(),t.setTransform(1,0,0,1,0,0),t.drawImage(o,i.offsetX,i.offsetY),t.restore(),this.compose()}}}},{key:"paintImageMaskXObjectRepeat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;if(this.contentVisible){var s=this.ctx;s.save();var u=s.mozCurrentTransform;s.transform(t,n,a,i,0,0);var l=this._createMaskCanvas(e);s.setTransform(1,0,0,1,0,0);for(var c=0,d=o.length;c<d;c+=2){var h=r.Util.transform(u,[t,n,a,i,o[c],o[c+1]]),p=r.Util.applyTransform([0,0],h),v=f(p,2),g=v[0],m=v[1];s.drawImage(l.canvas,g,m)}s.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(e){if(this.contentVisible){for(var t=this.ctx,n=this.current.fillColor,r=this.current.patternFill,i=0,o=e.length;i<o;i++){var s=e[i],u=s.width,l=s.height,c=this.cachedCanvases.getCanvas("maskCanvas",u,l),f=c.context;f.save(),x(f,s),f.globalCompositeOperation="source-in",f.fillStyle=r?n.getPattern(f,this,t.mozCurrentTransformInverse,a.PathType.FILL):n,f.fillRect(0,0,u,l),f.restore(),t.save(),t.transform.apply(t,s.transform),t.scale(1,-1),t.drawImage(c.canvas,0,0,u,l,0,-1,1,1),t.restore()}this.compose()}}},{key:"paintImageXObject",value:function(e){if(this.contentVisible){var t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,r.warn)("Dependent image isn't ready yet")}}},{key:"paintImageXObjectRepeat",value:function(e,t,n,a){if(this.contentVisible){var i=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);if(i){for(var o=i.width,s=i.height,u=[],l=0,c=a.length;l<c;l+=2)u.push({transform:[t,0,0,n,a[l],a[l+1]],x:0,y:0,w:o,h:s});this.paintInlineImageXObjectGroup(i,u)}else(0,r.warn)("Dependent image isn't ready yet")}}},{key:"paintInlineImageXObject",value:function(e){if(this.contentVisible){var t,n=e.width,r=e.height,a=this.ctx;if(this.save(),a.scale(1/n,-1/r),"function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)t=e;else{var i=this.cachedCanvases.getCanvas("inlineImage",n,r);b(i.context,e,this.current.transferMaps),t=i.canvas}var o=this._scaleImage(t,a.mozCurrentTransformInverse);if(a.imageSmoothingEnabled=A(a.mozCurrentTransform,e.interpolate),a.drawImage(o.img,0,0,o.paintWidth,o.paintHeight,0,-r,n,r),this.imageLayer){var s=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:e,left:s[0],top:s[1],width:n/a.mozCurrentTransformInverse[0],height:r/a.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(e,t){if(this.contentVisible){var n=this.ctx,r=e.width,a=e.height,i=this.cachedCanvases.getCanvas("inlineImage",r,a);b(i.context,e,this.current.transferMaps);for(var o=0,s=t.length;o<s;o++){var u=t[o];if(n.save(),n.transform.apply(n,u.transform),n.scale(1,-1),n.drawImage(i.canvas,u.x,u.y,u.w,u.h,0,-1,1,1),this.imageLayer){var l=this.getCanvasPosition(u.x,u.y);this.imageLayer.appendImage({imgData:e,left:l[0],top:l[1],width:r,height:a})}n.restore()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(e){}},{key:"markPointProps",value:function(e,t){}},{key:"beginMarkedContent",value:function(e){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(e){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);var t=this.ctx;this.pendingClip&&(this.pendingClip===N?t.clip("evenodd"):t.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),t.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(null===this._cachedGetSinglePixelWidth){var e=this.ctx.mozCurrentTransform,t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.pow(e[0],2)+Math.pow(e[2],2),r=Math.pow(e[1],2)+Math.pow(e[3],2),a=Math.sqrt(Math.max(n,r))/t;n!==r&&this._combinedScaleFactor*a>1?this._cachedGetSinglePixelWidth=-this._combinedScaleFactor*a:t>Number.EPSILON?this._cachedGetSinglePixelWidth=a:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}},{key:"getCanvasPosition",value:function(e,t){var n=this.ctx.mozCurrentTransform;return[n[0]*e+n[2]*t+n[4],n[1]*e+n[3]*t+n[5]]}},{key:"isContentVisible",value:function(){for(var e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}]),e}();for(var O in t.CanvasGraphics=M,r.OPS)void 0!==M.prototype[O]&&(M.prototype[r.OPS[O]]=M.prototype[O])},function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=function(e){switch(e[0]){case"RadialAxial":return new y(e);case"Mesh":return new k(e);case"Dummy":return new w}throw new Error("Unknown IR type: ".concat(e[0]))};var a=n(4);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var v={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function g(e,t){if(t&&"undefined"!==typeof Path2D){var n=t[2]-t[0],r=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],n,r),e.clip(a)}}t.PathType=v;var m=function(){function e(){d(this,e),this.constructor===e&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}return p(e,[{key:"getPattern",value:function(){(0,a.unreachable)("Abstract method `getPattern` called.")}}]),e}(),y=function(e){s(n,e);var t=l(n);function n(e){var r;return d(this,n),(r=t.call(this))._type=e[1],r._bbox=e[2],r._colorStops=e[3],r._p0=e[4],r._p1=e[5],r._r0=e[6],r._r1=e[7],r.matrix=null,r}return p(n,[{key:"_createGradient",value:function(e){var t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var n,r=i(this._colorStops);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.addColorStop(a[0],a[1])}}catch(o){r.e(o)}finally{r.f()}return t}},{key:"getPattern",value:function(e,t,n,r){var i;if(r===v.STROKE||r===v.FILL){var o=t.current.getClippedPathBoundingBox(r,e.mozCurrentTransform)||[0,0,0,0],s=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,l=t.cachedCanvases.getCanvas("pattern",s,u,!0),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-o[0],-o[1]),n=a.Util.transform(n,[1,0,0,1,o[0],o[1]]),c.transform.apply(c,t.baseTransform),this.matrix&&c.transform.apply(c,this.matrix),g(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),i=e.createPattern(l.canvas,"no-repeat");var f=new DOMMatrix(n);try{i.setTransform(f)}catch(d){(0,a.warn)('RadialAxialShadingPattern.getPattern: "'.concat(null===d||void 0===d?void 0:d.message,'".'))}}else g(e,this._bbox),i=this._createGradient(e);return i}}]),n}(m);function b(e,t,n,r,a,i,o,s){var u,l=t.coords,c=t.colors,f=e.data,d=4*e.width;l[n+1]>l[r+1]&&(u=n,n=r,r=u,u=i,i=o,o=u),l[r+1]>l[a+1]&&(u=r,r=a,a=u,u=o,o=s,s=u),l[n+1]>l[r+1]&&(u=n,n=r,r=u,u=i,i=o,o=u);var h=(l[n]+t.offsetX)*t.scaleX,p=(l[n+1]+t.offsetY)*t.scaleY,v=(l[r]+t.offsetX)*t.scaleX,g=(l[r+1]+t.offsetY)*t.scaleY,m=(l[a]+t.offsetX)*t.scaleX,y=(l[a+1]+t.offsetY)*t.scaleY;if(!(p>=y))for(var b,x,k,w,S,_,C,E,A=c[i],I=c[i+1],T=c[i+2],R=c[o],N=c[o+1],M=c[o+2],O=c[s],P=c[s+1],F=c[s+2],D=Math.round(p),L=Math.round(y),z=D;z<=L;z++){if(z<g){var j=void 0;b=h-(h-v)*(j=z<p?0:(p-z)/(p-g)),x=A-(A-R)*j,k=I-(I-N)*j,w=T-(T-M)*j}else{var B=void 0;b=v-(v-m)*(B=z>y?1:g===y?0:(g-z)/(g-y)),x=R-(R-O)*B,k=N-(N-P)*B,w=M-(M-F)*B}var W=void 0;S=h-(h-m)*(W=z<p?0:z>y?1:(p-z)/(p-y)),_=A-(A-O)*W,C=I-(I-P)*W,E=T-(T-F)*W;for(var U=Math.round(Math.min(b,S)),V=Math.round(Math.max(b,S)),H=d*z+4*U,G=U;G<=V;G++)(W=(b-G)/(b-S))<0?W=0:W>1&&(W=1),f[H++]=x-(x-_)*W|0,f[H++]=k-(k-C)*W|0,f[H++]=w-(w-E)*W|0,f[H++]=255}}function x(e,t,n){var r,a,i=t.coords,o=t.colors;switch(t.type){case"lattice":var s=t.verticesPerRow,u=Math.floor(i.length/s)-1,l=s-1;for(r=0;r<u;r++)for(var c=r*s,f=0;f<l;f++,c++)b(e,n,i[c],i[c+1],i[c+s],o[c],o[c+1],o[c+s]),b(e,n,i[c+s+1],i[c+1],i[c+s],o[c+s+1],o[c+1],o[c+s]);break;case"triangles":for(r=0,a=i.length;r<a;r+=3)b(e,n,i[r],i[r+1],i[r+2],o[r],o[r+1],o[r+2]);break;default:throw new Error("illegal figure")}}var k=function(e){s(n,e);var t=l(n);function n(e){var r;return d(this,n),(r=t.call(this))._coords=e[2],r._colors=e[3],r._figures=e[4],r._bounds=e[5],r._bbox=e[7],r._background=e[8],r.matrix=null,r}return p(n,[{key:"_createMeshCanvas",value:function(e,t,n){var r=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),o=Math.ceil(this._bounds[2])-r,s=Math.ceil(this._bounds[3])-a,u=Math.min(Math.ceil(Math.abs(o*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(s*e[1]*1.1)),3e3),c=o/u,f=s/l,d={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-a,scaleX:1/c,scaleY:1/f},h=u+4,p=l+4,v=n.getCanvas("mesh",h,p,!1),g=v.context,m=g.createImageData(u,l);if(t)for(var y=m.data,b=0,k=y.length;b<k;b+=4)y[b]=t[0],y[b+1]=t[1],y[b+2]=t[2],y[b+3]=255;var w,S=i(this._figures);try{for(S.s();!(w=S.n()).done;)x(m,w.value,d)}catch(_){S.e(_)}finally{S.f()}return g.putImageData(m,2,2),{canvas:v.canvas,offsetX:r-2*c,offsetY:a-2*f,scaleX:c,scaleY:f}}},{key:"getPattern",value:function(e,t,n,r){var i;if(g(e,this._bbox),r===v.SHADING)i=a.Util.singularValueDecompose2dScale(e.mozCurrentTransform);else if(i=a.Util.singularValueDecompose2dScale(t.baseTransform),this.matrix){var o=a.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*o[0],i[1]*o[1]]}var s=this._createMeshCanvas(i,r===v.SHADING?null:this._background,t.cachedCanvases);return r!==v.SHADING&&(e.setTransform.apply(e,t.baseTransform),this.matrix&&e.transform.apply(e,this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}]),n}(m),w=function(e){s(n,e);var t=l(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getPattern",value:function(){return"hotpink"}}]),n}(m),S=1,_=2,C=function(){function e(t,n,r,a,i){d(this,e),this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=n,this.ctx=r,this.canvasGraphicsFactory=a,this.baseTransform=i}return p(e,[{key:"createPatternCanvas",value:function(e){var t=this.operatorList,n=this.bbox,r=this.xstep,i=this.ystep,o=this.paintType,s=this.tilingType,u=this.color,l=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+s);var c=n[0],f=n[1],d=n[2],h=n[3],p=a.Util.singularValueDecompose2dScale(this.matrix),v=a.Util.singularValueDecompose2dScale(this.baseTransform),g=[p[0]*v[0],p[1]*v[1]],m=this.getSizeAndScale(r,this.ctx.canvas.width,g[0]),y=this.getSizeAndScale(i,this.ctx.canvas.height,g[1]),b=e.cachedCanvases.getCanvas("pattern",m.size,y.size,!0),x=b.context,k=l.createCanvasGraphics(x);k.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(k,o,u);var w=c,S=f,_=d,C=h;return c<0&&(w=0,_+=Math.abs(c)),f<0&&(S=0,C+=Math.abs(f)),x.translate(-m.scale*w,-y.scale*S),k.transform(m.scale,0,0,y.scale,0,0),this.clipBbox(k,w,S,_,C),k.baseTransform=k.ctx.mozCurrentTransform.slice(),k.executeOperatorList(t),k.endDrawing(),{canvas:b.canvas,scaleX:m.scale,scaleY:y.scale,offsetX:w,offsetY:S}}},{key:"getSizeAndScale",value:function(t,n,r){t=Math.abs(t);var a=Math.max(e.MAX_PATTERN_SIZE,n),i=Math.ceil(t*r);return i>=a?i=a:r=i/t,{scale:r,size:i}}},{key:"clipBbox",value:function(e,t,n,r,a){var i=r-t,o=a-n;e.ctx.rect(t,n,i,o),e.clip(),e.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(e,t,n){var r=e.ctx,i=e.current;switch(t){case S:var o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,i.fillColor=o.fillStyle,i.strokeColor=o.strokeStyle;break;case _:var s=a.Util.makeHexColor(n[0],n[1],n[2]);r.fillStyle=s,r.strokeStyle=s,i.fillColor=s,i.strokeColor=s;break;default:throw new a.FormatError("Unsupported paint type: ".concat(t))}}},{key:"getPattern",value:function(e,t,n,r){var i=n;r!==v.SHADING&&(i=a.Util.transform(i,t.baseTransform),this.matrix&&(i=a.Util.transform(i,this.matrix)));var o=this.createPatternCanvas(t),s=new DOMMatrix(i);s=(s=s.translate(o.offsetX,o.offsetY)).scale(1/o.scaleX,1/o.scaleY);var u=e.createPattern(o.canvas,"repeat");try{u.setTransform(s)}catch(l){(0,a.warn)('TilingPattern.getPattern: "'.concat(null===l||void 0===l?void 0:l.message,'".'))}return u}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,a.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),e}();t.TilingPattern=C},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;var n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=void 0===n.workerPort?null:n.workerPort,n.workerSrc=void 0===n.workerSrc?"":n.workerSrc},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},i=n(4);function o(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var l=1,c=2,f=1,d=2,h=3,p=4,v=5,g=6,m=7,y=8;function b(e){if(!(e instanceof Error||"object"===u(e)&&null!==e))return(0,i.warn)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e;switch(e.name){case"AbortException":return new i.AbortException(e.message);case"MissingPDFException":return new i.MissingPDFException(e.message);case"PasswordException":return new i.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new i.UnknownErrorException(e.message,e.details);default:return new i.UnknownErrorException(e.message,e.toString())}}var x=function(){function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceName=t,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(e){var t=e.data;if(t.targetName===a.sourceName)if(t.stream)a._processStreamMessage(t);else if(t.callback){var n=t.callbackId,i=a.callbackCapabilities[n];if(!i)throw new Error("Cannot resolve callback ".concat(n));if(delete a.callbackCapabilities[n],t.callback===l)i.resolve(t.data);else{if(t.callback!==c)throw new Error("Unexpected callback case");i.reject(b(t.reason))}}else{var o=a.actionHandler[t.action];if(!o)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){var s=a.sourceName,u=t.sourceName;new Promise((function(e){e(o(t.data))})).then((function(e){r.postMessage({sourceName:s,targetName:u,callback:l,callbackId:t.callbackId,data:e})}),(function(e){r.postMessage({sourceName:s,targetName:u,callback:c,callbackId:t.callbackId,reason:b(e)})}))}else t.streamId?a._createStreamSink(t):o(t.data)}},r.addEventListener("message",this._onComObjOnMessage)}var t,n,r;return t=e,n=[{key:"on",value:function(e,t){var n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}},{key:"send",value:function(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}},{key:"sendWithPromise",value:function(e,t,n){var r=this.callbackId++,a=(0,i.createPromiseCapability)();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(o){a.reject(o)}return a.promise}},{key:"sendWithStream",value:function(e,t,n,r){var a=this,o=this.streamId++,s=this.sourceName,u=this.targetName,l=this.comObj;return new ReadableStream({start:function(n){var c=(0,i.createPromiseCapability)();return a.streamControllers[o]={controller:n,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:u,action:e,streamId:o,data:t,desiredSize:n.desiredSize},r),c.promise},pull:function(e){var t=(0,i.createPromiseCapability)();return a.streamControllers[o].pullCall=t,l.postMessage({sourceName:s,targetName:u,stream:g,streamId:o,desiredSize:e.desiredSize}),t.promise},cancel:function(e){(0,i.assert)(e instanceof Error,"cancel must have a valid reason");var t=(0,i.createPromiseCapability)();return a.streamControllers[o].cancelCall=t,a.streamControllers[o].isClosed=!0,l.postMessage({sourceName:s,targetName:u,stream:f,streamId:o,reason:b(e)}),t.promise}},n)}},{key:"_createStreamSink",value:function(e){var t=e.streamId,n=this.sourceName,r=e.sourceName,a=this.comObj,o=this,s=this.actionHandler[e.action],u={enqueue:function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var u=this.desiredSize;this.desiredSize-=o,u>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:r,stream:p,streamId:t,chunk:e},s)}},close:function(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:r,stream:h,streamId:t}),delete o.streamSinks[t])},error:function(e){(0,i.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:r,stream:v,streamId:t,reason:b(e)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,new Promise((function(t){t(s(e.data,u))})).then((function(){a.postMessage({sourceName:n,targetName:r,stream:y,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:n,targetName:r,stream:y,streamId:t,reason:b(e)})}))}},{key:"_processStreamMessage",value:function(e){var t=e.streamId,n=this.sourceName,r=e.sourceName,a=this.comObj,o=this.streamControllers[t],s=this.streamSinks[t];switch(e.stream){case y:e.success?o.startCall.resolve():o.startCall.reject(b(e.reason));break;case m:e.success?o.pullCall.resolve():o.pullCall.reject(b(e.reason));break;case g:if(!s){a.postMessage({sourceName:n,targetName:r,stream:m,streamId:t,success:!0});break}s.desiredSize<=0&&e.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=e.desiredSize,new Promise((function(e){e(s.onPull&&s.onPull())})).then((function(){a.postMessage({sourceName:n,targetName:r,stream:m,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:n,targetName:r,stream:m,streamId:t,reason:b(e)})}));break;case p:if((0,i.assert)(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case h:if((0,i.assert)(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this._deleteStreamController(o,t);break;case v:(0,i.assert)(o,"error should have stream controller"),o.controller.error(b(e.reason)),this._deleteStreamController(o,t);break;case d:e.success?o.cancelCall.resolve():o.cancelCall.reject(b(e.reason)),this._deleteStreamController(o,t);break;case f:if(!s)break;new Promise((function(t){t(s.onCancel&&s.onCancel(b(e.reason)))})).then((function(){a.postMessage({sourceName:n,targetName:r,stream:d,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:n,targetName:r,stream:d,streamId:t,reason:b(e)})})),s.sinkCapability.reject(b(e.reason)),s.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:function(){var e,t=(e=a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled([t.startCall&&t.startCall.promise,t.pullCall&&t.pullCall.promise,t.cancelCall&&t.cancelCall.promise]);case 2:delete this.streamControllers[n];case 3:case"end":return e.stop()}}),e,this)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){o(i,r,a,s,u,"next",e)}function u(e){o(i,r,a,s,u,"throw",e)}s(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}],n&&s(t.prototype,n),r&&s(t,r),e}();t.MessageHandler=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=n(4);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function o(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,u(e,t,"get"))}function s(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,u(e,t,"set"),n),n}function u(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var l=new WeakMap,c=new WeakMap,f=function(){function e(t){var n=t.parsedData,r=t.rawData;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,l,{writable:!0,value:void 0}),i(this,c,{writable:!0,value:void 0}),s(this,l,n),s(this,c,r)}var t,n,u;return t=e,(n=[{key:"getRaw",value:function(){return o(this,c)}},{key:"get",value:function(e){var t;return null!==(t=o(this,l).get(e))&&void 0!==t?t:null}},{key:"getAll",value:function(){return(0,r.objectFromMap)(o(this,l))}},{key:"has",value:function(e){return o(this,l).has(e)}}])&&a(t.prototype,n),u&&a(t,u),e}();t.Metadata=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var r=n(4);function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function e(t,n){s(this,e),this.visible=!0,this.name=t,this.intent=n},l=function(){function e(t){if(s(this,e),this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==t){this.name=t.name,this.creator=t.creator,this._order=t.order;var n,r=a(t.groups);try{for(r.s();!(n=r.n()).done;){var i=n.value;this._groups.set(i.id,new u(i.name,i.intent))}}catch(g){r.e(g)}finally{r.f()}if("OFF"===t.baseState){var o,l=a(this._groups);try{for(l.s();!(o=l.n()).done;)o.value.visible=!1}catch(g){l.e(g)}finally{l.f()}}var c,f=a(t.on);try{for(f.s();!(c=f.n()).done;){var d=c.value;this._groups.get(d).visible=!0}}catch(g){f.e(g)}finally{f.f()}var h,p=a(t.off);try{for(p.s();!(h=p.n()).done;){var v=h.value;this._groups.get(v).visible=!1}}catch(g){p.e(g)}finally{p.f()}}}var t,n,i;return t=e,n=[{key:"_evaluateVisibilityExpression",value:function(e){var t=e.length;if(t<2)return!0;for(var n=e[0],a=1;a<t;a++){var i=e[a],o=void 0;if(Array.isArray(i))o=this._evaluateVisibilityExpression(i);else{if(!this._groups.has(i))return(0,r.warn)("Optional content group not found: ".concat(i)),!0;o=this._groups.get(i).visible}switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===n}},{key:"isVisible",value:function(e){if(0===this._groups.size)return!0;if(!e)return(0,r.warn)("Optional content group not defined."),!0;if("OCG"===e.type)return this._groups.has(e.id)?this._groups.get(e.id).visible:((0,r.warn)("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return this._evaluateVisibilityExpression(e.expression);if(!e.policy||"AnyOn"===e.policy){var t,n=a(e.ids);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!this._groups.has(i))return(0,r.warn)("Optional content group not found: ".concat(i)),!0;if(this._groups.get(i).visible)return!0}}catch(v){n.e(v)}finally{n.f()}return!1}if("AllOn"===e.policy){var o,s=a(e.ids);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!this._groups.has(u))return(0,r.warn)("Optional content group not found: ".concat(u)),!0;if(!this._groups.get(u).visible)return!1}}catch(v){s.e(v)}finally{s.f()}return!0}if("AnyOff"===e.policy){var l,c=a(e.ids);try{for(c.s();!(l=c.n()).done;){var f=l.value;if(!this._groups.has(f))return(0,r.warn)("Optional content group not found: ".concat(f)),!0;if(!this._groups.get(f).visible)return!0}}catch(v){c.e(v)}finally{c.f()}return!1}if("AllOff"===e.policy){var d,h=a(e.ids);try{for(h.s();!(d=h.n()).done;){var p=d.value;if(!this._groups.has(p))return(0,r.warn)("Optional content group not found: ".concat(p)),!0;if(this._groups.get(p).visible)return!1}}catch(v){h.e(v)}finally{h.f()}return!0}return(0,r.warn)("Unknown optional content policy ".concat(e.policy,".")),!0}return(0,r.warn)("Unknown group type ".concat(e.type,".")),!0}},{key:"setVisibility",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._groups.has(e)?this._groups.get(e).visible=!!t:(0,r.warn)("Optional content group not found: ".concat(e))}},{key:"getOrder",value:function(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}},{key:"getGroups",value:function(){return this._groups.size>0?(0,r.objectFromMap)(this._groups):null}},{key:"getGroup",value:function(e){return this._groups.get(e)||null}}],n&&o(t.prototype,n),i&&o(t,i),e}();t.OptionalContentConfig=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},i=n(4),o=n(1);function s(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,u,"next",e)}function u(e){s(i,r,a,o,u,"throw",e)}o(void 0)}))}}function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var p=function(){function e(t,n){var r=this;f(this,e),(0,i.assert)(n,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=t.progressiveDone||!1,this._contentDispositionFilename=t.contentDispositionFilename||null;var a=t.initialData;if((null===a||void 0===a?void 0:a.length)>0){var o=new Uint8Array(a).buffer;this._queuedChunks.push(o)}this._pdfDataRangeTransport=n,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._contentLength=t.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((function(e,t){r._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener((function(e,t){r._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((function(e){r._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((function(){r._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}return h(e,[{key:"_onReceiveData",value:function(e){var t=new Uint8Array(e.chunk).buffer;if(void 0===e.begin)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{var n=this._rangeReaders.some((function(n){return n._begin===e.begin&&(n._enqueue(t),!0)}));(0,i.assert)(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}},{key:"_onProgress",value:function(e){if(void 0===e.total){var t=this._rangeReaders[0];null!==t&&void 0!==t&&t.onProgress&&t.onProgress({loaded:e.loaded})}else{var n=this._fullRequestReader;null!==n&&void 0!==n&&n.onProgress&&n.onProgress({loaded:e.loaded,total:e.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(e){var t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}},{key:"getFullReader",value:function(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var e=this._queuedChunks;return this._queuedChunks=null,new v(this,e,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var n=new g(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t,n=l(this._rangeReaders.slice(0));try{for(n.s();!(t=n.n()).done;)t.value.cancel(e)}catch(r){n.e(r)}finally{n.f()}this._pdfDataRangeTransport.abort()}}]),e}();t.PDFDataTransportStream=p;var v=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this._stream=t,this._done=r||!1,this._filename=(0,o.isPdfFile)(a)?a:null,this._queuedChunks=n||[],this._loaded=0;var i,s=l(this._queuedChunks);try{for(s.s();!(i=s.n()).done;){var u=i.value;this._loaded+=u.byteLength}}catch(c){s.e(c)}finally{s.f()}this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}return h(e,[{key:"_enqueue",value:function(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:function(){var e=u(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._queuedChunks.length>0)){e.next=3;break}return t=this._queuedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 3:if(!this._done){e.next=5;break}return e.abrupt("return",{value:void 0,done:!0});case 5:return n=(0,i.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(e){this._done=!0;var t,n=l(this._requests);try{for(n.s();!(t=n.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(r){n.e(r)}finally{n.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]),e}(),g=function(){function e(t,n,r){f(this,e),this._stream=t,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return h(e,[{key:"_enqueue",value:function(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});var t,n=l(this._requests);try{for(n.s();!(t=n.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(r){n.e(r)}finally{n.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var e=u(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._queuedChunk){e.next=4;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 4:if(!this._done){e.next=6;break}return e.abrupt("return",{value:void 0,done:!0});case 6:return n=(0,i.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(e){this._done=!0;var t,n=l(this._requests);try{for(n.s();!(t=n.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(r){n.e(r)}finally{n.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),e}()},function(e,t){"use strict";function n(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"textContent",value:function(t){var r=[],a={items:r,styles:Object.create(null)};return function t(a){var i;if(a){var o=null,s=a.name;if("#text"===s)o=a.value;else{if(!e.shouldBuildText(s))return;null!==a&&void 0!==a&&null!==(i=a.attributes)&&void 0!==i&&i.textContent?o=a.attributes.textContent:a.value&&(o=a.value)}if(null!==o&&r.push({str:o}),a.children){var u,l=n(a.children);try{for(l.s();!(u=l.n()).done;)t(u.value)}catch(c){l.e(c)}finally{l.f()}}}}(t),a}},{key:"shouldBuildText",value:function(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}],(r=null)&&a(t.prototype,r),i&&a(t,i),e}();t.XfaText=i},function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var a=n(4),i=n(1),o=n(139),s=n(149),u=n(150);function l(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}function c(e,t,n){return c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}},c(e,t,n||e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}var E=1e3,A=new WeakSet,I=function(){function e(){S(this,e)}return C(e,null,[{key:"create",value:function(e){switch(e.data.annotationType){case a.AnnotationType.LINK:return new R(e);case a.AnnotationType.TEXT:return new N(e);case a.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new O(e);case"Btn":return e.data.radioButton?new F(e):e.data.checkBox?new P(e):new D(e);case"Ch":return new L(e)}return new M(e);case a.AnnotationType.POPUP:return new z(e);case a.AnnotationType.FREETEXT:return new B(e);case a.AnnotationType.LINE:return new W(e);case a.AnnotationType.SQUARE:return new U(e);case a.AnnotationType.CIRCLE:return new V(e);case a.AnnotationType.POLYLINE:return new H(e);case a.AnnotationType.CARET:return new q(e);case a.AnnotationType.INK:return new X(e);case a.AnnotationType.POLYGON:return new G(e);case a.AnnotationType.HIGHLIGHT:return new Y(e);case a.AnnotationType.UNDERLINE:return new K(e);case a.AnnotationType.SQUIGGLY:return new $(e);case a.AnnotationType.STRIKEOUT:return new Z(e);case a.AnnotationType.STAMP:return new Q(e);case a.AnnotationType.FILEATTACHMENT:return new J(e);default:return new T(e)}}}]),e}(),T=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.isRenderable,a=void 0!==r&&r,i=n.ignoreBorder,o=void 0!==i&&i,s=n.createQuadrilaterals,u=void 0!==s&&s;S(this,e),this.isRenderable=a,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,a&&(this.container=this._createContainer(o)),u&&(this.quadrilaterals=this._createQuadrilaterals(o))}return C(e,[{key:"_createContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.data,n=this.page,r=this.viewport,i=document.createElement("section"),o=t.rect[2]-t.rect[0],s=t.rect[3]-t.rect[1];i.setAttribute("data-annotation-id",t.id);var u=a.Util.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]);if(t.hasOwnCanvas){var l=r.transform.slice(),c=a.Util.singularValueDecompose2dScale(l),f=x(c,2),d=f[0],h=f[1];o=Math.ceil(o*d),s=Math.ceil(s*h),u[0]*=d,u[1]*=h;for(var p=0;p<4;p++)l[p]=Math.sign(l[p]);i.style.transform="matrix(".concat(l.join(","),")")}else i.style.transform="matrix(".concat(r.transform.join(","),")");if(i.style.transformOrigin="".concat(-u[0],"px ").concat(-u[1],"px"),!e&&t.borderStyle.width>0){i.style.borderWidth="".concat(t.borderStyle.width,"px"),t.borderStyle.style!==a.AnnotationBorderStyleType.UNDERLINE&&(o-=2*t.borderStyle.width,s-=2*t.borderStyle.width);var v=t.borderStyle.horizontalCornerRadius,g=t.borderStyle.verticalCornerRadius;if(v>0||g>0){var m="".concat(v,"px / ").concat(g,"px");i.style.borderRadius=m}switch(t.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:i.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:i.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:i.style.borderBottomStyle="solid"}var y=t.borderColor||t.color||null;y?i.style.borderColor=a.Util.makeHexColor(0|t.color[0],0|t.color[1],0|t.color[2]):i.style.borderWidth=0}return i.style.left="".concat(u[0],"px"),i.style.top="".concat(u[1],"px"),t.hasOwnCanvas?i.style.width=i.style.height="auto":(i.style.width="".concat(o,"px"),i.style.height="".concat(s,"px")),i}},{key:"_createQuadrilaterals",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;var t,n=[],r=this.data.rect,a=b(this.data.quadPoints);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.data.rect=[i[2].x,i[2].y,i[1].x,i[1].y],n.push(this._createContainer(e))}}catch(o){a.e(o)}finally{a.f()}return this.data.rect=r,n}},{key:"_createPopup",value:function(e,t){var n=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,n=this.quadrilaterals[0]),e||((e=document.createElement("div")).style.height=n.style.height,e.style.width=n.style.width,n.appendChild(e));var r=new j({container:n,trigger:e,color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,hideWrapper:!0}).render();r.style.left=n.style.width,n.appendChild(r)}},{key:"_renderQuadrilaterals",value:function(e){var t,n=b(this.quadrilaterals);try{for(n.s();!(t=n.n()).done;)t.value.className=e}catch(r){n.e(r)}finally{n.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];if(this._fieldObjects){var r=this._fieldObjects[e];if(r){var i,o=b(r);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.page,l=s.id,c=s.exportValues;if(-1!==u&&l!==t){var f="string"===typeof c?c:null,d=document.getElementById(l);!d||A.has(d)?n.push({id:l,exportValue:f,domElement:d}):(0,a.warn)("_getElementsByName - element not allowed: ".concat(l))}}}catch(y){o.e(y)}finally{o.f()}}return n}var h,p=b(document.getElementsByName(e));try{for(p.s();!(h=p.n()).done;){var v=h.value,g=v.id,m=v.exportValue;g!==t&&A.has(v)&&n.push({id:g,exportValue:m,domElement:v})}}catch(y){p.e(y)}finally{p.f()}return n}}],[{key:"platform",get:function(){var e="undefined"!==typeof navigator?navigator.platform:"";return(0,a.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}]),e}(),R=function(e){h(n,e);var t=v(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;S(this,n);var a=!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"]));return t.call(this,e,{isRenderable:a,ignoreBorder:!(null===r||void 0===r||!r.ignoreBorder),createQuadrilaterals:!0})}return C(n,[{key:"render",value:function(){var e,t=this.data,n=this.linkService,r=document.createElement("a");if(t.url)n.addLinkAttributes||(0,a.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),null===(e=n.addLinkAttributes)||void 0===e||e.call(n,r,t.url,t.newWindow);else if(t.action)this._bindNamedAction(r,t.action);else if(t.dest)this._bindLink(r,t.dest);else{var i=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(i=!0,this._bindJSAction(r,t)),t.resetForm?this._bindResetFormAction(r,t.resetForm):i||this._bindLink(r,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((function(e,t){var n=0===t?r:r.cloneNode();return e.appendChild(n),e})):(this.container.className="linkAnnotation",this.container.appendChild(r),this.container)}},{key:"_bindLink",value:function(e,t){var n=this;e.href=this.linkService.getDestinationHash(t),e.onclick=function(){return t&&n.linkService.goToDestination(t),!1},(t||""===t)&&(e.className="internalLink")}},{key:"_bindNamedAction",value:function(e,t){var n=this;e.href=this.linkService.getAnchorUrl(""),e.onclick=function(){return n.linkService.executeNamedAction(t),!1},e.className="internalLink"}},{key:"_bindJSAction",value:function(e,t){var n=this;e.href=this.linkService.getAnchorUrl("");for(var r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),a=function(){var a=o[i],s=r.get(a);if(!s)return"continue";e[s]=function(){var e;return null===(e=n.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:n,detail:{id:t.id,name:a}}),!1}},i=0,o=Object.keys(t.actions);i<o.length;i++)a();e.onclick||(e.onclick=function(){return!1}),e.className="internalLink"}},{key:"_bindResetFormAction",value:function(e,t){var n=this,r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects)return(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(r||(e.onclick=function(){return!1}));e.onclick=function(){r&&r();var e=t.fields,a=t.refs,i=t.include,o=[];if(0!==e.length||0!==a.length){var s,u=new Set(a),l=b(e);try{for(l.s();!(s=l.n()).done;){var c,f=s.value,h=b(n._fieldObjects[f]||[]);try{for(h.s();!(c=h.n()).done;){var p=c.value.id;u.add(p)}}catch(D){h.e(D)}finally{h.f()}}}catch(D){l.e(D)}finally{l.f()}for(var v=0,g=Object.values(n._fieldObjects);v<g.length;v++){var m,y=b(g[v]);try{for(y.s();!(m=y.n()).done;){var x=m.value;u.has(x.id)===i&&o.push(x)}}catch(D){y.e(D)}finally{y.f()}}}else for(var k=0,w=Object.values(n._fieldObjects);k<w.length;k++){var S=w[k];o.push.apply(o,d(S))}for(var _,C=n.annotationStorage,E=[],I=0,T=o;I<T.length;I++){var R=T[I],N=R.id;switch(E.push(N),R.type){case"text":var M=R.defaultValue||"";C.setValue(N,{value:M,valueAsString:M});break;case"checkbox":case"radiobutton":var O=R.defaultValue===R.exportValues;C.setValue(N,{value:O});break;case"combobox":case"listbox":var P=R.defaultValue||"";C.setValue(N,{value:P});break;default:continue}var F=document.getElementById(N);F&&A.has(F)&&F.dispatchEvent(new Event("resetform"))}return n.enableScripting&&(null===(_=n.linkService.eventBus)||void 0===_||_.dispatch("dispatcheventinsandbox",{source:n,detail:{id:"app",ids:E,name:"ResetForm"}})),!1}}}]),n}(T),N=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o})}return C(n,[{key:"render",value:function(){this.container.className="textAnnotation";var e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}]),n}(T),M=function(e){h(n,e);var t=v(n);function n(){return S(this,n),t.apply(this,arguments)}return C(n,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(e){var t=T.platform,n=t.isWin,r=t.isMac;return n&&e.ctrlKey||r&&e.metaKey}},{key:"_setEventListener",value:function(e,t,n,r){var a=this;t.includes("mouse")?e.addEventListener(t,(function(e){var t;null===(t=a.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:a,detail:{id:a.data.id,name:n,value:r(e),shift:e.shiftKey,modifier:a._getKeyModifier(e)}})})):e.addEventListener(t,(function(e){var t;null===(t=a.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:a,detail:{id:a.data.id,name:n,value:e.target.checked}})}))}},{key:"_setEventListeners",value:function(e,t,n){var r,a=b(t);try{for(a.s();!(r=a.n()).done;){var i,o=x(r.value,2),s=o[0],u=o[1];("Action"===u||null!==(i=this.data.actions)&&void 0!==i&&i[u])&&this._setEventListener(e,s,u,n)}}catch(l){a.e(l)}finally{a.f()}}},{key:"_setBackgroundColor",value:function(e){var t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":a.Util.makeHexColor(t[0],t[1],t[2])}},{key:"_dispatchEventFromSandbox",value:function(e,t){for(var n=this,r=function(e,t,n){var r=n.detail[e];n.target.style[t]=s.ColorConverters["".concat(r[0],"_HTML")](r.slice(1))},a={display:function(e){var t=e.detail.display%2===1;e.target.style.visibility=t?"hidden":"visible",n.annotationStorage.setValue(n.data.id,{hidden:t,print:0===e.detail.display||3===e.detail.display})},print:function(e){n.annotationStorage.setValue(n.data.id,{print:e.detail.print})},hidden:function(e){e.target.style.visibility=e.detail.hidden?"hidden":"visible",n.annotationStorage.setValue(n.data.id,{hidden:e.detail.hidden})},focus:function(e){setTimeout((function(){return e.target.focus({preventScroll:!1})}),0)},userName:function(e){e.target.title=e.detail.userName},readonly:function(e){e.detail.readonly?e.target.setAttribute("readonly",""):e.target.removeAttribute("readonly")},required:function(e){e.detail.required?e.target.setAttribute("required",""):e.target.removeAttribute("required")},bgColor:function(e){r("bgColor","backgroundColor",e)},fillColor:function(e){r("fillColor","backgroundColor",e)},fgColor:function(e){r("fgColor","color",e)},textColor:function(e){r("textColor","color",e)},borderColor:function(e){r("borderColor","borderColor",e)},strokeColor:function(e){r("strokeColor","borderColor",e)}},i=0,o=Object.keys(t.detail);i<o.length;i++){var u=o[i],l=e[u]||a[u];l&&l(t)}}}]),n}(T),O=function(e){h(n,e);var t=v(n);function n(e){S(this,n);var r=e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue;return t.call(this,e,{isRenderable:r})}return C(n,[{key:"setPropertyOnSiblings",value:function(e,t,n,r){var a,i=this.annotationStorage,o=b(this._getElementsByName(e.name,e.id));try{for(o.s();!(a=o.n()).done;){var s=a.value;s.domElement&&(s.domElement[t]=n),i.setValue(s.id,f({},r,n))}}catch(u){o.e(u)}finally{o.f()}}},{key:"render",value:function(){var e=this,t=this.annotationStorage,n=this.data.id;this.container.className="textWidgetAnnotation";var r=null;if(this.renderForms){var a=t.getValue(n,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),i=a.valueAsString||a.value||"",o={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(r=document.createElement("textarea")).textContent=i:((r=document.createElement("input")).type="text",r.setAttribute("value",i)),A.add(r),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=E,o.userValue=i,r.setAttribute("id",n),r.addEventListener("input",(function(a){t.setValue(n,{value:a.target.value}),e.setPropertyOnSiblings(r,"value",a.target.value,"value")})),r.addEventListener("resetform",(function(t){var n=e.data.defaultFieldValue||"";r.value=o.userValue=n,delete o.formattedValue}));var s=function(e){o.formattedValue&&(e.target.value=o.formattedValue),e.target.scrollLeft=0,o.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){var u;r.addEventListener("focus",(function(e){o.userValue&&(e.target.value=o.userValue)})),r.addEventListener("updatefromsandbox",(function(r){var a={value:function(e){o.userValue=e.detail.value||"",t.setValue(n,{value:o.userValue.toString()}),o.formattedValue||(e.target.value=o.userValue)},valueAsString:function(e){o.formattedValue=e.detail.valueAsString||"",e.target!==document.activeElement&&(e.target.value=o.formattedValue),t.setValue(n,{formattedValue:o.formattedValue})},selRange:function(e){var t=x(e.detail.selRange,2),n=t[0],r=t[1];n>=0&&r<e.target.value.length&&e.target.setSelectionRange(n,r)}};e._dispatchEventFromSandbox(a,r)})),r.addEventListener("keydown",(function(t){var r;o.beforeInputValue=t.target.value;var a=-1;"Escape"===t.key?a=0:"Enter"===t.key?a=2:"Tab"===t.key&&(a=3),-1!==a&&(o.userValue=t.target.value,null===(r=e.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:e,detail:{id:n,name:"Keystroke",value:t.target.value,willCommit:!0,commitKey:a,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));var l=s;s=null,r.addEventListener("blur",(function(t){var r;e._mouseState.isDown&&(o.userValue=t.target.value,null===(r=e.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:e,detail:{id:n,name:"Keystroke",value:t.target.value,willCommit:!0,commitKey:1,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})),l(t)})),r.addEventListener("mousedown",(function(e){o.beforeInputValue=e.target.value,o.beforeInputSelectionRange=null})),r.addEventListener("keyup",(function(e){e.target.selectionStart===e.target.selectionEnd&&(o.beforeInputSelectionRange=null)})),r.addEventListener("select",(function(e){o.beforeInputSelectionRange=[e.target.selectionStart,e.target.selectionEnd]})),null!==(u=this.data.actions)&&void 0!==u&&u.Keystroke&&r.addEventListener("input",(function(t){var r,a=-1,i=-1;if(o.beforeInputSelectionRange){var s=x(o.beforeInputSelectionRange,2);a=s[0],i=s[1]}null===(r=e.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:e,detail:{id:n,name:"Keystroke",value:o.beforeInputValue,change:t.data,willCommit:!1,selStart:a,selEnd:i}})})),this._setEventListeners(r,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(e){return e.target.value}))}if(s&&r.addEventListener("blur",s),null!==this.data.maxLen&&(r.maxLength=this.data.maxLen),this.data.comb){var c=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;r.classList.add("comb"),r.style.letterSpacing="calc(".concat(c,"px - 1ch)")}}else(r=document.createElement("div")).textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell";return this._setTextStyle(r),this._setBackgroundColor(r),this.container.appendChild(r),this.container}},{key:"_setTextStyle",value:function(e){var t=this.data.defaultAppearanceData,n=t.fontSize,r=t.fontColor,i=e.style;n&&(i.fontSize="".concat(n,"px")),i.color=a.Util.makeHexColor(r[0],r[1],r[2]),null!==this.data.textAlignment&&(i.textAlign=["left","center","right"][this.data.textAlignment])}}]),n}(M),P=function(e){h(n,e);var t=v(n);function n(e){return S(this,n),t.call(this,e,{isRenderable:e.renderForms})}return C(n,[{key:"render",value:function(){var e=this,t=this.annotationStorage,n=this.data,r=n.id,a=t.getValue(r,{value:n.exportValue===n.fieldValue}).value;"string"===typeof a&&(a="Off"!==a,t.setValue(r,{value:a})),this.container.className="buttonWidgetAnnotation checkBox";var i=document.createElement("input");return A.add(i),i.disabled=n.readOnly,i.type="checkbox",i.name=n.fieldName,a&&i.setAttribute("checked",!0),i.setAttribute("id",r),i.setAttribute("exportValue",n.exportValue),i.tabIndex=E,i.addEventListener("change",(function(a){var i,o=a.target,s=o.name,u=o.checked,l=b(e._getElementsByName(s,r));try{for(l.s();!(i=l.n()).done;){var c=i.value,f=u&&c.exportValue===n.exportValue;c.domElement&&(c.domElement.checked=f),t.setValue(c.id,{value:f})}}catch(d){l.e(d)}finally{l.f()}t.setValue(r,{value:u})})),i.addEventListener("resetform",(function(e){var t=n.defaultFieldValue||"Off";e.target.checked=t===n.exportValue})),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",(function(n){var a={value:function(e){e.target.checked="Off"!==e.detail.value,t.setValue(r,{value:e.target.checked})}};e._dispatchEventFromSandbox(a,n)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(e){return e.target.checked}))),this._setBackgroundColor(i),this.container.appendChild(i),this.container}}]),n}(M),F=function(e){h(n,e);var t=v(n);function n(e){return S(this,n),t.call(this,e,{isRenderable:e.renderForms})}return C(n,[{key:"render",value:function(){var e=this;this.container.className="buttonWidgetAnnotation radioButton";var t=this.annotationStorage,n=this.data,r=n.id,a=t.getValue(r,{value:n.fieldValue===n.buttonValue}).value;"string"===typeof a&&(a=a!==n.buttonValue,t.setValue(r,{value:a}));var i=document.createElement("input");if(A.add(i),i.disabled=n.readOnly,i.type="radio",i.name=n.fieldName,a&&i.setAttribute("checked",!0),i.setAttribute("id",r),i.tabIndex=E,i.addEventListener("change",(function(n){var a,i=n.target,o=i.name,s=i.checked,u=b(e._getElementsByName(o,r));try{for(u.s();!(a=u.n()).done;){var l=a.value;t.setValue(l.id,{value:!1})}}catch(c){u.e(c)}finally{u.f()}t.setValue(r,{value:s})})),i.addEventListener("resetform",(function(e){var t=n.defaultFieldValue;e.target.checked=null!==t&&void 0!==t&&t===n.buttonValue})),this.enableScripting&&this.hasJSActions){var o=n.buttonValue;i.addEventListener("updatefromsandbox",(function(n){var a={value:function(n){var a,i=o===n.detail.value,s=b(e._getElementsByName(n.target.name));try{for(s.s();!(a=s.n()).done;){var u=a.value,l=i&&u.id===r;u.domElement&&(u.domElement.checked=l),t.setValue(u.id,{value:l})}}catch(c){s.e(c)}finally{s.f()}}};e._dispatchEventFromSandbox(a,n)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(function(e){return e.target.checked}))}return this._setBackgroundColor(i),this.container.appendChild(i),this.container}}]),n}(M),D=function(e){h(n,e);var t=v(n);function n(e){return S(this,n),t.call(this,e,{ignoreBorder:e.data.hasAppearance})}return C(n,[{key:"render",value:function(){var e=c(y(n.prototype),"render",this).call(this);return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),e}}]),n}(R),L=function(e){h(n,e);var t=v(n);function n(e){return S(this,n),t.call(this,e,{isRenderable:e.renderForms})}return C(n,[{key:"render",value:function(){var e=this;this.container.className="choiceWidgetAnnotation";var t=this.annotationStorage,n=this.data.id;t.getValue(n,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});var r=this.data.defaultAppearanceData.fontSize;r||(r=9);var a="calc(".concat(r,"px * var(--zoom-factor))"),i=document.createElement("select");A.add(i),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.setAttribute("id",n),i.tabIndex=E,i.style.fontSize="".concat(r,"px"),this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",(function(t){var n,r=e.data.defaultFieldValue,a=b(i.options);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.selected=o.value===r}}catch(s){a.e(s)}finally{a.f()}}));var o,s=b(this.data.options);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=document.createElement("option");l.textContent=u.displayValue,l.value=u.exportValue,this.data.combo&&(l.style.fontSize=a),this.data.fieldValue.includes(u.exportValue)&&l.setAttribute("selected",!0),i.appendChild(l)}}catch(d){s.e(d)}finally{s.f()}var c=function(e,t){var n=t?"value":"textContent",r=e.target.options;return e.target.multiple?Array.prototype.filter.call(r,(function(e){return e.selected})).map((function(e){return e[n]})):-1===r.selectedIndex?null:r[r.selectedIndex][n]},f=function(e){var t=e.target.options;return Array.prototype.map.call(t,(function(e){return{displayValue:e.textContent,exportValue:e.value}}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",(function(r){var a={value:function(e){var r,a=e.detail.value,o=new Set(Array.isArray(a)?a:[a]),s=b(i.options);try{for(s.s();!(r=s.n()).done;){var u=r.value;u.selected=o.has(u.value)}}catch(d){s.e(d)}finally{s.f()}t.setValue(n,{value:c(e,!0)})},multipleSelection:function(e){i.multiple=!0},remove:function(e){var r=i.options,a=e.detail.remove;if(r[a].selected=!1,i.remove(a),r.length>0){var o=Array.prototype.findIndex.call(r,(function(e){return e.selected}));-1===o&&(r[0].selected=!0)}t.setValue(n,{value:c(e,!0),items:f(e)})},clear:function(e){for(;0!==i.length;)i.remove(0);t.setValue(n,{value:null,items:[]})},insert:function(e){var r=e.detail.insert,a=r.index,o=r.displayValue,s=r.exportValue,u=document.createElement("option");u.textContent=o,u.value=s,i.insertBefore(u,i.children[a]),t.setValue(n,{value:c(e,!0),items:f(e)})},items:function(e){for(var r=e.detail.items;0!==i.length;)i.remove(0);var a,o=b(r);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=s.displayValue,l=s.exportValue,h=document.createElement("option");h.textContent=u,h.value=l,i.appendChild(h)}}catch(d){o.e(d)}finally{o.f()}i.options.length>0&&(i.options[0].selected=!0),t.setValue(n,{value:c(e,!0),items:f(e)})},indices:function(e){var r,a=new Set(e.detail.indices),i=b(e.target.options);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.selected=a.has(o.index)}}catch(d){i.e(d)}finally{i.f()}t.setValue(n,{value:c(e,!0)})},editable:function(e){e.target.disabled=!e.detail.editable}};e._dispatchEventFromSandbox(a,r)})),i.addEventListener("input",(function(r){var a,i=c(r,!0),o=c(r,!1);t.setValue(n,{value:i}),null===(a=e.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:e,detail:{id:n,name:"Keystroke",value:o,changeEx:i,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(i,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(function(e){return e.target.checked}))):i.addEventListener("input",(function(e){t.setValue(n,{value:c(e)})})),this._setBackgroundColor(i),this.container.appendChild(i),this.container}}]),n}(M),z=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o})}return C(n,[{key:"render",value:function(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;var e='[data-annotation-id="'.concat(this.data.parentId,'"]'),t=this.layer.querySelectorAll(e);if(0===t.length)return this.container;var n=new j({container:this.container,trigger:Array.from(t),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),r=this.page,i=a.Util.normalizeRect([this.data.parentRect[0],r.view[3]-this.data.parentRect[1]+r.view[1],this.data.parentRect[2],r.view[3]-this.data.parentRect[3]+r.view[1]]),o=i[0]+this.data.parentRect[2]-this.data.parentRect[0],s=i[1];return this.container.style.transformOrigin="".concat(-o,"px ").concat(-s,"px"),this.container.style.left="".concat(o,"px"),this.container.style.top="".concat(s,"px"),this.container.appendChild(n.render()),this.container}}]),n}(T),j=function(){function e(t){S(this,e),this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}return C(e,[{key:"render",value:function(){var e,t,n=document.createElement("div");n.className="popupWrapper",this.hideElement=this.hideWrapper?n:this.container,this.hideElement.hidden=!0;var r=document.createElement("div");r.className="popup";var o=this.color;if(o){var s=.7*(255-o[0])+o[0],l=.7*(255-o[1])+o[1],c=.7*(255-o[2])+o[2];r.style.backgroundColor=a.Util.makeHexColor(0|s,0|l,0|c)}var f=document.createElement("h1");f.dir=this.titleObj.dir,f.textContent=this.titleObj.str,r.appendChild(f);var d=i.PDFDateString.toDateObject(this.modificationDate);if(d){var h=document.createElement("span");h.className="popupDate",h.textContent="{{date}}, {{time}}",h.dataset.l10nId="annotation_date_string",h.dataset.l10nArgs=JSON.stringify({date:d.toLocaleDateString(),time:d.toLocaleTimeString()}),r.appendChild(h)}if(null===(e=this.richText)||void 0===e||!e.str||null!==(t=this.contentsObj)&&void 0!==t&&t.str&&this.contentsObj.str!==this.richText.str){var p=this._formatContents(this.contentsObj);r.appendChild(p)}else u.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:r}),r.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var v,g=b(this.trigger);try{for(g.s();!(v=g.n()).done;){var m=v.value;m.addEventListener("click",this._toggle.bind(this)),m.addEventListener("mouseover",this._show.bind(this,!1)),m.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(y){g.e(y)}finally{g.f()}return r.addEventListener("click",this._hide.bind(this,!0)),n.appendChild(r),n}},{key:"_formatContents",value:function(e){var t=e.str,n=e.dir,r=document.createElement("p");r.className="popupContent",r.dir=n;for(var a=t.split(/(?:\r\n?|\n)/),i=0,o=a.length;i<o;++i){var s=a[i];r.appendChild(document.createTextNode(s)),i<o-1&&r.appendChild(document.createElement("br"))}return r}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}]),e}(),B=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0})}return C(n,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),n}(T),W=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0})}return C(n,[{key:"render",value:function(){this.container.className="lineAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.appendChild(a),this.container.append(r),this._createPopup(a,e),this.container}}]),n}(T),U=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0})}return C(n,[{key:"render",value:function(){this.container.className="squareAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=e.borderStyle.width,i=this.svgFactory.createElement("svg:rect");return i.setAttribute("x",a/2),i.setAttribute("y",a/2),i.setAttribute("width",t-a),i.setAttribute("height",n-a),i.setAttribute("stroke-width",a||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.appendChild(i),this.container.append(r),this._createPopup(i,e),this.container}}]),n}(T),V=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0})}return C(n,[{key:"render",value:function(){this.container.className="circleAnnotation";var e=this.data,t=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],r=this.svgFactory.create(t,n),a=e.borderStyle.width,i=this.svgFactory.createElement("svg:ellipse");return i.setAttribute("cx",t/2),i.setAttribute("cy",n/2),i.setAttribute("rx",t/2-a/2),i.setAttribute("ry",n/2-a/2),i.setAttribute("stroke-width",a||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.appendChild(i),this.container.append(r),this._createPopup(i,e),this.container}}]),n}(T),H=function(e){h(n,e);var t=v(n);function n(e){var r,a,i,o;S(this,n);var s=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return(o=t.call(this,e,{isRenderable:s,ignoreBorder:!0})).containerClassName="polylineAnnotation",o.svgElementName="svg:polyline",o}return C(n,[{key:"render",value:function(){this.container.className=this.containerClassName;var e,t=this.data,n=t.rect[2]-t.rect[0],r=t.rect[3]-t.rect[1],a=this.svgFactory.create(n,r),i=[],o=b(t.vertices);try{for(o.s();!(e=o.n()).done;){var s=e.value,u=s.x-t.rect[0],l=t.rect[3]-s.y;i.push(u+","+l)}}catch(f){o.e(f)}finally{o.f()}i=i.join(" ");var c=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",i),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.appendChild(c),this.container.append(a),this._createPopup(c,t),this.container}}]),n}(T),G=function(e){h(n,e);var t=v(n);function n(e){var r;return S(this,n),(r=t.call(this,e)).containerClassName="polygonAnnotation",r.svgElementName="svg:polygon",r}return n}(H),q=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0})}return C(n,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),n}(T),X=function(e){h(n,e);var t=v(n);function n(e){var r,a,i,o;S(this,n);var s=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return(o=t.call(this,e,{isRenderable:s,ignoreBorder:!0})).containerClassName="inkAnnotation",o.svgElementName="svg:polyline",o}return C(n,[{key:"render",value:function(){this.container.className=this.containerClassName;var e,t=this.data,n=t.rect[2]-t.rect[0],r=t.rect[3]-t.rect[1],a=this.svgFactory.create(n,r),i=b(t.inkLists);try{for(i.s();!(e=i.n()).done;){var o,s=e.value,u=[],l=b(s);try{for(l.s();!(o=l.n()).done;){var c=o.value,f=c.x-t.rect[0],d=t.rect[3]-c.y;u.push("".concat(f,",").concat(d))}}catch(p){l.e(p)}finally{l.f()}u=u.join(" ");var h=this.svgFactory.createElement(this.svgElementName);h.setAttribute("points",u),h.setAttribute("stroke-width",t.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),this._createPopup(h,t),a.appendChild(h)}}catch(p){i.e(p)}finally{i.f()}return this.container.append(a),this.container}}]),n}(T),Y=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return C(n,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),n}(T),K=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return C(n,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),n}(T),$=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return C(n,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),n}(T),Z=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}return C(n,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),n}(T),Q=function(e){h(n,e);var t=v(n);function n(e){var r,a,i;S(this,n);var o=!!(e.data.hasPopup||null!==(r=e.data.titleObj)&&void 0!==r&&r.str||null!==(a=e.data.contentsObj)&&void 0!==a&&a.str||null!==(i=e.data.richText)&&void 0!==i&&i.str);return t.call(this,e,{isRenderable:o,ignoreBorder:!0})}return C(n,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),n}(T),J=function(e){h(n,e);var t=v(n);function n(e){var r,o;S(this,n);var s=(o=t.call(this,e,{isRenderable:!0})).data.file,u=s.filename,l=s.content;return o.filename=(0,i.getFilenameFromUrl)(u),o.content=l,null===(r=o.linkService.eventBus)||void 0===r||r.dispatch("fileattachmentannotation",{source:m(o),id:(0,a.stringToPDFString)(u),filename:u,content:l}),o}return C(n,[{key:"render",value:function(){var e,t;this.container.className="fileAttachmentAnnotation";var n=document.createElement("div");return n.style.height=this.container.style.height,n.style.width=this.container.style.width,n.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(null!==(e=this.data.titleObj)&&void 0!==e&&e.str||null!==(t=this.data.contentsObj)&&void 0!==t&&t.str||this.data.richText)&&this._createPopup(n,this.data),this.container.appendChild(n),this.container}},{key:"_download",value:function(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.container,this.content,this.filename)}}]),n}(T),ee=function(){function e(){S(this,e)}return C(e,null,[{key:"render",value:function(t){var n,r=[],s=[],u=b(t.annotations);try{for(u.s();!(n=u.n()).done;){var c=n.value;c&&(c.annotationType!==a.AnnotationType.POPUP?r.push(c):s.push(c))}}catch(k){u.e(k)}finally{u.f()}s.length&&r.push.apply(r,s);for(var f=t.div,d=0,h=r;d<h.length;d++){var p=h[d],v=I.create({data:p,layer:f,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new i.DOMSVGFactory,annotationStorage:t.annotationStorage||new o.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(v.isRenderable){var g=v.render();if(p.hidden&&(g.style.visibility="hidden"),Array.isArray(g)){var m,y=b(g);try{for(y.s();!(m=y.n()).done;){var x=m.value;f.appendChild(x)}}catch(k){y.e(k)}finally{y.f()}}else v instanceof z?f.prepend(g):f.appendChild(g)}}l(this,e,te).call(this,f,t.annotationCanvasMap)}},{key:"update",value:function(t){var n,r,i,o=t.page,s=t.viewport,u=t.annotations,c=t.annotationCanvasMap,f=t.div,d=s.transform,h="matrix(".concat(d.join(","),")"),p=b(u);try{for(p.s();!(i=p.n()).done;){var v=i.value,g=f.querySelectorAll('[data-annotation-id="'.concat(v.id,'"]'));if(g){var m,y=b(g);try{for(y.s();!(m=y.n()).done;){var x=m.value;if(v.hasOwnCanvas){var k=a.Util.normalizeRect([v.rect[0],o.view[3]-v.rect[1]+o.view[1],v.rect[2],o.view[3]-v.rect[3]+o.view[1]]);if(!r){n=Math.abs(d[0]||d[1]);for(var w=d.slice(),S=0;S<4;S++)w[S]=Math.sign(w[S]);r="matrix(".concat(w.join(","),")")}var _=k[0]*n,C=k[1]*n;x.style.left="".concat(_,"px"),x.style.top="".concat(C,"px"),x.style.transformOrigin="".concat(-_,"px ").concat(-C,"px"),x.style.transform=r}else x.style.transform=h}}catch(E){y.e(E)}finally{y.f()}}}}catch(E){p.e(E)}finally{p.f()}l(this,e,te).call(this,f,c),f.hidden=!1}}]),e}();function te(e,t){if(t){var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var a=x(n.value,2),i=a[0],o=a[1],s=e.querySelector('[data-annotation-id="'.concat(i,'"]'));if(s){var u=s.firstChild;"CANVAS"===u.nodeName?s.replaceChild(o,u):s.insertBefore(o,u)}}}catch(l){r.e(l)}finally{r.f()}t.clear()}}t.AnnotationLayer=ee},function(e,t){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"CMYK_G",value:function(e){var t=n(e,4),r=t[0],a=t[1],i=t[2],o=t[3];return["G",1-Math.min(1,.3*r+.59*i+.11*a+o)]}},{key:"G_CMYK",value:function(e){return["CMYK",0,0,0,1-n(e,1)[0]]}},{key:"G_RGB",value:function(e){var t=n(e,1)[0];return["RGB",t,t,t]}},{key:"G_HTML",value:function(e){var t=i(n(e,1)[0]);return"#".concat(t).concat(t).concat(t)}},{key:"RGB_G",value:function(e){var t=n(e,3);return["G",.3*t[0]+.59*t[1]+.11*t[2]]}},{key:"RGB_HTML",value:function(e){var t=n(e,3),r=t[0],a=t[1],o=t[2],s=i(r),u=i(a),l=i(o);return"#".concat(s).concat(u).concat(l)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(e){var t=n(e,4),r=t[0],a=t[1],i=t[2],o=t[3];return["RGB",1-Math.min(1,r+o),1-Math.min(1,i+o),1-Math.min(1,a+o)]}},{key:"CMYK_HTML",value:function(e){return this.RGB_HTML(this.CMYK_RGB(e))}},{key:"RGB_CMYK",value:function(e){var t=n(e,3),r=1-t[0],a=1-t[1],i=1-t[2];return["CMYK",r,a,i,Math.min(r,a,i)]}}],(r=null)&&a(t.prototype,r),o&&a(t,o),e}();t.ColorConverters=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var r=n(4),a=n(147);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"setupStorage",value:function(e,t,n,r,a){var i=r.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==i.value&&(e.textContent=i.value),"print"===a)break;e.addEventListener("input",(function(e){r.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(i.value===n.attributes.xfaOn?e.setAttribute("checked",!0):i.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===a)break;e.addEventListener("change",(function(e){r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==i.value&&e.setAttribute("value",i.value),"print"===a)break;e.addEventListener("input",(function(e){r.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==i.value){var s,u=o(n.children);try{for(u.s();!(s=u.n()).done;){var l=s.value;l.attributes.value===i.value&&(l.attributes.selected=!0)}}catch(c){u.e(c)}finally{u.f()}}e.addEventListener("input",(function(e){var n=e.target.options,a=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(t,{value:a})}))}}},{key:"setAttributes",value:function(e){var t,n=e.html,a=e.element,o=e.storage,s=void 0===o?null:o,u=e.intent,l=e.linkService,c=a.attributes,f=n instanceof HTMLAnchorElement;"radio"===c.type&&(c.name="".concat(c.name,"-").concat(u));for(var d=0,h=Object.entries(c);d<h.length;d++){var p=i(h[d],2),v=p[0],g=p[1];if(null!==g&&void 0!==g&&"dataId"!==v)if("style"!==v)if("textContent"===v)n.textContent=g;else if("class"===v)g.length&&n.setAttribute(v,g.join(" "));else{if(f&&("href"===v||"newWindow"===v))continue;n.setAttribute(v,g)}else Object.assign(n.style,g)}f&&(l.addLinkAttributes||(0,r.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),null===(t=l.addLinkAttributes)||void 0===t||t.call(l,n,c.href,c.newWindow)),s&&c.dataId&&this.setupStorage(n,c.dataId,a,s)}},{key:"render",value:function(e){var t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,s=e.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:s,linkService:n});var l=[[r,-1,u]],c=e.div;if(c.appendChild(u),e.viewport){var f="matrix(".concat(e.viewport.transform.join(","),")");c.style.transform=f}"richText"!==s&&c.setAttribute("class","xfaLayer xfaFont");for(var d=[];l.length>0;){var h,p=i(l[l.length-1],3),v=p[0],g=p[1],m=p[2];if(g+1!==v.children.length){var y=v.children[++l[l.length-1][1]];if(null!==y){var b=y.name;if("#text"!==b){var x=void 0;if(x=null!==y&&void 0!==y&&null!==(h=y.attributes)&&void 0!==h&&h.xmlns?document.createElementNS(y.attributes.xmlns,b):document.createElement(b),m.appendChild(x),y.attributes&&this.setAttributes({html:x,element:y,storage:t,intent:s,linkService:n}),y.children&&y.children.length>0)l.push([y,-1,x]);else if(y.value){var k=document.createTextNode(y.value);a.XfaText.shouldBuildText(b)&&d.push(k),x.appendChild(k)}}else{var w=document.createTextNode(y.value);d.push(w),m.appendChild(w)}}}else l.pop()}var S,_=o(c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"));try{for(_.s();!(S=_.n()).done;)S.value.setAttribute("readOnly",!0)}catch(C){_.e(C)}finally{_.f()}return{textDivs:d}}},{key:"update",value:function(e){var t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}],(n=null)&&l(t.prototype,n),s&&l(t,s),e}();t.XfaLayer=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=function(e){var t=new v({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});return t._render(e.timeout),t};var r=n(4);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=30,u=new Map,l=/^\s+$/g;function c(e,t,n,a){var i=document.createElement("span"),o=e._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL};e._textDivs.push(i);var c=r.Util.transform(e._viewport.transform,t.transform),f=Math.atan2(c[1],c[0]),d=n[t.fontName];d.vertical&&(f+=Math.PI/2);var h,p,v=Math.hypot(c[2],c[3]),g=v*function(e,t){var n=u.get(e);if(n)return n;t.save(),t.font="".concat(s,"px ").concat(e);var r=t.measureText(""),a=r.fontBoundingBoxAscent,i=Math.abs(r.fontBoundingBoxDescent);if(a){t.restore();var o=a/(a+i);return u.set(e,o),o}t.strokeStyle="red",t.clearRect(0,0,s,s),t.strokeText("g",0,0);var l=t.getImageData(0,0,s,s).data;i=0;for(var c=l.length-1-3;c>=0;c-=4)if(l[c]>0){i=Math.ceil(c/4/s);break}t.clearRect(0,0,s,s),t.strokeText("A",0,s),a=0;for(var f=0,d=(l=t.getImageData(0,0,s,s).data).length;f<d;f+=4)if(l[f]>0){a=s-Math.floor(f/4/s);break}if(t.restore(),a){var h=a/(a+i);return u.set(e,h),h}return u.set(e,.8),.8}(d.fontFamily,a);0===f?(h=c[4],p=c[5]-g):(h=c[4]+g*Math.sin(f),p=c[5]-g*Math.cos(f)),i.style.left="".concat(h,"px"),i.style.top="".concat(p,"px"),i.style.fontSize="".concat(v,"px"),i.style.fontFamily=d.fontFamily,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,e._fontInspectorEnabled&&(i.dataset.fontName=t.fontName),0!==f&&(o.angle=f*(180/Math.PI));var m=!1;if(t.str.length>1||e._enhanceTextSelection&&l.test(t.str))m=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){var y=Math.abs(t.transform[0]),b=Math.abs(t.transform[3]);y!==b&&Math.max(y,b)/Math.min(y,b)>1.5&&(m=!0)}if(m&&(d.vertical?o.canvasWidth=t.height*e._viewport.scale:o.canvasWidth=t.width*e._viewport.scale),e._textDivProperties.set(i,o),e._textContentStream&&e._layoutText(i),e._enhanceTextSelection&&o.hasText){var x=1,k=0;0!==f&&(x=Math.cos(f),k=Math.sin(f));var w,S,_=(d.vertical?t.height:t.width)*e._viewport.scale,C=v;0!==f?(w=[x,k,-k,x,h,p],S=r.Util.getAxialAlignedBoundingBox([0,0,_,C],w)):S=[h,p,h+_,p+C],e._bounds.push({left:S[0],top:S[1],right:S[2],bottom:S[3],div:i,size:[_,C],m:w})}}function f(e){if(!e._canceled){var t=e._textDivs,n=e._capability,r=t.length;if(r>1e5)return e._renderingDone=!0,void n.resolve();if(!e._textContentStream)for(var a=0;a<r;a++)e._layoutText(t[a]);e._renderingDone=!0,n.resolve()}}function d(e,t,n){for(var r=0,a=0;a<n;a++){var i=e[t++];i>0&&(r=r?Math.min(i,r):i)}return r}function h(e){for(var t=e._bounds,n=e._viewport,a=function(e,t,n){var r=n.map((function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}}));p(e,r);var a,o=new Array(n.length),s=i(r);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u.index;o[l]={left:u.x1New,top:0,right:u.x2New,bottom:0}}}catch(v){s.e(v)}finally{s.f()}n.map((function(t,n){var a=o[n],i=r[n];i.x1=t.top,i.y1=e-a.right,i.x2=t.bottom,i.y2=e-a.left,i.index=n,i.x1New=void 0,i.x2New=void 0})),p(t,r);var c,f=i(r);try{for(f.s();!(c=f.n()).done;){var d=c.value,h=d.index;o[h].top=d.x1New,o[h].bottom=d.x2New}}catch(v){f.e(v)}finally{f.f()}return o}(n.width,n.height,t),o=0;o<a.length;o++){var s=t[o].div,u=e._textDivProperties.get(s);if(0!==u.angle){for(var l=a[o],c=t[o],f=c.m,h=f[0],v=f[1],g=[[0,0],[0,c.size[1]],[c.size[0],0],c.size],m=new Float64Array(64),y=0,b=g.length;y<b;y++){var x=r.Util.applyTransform(g[y],f);m[y+0]=h&&(l.left-x[0])/h,m[y+4]=v&&(l.top-x[1])/v,m[y+8]=h&&(l.right-x[0])/h,m[y+12]=v&&(l.bottom-x[1])/v,m[y+16]=v&&(l.left-x[0])/-v,m[y+20]=h&&(l.top-x[1])/h,m[y+24]=v&&(l.right-x[0])/-v,m[y+28]=h&&(l.bottom-x[1])/h,m[y+32]=h&&(l.left-x[0])/-h,m[y+36]=v&&(l.top-x[1])/-v,m[y+40]=h&&(l.right-x[0])/-h,m[y+44]=v&&(l.bottom-x[1])/-v,m[y+48]=v&&(l.left-x[0])/v,m[y+52]=h&&(l.top-x[1])/-h,m[y+56]=v&&(l.right-x[0])/v,m[y+60]=h&&(l.bottom-x[1])/-h}var k=1+Math.min(Math.abs(h),Math.abs(v));u.paddingLeft=d(m,32,16)/k,u.paddingTop=d(m,48,16)/k,u.paddingRight=d(m,0,16)/k,u.paddingBottom=d(m,16,16)/k,e._textDivProperties.set(s,u)}else u.paddingLeft=t[o].left-a[o].left,u.paddingTop=t[o].top-a[o].top,u.paddingRight=a[o].right-t[o].right,u.paddingBottom=a[o].bottom-t[o].bottom,e._textDivProperties.set(s,u)}}function p(e,t){t.sort((function(e,t){return e.x1-t.x1||e.index-t.index}));var n,r=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}],a=i(t);try{for(a.s();!(n=a.n()).done;){for(var o=n.value,s=0;s<r.length&&r[s].end<=o.y1;)s++;for(var u=r.length-1;u>=0&&r[u].start>=o.y2;)u--;var l=void 0,c=void 0,f=void 0,d=void 0,h=-1/0;for(f=s;f<=u;f++){c=(l=r[f]).boundary;var p=void 0;(p=c.x2>o.x1?c.index>o.index?c.x1New:o.x1:void 0===c.x2New?(c.x2+o.x1)/2:c.x2New)>h&&(h=p)}for(o.x1New=h,f=s;f<=u;f++)void 0===(c=(l=r[f]).boundary).x2New?c.x2>o.x1?c.index>o.index&&(c.x2New=c.x2):c.x2New=h:c.x2New>h&&(c.x2New=Math.max(h,c.x2));var v=[],g=null;for(f=s;f<=u;f++){var m=(c=(l=r[f]).boundary).x2>o.x2?c:o;g===m?v[v.length-1].end=l.end:(v.push({start:l.start,end:l.end,boundary:m}),g=m)}for(r[s].start<o.y1&&(v[0].start=o.y1,v.unshift({start:r[s].start,end:o.y1,boundary:r[s].boundary})),o.y2<r[u].end&&(v[v.length-1].end=o.y2,v.push({start:o.y2,end:r[u].end,boundary:r[u].boundary})),f=s;f<=u;f++)if(void 0===(c=(l=r[f]).boundary).x2New){var y=!1;for(d=s-1;!y&&d>=0&&r[d].start>=c.y1;d--)y=r[d].boundary===c;for(d=u+1;!y&&d<r.length&&r[d].end<=c.y2;d++)y=r[d].boundary===c;for(d=0;!y&&d<v.length;d++)y=v[d].boundary===c;y||(c.x2New=h)}Array.prototype.splice.apply(r,[s,u-s+1].concat(v))}}catch(w){a.e(w)}finally{a.f()}for(var b=0,x=r;b<x.length;b++){var k=x[b].boundary;void 0===k.x2New&&(k.x2New=Math.max(e,k.x2))}}var v=function(){function e(t){var n,a=this,i=t.textContent,o=t.textContentStream,s=t.container,u=t.viewport,l=t.textDivs,c=t.textContentItemsStr,f=t.enhanceTextSelection;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._textContent=i,this._textContentStream=o,this._container=s,this._document=s.ownerDocument,this._viewport=u,this._textDivs=l||[],this._textContentItemsStr=c||[],this._enhanceTextSelection=!!f,this._fontInspectorEnabled=!(null===(n=globalThis.FontInspector)||void 0===n||!n.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,r.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((function(){a._enhanceTextSelection||(a._textDivProperties=null),a._layoutTextCtx&&(a._layoutTextCtx.canvas.width=0,a._layoutTextCtx.canvas.height=0,a._layoutTextCtx=null)})).catch((function(){}))}var t,n,i;return t=e,n=[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch((function(){})),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function(e,t){for(var n=0,r=e.length;n<r;n++)if(void 0!==e[n].str)this._textContentItemsStr.push(e[n].str),c(this,e[n],t,this._layoutTextCtx);else if("beginMarkedContentProps"===e[n].type||"beginMarkedContent"===e[n].type){var a=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==e[n].id&&this._container.setAttribute("id","".concat(e[n].id)),a.appendChild(this._container)}else"endMarkedContent"===e[n].type&&(this._container=this._container.parentNode)}},{key:"_layoutText",value:function(e){var t=this._textDivProperties.get(e),n="";if(0!==t.canvasWidth&&t.hasText){var r=e.style,a=r.fontSize,i=r.fontFamily;a===this._layoutTextLastFontSize&&i===this._layoutTextLastFontFamily||(this._layoutTextCtx.font="".concat(a," ").concat(i),this._layoutTextLastFontSize=a,this._layoutTextLastFontFamily=i);var o=this._layoutTextCtx.measureText(e.textContent).width;if(o>0){var s=t.canvasWidth/o;this._enhanceTextSelection&&(t.scale=s),n="scaleX(".concat(s,")")}}if(0!==t.angle&&(n="rotate(".concat(t.angle,"deg) ").concat(n)),n.length>0&&(this._enhanceTextSelection&&(t.originalTransform=n),e.style.transform=n),t.hasText&&this._container.appendChild(e),t.hasEOL){var u=document.createElement("br");u.setAttribute("role","presentation"),this._container.appendChild(u)}}},{key:"_render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,r.createPromiseCapability)(),a=Object.create(null),i=this._document.createElement("canvas");if(i.height=i.width=s,i.mozOpaque=!0,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent){var o=this._textContent.items,u=this._textContent.styles;this._processItems(o,u),n.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');var l=function t(){e._reader.read().then((function(r){var i=r.value;r.done?n.resolve():(Object.assign(a,i.styles),e._processItems(i.items,a),t())}),n.reject)};this._reader=this._textContentStream.getReader(),l()}n.promise.then((function(){a=null,t?e._renderTimer=setTimeout((function(){f(e),e._renderTimer=null}),t):f(e)}),this._capability.reject)}},{key:"expandTextDivs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._enhanceTextSelection&&this._renderingDone){null!==this._bounds&&(h(this),this._bounds=null);for(var t=[],n=[],r=0,a=this._textDivs.length;r<a;r++){var i=this._textDivs[r],o=this._textDivProperties.get(i);o.hasText&&(e?(t.length=0,n.length=0,o.originalTransform&&t.push(o.originalTransform),o.paddingTop>0?(n.push("".concat(o.paddingTop,"px")),t.push("translateY(".concat(-o.paddingTop,"px)"))):n.push(0),o.paddingRight>0?n.push("".concat(o.paddingRight/o.scale,"px")):n.push(0),o.paddingBottom>0?n.push("".concat(o.paddingBottom,"px")):n.push(0),o.paddingLeft>0?(n.push("".concat(o.paddingLeft/o.scale,"px")),t.push("translateX(".concat(-o.paddingLeft/o.scale,"px)"))):n.push(0),i.style.padding=n.join(" "),t.length&&(i.style.transform=t.join(" "))):(i.style.padding=null,i.style.transform=o.originalTransform))}}}}],n&&a(t.prototype,n),i&&a(t,i),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=n(4),a=n(1),i=n(6);function o(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function l(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function e(){h(this,e),(0,r.unreachable)("Not implemented: SVGGraphics")};t.SVGGraphics=p;var v=function(e){if(Number.isInteger(e))return e.toString();var t=e.toFixed(10),n=t.length-1;if("0"!==t[n])return t;do{n--}while("0"===t[n]);return t.substring(0,"."===t[n]?n:n+1)},g=function(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":"scale(".concat(v(e[0])," ").concat(v(e[3]),")");if(e[0]===e[3]&&e[1]===-e[2]){var t=180*Math.acos(e[0])/Math.PI;return"rotate(".concat(v(t),")")}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return"translate(".concat(v(e[4])," ").concat(v(e[5]),")");return"matrix(".concat(v(e[0])," ").concat(v(e[1])," ").concat(v(e[2])," ").concat(v(e[3])," ").concat(v(e[4])," ")+"".concat(v(e[5]),")")},m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},y=["butt","round","square"],b=["miter","round","bevel"],x=function(){for(var e=new Uint8Array([137,80,78,71,13,10,26,10]),t=new Int32Array(256),n=0;n<256;n++){for(var a=n,o=0;o<8;o++)a=1&a?3988292384^a>>1&2147483647:a>>1&2147483647;t[n]=a}function s(e,n,r,a){var i=a,o=n.length;r[i]=o>>24&255,r[i+1]=o>>16&255,r[i+2]=o>>8&255,r[i+3]=255&o,r[i+=4]=255&e.charCodeAt(0),r[i+1]=255&e.charCodeAt(1),r[i+2]=255&e.charCodeAt(2),r[i+3]=255&e.charCodeAt(3),i+=4,r.set(n,i);var s=function(e,n,r){for(var a=-1,i=n;i<r;i++){var o=255&(a^e[i]);a=a>>>8^t[o]}return-1^a}(r,a+4,i+=n.length);r[i]=s>>24&255,r[i+1]=s>>16&255,r[i+2]=s>>8&255,r[i+3]=255&s}function u(e){var t=e.length,n=65535,r=Math.ceil(t/n),a=new Uint8Array(2+t+5*r+4),i=0;a[i++]=120,a[i++]=156;for(var o=0;t>n;)a[i++]=0,a[i++]=255,a[i++]=255,a[i++]=0,a[i++]=0,a.set(e.subarray(o,o+n),i),i+=n,o+=n,t-=n;a[i++]=1,a[i++]=255&t,a[i++]=t>>8&255,a[i++]=255&~t,a[i++]=(65535&~t)>>8&255,a.set(e.subarray(o),i),i+=e.length-o;var s=function(e,t,n){for(var r=1,a=0,i=t;i<n;++i)a=(a+(r=(r+(255&e[i]))%65521))%65521;return a<<16|r}(e,0,e.length);return a[i++]=s>>24&255,a[i++]=s>>16&255,a[i++]=s>>8&255,a[i++]=255&s,a}function l(t,n,a,o){var l,c,f,d=t.width,h=t.height,p=t.data;switch(n){case r.ImageKind.GRAYSCALE_1BPP:c=0,l=1,f=d+7>>3;break;case r.ImageKind.RGB_24BPP:c=2,l=8,f=3*d;break;case r.ImageKind.RGBA_32BPP:c=6,l=8,f=4*d;break;default:throw new Error("invalid format")}for(var v=new Uint8Array((1+f)*h),g=0,m=0,y=0;y<h;++y)v[g++]=0,v.set(p.subarray(m,m+f),g),m+=f,g+=f;if(n===r.ImageKind.GRAYSCALE_1BPP&&o){g=0;for(var b=0;b<h;b++){g++;for(var x=0;x<f;x++)v[g++]^=255}}var k=new Uint8Array([d>>24&255,d>>16&255,d>>8&255,255&d,h>>24&255,h>>16&255,h>>8&255,255&h,l,c,0,0,0]),w=function(e){if(!i.isNodeJS)return u(e);try{var t;t=parseInt(process.versions.node)>=8?e:Buffer.from(e);var n=__webpack_require__(324).deflateSync(t,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(a){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+a)}return u(e)}(v),S=e.length+36+k.length+w.length,_=new Uint8Array(S),C=0;return _.set(e,C),s("IHDR",k,_,C+=e.length),s("IDATA",w,_,C+=12+k.length),C+=12+w.length,s("IEND",new Uint8Array(0),_,C),(0,r.createObjectURL)(_,"image/png",a)}return function(e,t,n){return l(e,void 0===e.kind?r.ImageKind.GRAYSCALE_1BPP:e.kind,t,n)}}(),k=function(){function e(){h(this,e),this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return d(e,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function(e,t){this.x=e,this.y=t}}]),e}(),w=0,S=0,_=0;t.SVGGraphics=p=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var o in h(this,e),this.svgFactory=new a.DOMSVGFactory,this.current=new k,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=n,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[],r.OPS)this._operatorIdMapping[r.OPS[o]]=o}return d(e,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var e=this.current;this.extraStack.push(e),this.current=e.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function(e){this.save(),this.executeOpTree(e),this.restore()}},{key:"loadDependencies",value:function(e){for(var t=this,n=e.fnArray,a=e.argsArray,i=0,o=n.length;i<o;i++)if(n[i]===r.OPS.dependency){var s,l=u(a[i]);try{var c=function(){var e=s.value,n=e.startsWith("g_")?t.commonObjs:t.objs,r=new Promise((function(t){n.get(e,t)}));t.current.dependencies.push(r)};for(l.s();!(s=l.n()).done;)c()}catch(f){l.e(f)}finally{l.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function(e,t,n,a,i,o){var s=[e,t,n,a,i,o];this.transformMatrix=r.Util.transform(this.transformMatrix,s),this.tgrp=null}},{key:"getSVG",value:function(e,t){var n=this;this.viewport=t;var a=this._initialize(t);return this.loadDependencies(e).then((function(){return n.transformMatrix=r.IDENTITY_MATRIX,n.executeOpTree(n.convertOpList(e)),a}))}},{key:"convertOpList",value:function(e){for(var t=this._operatorIdMapping,n=e.argsArray,r=e.fnArray,a=[],i=0,o=r.length;i<o;i++){var s=r[i];a.push({fnId:s,fn:t[s],args:n[i]})}return function(e){var t,n=[],r=[],a=u(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;"save"!==i.fn?"restore"===i.fn?n=r.pop():n.push(i):(n.push({fnId:92,fn:"group",items:[]}),r.push(n),n=n[n.length-1].items)}}catch(o){a.e(o)}finally{a.f()}return n}(a)}},{key:"executeOpTree",value:function(e){var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,i=a.fn,o=a.fnId,s=a.args;switch(0|o){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(s);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(s[0],s[1]);break;case r.OPS.setFont:this.setFont(s);break;case r.OPS.showText:case r.OPS.showSpacedText:this.showText(s[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(s[0],s[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(s[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(s[0]);break;case r.OPS.setHScale:this.setHScale(s[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(s[0],s[1],s[2],s[3],s[4],s[5]);break;case r.OPS.setTextRise:this.setTextRise(s[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(s[0]);break;case r.OPS.setLineWidth:this.setLineWidth(s[0]);break;case r.OPS.setLineJoin:this.setLineJoin(s[0]);break;case r.OPS.setLineCap:this.setLineCap(s[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(s[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(s[0],s[1],s[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(s[0],s[1],s[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(s);break;case r.OPS.setFillColorN:this.setFillColorN(s);break;case r.OPS.shadingFill:this.shadingFill(s[0]);break;case r.OPS.setDash:this.setDash(s[0],s[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(s[0]);break;case r.OPS.setFlatness:this.setFlatness(s[0]);break;case r.OPS.setGState:this.setGState(s[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(s[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(s[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(s[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(s[0],s[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(s[0],s[1],s[2],s[3],s[4],s[5]);break;case r.OPS.constructPath:this.constructPath(s[0],s[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,r.warn)("Unimplemented operator ".concat(i))}}}catch(l){n.e(l)}finally{n.f()}}},{key:"setWordSpacing",value:function(e){this.current.wordSpacing=e}},{key:"setCharSpacing",value:function(e){this.current.charSpacing=e}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function(e,t,n,r,a,i){var o=this.current;o.textMatrix=o.lineMatrix=[e,t,n,r,a,i],o.textMatrixScale=Math.hypot(e,t),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size","".concat(v(o.fontSize),"px")),o.tspan.setAttributeNS(null,"y",v(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.appendChild(o.tspan)}},{key:"beginText",value:function(){var e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=r.IDENTITY_MATRIX,e.lineMatrix=r.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}},{key:"moveText",value:function(e,t){var n=this.current;n.x=n.lineX+=e,n.y=n.lineY+=t,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size","".concat(v(n.fontSize),"px")),n.tspan.setAttributeNS(null,"y",v(-n.y))}},{key:"showText",value:function(e){var t=this.current,n=t.font,a=t.fontSize;if(0!==a){var i,o=t.fontSizeScale,s=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,f=t.textHScale*c,d=n.vertical,h=d?1:-1,p=n.defaultVMetrics,y=a*t.fontMatrix[0],b=0,x=u(e);try{for(x.s();!(i=x.n()).done;){var k=i.value;if(null!==k)if((0,r.isNum)(k))b+=h*k*a/1e3;else{var w=(k.isSpace?l:0)+s,S=k.fontChar,_=void 0,C=void 0,E=k.width;if(d){var A=void 0,I=k.vmetric||p;A=-(A=k.vmetric?I[1]:.5*E)*y;var T=I[2]*y;E=I?-I[0]:E,_=A/o,C=(b+T)/o}else _=b/o,C=0;(k.isInFont||n.missingFile)&&(t.xcoords.push(t.x+_),d&&t.ycoords.push(-t.y+C),t.tspan.textContent+=S),b+=d?E*y-w*c:E*y+w*c}else b+=c*l}}catch(O){x.e(O)}finally{x.f()}t.tspan.setAttributeNS(null,"x",t.xcoords.map(v).join(" ")),d?t.tspan.setAttributeNS(null,"y",t.ycoords.map(v).join(" ")):t.tspan.setAttributeNS(null,"y",v(-t.y)),d?t.y-=b:t.x+=b*f,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size","".concat(v(t.fontSize),"px")),t.fontStyle!==m.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==m.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);var R=t.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(R===r.TextRenderingMode.FILL||R===r.TextRenderingMode.FILL_STROKE?(t.fillColor!==m.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),R===r.TextRenderingMode.STROKE||R===r.TextRenderingMode.FILL_STROKE){var N=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,N)}var M=t.textMatrix;0!==t.textRise&&((M=M.slice())[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform","".concat(g(M)," scale(").concat(v(f),", -1)")),t.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.txtElement.appendChild(t.tspan),t.txtgrp.appendChild(t.txtElement),this._ensureTransformGroup().appendChild(t.txtElement)}}},{key:"setLeadingMoveText",value:function(e,t){this.setLeading(-t),this.moveText(e,t)}},{key:"addFontStyle",value:function(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var t=(0,r.createObjectURL)(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat(e.loadedName,'";')+" src: url(".concat(t,"); }\n")}},{key:"setFont",value:function(e){var t=this.current,n=this.commonObjs.get(e[0]),a=e[1];t.font=n,!this.embedFonts||n.missingFile||this.embeddedFonts[n.loadedName]||(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),t.fontMatrix=n.fontMatrix||r.FONT_IDENTITY_MATRIX;var i="normal";n.black?i="900":n.bold&&(i="bold");var o=n.italic?"italic":"normal";a<0?(a=-a,t.fontDirection=-1):t.fontDirection=1,t.fontSize=a,t.fontFamily=n.loadedName,t.fontWeight=i,t.fontStyle=o,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",v(-t.y)),t.xcoords=[],t.ycoords=[]}},{key:"endText",value:function(){var e,t=this.current;t.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(e=t.txtElement)&&void 0!==e&&e.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function(e){e>0&&(this.current.lineWidth=e)}},{key:"setLineCap",value:function(e){this.current.lineCap=y[e]}},{key:"setLineJoin",value:function(e){this.current.lineJoin=b[e]}},{key:"setMiterLimit",value:function(e){this.current.miterLimit=e}},{key:"setStrokeAlpha",value:function(e){this.current.strokeAlpha=e}},{key:"setStrokeRGBColor",value:function(e,t,n){this.current.strokeColor=r.Util.makeHexColor(e,t,n)}},{key:"setFillAlpha",value:function(e){this.current.fillAlpha=e}},{key:"setFillRGBColor",value:function(e,t,n){this.current.fillColor=r.Util.makeHexColor(e,t,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function(e){this.current.strokeColor=this._makeColorN_Pattern(e)}},{key:"setFillColorN",value:function(e){this.current.fillColor=this._makeColorN_Pattern(e)}},{key:"shadingFill",value:function(e){var t=this.viewport.width,n=this.viewport.height,a=r.Util.inverseTransform(this.transformMatrix),i=r.Util.applyTransform([0,0],a),o=r.Util.applyTransform([0,n],a),s=r.Util.applyTransform([t,0],a),u=r.Util.applyTransform([t,n],a),l=Math.min(i[0],o[0],s[0],u[0]),c=Math.min(i[1],o[1],s[1],u[1]),f=Math.max(i[0],o[0],s[0],u[0]),d=Math.max(i[1],o[1],s[1],u[1]),h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x",l),h.setAttributeNS(null,"y",c),h.setAttributeNS(null,"width",f-l),h.setAttributeNS(null,"height",d-c),h.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&h.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(h)}},{key:"_makeColorN_Pattern",value:function(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}},{key:"_makeTilingPattern",value:function(e){var t=e[1],n=e[2],a=e[3]||r.IDENTITY_MATRIX,i=s(e[4],4),u=i[0],l=i[1],c=i[2],f=i[3],d=e[5],h=e[6],p=e[7],v="shading".concat(_++),g=s(r.Util.normalizeRect([].concat(o(r.Util.applyTransform([u,l],a)),o(r.Util.applyTransform([c,f],a)))),4),m=g[0],y=g[1],b=g[2],x=g[3],k=s(r.Util.singularValueDecompose2dScale(a),2),w=d*k[0],S=h*k[1],C=this.svgFactory.createElement("svg:pattern");C.setAttributeNS(null,"id",v),C.setAttributeNS(null,"patternUnits","userSpaceOnUse"),C.setAttributeNS(null,"width",w),C.setAttributeNS(null,"height",S),C.setAttributeNS(null,"x","".concat(m)),C.setAttributeNS(null,"y","".concat(y));var E=this.svg,A=this.transformMatrix,I=this.current.fillColor,T=this.current.strokeColor,R=this.svgFactory.create(b-m,x-y);if(this.svg=R,this.transformMatrix=a,2===p){var N=r.Util.makeHexColor.apply(r.Util,o(t));this.current.fillColor=N,this.current.strokeColor=N}return this.executeOpTree(this.convertOpList(n)),this.svg=E,this.transformMatrix=A,this.current.fillColor=I,this.current.strokeColor=T,C.appendChild(R.childNodes[0]),this.defs.appendChild(C),"url(#".concat(v,")")}},{key:"_makeShadingPattern",value:function(e){switch("string"===typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":var t,n="shading".concat(_++),a=e[3];switch(e[1]){case"axial":var i=e[4],o=e[5];(t=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",n),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"x1",i[0]),t.setAttributeNS(null,"y1",i[1]),t.setAttributeNS(null,"x2",o[0]),t.setAttributeNS(null,"y2",o[1]);break;case"radial":var s=e[4],l=e[5],c=e[6],f=e[7];(t=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",n),t.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),t.setAttributeNS(null,"cx",l[0]),t.setAttributeNS(null,"cy",l[1]),t.setAttributeNS(null,"r",f),t.setAttributeNS(null,"fx",s[0]),t.setAttributeNS(null,"fy",s[1]),t.setAttributeNS(null,"fr",c);break;default:throw new Error("Unknown RadialAxial type: ".concat(e[1]))}var d,h=u(a);try{for(h.s();!(d=h.n()).done;){var p=d.value,v=this.svgFactory.createElement("svg:stop");v.setAttributeNS(null,"offset",p[0]),v.setAttributeNS(null,"stop-color",p[1]),t.appendChild(v)}}catch(g){h.e(g)}finally{h.f()}return this.defs.appendChild(t),"url(#".concat(n,")");case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat(e[0]))}}},{key:"setDash",value:function(e,t){this.current.dashArray=e,this.current.dashPhase=t}},{key:"constructPath",value:function(e,t){var n,a=this.current,i=a.x,o=a.y,s=[],l=0,c=u(e);try{for(c.s();!(n=c.n()).done;)switch(0|n.value){case r.OPS.rectangle:i=t[l++],o=t[l++];var f=t[l++],d=t[l++],h=i+f,p=o+d;s.push("M",v(i),v(o),"L",v(h),v(o),"L",v(h),v(p),"L",v(i),v(p),"Z");break;case r.OPS.moveTo:i=t[l++],o=t[l++],s.push("M",v(i),v(o));break;case r.OPS.lineTo:i=t[l++],o=t[l++],s.push("L",v(i),v(o));break;case r.OPS.curveTo:i=t[l+4],o=t[l+5],s.push("C",v(t[l]),v(t[l+1]),v(t[l+2]),v(t[l+3]),v(i),v(o)),l+=6;break;case r.OPS.curveTo2:s.push("C",v(i),v(o),v(t[l]),v(t[l+1]),v(t[l+2]),v(t[l+3])),i=t[l+2],o=t[l+3],l+=4;break;case r.OPS.curveTo3:i=t[l+2],o=t[l+3],s.push("C",v(t[l]),v(t[l+1]),v(i),v(o),v(i),v(o)),l+=4;break;case r.OPS.closePath:s.push("Z")}}catch(g){c.e(g)}finally{c.f()}s=s.join(" "),a.path&&e.length>0&&e[0]!==r.OPS.rectangle&&e[0]!==r.OPS.moveTo?s=a.path.getAttributeNS(null,"d")+s:(a.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(a.path)),a.path.setAttributeNS(null,"d",s),a.path.setAttributeNS(null,"fill","none"),a.element=a.path,a.setCurrentPoint(i,o)}},{key:"endPath",value:function(){var e=this.current;if(e.path=null,this.pendingClip)if(e.element){var t="clippath".concat(w++),n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",t),n.setAttributeNS(null,"transform",g(this.transformMatrix));var r=e.element.cloneNode(!0);if("evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.appendChild(r),this.defs.appendChild(n),e.activeClipUrl){e.clipGroup=null;var a,i=u(this.extraStack);try{for(i.s();!(a=i.n()).done;)a.value.clipGroup=null}catch(o){i.e(o)}finally{i.f()}n.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl="url(#".concat(t,")"),this.tgrp=null}else this.pendingClip=null}},{key:"clip",value:function(e){this.pendingClip=e}},{key:"closePath",value:function(){var e=this.current;if(e.path){var t="".concat(e.path.getAttributeNS(null,"d"),"Z");e.path.setAttributeNS(null,"d",t)}}},{key:"setLeading",value:function(e){this.current.leading=-e}},{key:"setTextRise",value:function(e){this.current.textRise=e}},{key:"setTextRenderingMode",value:function(e){this.current.textRenderingMode=e}},{key:"setHScale",value:function(e){this.current.textHScale=e/100}},{key:"setRenderingIntent",value:function(e){}},{key:"setFlatness",value:function(e){}},{key:"setGState",value:function(e){var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var a=s(t.value,2),i=a[0],o=a[1];switch(i){case"LW":this.setLineWidth(o);break;case"LC":this.setLineCap(o);break;case"LJ":this.setLineJoin(o);break;case"ML":this.setMiterLimit(o);break;case"D":this.setDash(o[0],o[1]);break;case"RI":this.setRenderingIntent(o);break;case"FL":this.setFlatness(o);break;case"Font":this.setFont(o);break;case"CA":this.setStrokeAlpha(o);break;case"ca":this.setFillAlpha(o);break;default:(0,r.warn)("Unimplemented graphic state operator ".concat(i))}}}catch(l){n.e(l)}finally{n.f()}}},{key:"fill",value:function(){var e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.current,r=n.dashArray;1!==t&&r.length>0&&(r=r.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",n.strokeColor),e.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",v(n.miterLimit)),e.setAttributeNS(null,"stroke-linecap",n.lineCap),e.setAttributeNS(null,"stroke-linejoin",n.lineJoin),e.setAttributeNS(null,"stroke-width",v(t*n.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",r.map(v).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",v(t*n.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(e)}},{key:"paintImageXObject",value:function(e){var t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,r.warn)("Dependent image with object ID ".concat(e," is not ready yet"))}},{key:"paintInlineImageXObject",value:function(e,t){var n=e.width,r=e.height,a=x(e,this.forceDataSchema,!!t),i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width",v(n)),i.setAttributeNS(null,"height",v(r)),this.current.element=i,this.clip("nonzero");var o=this.svgFactory.createElement("svg:image");o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",v(-r)),o.setAttributeNS(null,"width",v(n)+"px"),o.setAttributeNS(null,"height",v(r)+"px"),o.setAttributeNS(null,"transform","scale(".concat(v(1/n)," ").concat(v(-1/r),")")),t?t.appendChild(o):this._ensureTransformGroup().appendChild(o)}},{key:"paintImageMaskXObject",value:function(e){var t=this.current,n=e.width,r=e.height,a=t.fillColor;t.maskId="mask".concat(S++);var i=this.svgFactory.createElement("svg:mask");i.setAttributeNS(null,"id",t.maskId);var o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",v(n)),o.setAttributeNS(null,"height",v(r)),o.setAttributeNS(null,"fill",a),o.setAttributeNS(null,"mask","url(#".concat(t.maskId,")")),this.defs.appendChild(i),this._ensureTransformGroup().appendChild(o),this.paintInlineImageXObject(e,i)}},{key:"paintFormXObjectBegin",value:function(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){var n=t[2]-t[0],r=t[3]-t[1],a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",t[0]),a.setAttributeNS(null,"y",t[1]),a.setAttributeNS(null,"width",v(n)),a.setAttributeNS(null,"height",v(r)),this.current.element=a,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function(e){var t=this.svgFactory.create(e.width,e.height),n=this.svgFactory.createElement("svg:defs");t.appendChild(n),this.defs=n;var r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",g(e.transform)),t.appendChild(r),this.svg=r,t}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),e}()},function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var a,i=(a=n(2))&&a.__esModule?a:{default:a},o=n(4),s=n(154);function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){h(i,r,a,o,s,"next",e)}function s(e){h(i,r,a,o,s,"throw",e)}o(void 0)}))}}function v(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var x=__webpack_require__(767),k=__webpack_require__(251),w=__webpack_require__(677),S=__webpack_require__(543),_=/^file:\/\/\/[a-zA-Z]:\//,C=function(){function e(t){m(this,e),this.source=t,this.url=function(e){var t=S.parse(e);return"file:"===t.protocol||t.host?t:/^[a-z]:[/\\]/i.test(e)?S.parse("file:///".concat(e)):(t.host||(t.protocol="file:"),t)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return b(e,[{key:"_progressiveDataLength",get:function(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}},{key:"getFullReader",value:function(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new N(this):new T(this),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var n=this.isFsUrl?new M(this,e,t):new R(this,e,t);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t,n=v(this._rangeRequestReaders.slice(0));try{for(n.s();!(t=n.n()).done;)t.value.cancel(e)}catch(r){n.e(r)}finally{n.f()}}}]),e}();t.PDFNodeStream=C;var E=function(){function e(t){m(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;var n=t.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)(),this._headersCapability=(0,o.createPromiseCapability)()}return b(e,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var e=p(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){e.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),n=new Uint8Array(t).buffer,e.abrupt("return",{value:n,done:!1});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),e}(),A=function(){function e(t){m(this,e),this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,o.createPromiseCapability)();var n=t.source;this._isStreamingSupported=!n.disableStream}return b(e,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var e=p(i.default.mark((function e(){var t,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:if(!this._done){e.next=4;break}return e.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){e.next=6;break}throw this._storedError;case 6:if(null!==(t=this._readableStream.read())){e.next=10;break}return this._readCapability=(0,o.createPromiseCapability)(),e.abrupt("return",this.read());case 10:return this._loaded+=t.length,this.onProgress&&this.onProgress({loaded:this._loaded}),n=new Uint8Array(t).buffer,e.abrupt("return",{value:n,done:!1});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}},{key:"_error",value:function(e){this._storedError=e,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(e){var t=this;this._readableStream=e,e.on("readable",(function(){t._readCapability.resolve()})),e.on("end",(function(){e.destroy(),t._done=!0,t._readCapability.resolve()})),e.on("error",(function(e){t._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}]),e}();function I(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}var T=function(e){u(n,e);var t=c(n);function n(e){var r;m(this,n);var a=function(t){if(404===t.statusCode){var n=new o.MissingPDFException('Missing PDF "'.concat(r._url,'".'));return r._storedError=n,void r._headersCapability.reject(n)}r._headersCapability.resolve(),r._setReadableStream(t);var a=function(e){return r._readableStream.headers[e.toLowerCase()]},i=(0,s.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:e.isHttp,rangeChunkSize:r._rangeChunkSize,disableRange:r._disableRange}),u=i.allowRangeRequests,l=i.suggestedLength;r._isRangeSupported=u,r._contentLength=l||r._contentLength,r._filename=(0,s.extractFilenameFromHeader)(a)};return(r=t.call(this,e))._request=null,"http:"===r._url.protocol?r._request=k.request(I(r._url,e.httpHeaders),a):r._request=w.request(I(r._url,e.httpHeaders),a),r._request.on("error",(function(e){r._storedError=e,r._headersCapability.reject(e)})),r._request.end(),r}return n}(E),R=function(e){u(n,e);var t=c(n);function n(e,r,a){var i;for(var s in m(this,n),(i=t.call(this,e))._httpHeaders={},e.httpHeaders){var u=e.httpHeaders[s];"undefined"!==typeof u&&(i._httpHeaders[s]=u)}i._httpHeaders.Range="bytes=".concat(r,"-").concat(a-1);var l=function(e){if(404!==e.statusCode)i._setReadableStream(e);else{var t=new o.MissingPDFException('Missing PDF "'.concat(i._url,'".'));i._storedError=t}};return i._request=null,"http:"===i._url.protocol?i._request=k.request(I(i._url,i._httpHeaders),l):i._request=w.request(I(i._url,i._httpHeaders),l),i._request.on("error",(function(e){i._storedError=e})),i._request.end(),i}return n}(A),N=function(e){u(n,e);var t=c(n);function n(e){var r;m(this,n),r=t.call(this,e);var a=decodeURIComponent(r._url.path);return _.test(r._url.href)&&(a=a.replace(/^\//,"")),x.lstat(a,(function(e,t){if(e)return"ENOENT"===e.code&&(e=new o.MissingPDFException('Missing PDF "'.concat(a,'".'))),r._storedError=e,void r._headersCapability.reject(e);r._contentLength=t.size,r._setReadableStream(x.createReadStream(a)),r._headersCapability.resolve()})),r}return n}(E),M=function(e){u(n,e);var t=c(n);function n(e,r,a){var i;m(this,n),i=t.call(this,e);var o=decodeURIComponent(i._url.path);return _.test(i._url.href)&&(o=o.replace(/^\//,"")),i._setReadableStream(x.createReadStream(o,{start:r,end:a-1})),i}return n}(A)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&t.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+t+'".'):new r.UnexpectedResponseException("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)},t.extractFilenameFromHeader=function(e){var t=e("Content-Disposition");if(t){var n=(0,a.getFilenameFromContentDispositionHeader)(t);if(n.includes("%"))try{n=decodeURIComponent(n)}catch(r){}if((0,i.isPdfFile)(n))return n}return null},t.validateRangeRequestCapabilities=function(e){var t=e.getResponseHeader,n=e.isHttp,a=e.rangeChunkSize,i=e.disableRange;(0,r.assert)(a>0,"Range chunk size must be larger than zero");var o={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t("Content-Length"),10);return Number.isInteger(s)?(o.suggestedLength=s,s<=2*a||i||!n||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(o.allowRangeRequests=!0),o):o},t.validateResponseStatus=function(e){return 200===e||206===e};var r=n(4),a=n(155),i=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){var t=!0,n=s("filename\\*","i").exec(e);if(n){var i=c(n=n[1]);return l(i=d(i=f(i=unescape(i))))}if(n=function(e){for(var t,n=[],r=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(t=r.exec(e));){var i=a(t,4),o=i[1],u=i[2],l=i[3];if((o=parseInt(o,10))in n){if(0===o)break}else n[o]=[u,l]}for(var d=[],h=0;h<n.length&&h in n;++h){var p=a(n[h],2),v=p[0],g=p[1];g=c(g),v&&(g=unescape(g),0===h&&(g=f(g))),d.push(g)}return d.join("")}(e))return l(d(n));if(n=s("filename","i").exec(e)){var o=c(n=n[1]);return l(o=d(o))}function s(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function u(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{var a=new TextDecoder(e,{fatal:!0}),i=(0,r.stringToBytes)(n);n=a.decode(i),t=!1}catch(o){if(/^utf-?8$/i.test(e))try{n=decodeURIComponent(escape(n)),t=!1}catch(s){}}}return n}function l(e){return t&&/[\x80-\xff]/.test(e)&&(e=u("utf-8",e),t&&(e=u("iso-8859-1",e))),e}function c(e){if(e.startsWith('"')){for(var t=e.slice(1).split('\\"'),n=0;n<t.length;++n){var r=t[n].indexOf('"');-1!==r&&(t[n]=t[n].slice(0,r),t.length=n+1),t[n]=t[n].replace(/\\(.)/g,"$1")}e=t.join('"')}return e}function f(e){var t=e.indexOf("'");return-1===t?e:u(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function d(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,n,r){if("q"===n||"Q"===n)return u(t,r=(r=r.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{r=atob(r)}catch(a){}return u(t,r)}))}return""};var r=n(4);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},i=n(4),o=n(154);function s(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,u,"next",e)}function u(e){s(i,r,a,o,u,"throw",e)}o(void 0)}))}}function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,e),this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&n.httpHeaders||Object.create(null),this.withCredentials=n.withCredentials||!1,this.getXhr=n.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return h(e,[{key:"requestRange",value:function(e,t,n){var r={begin:e,end:t};for(var a in n)r[a]=n[a];return this.request(r)}},{key:"requestFull",value:function(e){return this.request(e)}},{key:"request",value:function(e){var t=this.getXhr(),n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};for(var a in t.open("GET",this.url),t.withCredentials=this.withCredentials,this.httpHeaders){var i=this.httpHeaders[a];"undefined"!==typeof i&&t.setRequestHeader(a,i)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}},{key:"onProgress",value:function(e,t){var n,r=this.pendingRequests[e];r&&(null===(n=r.onProgress)||void 0===n||n.call(r,t))}},{key:"onStateChange",value:function(e,t){var n=this.pendingRequests[e];if(n){var r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4===r.readyState&&e in this.pendingRequests)if(delete this.pendingRequests[e],0===r.status&&this.isHttp){var a;null===(a=n.onError)||void 0===a||a.call(n,r.status)}else{var o=r.status||200;if(200===o&&206===n.expectedStatus||o===n.expectedStatus){var s=function(e){var t=e.response;return"string"!==typeof t?t:(0,i.stringToBytes)(t).buffer}(r);if(206===o){var u=r.getResponseHeader("Content-Range"),l=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);n.onDone({begin:parseInt(l[1],10),chunk:s})}else if(s)n.onDone({begin:0,chunk:s});else{var c;null===(c=n.onError)||void 0===c||c.call(n,r.status)}}else{var f;null===(f=n.onError)||void 0===f||f.call(n,r.status)}}}}},{key:"getRequestXhr",value:function(e){return this.pendingRequests[e].xhr}},{key:"isPendingRequest",value:function(e){return e in this.pendingRequests}},{key:"abortRequest",value:function(e){var t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}]),e}(),v=function(){function e(t){f(this,e),this._source=t,this._manager=new p(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return h(e,[{key:"_onRangeRequestReaderClosed",value:function(e){var t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}},{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){var n=new m(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);var n,r=l(this._rangeRequestReaders.slice(0));try{for(r.s();!(n=r.n()).done;)n.value.cancel(e)}catch(a){r.e(a)}finally{r.f()}}}]),e}();t.PDFNetworkStream=v;var g=function(){function e(t,n){f(this,e),this._manager=t;var r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._fullRequestId=t.requestFull(r),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}return h(e,[{key:"_onHeadersReceived",value:function(){var e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=function(e){return t.getResponseHeader(e)},r=(0,o.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),a=r.allowRangeRequests,i=r.suggestedLength;a&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){var t,n=l(this._requests);try{for(n.s();!(t=n.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(r){n.e(r)}finally{n.f()}this._requests.length=0}}},{key:"_onError",value:function(e){this._storedError=(0,o.createResponseStatusError)(e,this._url),this._headersReceivedCapability.reject(this._storedError);var t,n=l(this._requests);try{for(n.s();!(t=n.n()).done;)t.value.reject(this._storedError)}catch(r){n.e(r)}finally{n.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:function(){var e=u(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._storedError){e.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){e.next=5;break}return t=this._cachedChunks.shift(),e.abrupt("return",{value:t,done:!1});case 5:if(!this._done){e.next=7;break}return e.abrupt("return",{value:void 0,done:!0});case 7:return n=(0,i.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(e){this._done=!0,this._headersReceivedCapability.reject(e);var t,n=l(this._requests);try{for(n.s();!(t=n.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(r){n.e(r)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),e}(),m=function(){function e(t,n,r){f(this,e),this._manager=t;var a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(n,r,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}return h(e,[{key:"_close",value:function(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}},{key:"_onDone",value:function(e){var t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;var n,r=l(this._requests);try{for(r.s();!(n=r.n()).done;)n.value.resolve({value:void 0,done:!0})}catch(a){r.e(a)}finally{r.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(e){this._storedError=(0,o.createResponseStatusError)(e,this._url);var t,n=l(this._requests);try{for(n.s();!(t=n.n()).done;)t.value.reject(this._storedError)}catch(r){n.e(r)}finally{n.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(e){var t;this.isStreamingSupported||null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded})}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var e=u(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._storedError){e.next=2;break}throw this._storedError;case 2:if(null===this._queuedChunk){e.next=6;break}return t=this._queuedChunk,this._queuedChunk=null,e.abrupt("return",{value:t,done:!1});case 6:if(!this._done){e.next=8;break}return e.abrupt("return",{value:void 0,done:!0});case 8:return n=(0,i.createPromiseCapability)(),this._requests.push(n),e.abrupt("return",n.promise);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(e){this._done=!0;var t,n=l(this._requests);try{for(n.s();!(t=n.n()).done;)t.value.resolve({value:void 0,done:!0})}catch(r){n.e(r)}finally{n.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r,a=(r=n(2))&&r.__esModule?r:{default:r},i=n(4),o=n(154);function s(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,u,"next",e)}function u(e){s(i,r,a,o,u,"throw",e)}o(void 0)}))}}function l(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function p(e,t,n){return{method:"GET",headers:e,signal:null===n||void 0===n?void 0:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function v(e){var t=new Headers;for(var n in e){var r=e[n];"undefined"!==typeof r&&t.append(n,r)}return t}var g=function(){function e(t){f(this,e),this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return h(e,[{key:"_progressiveDataLength",get:function(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}},{key:"getFullReader",value:function(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new m(this),this._fullRequestReader}},{key:"getRangeReader",value:function(e,t){if(t<=this._progressiveDataLength)return null;var n=new y(this,e,t);return this._rangeRequestReaders.push(n),n}},{key:"cancelAllRequests",value:function(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);var t,n=l(this._rangeRequestReaders.slice(0));try{for(n.s();!(t=n.n()).done;)t.value.cancel(e)}catch(r){n.e(r)}finally{n.f()}}}]),e}();t.PDFFetchStream=g;var m=function(){function e(t){var n=this;f(this,e),this._stream=t,this._reader=null,this._loaded=0,this._filename=null;var r=t.source;this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!==typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._headers=v(this._stream.httpHeaders);var a=r.url;fetch(a,p(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,o.validateResponseStatus)(e.status))throw(0,o.createResponseStatusError)(e.status,a);n._reader=e.body.getReader(),n._headersCapability.resolve();var t=function(t){return e.headers.get(t)},r=(0,o.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:n._stream.isHttp,rangeChunkSize:n._rangeChunkSize,disableRange:n._disableRange}),s=r.allowRangeRequests,u=r.suggestedLength;n._isRangeSupported=s,n._contentLength=u||n._contentLength,n._filename=(0,o.extractFilenameFromHeader)(t),!n._isStreamingSupported&&n._isRangeSupported&&n.cancel(new i.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}return h(e,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var e=u(a.default.mark((function e(){var t,n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._headersCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,n=t.value,!(r=t.done)){e.next=9;break}return e.abrupt("return",{value:n,done:r});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),i=new Uint8Array(n).buffer,e.abrupt("return",{value:i,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}]),e}(),y=function(){function e(t,n,r){var a=this;f(this,e),this._stream=t,this._reader=null,this._loaded=0;var s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!s.disableStream,"undefined"!==typeof AbortController&&(this._abortController=new AbortController),this._headers=v(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(n,"-").concat(r-1));var u=s.url;fetch(u,p(this._headers,this._withCredentials,this._abortController)).then((function(e){if(!(0,o.validateResponseStatus)(e.status))throw(0,o.createResponseStatusError)(e.status,u);a._readCapability.resolve(),a._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}return h(e,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var e=u(a.default.mark((function e(){var t,n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readCapability.promise;case 2:return e.next=4,this._reader.read();case 4:if(t=e.sent,n=t.value,!(r=t.done)){e.next=9;break}return e.abrupt("return",{value:n,done:r});case 9:return this._loaded+=n.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),i=new Uint8Array(n).buffer,e.abrupt("return",{value:i,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancel",value:function(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}]),e}()}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__w_pdfjs_require__),n.loaded=!0,n.exports}__w_pdfjs_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var __webpack_exports__={};return function(){"use strict";var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return a.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return i.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(e,"LinkTarget",{enumerable:!0,get:function(){return t.LinkTarget}}),Object.defineProperty(e,"LoopbackPort",{enumerable:!0,get:function(){return r.LoopbackPort}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return t.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return t.PixelsPerInch}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return t.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}}),Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return n.UNSUPPORTED_FEATURES}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return l.XfaLayer}}),Object.defineProperty(e,"addLinkAttributes",{enumerable:!0,get:function(){return t.addLinkAttributes}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"createObjectURL",{enumerable:!0,get:function(){return n.createObjectURL}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return n.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return t.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return t.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return t.getXfaPageViewport}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return t.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return t.loadScript}}),Object.defineProperty(e,"removeNullCharacters",{enumerable:!0,get:function(){return n.removeNullCharacters}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(4),r=__w_pdfjs_require__(136),a=__w_pdfjs_require__(148),i=__w_pdfjs_require__(142),o=__w_pdfjs_require__(6),s=__w_pdfjs_require__(151),u=__w_pdfjs_require__(152),l=__w_pdfjs_require__(150);if(o.isNodeJS){var c=__w_pdfjs_require__(153).PDFNodeStream;(0,r.setPDFNetworkStreamFactory)((function(e){return new c(e)}))}else{var f=__w_pdfjs_require__(156).PDFNetworkStream,d=__w_pdfjs_require__(157).PDFFetchStream;(0,r.setPDFNetworkStreamFactory)((function(e){return(0,t.isValidFetchUrl)(e.url)?new d(e):new f(e)}))}}(),__webpack_exports__}()},module.exports=factory()},888:function(e,t,n){"use strict";var r=n(47);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),a=n(296);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!f.call(p,e)||!f.call(h,e)&&(d.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,y);g[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),A=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var D,L=Object.assign;function z(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var j=!1;function B(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var a=l.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case C:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var me=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,_e=null;function Ce(e){if(e=ba(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=ka(t),we(e.stateNode,e.type,t))}}function Ee(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Ae(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Te(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==Se||null!==_e)&&(Te(),Ae())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=ka(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ce){Oe=!1}function Fe(e,t,n,r,a,i,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var De=!1,Le=null,ze=!1,je=null,Be={onError:function(e){De=!0,Le=e}};function We(e,t,n,r,a,i,o,s,u){De=!1,Le=null,Fe.apply(Be,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return He(a),e;if(o===r)return He(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,$e=a.unstable_requestPaint,Ze=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=ft(s):0!==(i&=o)&&(r=ft(i))}else 0!==(o=n&~a)?r=ft(o):0!==i&&(r=ft(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,wt,St,_t,Ct,Et=!1,At=[],It=null,Tt=null,Rt=null,Nt=new Map,Mt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Dt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ya(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function jt(e,t,n){zt(e)&&n.delete(t)}function Bt(){Et=!1,null!==It&&zt(It)&&(It=null),null!==Tt&&zt(Tt)&&(Tt=null),null!==Rt&&zt(Rt)&&(Rt=null),Nt.forEach(jt),Mt.forEach(jt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bt)))}function Ut(e){function t(t){return Wt(t,e)}if(0<At.length){Wt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Wt(It,e),null!==Tt&&Wt(Tt,e),null!==Rt&&Wt(Rt,e),Nt.forEach(t),Mt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var Vt=x.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=a,Vt.transition=i}}function qt(e,t,n,r){var a=bt,i=Vt.transition;Vt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=a,Vt.transition=i}}function Xt(e,t,n,r){if(Ht){var a=Kt(e,t,n,r);if(null===a)Hr(e,t,r,Yt,n),Ft(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return It=Dt(It,e,t,n,r,a),!0;case"dragenter":return Tt=Dt(Tt,e,t,n,r,a),!0;case"mouseover":return Rt=Dt(Rt,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Nt.set(i,Dt(Nt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Mt.set(i,Dt(Mt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&kt(i),null===(i=Kt(e,t,n,r))&&Hr(e,t,r,Yt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Kt(e,t,n,r){if(Yt=null,null!==(e=ya(e=ke(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,a="value"in Zt?Zt.value:Zt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),fn=L({},ln,{view:0,detail:0}),dn=an(fn),hn=L({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),vn=an(L({},hn,{dataTransfer:0})),gn=an(L({},fn,{relatedTarget:0})),mn=an(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(L({},ln,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return _n}var En=L({},fn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(En),In=an(L({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(L({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=an(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=L({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=an(Nn),On=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Fn=null;c&&"documentMode"in document&&(Fn=document.documentMode);var Dn=c&&"TextEvent"in window&&!Fn,Ln=c&&(!Pn||Fn&&8<Fn&&11>=Fn),zn=String.fromCharCode(32),jn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=qr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Yn(e){zr(e,0)}function Kn(e){if(X(xa(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(c){var Qn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(e){if("value"===e.propertyName&&Kn(Xn)){var t=[];Gn(t,Xn,e,ke(e)),Ne(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Xn)}function ir(e,t){if("click"===e)return Kn(t)}function or(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!f.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=cr(n,i);var o=cr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=qr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Sr={},_r={};function Cr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=Cr("animationend"),Ar=Cr("animationiteration"),Ir=Cr("animationstart"),Tr=Cr("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Rr.set(e,t),u(t,[e])}for(var Or=0;Or<Nr.length;Or++){var Pr=Nr[Or];Mr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Mr(Er,"onAnimationEnd"),Mr(Ar,"onAnimationIteration"),Mr(Ir,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Tr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,l){if(We.apply(this,arguments),De){if(!De)throw Error(i(198));var c=Le;De=!1,Le=null,ze||(ze=!0,je=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,l),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,l),i=u}}}if(ze)throw e=je,ze=!1,je=null,e}function jr(e,t){var n=t[va];void 0===n&&(n=t[va]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Wr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Wr]){e[Wr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wr]||(t[Wr]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch($t(t)){case 1:var a=Gt;break;case 4:a=qt;break;default:a=Xt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=i,a=ke(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tn;break;case Er:case Ar:case Ir:u=mn;break;case Tr:u=Rn;break;case"scroll":u=dn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var c=0!==(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==d&&(null!=(v=Me(p,d))&&c.push(Gr(p,v,h)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,a),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(l=n.relatedTarget||n.fromElement)||!ya(l)&&!l[pa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ya(l):null)&&(l!==(f=Ue(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==u?s:xa(u),h=null==l?s:xa(l),(s=new c(v,p+"leave",u,n,a)).target=f,s.relatedTarget=h,v=null,ya(a)===r&&((c=new c(d,p+"enter",l,n,a)).target=h,c.relatedTarget=f,v=c),f=v,u&&l)e:{for(d=l,p=0,h=c=u;h;h=Xr(h))p++;for(h=0,v=d;v;v=Xr(v))h++;for(;0<p-h;)c=Xr(c),p--;for(;0<h-p;)d=Xr(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Xr(c),d=Xr(d)}c=null}else c=null;null!==u&&Yr(o,s,u,c,!1),null!==l&&null!==f&&Yr(o,f,l,c,!0)}if("select"===(u=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=$n;else if(Hn(s))if(Zn)g=or;else{g=ar;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Gn(o,g,n,a):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?xa(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(y=en()):(Qt="value"in(Zt=a)?Zt.value:Zt.textContent,Un=!0)),0<(m=qr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:m}),y?b.data=y:null!==(y=Wn(n))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(jn=!0,zn);case"textInput":return(e=t.data)===zn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Pn&&Bn(e,t)?(e=en(),Jt=Qt=Zt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}zr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Me(e,n))&&r.unshift(Gr(e,i,a)),null!=(i=Me(e,t))&&r.push(Gr(e,i,a))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,a?null!=(u=Me(n,i))&&o.unshift(Gr(n,u,s)):a||null!=(u=Me(n,i))&&o.push(Gr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace($r,"")}function Qr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(i(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ut(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),da="__reactFiber$"+fa,ha="__reactProps$"+fa,pa="__reactContainer$"+fa,va="__reactEvents$"+fa,ga="__reactListeners$"+fa,ma="__reactHandles$"+fa;function ya(e){var t=e[da];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[da]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[da])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[da]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ka(e){return e[ha]||null}var wa=[],Sa=-1;function _a(e){return{current:e}}function Ca(e){0>Sa||(e.current=wa[Sa],wa[Sa]=null,Sa--)}function Ea(e,t){Sa++,wa[Sa]=e.current,e.current=t}var Aa={},Ia=_a(Aa),Ta=_a(!1),Ra=Aa;function Na(e,t){var n=e.type.contextTypes;if(!n)return Aa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ca(Ta),Ca(Ia)}function Pa(e,t,n){if(Ia.current!==Aa)throw Error(i(168));Ea(Ia,t),Ea(Ta,n)}function Fa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,V(e)||"Unknown",a));return L({},n,r)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Aa,Ra=Ia.current,Ea(Ia,e),Ea(Ta,Ta.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Fa(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Ca(Ta),Ca(Ia),Ea(Ia,e)):Ca(Ta),Ea(Ta,n)}var za=null,ja=!1,Ba=!1;function Wa(e){null===za?za=[e]:za.push(e)}function Ua(){if(!Ba&&null!==za){Ba=!0;var e=0,t=bt;try{var n=za;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,ja=!1}catch(a){throw null!==za&&(za=za.slice(e+1)),Xe(Je,Ua),a}finally{bt=t,Ba=!1}}return null}var Va=x.ReactCurrentBatchConfig;function Ha(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ga=_a(null),qa=null,Xa=null,Ya=null;function Ka(){Ya=Xa=qa=null}function $a(e){var t=Ga.current;Ca(Ga),e._currentValue=t}function Za(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Qa(e,t){qa=e,Ya=Xa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ks=!0),e.firstContext=null)}function Ja(e){var t=e._currentValue;if(Ya!==e)if(e={context:e,memoizedValue:t,next:null},null===Xa){if(null===qa)throw Error(i(308));Xa=e,qa.dependencies={lanes:0,firstContext:e}}else Xa=Xa.next=e;return t}var ei=null,ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ai(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ii(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tl(e)?(null===(e=n.interleaved)?(t.next=t,null===ei?ei=[n]:ei.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function si(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ui(e,t,n,r){var a=e.updateQueue;ti=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?i=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==i){var f=a.baseState;for(o=0,c=l=u=null,s=i;;){var d=s.lane,h=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(d=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(h,f,d):p)||void 0===d)break e;f=L({},f,d);break e;case 2:ti=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=a.effects)?a.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=h,u=f):c=c.next=h,o|=d;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(d=s).next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}if(null===c&&(u=f),a.baseState=u,a.firstBaseUpdate=l,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Ou|=o,e.lanes=o,e.memoizedState=f}}function li(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var ci=(new r.Component).refs;function fi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var di={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zu(),a=Qu(e),i=ai(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=Ju(e,a,r))&&oi(t,e,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zu(),a=Qu(e),i=ai(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=Ju(e,a,r))&&oi(t,e,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zu(),r=Qu(e),a=ai(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),ii(e,a),null!==(t=Ju(e,r,n))&&oi(t,e,r)}};function hi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function pi(e,t,n){var r=!1,a=Aa,i=t.contextType;return"object"===typeof i&&null!==i?i=Ja(i):(a=Ma(t)?Ra:Ia.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Na(e,a):Aa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=di,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function vi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&di.enqueueReplaceState(t,t.state,null)}function gi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=ci,ni(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ja(i):(i=Ma(t)?Ra:Ia.current,a.context=Na(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(fi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&di.enqueueReplaceState(a,a.state,null),ui(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}var mi=[],yi=0,bi=null,xi=0,ki=[],wi=0,Si=null,_i=1,Ci="";function Ei(e,t){mi[yi++]=xi,mi[yi++]=bi,bi=e,xi=t}function Ai(e,t,n){ki[wi++]=_i,ki[wi++]=Ci,ki[wi++]=Si,Si=e;var r=_i;e=Ci;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,_i=1<<32-ot(t)+a|n<<a|r,Ci=i+e}else _i=1<<i|n<<a|r,Ci=e}function Ii(e){null!==e.return&&(Ei(e,1),Ai(e,1,0))}function Ti(e){for(;e===bi;)bi=mi[--yi],mi[yi]=null,xi=mi[--yi],mi[yi]=null;for(;e===Si;)Si=ki[--wi],ki[wi]=null,Ci=ki[--wi],ki[wi]=null,_i=ki[--wi],ki[wi]=null}var Ri=null,Ni=null,Mi=!1,Oi=null;function Pi(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Fi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ri=e,Ni=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ri=e,Ni=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Si?{id:_i,overflow:Ci}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ri=e,Ni=null,!0);default:return!1}}function Di(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Li(e){if(Mi){var t=Ni;if(t){var n=t;if(!Fi(e,t)){if(Di(e))throw Error(i(418));t=la(n.nextSibling);var r=Ri;t&&Fi(e,t)?Pi(r,n):(e.flags=-4097&e.flags|2,Mi=!1,Ri=e)}}else{if(Di(e))throw Error(i(418));e.flags=-4097&e.flags|2,Mi=!1,Ri=e}}}function zi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ri=e}function ji(e){if(e!==Ri)return!1;if(!Mi)return zi(e),Mi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=Ni)){if(Di(e)){for(e=Ni;e;)e=la(e.nextSibling);throw Error(i(418))}for(;t;)Pi(e,t),t=la(t.nextSibling)}if(zi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ni=la(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ni=null}}else Ni=Ri?la(e.stateNode.nextSibling):null;return!0}function Bi(){Ni=Ri=null,Mi=!1}function Wi(e){null===Oi?Oi=[e]:Oi.push(e)}function Ui(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===ci&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hi(e){return(0,e._init)(e._payload)}function Gi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Dl(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===S?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&Hi(i)===t.type)?((r=a(t,n.props)).ref=Ui(e,t,n),r.return=e,r):((r=Ol(n.type,n.key,n.props,null,e.mode,r)).ref=Ui(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ll(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Pl(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Ol(t.type,t.key,t.props,null,e.mode,n)).ref=Ui(e,null,t),n.return=e,n;case w:return(t=Ll(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Pl(t,e.mode,n,null)).return=e,t;Vi(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===a?l(e,t,n,r):null;case w:return n.key===a?c(e,t,n,r):null;case M:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||F(n))return null!==a?null:f(e,t,n,r,null);Vi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case M:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||F(r))return f(t,e=e.get(n)||null,r,a,null);Vi(t,r)}return null}function v(a,i,s,u){for(var l=null,c=null,f=i,v=i=0,g=null;null!==f&&v<s.length;v++){f.index>v?(g=f,f=null):g=f.sibling;var m=h(a,f,s[v],u);if(null===m){null===f&&(f=g);break}e&&f&&null===m.alternate&&t(a,f),i=o(m,i,v),null===c?l=m:c.sibling=m,c=m,f=g}if(v===s.length)return n(a,f),Mi&&Ei(a,v),l;if(null===f){for(;v<s.length;v++)null!==(f=d(a,s[v],u))&&(i=o(f,i,v),null===c?l=f:c.sibling=f,c=f);return Mi&&Ei(a,v),l}for(f=r(a,f);v<s.length;v++)null!==(g=p(f,a,v,s[v],u))&&(e&&null!==g.alternate&&f.delete(null===g.key?v:g.key),i=o(g,i,v),null===c?l=g:c.sibling=g,c=g);return e&&f.forEach((function(e){return t(a,e)})),Mi&&Ei(a,v),l}function g(a,s,u,l){var c=F(u);if("function"!==typeof c)throw Error(i(150));if(null==(u=c.call(u)))throw Error(i(151));for(var f=c=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=h(a,v,y.value,l);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(a,v),s=o(b,s,g),null===f?c=b:f.sibling=b,f=b,v=m}if(y.done)return n(a,v),Mi&&Ei(a,g),c;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=d(a,y.value,l))&&(s=o(y,s,g),null===f?c=y:f.sibling=y,f=y);return Mi&&Ei(a,g),c}for(v=r(a,v);!y.done;g++,y=u.next())null!==(y=p(v,a,g,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===f?c=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(a,e)})),Mi&&Ei(a,g),c}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case k:e:{for(var l=o.key,c=i;null!==c;){if(c.key===l){if((l=o.type)===S){if(7===c.tag){n(r,c.sibling),(i=a(c,o.props.children)).return=r,r=i;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===M&&Hi(l)===c.type){n(r,c.sibling),(i=a(c,o.props)).ref=Ui(r,c,o),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((i=Pl(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Ol(o.type,o.key,o.props,null,r.mode,u)).ref=Ui(r,i,o),u.return=r,r=u)}return s(r);case w:e:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Ll(o,r.mode,u)).return=r,r=i}return s(r);case M:return e(r,i,(c=o._init)(o._payload),u)}if(te(o))return v(r,i,o,u);if(F(o))return g(r,i,o,u);Vi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Dl(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var qi=Gi(!0),Xi=Gi(!1),Yi={},Ki=_a(Yi),$i=_a(Yi),Zi=_a(Yi);function Qi(e){if(e===Yi)throw Error(i(174));return e}function Ji(e,t){switch(Ea(Zi,t),Ea($i,e),Ea(Ki,Yi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Ki),Ea(Ki,t)}function eo(){Ca(Ki),Ca($i),Ca(Zi)}function to(e){Qi(Zi.current);var t=Qi(Ki.current),n=ue(t,e.type);t!==n&&(Ea($i,e),Ea(Ki,n))}function no(e){$i.current===e&&(Ca(Ki),Ca($i))}var ro=_a(0);function ao(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function oo(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var so=x.ReactCurrentDispatcher,uo=x.ReactCurrentBatchConfig,lo=0,co=null,fo=null,ho=null,po=!1,vo=!1,go=0,mo=0;function yo(){throw Error(i(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,a,o){if(lo=o,co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:as,e=n(r,a),vo){o=0;do{if(vo=!1,go=0,25<=o)throw Error(i(301));o+=1,ho=fo=null,t.updateQueue=null,so.current=is,e=n(r,a)}while(vo)}if(so.current=ns,t=null!==fo&&null!==fo.next,lo=0,ho=fo=co=null,po=!1,t)throw Error(i(300));return e}function ko(){var e=0!==go;return go=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?co.memoizedState=ho=e:ho=ho.next=e,ho}function So(){if(null===fo){var e=co.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?co.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?co.memoizedState=ho=e:ho=ho.next=e}return ho}function _o(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=So(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=fo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,l=null,c=o;do{var f=c.lane;if((lo&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,s=r):l=l.next=d,co.lanes|=f,Ou|=f}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(ks=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,co.lanes|=o,Ou|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=So(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(ks=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Io(e,t){var n=co,r=So(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,ks=!0),r=r.queue,jo(No.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Po(9,Ro.bind(null,n,r,a,t),void 0,null),null===Eu)throw Error(i(349));0!==(30&lo)||To(n,t,a)}return a}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Ju(e,1,-1)}function No(e,t,n){return n((function(){Mo(t)&&Ju(e,1,-1)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Oo(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Zo.bind(null,co,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fo(){return So().memoizedState}function Do(e,t,n,r){var a=wo();co.flags|=e,a.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var a=So();r=void 0===r?null:r;var i=void 0;if(null!==fo){var o=fo.memoizedState;if(i=o.destroy,null!==r&&bo(r,o.deps))return void(a.memoizedState=Po(t,n,i,r))}co.flags|=e,a.memoizedState=Po(1|t,n,i,r)}function zo(e,t){return Do(8390656,8,e,t)}function jo(e,t){return Lo(2048,8,e,t)}function Bo(e,t){return Lo(4,2,e,t)}function Wo(e,t){return Lo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,Uo.bind(null,t,e),n)}function Ho(){}function Go(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&lo)?(e.baseState&&(e.baseState=!1,ks=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),co.lanes|=n,Ou|=n,e.baseState=!0),t)}function Yo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{bt=n,uo.transition=r}}function Ko(){return So().memoizedState}function $o(e,t,n){var r=Qu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Jo(t,n):(es(e,t,n),null!==(e=Ju(e,r,n=Zu()))&&ts(e,t,r))}function Zo(e,t,n){var r=Qu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Jo(t,a);else{es(e,t,a);var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o))return}catch(u){}null!==(e=Ju(e,r,n=Zu()))&&ts(e,t,r)}}function Qo(e){var t=e.alternate;return e===co||null!==t&&t===co}function Jo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tl(e)?(null===(e=t.interleaved)?(n.next=n,null===ei?ei=[t]:ei.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ns={readContext:Ja,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:Ja,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Ja,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$o.bind(null,co,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Oo,useDebugValue:Ho,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Yo.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=co,a=wo();if(Mi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Eu)throw Error(i(349));0!==(30&lo)||To(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,zo(No.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Eu.identifierPrefix;if(Mi){var n=Ci;t=":"+t+"R"+(n=(_i&~(1<<32-ot(_i)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},as={readContext:Ja,useCallback:Go,useContext:Ja,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Bo,useLayoutEffect:Wo,useMemo:qo,useReducer:Co,useRef:Fo,useState:function(){return Co(_o)},useDebugValue:Ho,useDeferredValue:function(e){return Xo(So(),fo.memoizedState,e)},useTransition:function(){return[Co(_o)[0],So().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Io,useId:Ko,unstable_isNewReconciler:!1},is={readContext:Ja,useCallback:Go,useContext:Ja,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Bo,useLayoutEffect:Wo,useMemo:qo,useReducer:Eo,useRef:Fo,useState:function(){return Eo(_o)},useDebugValue:Ho,useDeferredValue:function(e){var t=So();return null===fo?t.memoizedState=e:Xo(t,fo.memoizedState,e)},useTransition:function(){return[Eo(_o)[0],So().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Io,useId:Ko,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var us,ls,cs,fs="function"===typeof WeakMap?WeakMap:Map;function ds(e,t,n){(n=ai(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Uu=r),ss(0,t)},n}function hs(e,t,n){(n=ai(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ss(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!==typeof r&&(null===Vu?Vu=new Set([this]):Vu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ps(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=_l.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ai(-1,1)).tag=2,ii(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}function ms(e,t){if(!Mi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bs(e,t,n){var r=t.pendingProps;switch(Ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(t),null;case 1:case 17:return Ma(t.type)&&Oa(),ys(t),null;case 3:return r=t.stateNode,eo(),Ca(Ta),Ca(Ia),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ji(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Oi&&(il(Oi),Oi=null))),ys(t),null;case 5:no(t);var a=Qi(Zi.current);if(n=t.type,null!==e&&null!=t.stateNode)ls(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ys(t),null}if(e=Qi(Ki.current),ji(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[da]=t,r[ha]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(a=0;a<Fr.length;a++)jr(Fr[a],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ae(r,o),jr("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,l,e),a=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,l,e),a=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":q(r),J(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[da]=t,e[ha]=r,us(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":jr("cancel",e),jr("close",e),a=r;break;case"iframe":case"object":case"embed":jr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Fr.length;a++)jr(Fr[a],e);a=r;break;case"source":jr("error",e),a=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),a=r;break;case"details":jr("toggle",e),a=r;break;case"input":$(e,r),a=K(e,r),jr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),jr("invalid",e)}for(o in ye(n,a),l=a)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&jr("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":q(e),J(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ys(t),null;case 6:if(e&&null!=t.stateNode)cs(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Zi.current),Qi(Ki.current),ji(t)){if(r=t.stateNode,n=t.memoizedProps,r[da]=t,(o=r.nodeValue!==n)&&null!==(e=Ri))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[da]=t,t.stateNode=r}return ys(t),null;case 13:if(Ca(ro),r=t.memoizedState,Mi&&null!==Ni&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ni;r;)r=la(r.nextSibling);return Bi(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=ji(t),null===e){if(!r)throw Error(i(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(i(317));r[da]=t}else Bi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return ys(t),null}return null!==Oi&&(il(Oi),Oi=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?ji(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Nu&&(Nu=3):pl())),null!==t.updateQueue&&(t.flags|=4),ys(t),null);case 4:return eo(),null===e&&Ur(t.stateNode.containerInfo),ys(t),null;case 10:return $a(t.type._context),ys(t),null;case 19:if(Ca(ro),null===(o=t.memoizedState))return ys(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)ms(o,!1);else{if(0!==Nu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ao(e))){for(t.flags|=128,ms(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>ju&&(t.flags|=128,r=!0,ms(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ao(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ms(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!Mi)return ys(t),null}else 2*Ze()-o.renderingStartTime>ju&&1073741824!==n&&(t.flags|=128,r=!0,ms(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=ro.current,Ea(ro,r?1&n|2:1&n),t):(ys(t),null);case 22:case 23:return cl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tu)&&(ys(t),6&t.subtreeFlags&&(t.flags|=8192)):ys(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}us=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ls=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Qi(Ki.current);var i,o=null;switch(n){case"input":a=K(e,a),r=K(e,r),o=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ye(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var u=a[c];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&jr("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},cs=function(e,t,n,r){n!==r&&(t.flags|=4)};var xs=x.ReactCurrentOwner,ks=!1;function ws(e,t,n,r){t.child=null===e?Xi(t,null,n,r):qi(t,e.child,n,r)}function Ss(e,t,n,r,a){n=n.render;var i=t.ref;return Qa(t,a),r=xo(e,t,n,r,i,a),n=ko(),null===e||ks?(Mi&&n&&Ii(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function _s(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Nl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ol(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Cs(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,a)}return t.flags|=1,(e=Ml(i,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(ks=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Hs(e,t,a);0!==(131072&e.flags)&&(ks=!0)}}return Is(e,t,n,r,a)}function Es(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Ru,Tu),Tu|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(Ru,Tu),Tu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ea(Ru,Tu),Tu|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ea(Ru,Tu),Tu|=r;return ws(e,t,a,n),t.child}function As(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,r,a){var i=Ma(n)?Ra:Ia.current;return i=Na(t,i),Qa(t,a),n=xo(e,t,n,r,i,a),r=ko(),null===e||ks?(Mi&&r&&Ii(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Ts(e,t,n,r,a){if(Ma(n)){var i=!0;Da(t)}else i=!1;if(Qa(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pi(t,n,r),gi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ja(l):l=Na(t,l=Ma(n)?Ra:Ia.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&vi(t,o,r,l),ti=!1;var d=t.memoizedState;o.state=d,ui(t,r,o,a),u=t.memoizedState,s!==r||d!==u||Ta.current||ti?("function"===typeof c&&(fi(t,n,c,r),u=t.memoizedState),(s=ti||hi(t,n,s,r,d,u,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ri(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Ha(t.type,s),o.props=l,f=t.pendingProps,d=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ja(u):u=Na(t,u=Ma(n)?Ra:Ia.current);var h=n.getDerivedStateFromProps;(c="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||d!==u)&&vi(t,o,r,u),ti=!1,d=t.memoizedState,o.state=d,ui(t,r,o,a);var p=t.memoizedState;s!==f||d!==p||Ta.current||ti?("function"===typeof h&&(fi(t,n,h,r),p=t.memoizedState),(l=ti||hi(t,n,l,r,d,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Rs(e,t,n,r,i,a)}function Rs(e,t,n,r,a,i){As(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&La(t,n,!1),Hs(e,t,i);r=t.stateNode,xs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=qi(t,e.child,null,i),t.child=qi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Pa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pa(0,t.context,!1),Ji(e,t.containerInfo)}function Ms(e,t,n,r,a){return Bi(),Wi(a),t.flags|=256,ws(e,t,n,r),t.child}var Os={dehydrated:null,treeContext:null,retryLane:0};function Ps(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ds(e,t,n){var r,a=t.pendingProps,o=ro.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ea(ro,1&o),null===e)return Li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=a.children,e=a.fallback,s?(a=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Fl(o,a,0,null),e=Pl(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ps(n),t.memoizedState=Os,e):Ls(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,Bs(e,t,n,Error(i(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=a.fallback,o=t.mode,a=Fl({mode:"visible",children:a.children},o,0,null),(s=Pl(s,o,n,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,0!==(1&t.mode)&&qi(t,e.child,null,n),t.child.memoizedState=Ps(n),t.memoizedState=Os,s);if(0===(1&t.mode))t=Bs(e,t,n,null);else if("$!"===r.data)t=Bs(e,t,n,Error(i(419)));else if(a=0!==(n&e.childLanes),ks||a){if(null!==(a=Eu)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(a=0!==(s&(a.suspendedLanes|n))?0:s)&&a!==o.retryLane&&(o.retryLane=a,Ju(e,a,-1))}pl(),t=Bs(e,t,n,Error(i(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=El.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ni=la(r.nextSibling),Ri=t,Mi=!0,Oi=null,null!==n&&(ki[wi++]=_i,ki[wi++]=Ci,ki[wi++]=Si,_i=n.id,Ci=n.overflow,Si=t),(t=Ls(t,t.pendingProps.children)).flags|=4096);return t}return s?(a=js(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ps(n):Fs(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Os,a):(n=zs(e,t,a.children,n),t.memoizedState=null,n)}return s?(a=js(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ps(n):Fs(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Os,a):(n=zs(e,t,a.children,n),t.memoizedState=null,n)}function Ls(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){var a=e.child;return e=a.sibling,n=Ml(a,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function js(e,t,n,r,a){var i=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&i)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Ml(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Ml(o,r):(r=Pl(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Bs(e,t,n,r){return null!==r&&Wi(r),qi(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ws(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Za(e.return,t,n)}function Us(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Vs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ws(e,n,t);else if(19===e.tag)Ws(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ao(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Us(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ao(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Us(t,!0,n,null,i);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ou|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){switch(Ti(t),t.tag){case 1:return Ma(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ca(Ta),Ca(Ia),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ca(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(ro),null;case 4:return eo(),null;case 10:return $a(t.type._context),null;case 22:case 23:return cl(),null;default:return null}}var qs=!1,Xs=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Ks=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sl(e,t,r)}else n.current=null}function Zs(e,t,n){try{n()}catch(r){Sl(e,t,r)}}var Qs=!1;function Js(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&Zs(t,n,i)}a=a.next}while(a!==r)}}function eu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nu(e){var t=e.alternate;null!==t&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[da],delete t[ha],delete t[va],delete t[ga],delete t[ma])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ru(e){return 5===e.tag||3===e.tag||4===e.tag}function au(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function iu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(iu(e,t,n),e=e.sibling;null!==e;)iu(e,t,n),e=e.sibling}function ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ou(e,t,n),e=e.sibling;null!==e;)ou(e,t,n),e=e.sibling}var su=null,uu=!1;function lu(e,t,n){for(n=n.child;null!==n;)cu(e,t,n),n=n.sibling}function cu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Xs||$s(n,t);case 6:var r=su,a=uu;su=null,lu(e,t,n),uu=a,null!==(su=r)&&(uu?(e=su,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):su.removeChild(n.stateNode));break;case 18:null!==su&&(uu?(e=su,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Ut(e)):ua(su,n.stateNode));break;case 4:r=su,a=uu,su=n.stateNode.containerInfo,uu=!0,lu(e,t,n),su=r,uu=a;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&Zs(n,t,o),a=a.next}while(a!==r)}lu(e,t,n);break;case 1:if(!Xs&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sl(n,t,s)}lu(e,t,n);break;case 21:lu(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,lu(e,t,n),Xs=r):lu(e,t,n);break;default:lu(e,t,n)}}function fu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=Al.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function du(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:su=u.stateNode,uu=!1;break e;case 3:case 4:su=u.stateNode.containerInfo,uu=!0;break e}u=u.return}if(null===su)throw Error(i(160));cu(o,s,a),su=null,uu=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(c){Sl(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hu(t,e),t=t.sibling}function hu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(du(t,e),pu(e),4&r){try{Js(3,e,e.return),eu(3,e)}catch(v){Sl(e,e.return,v)}try{Js(5,e,e.return)}catch(v){Sl(e,e.return,v)}}break;case 1:du(t,e),pu(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(du(t,e),pu(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(v){Sl(e,e.return,v)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&Z(a,o),be(u,s);var c=be(u,o);for(s=0;s<l.length;s+=2){var f=l[s],d=l[s+1];"style"===f?ge(a,d):"dangerouslySetInnerHTML"===f?fe(a,d):"children"===f?de(a,d):b(a,f,d,c)}switch(u){case"input":Q(a,o);break;case"textarea":ie(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[ha]=o}catch(v){Sl(e,e.return,v)}}break;case 6:if(du(t,e),pu(e),4&r){if(null===e.stateNode)throw Error(i(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(v){Sl(e,e.return,v)}}break;case 3:if(du(t,e),pu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(v){Sl(e,e.return,v)}break;case 4:default:du(t,e),pu(e);break;case 13:du(t,e),pu(e),8192&(c=e.child).flags&&null!==c.memoizedState&&(null===c.alternate||null===c.alternate.memoizedState)&&(zu=Ze()),4&r&&fu(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(f=Xs)||c,du(t,e),Xs=f):du(t,e),pu(e),8192&r){f=null!==e.memoizedState;e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,f?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(v){Sl(e,e.return,v)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(v){Sl(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}if(f&&!c&&0!==(1&e.mode))for(Ks=e,e=e.child;null!==e;){for(c=Ks=e;null!==Ks;){switch(d=(f=Ks).child,f.tag){case 0:case 11:case 14:case 15:Js(4,f,f.return);break;case 1:if($s(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){h=f,p=f.return;try{a=h,o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(v){Sl(h,p,v)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){yu(c);continue}}null!==d?(d.return=f,Ks=d):yu(c)}e=e.sibling}}break;case 19:du(t,e),pu(e),4&r&&fu(e);case 21:}}function pu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ru(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(de(a,""),r.flags&=-33),ou(e,au(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;iu(e,au(e),o);break;default:throw Error(i(161))}}catch(s){Sl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){Ks=e,gu(e,t,n)}function gu(e,t,n){for(var r=0!==(1&e.mode);null!==Ks;){var a=Ks,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||qs;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Xs;s=qs;var l=Xs;if(qs=o,(Xs=u)&&!l)for(Ks=a;null!==Ks;)u=(o=Ks).child,22===o.tag&&null!==o.memoizedState?bu(a):null!==u?(u.return=o,Ks=u):bu(a);for(;null!==i;)Ks=i,gu(i,t,n),i=i.sibling;Ks=a,qs=s,Xs=l}mu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Ks=i):mu(e)}}function mu(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||eu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ha(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&li(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}li(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(i(163))}Xs||512&t.flags&&tu(t)}catch(h){Sl(t,t.return,h)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function yu(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function bu(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eu(4,t)}catch(u){Sl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){Sl(t,a,u)}}var i=t.return;try{tu(t)}catch(u){Sl(t,i,u)}break;case 5:var o=t.return;try{tu(t)}catch(u){Sl(t,o,u)}}}catch(u){Sl(t,t.return,u)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var xu,ku=Math.ceil,wu=x.ReactCurrentDispatcher,Su=x.ReactCurrentOwner,_u=x.ReactCurrentBatchConfig,Cu=0,Eu=null,Au=null,Iu=0,Tu=0,Ru=_a(0),Nu=0,Mu=null,Ou=0,Pu=0,Fu=0,Du=null,Lu=null,zu=0,ju=1/0,Bu=null,Wu=!1,Uu=null,Vu=null,Hu=!1,Gu=null,qu=0,Xu=0,Yu=null,Ku=-1,$u=0;function Zu(){return 0!==(6&Cu)?Ze():-1!==Ku?Ku:Ku=Ze()}function Qu(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Iu?Iu&-Iu:null!==Va.transition?(0===$u&&($u=vt()),$u):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function Ju(e,t,n){if(50<Xu)throw Xu=0,Yu=null,Error(i(185));var r=el(e,t);return null===r?null:(mt(r,t,n),0!==(2&Cu)&&r===Eu||(r===Eu&&(0===(2&Cu)&&(Pu|=t),4===Nu&&ol(r,Iu)),nl(r,n),1===t&&0===Cu&&0===(1&e.mode)&&(ju=Ze()+500,ja&&Ua())),r)}function el(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tl(e){return(null!==Eu||null!==ei)&&0!==(1&e.mode)&&0===(2&Cu)}function nl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=ht(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=dt(e,e===Eu?Iu:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){ja=!0,Wa(e)}(sl.bind(null,e)):Wa(sl.bind(null,e)),oa((function(){0===Cu&&Ua()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Il(n,rl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rl(e,t){if(Ku=-1,$u=0,0!==(6&Cu))throw Error(i(327));var n=e.callbackNode;if(kl()&&e.callbackNode!==n)return null;var r=dt(e,e===Eu?Iu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var a=Cu;Cu|=2;var o=hl();for(Eu===e&&Iu===t||(Bu=null,ju=Ze()+500,fl(e,t));;)try{ml();break}catch(u){dl(e,u)}Ka(),wu.current=o,Cu=a,null!==Au?t=0:(Eu=null,Iu=0,t=Nu)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=al(e,a))),1===t)throw n=Mu,fl(e,0),ol(e,r),nl(e,Ze()),n;if(6===t)ol(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vl(e,r))&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t))throw n=Mu,fl(e,0),ol(e,r),nl(e,Ze()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xl(e,Lu,Bu);break;case 3:if(ol(e,r),(130023424&r)===r&&10<(t=zu+500-Ze())){if(0!==dt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){Zu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xl.bind(null,e,Lu,Bu),t);break}xl(e,Lu,Bu);break;case 4:if(ol(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ku(r/1960))-r)){e.timeoutHandle=ra(xl.bind(null,e,Lu,Bu),r);break}xl(e,Lu,Bu);break;default:throw Error(i(329))}}}return nl(e,Ze()),e.callbackNode===n?rl.bind(null,e):null}function al(e,t){var n=Du;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=Lu,Lu=n,null!==t&&il(t)),e}function il(e){null===Lu?Lu=e:Lu.push.apply(Lu,e)}function ol(e,t){for(t&=~Fu,t&=~Pu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sl(e){if(0!==(6&Cu))throw Error(i(327));kl();var t=dt(e,0);if(0===(1&t))return nl(e,Ze()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Mu,fl(e,0),ol(e,t),nl(e,Ze()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,Lu,Bu),nl(e,Ze()),null}function ul(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(ju=Ze()+500,ja&&Ua())}}function ll(e){null!==Gu&&0===Gu.tag&&0===(6&Cu)&&kl();var t=Cu;Cu|=1;var n=_u.transition,r=bt;try{if(_u.transition=null,bt=1,e)return e()}finally{bt=r,_u.transition=n,0===(6&(Cu=t))&&Ua()}}function cl(){Tu=Ru.current,Ca(Ru)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Au)for(n=Au.return;null!==n;){var r=n;switch(Ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:eo(),Ca(Ta),Ca(Ia),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ca(ro);break;case 10:$a(r.type._context);break;case 22:case 23:cl()}n=n.return}if(Eu=e,Au=e=Ml(e.current,null),Iu=Tu=t,Nu=0,Mu=null,Fu=Pu=Ou=0,Lu=Du=null,null!==ei){for(t=0;t<ei.length;t++)if(null!==(r=(n=ei[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}ei=null}return e}function dl(e,t){for(;;){var n=Au;try{if(Ka(),so.current=ns,po){for(var r=co.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}po=!1}if(lo=0,ho=fo=co=null,vo=!1,go=0,Su.current=null,null===n||null===n.return){Nu=1,Mu=t,Au=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Iu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=u,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ps(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var g=new Set;g.add(l),t.updateQueue=g}else v.add(l);break e}if(0===(1&t)){ps(o,c,t),pl();break e}l=Error(i(426))}else if(Mi&&1&u.mode){var m=vs(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),Wi(l);break e}}o=l,4!==Nu&&(Nu=2),null===Du?Du=[o]:Du.push(o),l=os(l,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,si(u,ds(0,l,t));break e;case 1:o=l;var y=u.type,b=u.stateNode;if(0===(128&u.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vu||!Vu.has(b)))){u.flags|=65536,t&=-t,u.lanes|=t,si(u,hs(u,o,t));break e}}u=u.return}while(null!==u)}bl(n)}catch(x){t=x,Au===n&&null!==n&&(Au=n=n.return);continue}break}}function hl(){var e=wu.current;return wu.current=ns,null===e?ns:e}function pl(){0!==Nu&&3!==Nu&&2!==Nu||(Nu=4),null===Eu||0===(268435455&Ou)&&0===(268435455&Pu)||ol(Eu,Iu)}function vl(e,t){var n=Cu;Cu|=2;var r=hl();for(Eu===e&&Iu===t||(Bu=null,fl(e,t));;)try{gl();break}catch(a){dl(e,a)}if(Ka(),Cu=n,wu.current=r,null!==Au)throw Error(i(261));return Eu=null,Iu=0,Nu}function gl(){for(;null!==Au;)yl(Au)}function ml(){for(;null!==Au&&!Ke();)yl(Au)}function yl(e){var t=xu(e.alternate,e,Tu);e.memoizedProps=e.pendingProps,null===t?bl(e):Au=t,Su.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=bs(n,t,Tu)))return void(Au=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Au=n);if(null===e)return Nu=6,void(Au=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Au=t);Au=t=e}while(null!==t);0===Nu&&(Nu=5)}function xl(e,t,n){var r=bt,a=_u.transition;try{_u.transition=null,bt=1,function(e,t,n,r){do{kl()}while(null!==Gu);if(0!==(6&Cu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Eu&&(Au=Eu=null,Iu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hu||(Hu=!0,Il(tt,(function(){return kl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=_u.transition,_u.transition=null;var s=bt;bt=1;var u=Cu;Cu|=4,Su.current=null,function(e,t){if(ea=Ht,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==a&&3!==d.nodeType||(u=s+a),d!==o||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++c===a&&(u=s),h===o&&++f===r&&(l=s),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ht=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var g=v.memoizedProps,m=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ha(t.type,g),m);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;if(1===x.nodeType)x.textContent="";else if(9===x.nodeType){var k=x.body;null!=k&&(k.textContent="")}break;default:throw Error(i(163))}}catch(w){Sl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}v=Qs,Qs=!1}(e,n),hu(n,e),pr(ta),Ht=!!ea,ta=ea=null,e.current=n,vu(n,e,a),$e(),Cu=u,bt=s,_u.transition=o}else e.current=n;if(Hu&&(Hu=!1,Gu=e,qu=a),0===(o=e.pendingLanes)&&(Vu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nl(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Wu)throw Wu=!1,e=Uu,Uu=null,e;0!==(1&qu)&&0!==e.tag&&kl(),0!==(1&(o=e.pendingLanes))?e===Yu?Xu++:(Xu=0,Yu=e):Xu=0,Ua()}(e,t,n,r)}finally{_u.transition=a,bt=r}return null}function kl(){if(null!==Gu){var e=xt(qu),t=_u.transition,n=bt;try{if(_u.transition=null,bt=16>e?16:e,null===Gu)var r=!1;else{if(e=Gu,Gu=null,qu=0,0!==(6&Cu))throw Error(i(331));var a=Cu;for(Cu|=4,Ks=e.current;null!==Ks;){var o=Ks,s=o.child;if(0!==(16&Ks.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Ks=c;null!==Ks;){var f=Ks;switch(f.tag){case 0:case 11:case 15:Js(8,f,o)}var d=f.child;if(null!==d)d.return=f,Ks=d;else for(;null!==Ks;){var h=(f=Ks).sibling,p=f.return;if(nu(f),f===c){Ks=null;break}if(null!==h){h.return=p,Ks=h;break}Ks=p}}}var v=o.alternate;if(null!==v){var g=v.child;if(null!==g){v.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Ks=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(o=Ks).flags))switch(o.tag){case 0:case 11:case 15:Js(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ks=y;break e}Ks=o.return}}var b=e.current;for(Ks=b;null!==Ks;){var x=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Ks=x;else e:for(s=b;null!==Ks;){if(0!==(2048&(u=Ks).flags))try{switch(u.tag){case 0:case 11:case 15:eu(9,u)}}catch(w){Sl(u,u.return,w)}if(u===s){Ks=null;break e}var k=u.sibling;if(null!==k){k.return=u.return,Ks=k;break e}Ks=u.return}}if(Cu=a,Ua(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(w){}r=!0}return r}finally{bt=n,_u.transition=t}}return!1}function wl(e,t,n){ii(e,t=ds(0,t=os(n,t),1)),t=Zu(),null!==(e=el(e,1))&&(mt(e,1,t),nl(e,t))}function Sl(e,t,n){if(3===e.tag)wl(e,e,n);else for(;null!==t;){if(3===t.tag){wl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vu||!Vu.has(r))){ii(t,e=hs(t,e=os(n,e),1)),e=Zu(),null!==(t=el(t,1))&&(mt(t,1,e),nl(t,e));break}}t=t.return}}function _l(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zu(),e.pingedLanes|=e.suspendedLanes&n,Eu===e&&(Iu&n)===n&&(4===Nu||3===Nu&&(130023424&Iu)===Iu&&500>Ze()-zu?fl(e,0):Fu|=n),nl(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=Zu();null!==(e=el(e,t))&&(mt(e,t,n),nl(e,n))}function El(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function Al(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cl(e,n)}function Il(e,t){return Xe(e,t)}function Tl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Tl(e,t,n,r)}function Nl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ol(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Nl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Pl(n.children,a,o,t);case _:s=8,a|=8;break;case C:return(e=Rl(12,n,t,2|a)).elementType=C,e.lanes=o,e;case T:return(e=Rl(13,n,t,a)).elementType=T,e.lanes=o,e;case R:return(e=Rl(19,n,t,a)).elementType=R,e.lanes=o,e;case O:return Fl(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case A:s=9;break e;case I:s=11;break e;case N:s=14;break e;case M:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rl(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Pl(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={},e}function Dl(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function Ll(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zl(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function jl(e,t,n,r,a,i,o,s,u){return e=new zl(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ni(i),e}function Bl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Wl(e){if(!e)return Aa;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ma(n))return Fa(e,n,t)}return t}function Ul(e,t,n,r,a,i,o,s,u){return(e=jl(n,r,!0,e,0,i,0,s,u)).context=Wl(null),n=e.current,(i=ai(r=Zu(),a=Qu(n))).callback=void 0!==t&&null!==t?t:null,ii(n,i),e.current.lanes=a,mt(e,a,r),nl(e,r),e}function Vl(e,t,n,r){var a=t.current,i=Zu(),o=Qu(a);return n=Wl(n),null===t.context?t.context=n:t.pendingContext=n,(t=ai(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ii(a,t),null!==(e=Ju(a,o,i))&&oi(e,a,o),o}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ql(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)ks=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ks=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),Bi();break;case 5:to(t);break;case 1:Ma(t.type)&&Da(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(Ga,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(Ea(ro,1&ro.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ea(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);ks=0!==(131072&e.flags)}else ks=!1,Mi&&0!==(1048576&t.flags)&&Ai(t,xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var a=Na(t,Ia.current);Qa(t,n),a=xo(null,t,r,e,a,n);var o=ko();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ma(r)?(o=!0,Da(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ni(t),a.updater=di,t.stateNode=a,a._reactInternals=t,gi(t,r,e,n),t=Rs(null,t,r,!0,o,n)):(t.tag=0,Mi&&o&&Ii(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Nl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=Ha(r,e),a){case 0:t=Is(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=_s(null,t,r,Ha(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Is(e,t,r,a=t.elementType===r?a:Ha(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ts(e,t,r,a=t.elementType===r?a:Ha(r,a),n);case 3:e:{if(Ns(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,ri(e,t),ui(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ms(e,t,r,n,a=Error(i(423)));break e}if(r!==a){t=Ms(e,t,r,n,a=Error(i(424)));break e}for(Ni=la(t.stateNode.containerInfo.firstChild),Ri=t,Mi=!0,Oi=null,n=Xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Bi(),r===a){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Li(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),As(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&Li(t),null;case 13:return Ds(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=qi(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Ss(e,t,r,a=t.elementType===r?a:Ha(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ea(Ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Ta.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=ai(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Za(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Za(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Qa(t,n),r=r(a=Ja(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=Ha(r=t.type,t.pendingProps),_s(e,t,r,a=Ha(r.type,a),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ha(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ma(r)?(e=!0,Da(t)):e=!1,Qa(t,n),pi(t,r,a),gi(t,r,a,n),Rs(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Es(e,t,n)}throw Error(i(156,t.tag))};var Xl="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function Kl(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ql(){}function Jl(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Hl(o);s.call(e)}}Vl(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Hl(o);i.call(e)}}var o=Ul(t,r,e,0,null,!1,0,"",Ql);return e._reactRootContainer=o,e[pa]=o.current,Ur(8===e.nodeType?e.parentNode:e),ll(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Hl(u);s.call(e)}}var u=jl(e,0,!1,null,0,!1,0,"",Ql);return e._reactRootContainer=u,e[pa]=u.current,Ur(8===e.nodeType?e.parentNode:e),ll((function(){Vl(t,u,n,r)})),u}(n,t,e,a,r);return Hl(o)}Kl.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Vl(e,t,null,null)},Kl.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ll((function(){Vl(null,e,null,null)})),t[pa]=null}},Kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),nl(t,Ze()),0===(6&Cu)&&(ju=Ze()+500,Ua()))}break;case 13:var r=Zu();ll((function(){return Ju(e,1,r)})),ql(e,1)}},wt=function(e){13===e.tag&&(Ju(e,134217728,Zu()),ql(e,134217728))},St=function(e){if(13===e.tag){var t=Zu(),n=Qu(e);Ju(e,n,t),ql(e,n)}},_t=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ka(r);if(!a)throw Error(i(90));X(r),Q(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ul,Te=ll;var ec={usingClientEntryPoint:!1,Events:[ba,xa,ka,Ee,Ae,ul]},tc={findFiberByHostInstance:ya,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{at=rc.inject(nc),it=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(i(200));return Bl(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(i(299));var n=!1,r="",a=Xl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=jl(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return ll(e)},t.hydrate=function(e,t,n){if(!Zl(t))throw Error(i(200));return Jl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Xl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Ul(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Ur(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Kl(t)},t.render=function(e,t,n){if(!Zl(t))throw Error(i(200));return Jl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zl(e))throw Error(i(40));return!!e._reactRootContainer&&(ll((function(){Jl(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jl(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},77:function(e){var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,a="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function i(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var s,u,l,c;if(Array.isArray(e)){if((s=e.length)!=o.length)return!1;for(u=s;0!==u--;)if(!i(e[u],o[u]))return!1;return!0}if(n&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(c=e.entries();!(u=c.next()).done;)if(!o.has(u.value[0]))return!1;for(c=e.entries();!(u=c.next()).done;)if(!i(u.value[1],o.get(u.value[0])))return!1;return!0}if(r&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(c=e.entries();!(u=c.next()).done;)if(!o.has(u.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((s=e.length)!=o.length)return!1;for(u=s;0!==u--;)if(e[u]!==o[u])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((s=(l=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(u=s;0!==u--;)if(!Object.prototype.hasOwnProperty.call(o,l[u]))return!1;if(t&&e instanceof Element)return!1;for(u=s;0!==u--;)if(("_owner"!==l[u]&&"__v"!==l[u]&&"__o"!==l[u]||!e.$$typeof)&&!i(e[l[u]],o[l[u]]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return i(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case i:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case v:case u:return e;default:return t}}case a:return t}}}function w(e){return k(e)===f}t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=i,t.Lazy=g,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return w(e)||k(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return k(e)===l},t.isContextProvider=function(e){return k(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===d},t.isFragment=function(e){return k(e)===i},t.isLazy=function(e){return k(e)===g},t.isMemo=function(e){return k(e)===v},t.isPortal=function(e){return k(e)===a},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===o},t.isSuspense=function(e){return k(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===f||e===s||e===o||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===m)},t.typeOf=k},441:function(e,t,n){"use strict";e.exports=n(372)},374:function(e,t,n){"use strict";var r=n(791),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var x=b.prototype=new y;x.constructor=b,v(x,m.prototype),x.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,a)&&!_.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+I(u,0):i,k(o)?(a="",null!=e&&(a=e.replace(A,"$&/")+"/"),T(o,t,a,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",k(e))for(var l=0;l<e.length;l++){var c=i+I(s=e[l],l);u+=T(s,t,a,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=T(s=s.value,t,a,c=i+I(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},O={transition:null},P={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=v({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)w.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>i(u,n))l<a&&0>i(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<a&&0>i(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],f=1,d=null,h=3,p=!1,v=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function k(e){if(g=!1,x(e),!v)if(null!==r(l))v=!0,O(w);else{var t=r(c);null!==t&&P(k,t.startTime-e)}}function w(e,n){v=!1,g&&(g=!1,y(E),E=-1),p=!0;var i=h;try{for(x(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!T());){var o=d.callback;if("function"===typeof o){d.callback=null,h=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&a(l),x(n)}else a(l);d=r(l)}if(null!==d)var u=!0;else{var f=r(c);null!==f&&P(k,f.startTime-n),u=!1}return u}finally{d=null,h=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,C=null,E=-1,A=5,I=-1;function T(){return!(t.unstable_now()-I<A)}function R(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?S():(_=!1,C=null)}}else _=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,M=N.port2;N.port1.onmessage=R,S=function(){M.postMessage(null)}}else S=function(){m(R,0)};function O(e){C=e,_||(_=!0,S())}function P(e,n){E=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(c,e),null===r(l)&&e===r(c)&&(g?(y(E),E=-1):g=!0,P(k,i-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,O(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},699:function(e,t,n){var r=n(501),a=n(112),i=n(132),o=n(890),s=n(113),u=n(725),l=n(411);l.alea=r,l.xor128=a,l.xorwow=i,l.xorshift7=o,l.xor4096=s,l.tychei=u,e.exports=l},501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},725:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},411:function(e,t,n){var r;!function(a,i,o){var s,u=256,l=o.pow(u,6),c=o.pow(2,52),f=2*c,d=255;function h(e,t,n){var r=[],d=m(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(i)]}}():e,3),r),h=new p(r),b=function(){for(var e=h.g(6),t=l,n=0;e<c;)e=(e+n)*u,t*=u,n=h.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|h.g(4)},b.quick=function(){return h.g(4)/4294967296},b.double=b,m(y(h.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,h),e.state=function(){return v(h,{})}),n?(o.random=e,t):e})(b,d,"global"in t?t.global:this==o,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=d&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=d&a+1],n=n*u+o[d&(o[a]=o[i=d&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(g(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(m(o.random(),i),e.exports){e.exports=h;try{s=n(42)}catch(b){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},458:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},134:function(e,t,n){"use strict";e.exports=n.p+"static/media/rdLogo.796f2055fda63ab2dcef.png"},410:function(){},628:function(){},601:function(){},792:function(){},977:function(){},798:function(){},767:function(){},251:function(){},677:function(){},543:function(){},324:function(){},42:function(){}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};__webpack_require__.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var a=Object.create(null);__webpack_require__.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){i[e]=function(){return n[e]}}));return i.default=function(){return n},__webpack_require__.d(a,i),a}}(),__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.p="/",__webpack_require__.nc=void 0;var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{browserFiles:function(){return cM},browserHTTPRequest:function(){return wM},concatenateArrayBuffers:function(){return iN},copyModel:function(){return KN},decodeWeights:function(){return JR},encodeWeights:function(){return ZR},fromMemory:function(){return AM},fromMemorySync:function(){return IM},getLoadHandlers:function(){return gN},getModelArtifactsForJSON:function(){return uN},getModelArtifactsInfoForJSON:function(){return cN},getSaveHandlers:function(){return vN},http:function(){return kM},isHTTPScheme:function(){return bM},listModels:function(){return GN},loadWeights:function(){return pM},moveModel:function(){return ZN},registerLoadRouter:function(){return pN},registerSaveRouter:function(){return hN},removeModel:function(){return XN},weightsLoaderFactory:function(){return gM},withSaveHandler:function(){return TM},withSaveHandlerSync:function(){return RM}});var t=__webpack_require__(791),n=__webpack_require__.t(t,2);var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),a=Math.abs,i=String.fromCharCode,o=Object.assign;function s(e){return e.trim()}function u(e,t,n){return e.replace(t,n)}function l(e,t){return e.indexOf(t)}function c(e,t){return 0|e.charCodeAt(t)}function f(e,t,n){return e.slice(t,n)}function d(e){return e.length}function h(e){return e.length}function p(e,t){return t.push(e),e}var v=1,g=1,m=0,y=0,b=0,x="";function k(e,t,n,r,a,i,o){return{value:e,root:t,parent:n,type:r,props:a,children:i,line:v,column:g,length:o,return:""}}function w(e,t){return o(k("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return b=y>0?c(x,--y):0,g--,10===b&&(g=1,v--),b}function _(){return b=y<m?c(x,y++):0,g++,10===b&&(g=1,v++),b}function C(){return c(x,y)}function E(){return y}function A(e,t){return f(x,e,t)}function I(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function T(e){return v=g=1,m=d(x=e),y=0,[]}function R(e){return x="",e}function N(e){return s(A(y-1,P(91===e?e+2:40===e?e+1:e)))}function M(e){for(;(b=C())&&b<33;)_();return I(e)>2||I(b)>3?"":" "}function O(e,t){for(;--t&&_()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return A(e,E()+(t<6&&32==C()&&32==_()))}function P(e){for(;_();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&P(b);break;case 40:41===e&&P(e);break;case 92:_()}return y}function F(e,t){for(;_()&&e+b!==57&&(e+b!==84||47!==C()););return"/*"+A(t,y-1)+"*"+i(47===e?e:_())}function D(e){for(;!I(C());)_();return A(e,y)}var L="-ms-",z="-moz-",j="-webkit-",B="comm",W="rule",U="decl",V="@keyframes";function H(e,t){for(var n="",r=h(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function G(e,t,n,r){switch(e.type){case"@import":case U:return e.return=e.return||e.value;case B:return"";case V:return e.return=e.value+"{"+H(e.children,r)+"}";case W:e.value=e.props.join(",")}return d(n=H(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e,t){switch(function(e,t){return(((t<<2^c(e,0))<<2^c(e,1))<<2^c(e,2))<<2^c(e,3)}(e,t)){case 5103:return j+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return j+e+z+e+L+e+e;case 6828:case 4268:return j+e+L+e+e;case 6165:return j+e+L+"flex-"+e+e;case 5187:return j+e+u(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return j+e+L+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return j+e+L+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return j+e+L+u(e,"shrink","negative")+e;case 5292:return j+e+L+u(e,"basis","preferred-size")+e;case 6060:return j+"box-"+u(e,"-grow","")+j+e+L+u(e,"grow","positive")+e;case 4554:return j+u(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,j+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(c(e,t+1)){case 109:if(45!==c(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+z+(108==c(e,t+3)?"$3":"$2-$3"))+e;case 115:return~l(e,"stretch")?q(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==c(e,t+1))break;case 6444:switch(c(e,d(e)-3-(~l(e,"!important")&&10))){case 107:return u(e,":",":"+j)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(45===c(e,14)?"inline-":"")+"box$3$1"+j+"$2$3$1"+L+"$2box$3")+e}break;case 5936:switch(c(e,t+11)){case 114:return j+e+L+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return j+e+L+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return j+e+L+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return j+e+L+e+e}return e}function X(e){return function(t){t.root||(t=t.return)&&e(t)}}function Y(e){return R(K("",null,null,null,[""],e=T(e),0,[0],e))}function K(e,t,n,r,a,o,s,c,f){for(var h=0,v=0,g=s,m=0,y=0,b=0,x=1,k=1,w=1,A=0,I="",T=a,R=o,P=r,L=I;k;)switch(b=A,A=_()){case 40:if(108!=b&&58==L.charCodeAt(g-1)){-1!=l(L+=u(N(A),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:L+=N(A);break;case 9:case 10:case 13:case 32:L+=M(b);break;case 92:L+=O(E()-1,7);continue;case 47:switch(C()){case 42:case 47:p(Z(F(_(),E()),t,n),f);break;default:L+="/"}break;case 123*x:c[h++]=d(L)*w;case 125*x:case 59:case 0:switch(A){case 0:case 125:k=0;case 59+v:y>0&&d(L)-g&&p(y>32?Q(L+";",r,n,g-1):Q(u(L," ","")+";",r,n,g-2),f);break;case 59:L+=";";default:if(p(P=$(L,t,n,h,v,a,c,I,T=[],R=[],g),o),123===A)if(0===v)K(L,t,P,P,T,o,g,c,R);else switch(m){case 100:case 109:case 115:K(e,P,P,r&&p($(e,P,P,0,0,a,c,I,a,T=[],g),R),a,R,g,c,r?T:R);break;default:K(L,P,P,P,[""],R,0,c,R)}}h=v=y=0,x=w=1,I=L="",g=s;break;case 58:g=1+d(L),y=b;default:if(x<1)if(123==A)--x;else if(125==A&&0==x++&&125==S())continue;switch(L+=i(A),A*x){case 38:w=v>0?1:(L+="\f",-1);break;case 44:c[h++]=(d(L)-1)*w,w=1;break;case 64:45===C()&&(L+=N(_())),m=C(),v=g=d(I=L+=D(E())),A++;break;case 45:45===b&&2==d(L)&&(x=0)}}return o}function $(e,t,n,r,i,o,l,c,d,p,v){for(var g=i-1,m=0===i?o:[""],y=h(m),b=0,x=0,w=0;b<r;++b)for(var S=0,_=f(e,g+1,g=a(x=l[b])),C=e;S<y;++S)(C=s(x>0?m[S]+" "+_:u(_,/&\f/g,m[S])))&&(d[w++]=C);return k(e,t,n,0===i?W:c,d,p,v)}function Z(e,t,n){return k(e,t,n,B,i(b),f(e,2,-2),0)}function Q(e,t,n,r){return k(e,t,n,U,f(e,0,r),f(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,a=0;r=a,a=C(),38===r&&12===a&&(t[n]=1),!I(a);)_();return A(e,y)},ee=function(e,t){return R(function(e,t){var n=-1,r=44;do{switch(I(r)){case 0:38===r&&12===C()&&(t[n]=1),e[n]+=J(y-1,t,n);break;case 2:e[n]+=N(r);break;case 4:if(44===r){e[++n]=58===C()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=i(r)}}while(r=_());return e}(T(e),t))},te=new WeakMap,ne=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||te.get(n))&&!r){te.set(e,!0);for(var a=[],i=ee(t,a),o=n.props,s=0,u=0;s<i.length;s++)for(var l=0;l<o.length;l++,u++)e.props[u]=a[s]?i[s].replace(/&\f/g,o[l]):o[l]+" "+i[s]}}},re=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},ae=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case U:e.return=q(e.value,e.length);break;case V:return H([w(e,{value:u(e.value,"@","@"+j)})],r);case W:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([w(e,{props:[u(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return H([w(e,{props:[u(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,L+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var a=e.stylisPlugins||ae;var i,o,s={},u=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;u.push(e)}));var l=[ne,re];var c,f=[G,X((function(e){c.insert(e)}))],d=function(e){var t=h(e);return function(n,r,a,i){for(var o="",s=0;s<t;s++)o+=e[s](n,r,a,i)||"";return o}}(l.concat(a,f));o=function(e,t,n,r){c=n,function(e){H(Y(e),d)}(e?e+"{"+t.styles+"}":t.styles),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return p.sheet.hydrate(u),p};function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oe.apply(this,arguments)}var se=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}};var ue=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},le={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var ce=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},fe=/[A-Z]|^ms/g,de=/_EMO_([^_]+?)_([^]*?)_EMO_/g,he=function(e){return 45===e.charCodeAt(1)},pe=function(e){return null!=e&&"boolean"!==typeof e},ve=ce((function(e){return he(e)?e:e.replace(fe,"-$&").toLowerCase()})),ge=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(de,(function(e,t,n){return ye={name:t,styles:n,next:ye},t}))}return 1===le[e]||he(e)||"number"!==typeof t||0===t?t:t+"px"};function me(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return ye={name:n.name,styles:n.styles,next:ye},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)ye={name:r.name,styles:r.styles,next:ye},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=me(e,t,n[a])+";";else for(var i in n){var o=n[i];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=i+"{"+t[o]+"}":pe(o)&&(r+=ve(i)+":"+ge(i,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=me(e,t,o);switch(i){case"animation":case"animationName":r+=ve(i)+":"+s+";";break;default:r+=i+"{"+s+"}"}}else for(var u=0;u<o.length;u++)pe(o[u])&&(r+=ve(i)+":"+ge(i,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=ye,i=n(e);return ye=a,me(e,t,i)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var ye,be=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var xe=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,a="";ye=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,a+=me(n,t,i)):a+=i[0];for(var o=1;o<e.length;o++)a+=me(n,t,e[o]),r&&(a+=i[o]);be.lastIndex=0;for(var s,u="";null!==(s=be.exec(a));)u+="-"+s[1];return{name:ue(a)+u,styles:a,next:ye}},ke=(0,t.createContext)("undefined"!==typeof HTMLElement?ie({key:"css"}):null);ke.Provider;var we=function(e){return(0,t.forwardRef)((function(n,r){var a=(0,t.useContext)(ke);return e(n,a,r)}))},Se=(0,t.createContext)({});var _e=se((function(e){return se((function(t){return function(e,t){return"function"===typeof t?t(e):oe({},e,t)}(e,t)}))})),Ce=function(e){var n=(0,t.useContext)(Se);return e.theme!==n&&(n=_e(n)(e.theme)),(0,t.createElement)(Se.Provider,{value:n},e.children)};n.useInsertionEffect&&n.useInsertionEffect;__webpack_require__(110);function Ee(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var Ae=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Ie=function(e,t,n){Ae(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0);a=a.next}while(void 0!==a)}},Te=n.useInsertionEffect?n.useInsertionEffect:t.useLayoutEffect,Re=we((function(e,n){var r=e.styles,a=xe([r],void 0,(0,t.useContext)(Se)),i=(0,t.useRef)();return Te((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,o=document.querySelector('style[data-emotion="'+e+" "+a.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==o&&(r=!0,o.setAttribute("data-emotion",e),t.hydrate([o])),i.current=[t,r],function(){t.flush()}}),[n]),Te((function(){var e=i.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==a.next&&Ie(n,a.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",a,t,!1)}}),[n,a.name]),null}));function Ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xe(t)}var Me=function(){var e=Ne.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Oe=function(){return t.createElement(Re,{styles:'\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        font-feature-settings: \'kern\';\n      }\n\n      *,\n      *::before,\n      *::after {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n      }\n\n      main {\n        display: block;\n      }\n\n      hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      pre,\n      code,\n      kbd,\n      samp {\n        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      b,\n      strong {\n        font-weight: bold;\n      }\n\n      small {\n        font-size: 80%;\n      }\n\n      sub,\n      sup {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      sub {\n        bottom: -0.25em;\n      }\n\n      sup {\n        top: -0.5em;\n      }\n\n      img {\n        border-style: none;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      button,\n      input {\n        overflow: visible;\n      }\n\n      button,\n      select {\n        text-transform: none;\n      }\n\n      button::-moz-focus-inner,\n      [type="button"]::-moz-focus-inner,\n      [type="reset"]::-moz-focus-inner,\n      [type="submit"]::-moz-focus-inner {\n        border-style: none;\n        padding: 0;\n      }\n\n      fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      progress {\n        vertical-align: baseline;\n      }\n\n      textarea {\n        overflow: auto;\n      }\n\n      [type="checkbox"],\n      [type="radio"] {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      [type="number"]::-webkit-inner-spin-button,\n      [type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      [type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      [type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      details {\n        display: block;\n      }\n\n      summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      body,\n      blockquote,\n      dl,\n      dd,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6,\n      hr,\n      figure,\n      p,\n      pre {\n        margin: 0;\n      }\n\n      button {\n        background: transparent;\n        padding: 0;\n      }\n\n      fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      ol,\n      ul {\n        margin: 0;\n        padding: 0;\n      }\n\n      textarea {\n        resize: vertical;\n      }\n\n      button,\n      [role="button"] {\n        cursor: pointer;\n      }\n\n      button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      table {\n        border-collapse: collapse;\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      img,\n      svg,\n      video,\n      canvas,\n      audio,\n      iframe,\n      embed,\n      object {\n        display: block;\n      }\n\n      img,\n      video {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible] :focus:not([data-focus-visible-added]):not([data-focus-visible-disabled]) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      select::-ms-expand {\n        display: none;\n      }\n    '})},Pe=__webpack_require__(198),Fe=__webpack_require__.n(Pe),De=1/60*1e3,Le="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()};function ze(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function je(e,t){return[].concat(e,[t])}function Be(e){return"number"===typeof e}function We(e){return Array.isArray(e)}function Ue(e){return"function"===typeof e}function Ve(e){return"undefined"===typeof e||void 0===e}function He(e){var t=typeof e;return null!=e&&("object"===t||"function"===t)&&!We(e)}function Ge(e){return He(e)&&0===Object.keys(e).length}function qe(e){return"[object String]"===Object.prototype.toString.call(e)}function Xe(e){return/^var\(--.+\)$/.test(e)}var Ye=!1;function Ke(e){return e&&He(e)&&He(e.target)}function $e(e,t){var n={};return Object.keys(e).forEach((function(r){t.includes(r)||(n[r]=e[r])})),n}var Ze=function(e){var t=new WeakMap;return function(n,r,a,i){if("undefined"===typeof n)return e(n,r,a);t.has(n)||t.set(n,new Map);var o=t.get(n);if(o.has(r))return o.get(r);var s=e(n,r,a,i);return o.set(r,s),s}}((function(e,t,n,r){var a="string"===typeof t?t.split("."):[t];for(r=0;r<a.length&&e;r+=1)e=e[a[r]];return void 0===e?n:e}));function Qe(e,t){var n={};return Object.keys(e).forEach((function(r){var a=e[r];t(a,r,e)&&(n[r]=a)})),n}var Je=function(e){return Qe(e,(function(e){return null!==e&&void 0!==e}))},et=function(e){return Object.keys(e)},tt=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})};function nt(e){if(null==e)return e;var t=function(e){var t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}(e);return t.unitless||Be(e)?e+"px":e}var rt=function(e,t){return parseInt(e[1],10)>parseInt(t[1],10)?1:-1},at=function(e){return tt(Object.entries(e).sort(rt))};function it(e){var t=at(e);return Object.assign(Object.values(t),t)}function ot(e){var t;if(!e)return e;var n=(e=null!=(t=nt(e))?t:e).endsWith("px")?-1:-.0635;return Be(e)?""+(e+n):e.replace(/([0-9]+\.?[0-9]*)/,(function(e){return""+(parseFloat(e)+n)}))}function st(e,t){var n=["@media screen"];return e&&n.push("and","(min-width: "+nt(e)+")"),t&&n.push("and","(max-width: "+nt(t)+")"),n.join(" ")}function ut(e){var t;if(!e)return null;e.base=null!=(t=e.base)?t:"0px";var n=it(e),r=Object.entries(e).sort(rt).map((function(e,t,n){var r,a=e[0],i=e[1],o=(null!=(r=n[t+1])?r:[])[1];return o=parseFloat(o)>0?ot(o):void 0,{_minW:ot(i),breakpoint:a,minW:i,maxW:o,maxWQuery:st(null,o),minWQuery:st(i),minMaxQuery:st(i,o)}})),a=function(e){var t=Object.keys(at(e));return new Set(t)}(e),i=Array.from(a.values());return{keys:a,normalized:n,isResponsive:function(e){var t=Object.keys(e);return t.length>0&&t.every((function(e){return a.has(e)}))},asObject:at(e),asArray:it(e),details:r,media:[null].concat(n.map((function(e){return st(e)})).slice(1)),toArrayValue:function(e){if(!He(e))throw new Error("toArrayValue: value must be an object");for(var t=i.map((function(t){var n;return null!=(n=e[t])?n:null}));null===ze(t);)t.pop();return t},toObjectValue:function(e){if(!Array.isArray(e))throw new Error("toObjectValue: value must be an array");return e.reduce((function(e,t,n){var r=i[n];return null!=r&&null!=t&&(e[r]=t),e}),{})}}}function lt(e){return null!=e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function ct(e){var t;return!!lt(e)&&e instanceof(null!=(t=e.ownerDocument.defaultView)?t:window).HTMLElement}function ft(e){var t;return lt(e)&&null!=(t=e.ownerDocument)?t:document}var dt=!("undefined"===typeof window||!window.document||!window.document.createElement),ht=function(e){return e?"":void 0},pt=function(e){return!!e||void 0},vt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")};var gt=function(e){return e.hasAttribute("tabindex")};function mt(e){return(ct(e)?ft(e):document).activeElement===e}function yt(e){return!(!e.parentElement||!yt(e.parentElement))||e.hidden}function bt(e){if(!ct(e)||yt(e)||function(e){return!0===Boolean(e.getAttribute("disabled"))||!0===Boolean(e.getAttribute("aria-disabled"))}(e))return!1;var t=e.localName;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;var n={a:function(){return e.hasAttribute("href")},audio:function(){return e.hasAttribute("controls")},video:function(){return e.hasAttribute("controls")}};return t in n?n[t]():!!function(e){var t=e.getAttribute("contenteditable");return"false"!==t&&null!=t}(e)||gt(e)}var xt=["input:not([disabled])","select:not([disabled])","textarea:not([disabled])","embed","iframe","object","a[href]","area[href]","button:not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"].join();function kt(e){var t=Array.from(e.querySelectorAll(xt));return t.unshift(e),t.filter(bt).filter((function(e){return"none"!==window.getComputedStyle(e).display}))}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function St(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ue(e)?e.apply(void 0,n):e}function Ct(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.some((function(t){return null==t||t(e),null==e?void 0:e.defaultPrevented}))}}function Et(e){var t;return function(){if(e){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];t=e.apply(this,r),e=null}return t}}var At=function(){},It=Et((function(e){return function(){e.condition,e.message}})),Tt=(Et((function(e){return function(){e.condition,e.message}})),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}});function Rt(e,t){void 0===t&&(t={});var n=t,r=n.isActive,a=void 0===r?mt:r,i=n.nextTick,o=n.preventScroll,s=void 0===o||o,u=n.selectTextIfInput,l=void 0===u||u;if(!e||a(e))return-1;function c(){if(e){if(function(){if(null==Nt){Nt=!1;try{document.createElement("div").focus({get preventScroll(){return Nt=!0,!0}})}catch(e){}}return Nt}())e.focus({preventScroll:s});else if(e.focus(),s){var t=function(e){var t,n=ft(e),r=null!=(t=n.defaultView)?t:window,a=e.parentNode,i=[],o=n.scrollingElement||n.documentElement;for(;a instanceof r.HTMLElement&&a!==o;)(a.offsetHeight<a.scrollHeight||a.offsetWidth<a.scrollWidth)&&i.push({element:a,scrollTop:a.scrollTop,scrollLeft:a.scrollLeft}),a=a.parentNode;o instanceof r.HTMLElement&&i.push({element:o,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft});return i}(e);!function(e){for(var t,n=St(e);!(t=n()).done;){var r=t.value,a=r.element,i=r.scrollTop,o=r.scrollLeft;a.scrollTop=i,a.scrollLeft=o}}(t)}if(l)if(function(e){return ct(e)&&"input"===e.localName&&"select"in e}(e))e.select();else if("setSelectionRange"in e){var n=e;n.setSelectionRange(n.value.length,n.value.length)}}else It({condition:!0,message:"[chakra-ui]: can't call focus() on `null` or `undefined` element"})}return i?requestAnimationFrame(c):(c(),-1)}var Nt=null;function Mt(e,t){return void 0===t&&(t=1/0),(He(e)||Array.isArray(e))&&t?Object.entries(e).reduce((function(e,n){var r=n[0],a=n[1];return He(a)||We(a)?Object.entries(Mt(a,t-1)).forEach((function(t){var n=t[0],a=t[1];e[r+"."+n]=a})):e[r]=a,e}),{}):e}Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER;Object.freeze(["base","sm","md","lg","xl","2xl"]);function Ot(e,t){return We(e)?e.map((function(e){return null===e?null:t(e)})):He(e)?et(e).reduce((function(n,r){return n[r]=t(e[r]),n}),{}):null!=e?t(e):null}function Pt(e,t){if(null!=e)if(Ue(e))e(t);else try{e.current=t}catch(n){throw new Error("Cannot assign value '"+t+"' to ref '"+e+"'")}}function Ft(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){return Pt(t,e)}))}}function Dt(e){void 0===e&&(e={});var n=e,r=n.strict,a=void 0===r||r,i=n.errorMessage,o=void 0===i?"useContext: `context` is undefined. Seems you forgot to wrap component within the Provider":i,s=n.name,u=t.createContext(void 0);return u.displayName=s,[u.Provider,function e(){var n=t.useContext(u);if(!n&&a){var r=new Error(o);throw r.name="ContextError",null==Error.captureStackTrace||Error.captureStackTrace(r,e),r}return n},u]}function Lt(e){return t.Children.toArray(e).filter((function(e){return t.isValidElement(e)}))}var zt=dt?t.useLayoutEffect:t.useEffect;function jt(e,n){void 0===n&&(n=[]);var r=t.useRef(e);return zt((function(){r.current=e})),t.useCallback((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==r.current?void 0:r.current.apply(r,t)}),n)}__webpack_require__(998);function Bt(e){void 0===e&&(e=!1);var n=(0,t.useState)(e),r=n[0],a=n[1],i=(0,t.useMemo)((function(){return{on:function(){return a(!0)},off:function(){return a(!1)},toggle:function(){return a((function(e){return!e}))}}}),[]);return[r,i]}function Wt(e,t){var n=void 0!==e;return[n,n&&"undefined"!==typeof e?e:t]}function Ut(e){var n=e.value,r=e.defaultValue,a=e.onChange,i=e.shouldUpdate,o=void 0===i?function(e,t){return e!==t}:i,s=jt(a),u=jt(o),l=t.useState(r),c=l[0],f=l[1],d=void 0!==n,h=d?n:c,p=t.useCallback((function(e){var t=_t(e,h);u(h,t)&&(d||f(t),s(t))}),[d,s,h,u]);return[h,p]}function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}function Ht(e,n){var r=t.useId();return t.useMemo((function(){return e||[n,r].filter(Boolean).join("-")}),[e,n,r])}function Gt(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=Ht(e);return t.useMemo((function(){return r.map((function(e){return e+"-"+i}))}),[i,r])}function qt(e){void 0===e&&(e={});var n=e,r=n.onClose,a=n.onOpen,i=n.isOpen,o=n.id,s=jt(a),u=jt(r),l=t.useState(e.defaultIsOpen||!1),c=l[0],f=l[1],d=Wt(i,c),h=d[0],p=d[1],v=Ht(o,"disclosure"),g=t.useCallback((function(){h||f(!1),null==u||u()}),[h,u]),m=t.useCallback((function(){h||f(!0),null==s||s()}),[h,s]),y=t.useCallback((function(){(p?g:m)()}),[p,m,g]);return{isOpen:!!p,onOpen:m,onClose:g,onToggle:y,isControlled:h,getButtonProps:function(e){return void 0===e&&(e={}),Vt({},e,{"aria-expanded":p,"aria-controls":v,onClick:Ct(e.onClick,y)})},getDisclosureProps:function(e){return void 0===e&&(e={}),Vt({},e,{hidden:!p,id:v})}}}var Xt=function(e,n){var r=t.useRef(!1),a=t.useRef(!1);t.useEffect((function(){if(r.current&&a.current)return e();a.current=!0}),n),t.useEffect((function(){return r.current=!0,function(){r.current=!1}}),[])};function Yt(e,n){return void 0===n&&(n=[]),t.useEffect((function(){return function(){return e()}}),n)}function Kt(){var e=t.useRef(!1),n=t.useState(0),r=n[0],a=n[1];return Yt((function(){e.current=!0})),t.useCallback((function(){e.current||a(r+1)}),[r])}function $t(e,t){if(null!=e)if("function"!==typeof e)try{e.current=t}catch(n){throw new Error("Cannot assign value '"+t+"' to ref '"+e+"'")}else e(t)}function Zt(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.useMemo((function(){return n.every((function(e){return null==e}))?null:function(e){n.forEach((function(t){t&&$t(t,e)}))}}),n)}var Qt=__webpack_require__(164),Jt=Dt({strict:!1,name:"PortalManagerContext"}),en=Jt[0],tn=Jt[1];function nn(e){var n=e.children,r=e.zIndex;return t.createElement(en,{value:{zIndex:r}},n)}function rn(){return rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rn.apply(this,arguments)}var an=["containerRef"],on=Dt({strict:!1,name:"PortalContext"}),sn=on[0],un=on[1],ln="chakra-portal",cn=function(e){return t.createElement("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0}},e.children)},fn=function(e){var n=e.appendToParentPortal,r=e.children,a=t.useRef(null),i=t.useRef(null),o=Kt(),s=un(),u=tn();zt((function(){if(a.current){var e=a.current.ownerDocument,t=n&&null!=s?s:e.body;if(t){i.current=e.createElement("div"),i.current.className=ln,t.appendChild(i.current),o();var r=i.current;return function(){t.contains(r)&&t.removeChild(r)}}}}),[]);var l=null!=u&&u.zIndex?t.createElement(cn,{zIndex:null==u?void 0:u.zIndex},r):r;return i.current?(0,Qt.createPortal)(t.createElement(sn,{value:i.current},l),i.current):t.createElement("span",{ref:a})},dn=function(e){var n=e.children,r=e.containerRef,a=e.appendToParentPortal,i=r.current,o=null!=i?i:dt?document.body:void 0,s=t.useMemo((function(){var e=null==i?void 0:i.ownerDocument.createElement("div");return e&&(e.className=ln),e}),[i]),u=Kt();return zt((function(){u()}),[]),zt((function(){if(s&&o)return o.appendChild(s),function(){o.removeChild(s)}}),[s,o]),o&&s?(0,Qt.createPortal)(t.createElement(sn,{value:a?s:null},n),s):null};function hn(e){var n=e.containerRef,r=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,an);return n?t.createElement(dn,rn({containerRef:n},r)):t.createElement(fn,r)}hn.defaultProps={appendToParentPortal:!0},hn.className=ln,hn.selector=".chakra-portal";var pn="chakra-ui-light",vn="chakra-ui-dark";var gn="chakra-ui-color-mode";var mn,yn=(mn=gn,{ssr:!1,type:"localStorage",get:function(e){if(!dt)return e;var t;try{t=localStorage.getItem(mn)||e}catch(n){}return t||e},set:function(e){try{localStorage.setItem(mn,e)}catch(t){}}});function bn(e,t){var n=e.match(new RegExp("(^| )"+t+"=([^;]+)"));return null==n?void 0:n[2]}function xn(e,t){return{ssr:!!t,type:"cookie",get:function(n){return t?bn(t,e):dt&&bn(document.cookie,e)||n},set:function(t){document.cookie=e+"="+t+"; max-age=31536000; path=/"}}}xn(gn);var kn=t.createContext({});function wn(){var e=t.useContext(kn);if(void 0===e)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function Sn(e,t){return"cookie"===e.type&&e.ssr?e.get(t):t}function _n(e){var n=e.value,r=e.children,a=e.options,i=(a=void 0===a?{}:a).useSystemColorMode,o=a.initialColorMode,s=a.disableTransitionOnChange,u=e.colorModeManager,l=void 0===u?yn:u,c="dark"===o?"dark":"light",f=t.useState((function(){return Sn(l,c)})),d=f[0],h=f[1],p=t.useState((function(){return Sn(l)})),v=p[0],g=p[1],m=t.useMemo((function(){return function(e){void 0===e&&(e={});var t=e.preventTransition,n=void 0===t||t,r={setDataset:function(e){var t=n?r.preventTransition():void 0;document.documentElement.dataset.theme=e,document.documentElement.style.colorScheme=e,null==t||t()},setClassName:function(e){document.body.classList.add(e?vn:pn),document.body.classList.remove(e?pn:vn)},query:function(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme:function(e){var t;return(null!=(t=r.query().matches)?t:"dark"===e)?"dark":"light"},addListener:function(e){var t=r.query(),n=function(t){e(t.matches?"dark":"light")};return t.addEventListener("change",n),function(){return t.removeEventListener("change",n)}},preventTransition:function(){var e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),function(){window.getComputedStyle(document.body),requestAnimationFrame((function(){requestAnimationFrame((function(){document.head.removeChild(e)}))}))}}};return r}({preventTransition:s})}),[s]),y=m.getSystemTheme,b=m.setClassName,x=m.setDataset,k=m.addListener,w="system"!==o||d?d:v,S=t.useCallback((function(e){var t="system"===e?y():e;h(t),b("dark"===t),x(t),l.set(t)}),[l,y,b,x]);zt((function(){"system"===o&&g(y())}),[]),zt((function(){var e=l.get();S(e||("system"!==o?c:"system"))}),[l,c,o,y]);var _=t.useCallback((function(){S("dark"===w?"light":"dark")}),[w,S]);t.useEffect((function(){if(i)return k(S)}),[i,k,S]);var C=t.useMemo((function(){return{colorMode:null!=n?n:w,toggleColorMode:n?At:_,setColorMode:n?At:S}}),[w,_,S,n]);return t.createElement(kn.Provider,{value:C},r)}var Cn=new Set(["dark","light","system"]);function En(e){void 0===e&&(e={});var t=e,n=t.initialColorMode,r=void 0===n?"light":n,a=t.type,i=void 0===a?"localStorage":a,o=t.storageKey,s=void 0===o?"chakra-ui-color-mode":o,u=function(e){var t=e;return Cn.has(t)||(t="light"),t}(r);return("!"+("cookie"===i?'(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,m=document.body,i="chakra-ui-light",n="chakra-ui-dark",s=e==="dark";return m.classList.add(s?n:i),m.classList.remove(s?i:n),d.style.colorScheme=e,d.dataset.theme=e,e},u=a,h="'+u+'",r="'+s+'",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();\n  ':'(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,s=document.body,l="chakra-ui-light",d="chakra-ui-dark",i=r==="dark";return s.classList.add(i?d:l),s.classList.remove(i?l:d),o.style.colorScheme=r,o.dataset.theme=r,r},n=a,m="'+u+'",e="'+s+'",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();\n  ')).trim()}function An(e){return void 0===e&&(e={}),t.createElement("script",{id:"chakra-script",dangerouslySetInnerHTML:{__html:En(e)}})}function In(){return In=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},In.apply(this,arguments)}var Tn=function(e){return qe(e)?e.replace(/!(important)?$/,"").trim():e},Rn=function(e,t){return function(n){var r=String(t),a=function(e){return/!(important)?$/.test(e)}(r),i=Tn(r),o=e?e+"."+i:i,s=He(n.__cssMap)&&o in n.__cssMap?n.__cssMap[o].varRef:t;return s=Tn(s),a?s+" !important":s}};function Nn(e){var t=e.scale,n=e.transform,r=e.compose;return function(e,a){var i,o=Rn(t,e)(a),s=null!=(i=null==n?void 0:n(o,a))?i:o;return r&&(s=r(s,a)),s}}function Mn(e,t){return function(n){var r={property:n,scale:e};return r.transform=Nn({scale:e,transform:t}),r}}var On,Pn,Fn=function(e){var t=e.rtl,n=e.ltr;return function(e){return"rtl"===e.direction?t:n}};var Dn=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];var Ln={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},zn={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};var jn={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},Bn="& > :not(style) ~ :not(style)",Wn=((On={})[Bn]={marginInlineStart:"calc(var(--chakra-space-x) * calc(1 - var(--chakra-space-x-reverse)))",marginInlineEnd:"calc(var(--chakra-space-x) * var(--chakra-space-x-reverse))"},On),Un=((Pn={})[Bn]={marginTop:"calc(var(--chakra-space-y) * calc(1 - var(--chakra-space-y-reverse)))",marginBottom:"calc(var(--chakra-space-y) * var(--chakra-space-y-reverse))"},Pn);function Vn(e,t){return Vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vn(e,t)}function Hn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vn(e,t)}function Gn(){Gn=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,a){var i=new RegExp(e,r);return t.set(i,a||t.get(e)),Vn(i,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){return t[n]=e[r[n]],t}),Object.create(null))}return Hn(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);return n&&(n.groups=r(n,this)),n},n.prototype[Symbol.replace]=function(n,a){if("string"==typeof a){var i=t.get(this);return e[Symbol.replace].call(this,n,a.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+i[t]})))}if("function"==typeof a){var o=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(r(e,o)),a.apply(this,e)}))}return e[Symbol.replace].call(this,n,a)},Gn.apply(this,arguments)}var qn={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},Xn=new Set(Object.values(qn)),Yn=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),Kn=function(e){return e.trim()};var $n=function(e){return qe(e)&&e.includes("(")&&e.includes(")")},Zn=function(e){return function(t){return e+"("+t+")"}},Qn={filter:function(e){return"auto"!==e?e:Ln},backdropFilter:function(e){return"auto"!==e?e:zn},ring:function(e){return function(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(Qn.px(e))},bgClip:function(e){return"text"===e?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform:function(e){return"auto"===e?["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))"].concat(Dn).join(" "):"auto-gpu"===e?["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)"].concat(Dn).join(" "):e},px:function(e){if(null==e)return e;var t=function(e){var t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}(e);return t.unitless||Be(e)?e+"px":e},fraction:function(e){return!Be(e)||e>1?e:100*e+"%"},float:function(e,t){return"rtl"===t.direction?{left:"right",right:"left"}[e]:e},degree:function(e){if(Xe(e)||null==e)return e;var t=qe(e)&&!e.endsWith("deg");return Be(e)||t?e+"deg":e},gradient:function(e,t){return function(e,t){var n,r;if(null==e||Yn.has(e))return e;var a=null!=(n=null==(r=Gn(/(^[a-z-A-Z]+)\(((.*))\)/g,{type:1,values:2}).exec(e))?void 0:r.groups)?n:{},i=a.type,o=a.values;if(!i||!o)return e;var s=i.includes("-gradient")?i:i+"-gradient",u=o.split(",").map(Kn).filter(Boolean),l=u[0],c=u.slice(1);if(0===(null==c?void 0:c.length))return e;var f=l in qn?qn[l]:l;c.unshift(f);var d=c.map((function(e){if(Xn.has(e))return e;var n=e.indexOf(" "),r=-1!==n?[e.substr(0,n),e.substr(n+1)]:[e],a=r[0],i=r[1],o=$n(i)?i:i&&i.split(" "),s="colors."+a,u=s in t.__cssMap?t.__cssMap[s].varRef:a;return o?[u].concat(Array.isArray(o)?o:[o]).join(" "):u}));return s+"("+d.join(", ")+")"}(e,null!=t?t:{})},blur:Zn("blur"),opacity:Zn("opacity"),brightness:Zn("brightness"),contrast:Zn("contrast"),dropShadow:Zn("drop-shadow"),grayscale:Zn("grayscale"),hueRotate:Zn("hue-rotate"),invert:Zn("invert"),saturate:Zn("saturate"),sepia:Zn("sepia"),bgImage:function(e){return null==e||$n(e)||Yn.has(e)?e:"url("+e+")"},outline:function(e){var t="0"===String(e)||"none"===String(e);return null!==e&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection:function(e){var t,n=null!=(t=jn[e])?t:{},r=n.space,a=n.divide,i={flexDirection:e};return r&&(i[r]=1),a&&(i[a]=1),i}},Jn={borderWidths:Mn("borderWidths"),borderStyles:Mn("borderStyles"),colors:Mn("colors"),borders:Mn("borders"),radii:Mn("radii",Qn.px),space:Mn("space",Qn.px),spaceT:Mn("space",Qn.px),degreeT:function(e){return{property:e,transform:Qn.degree}},prop:function(e,t,n){return In({property:e,scale:t},t&&{transform:Nn({scale:t,transform:n})})},propT:function(e,t){return{property:e,transform:t}},sizes:Mn("sizes",Qn.px),sizesT:Mn("sizes",Qn.fraction),shadows:Mn("shadows"),logical:function(e){var t=e.property,n=e.scale,r=e.transform;return{scale:n,property:Fn(t),transform:n?Nn({scale:n,compose:r}):r}},blur:Mn("blur",Qn.blur)},er={background:Jn.colors("background"),backgroundColor:Jn.colors("backgroundColor"),backgroundImage:Jn.propT("backgroundImage",Qn.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Qn.bgClip},bgSize:Jn.prop("backgroundSize"),bgPosition:Jn.prop("backgroundPosition"),bg:Jn.colors("background"),bgColor:Jn.colors("backgroundColor"),bgPos:Jn.prop("backgroundPosition"),bgRepeat:Jn.prop("backgroundRepeat"),bgAttachment:Jn.prop("backgroundAttachment"),bgGradient:Jn.propT("backgroundImage",Qn.gradient),bgClip:{transform:Qn.bgClip}};Object.assign(er,{bgImage:er.backgroundImage,bgImg:er.backgroundImage});var tr={border:Jn.borders("border"),borderWidth:Jn.borderWidths("borderWidth"),borderStyle:Jn.borderStyles("borderStyle"),borderColor:Jn.colors("borderColor"),borderRadius:Jn.radii("borderRadius"),borderTop:Jn.borders("borderTop"),borderBlockStart:Jn.borders("borderBlockStart"),borderTopLeftRadius:Jn.radii("borderTopLeftRadius"),borderStartStartRadius:Jn.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Jn.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Jn.radii("borderTopRightRadius"),borderStartEndRadius:Jn.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Jn.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Jn.borders("borderRight"),borderInlineEnd:Jn.borders("borderInlineEnd"),borderBottom:Jn.borders("borderBottom"),borderBlockEnd:Jn.borders("borderBlockEnd"),borderBottomLeftRadius:Jn.radii("borderBottomLeftRadius"),borderBottomRightRadius:Jn.radii("borderBottomRightRadius"),borderLeft:Jn.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Jn.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Jn.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Jn.borders(["borderLeft","borderRight"]),borderInline:Jn.borders("borderInline"),borderY:Jn.borders(["borderTop","borderBottom"]),borderBlock:Jn.borders("borderBlock"),borderTopWidth:Jn.borderWidths("borderTopWidth"),borderBlockStartWidth:Jn.borderWidths("borderBlockStartWidth"),borderTopColor:Jn.colors("borderTopColor"),borderBlockStartColor:Jn.colors("borderBlockStartColor"),borderTopStyle:Jn.borderStyles("borderTopStyle"),borderBlockStartStyle:Jn.borderStyles("borderBlockStartStyle"),borderBottomWidth:Jn.borderWidths("borderBottomWidth"),borderBlockEndWidth:Jn.borderWidths("borderBlockEndWidth"),borderBottomColor:Jn.colors("borderBottomColor"),borderBlockEndColor:Jn.colors("borderBlockEndColor"),borderBottomStyle:Jn.borderStyles("borderBottomStyle"),borderBlockEndStyle:Jn.borderStyles("borderBlockEndStyle"),borderLeftWidth:Jn.borderWidths("borderLeftWidth"),borderInlineStartWidth:Jn.borderWidths("borderInlineStartWidth"),borderLeftColor:Jn.colors("borderLeftColor"),borderInlineStartColor:Jn.colors("borderInlineStartColor"),borderLeftStyle:Jn.borderStyles("borderLeftStyle"),borderInlineStartStyle:Jn.borderStyles("borderInlineStartStyle"),borderRightWidth:Jn.borderWidths("borderRightWidth"),borderInlineEndWidth:Jn.borderWidths("borderInlineEndWidth"),borderRightColor:Jn.colors("borderRightColor"),borderInlineEndColor:Jn.colors("borderInlineEndColor"),borderRightStyle:Jn.borderStyles("borderRightStyle"),borderInlineEndStyle:Jn.borderStyles("borderInlineEndStyle"),borderTopRadius:Jn.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Jn.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Jn.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Jn.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(tr,{rounded:tr.borderRadius,roundedTop:tr.borderTopRadius,roundedTopLeft:tr.borderTopLeftRadius,roundedTopRight:tr.borderTopRightRadius,roundedTopStart:tr.borderStartStartRadius,roundedTopEnd:tr.borderStartEndRadius,roundedBottom:tr.borderBottomRadius,roundedBottomLeft:tr.borderBottomLeftRadius,roundedBottomRight:tr.borderBottomRightRadius,roundedBottomStart:tr.borderEndStartRadius,roundedBottomEnd:tr.borderEndEndRadius,roundedLeft:tr.borderLeftRadius,roundedRight:tr.borderRightRadius,roundedStart:tr.borderInlineStartRadius,roundedEnd:tr.borderInlineEndRadius,borderStart:tr.borderInlineStart,borderEnd:tr.borderInlineEnd,borderTopStartRadius:tr.borderStartStartRadius,borderTopEndRadius:tr.borderStartEndRadius,borderBottomStartRadius:tr.borderEndStartRadius,borderBottomEndRadius:tr.borderEndEndRadius,borderStartRadius:tr.borderInlineStartRadius,borderEndRadius:tr.borderInlineEndRadius,borderStartWidth:tr.borderInlineStartWidth,borderEndWidth:tr.borderInlineEndWidth,borderStartColor:tr.borderInlineStartColor,borderEndColor:tr.borderInlineEndColor,borderStartStyle:tr.borderInlineStartStyle,borderEndStyle:tr.borderInlineEndStyle});var nr={color:Jn.colors("color"),textColor:Jn.colors("color"),fill:Jn.colors("fill"),stroke:Jn.colors("stroke")},rr={boxShadow:Jn.shadows("boxShadow"),mixBlendMode:!0,blendMode:Jn.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Jn.prop("backgroundBlendMode"),opacity:!0};Object.assign(rr,{shadow:rr.boxShadow});var ar={filter:{transform:Qn.filter},blur:Jn.blur("--chakra-blur"),brightness:Jn.propT("--chakra-brightness",Qn.brightness),contrast:Jn.propT("--chakra-contrast",Qn.contrast),hueRotate:Jn.degreeT("--chakra-hue-rotate"),invert:Jn.propT("--chakra-invert",Qn.invert),saturate:Jn.propT("--chakra-saturate",Qn.saturate),dropShadow:Jn.propT("--chakra-drop-shadow",Qn.dropShadow),backdropFilter:{transform:Qn.backdropFilter},backdropBlur:Jn.blur("--chakra-backdrop-blur"),backdropBrightness:Jn.propT("--chakra-backdrop-brightness",Qn.brightness),backdropContrast:Jn.propT("--chakra-backdrop-contrast",Qn.contrast),backdropHueRotate:Jn.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:Jn.propT("--chakra-backdrop-invert",Qn.invert),backdropSaturate:Jn.propT("--chakra-backdrop-saturate",Qn.saturate)},ir={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Qn.flexDirection},experimental_spaceX:{static:Wn,transform:Nn({scale:"space",transform:function(e){return null!==e?{"--chakra-space-x":e}:null}})},experimental_spaceY:{static:Un,transform:Nn({scale:"space",transform:function(e){return null!=e?{"--chakra-space-y":e}:null}})},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Jn.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Jn.space("gap"),rowGap:Jn.space("rowGap"),columnGap:Jn.space("columnGap")};Object.assign(ir,{flexDir:ir.flexDirection});var or={gridGap:Jn.space("gridGap"),gridColumnGap:Jn.space("gridColumnGap"),gridRowGap:Jn.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},sr={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Qn.outline},outlineOffset:!0,outlineColor:Jn.colors("outlineColor")},ur={width:Jn.sizesT("width"),inlineSize:Jn.sizesT("inlineSize"),height:Jn.sizes("height"),blockSize:Jn.sizes("blockSize"),boxSize:Jn.sizes(["width","height"]),minWidth:Jn.sizes("minWidth"),minInlineSize:Jn.sizes("minInlineSize"),minHeight:Jn.sizes("minHeight"),minBlockSize:Jn.sizes("minBlockSize"),maxWidth:Jn.sizes("maxWidth"),maxInlineSize:Jn.sizes("maxInlineSize"),maxHeight:Jn.sizes("maxHeight"),maxBlockSize:Jn.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Jn.propT("float",Qn.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(ur,{w:ur.width,h:ur.height,minW:ur.minWidth,maxW:ur.maxWidth,minH:ur.minHeight,maxH:ur.maxHeight,overscroll:ur.overscrollBehavior,overscrollX:ur.overscrollBehaviorX,overscrollY:ur.overscrollBehaviorY});var lr={listStyleType:!0,listStylePosition:!0,listStylePos:Jn.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Jn.prop("listStyleImage")},cr={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},fr={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},dr=function(e,t,n){var r={},a=Ze(e,t,{});for(var i in a){i in n&&null!=n[i]||(r[i]=a[i])}return r},hr={srOnly:{transform:function(e){return!0===e?cr:"focusable"===e?fr:{}}},layerStyle:{processResult:!0,transform:function(e,t,n){return dr(t,"layerStyles."+e,n)}},textStyle:{processResult:!0,transform:function(e,t,n){return dr(t,"textStyles."+e,n)}},apply:{processResult:!0,transform:function(e,t,n){return dr(t,e,n)}}},pr={position:!0,pos:Jn.prop("position"),zIndex:Jn.prop("zIndex","zIndices"),inset:Jn.spaceT("inset"),insetX:Jn.spaceT(["left","right"]),insetInline:Jn.spaceT("insetInline"),insetY:Jn.spaceT(["top","bottom"]),insetBlock:Jn.spaceT("insetBlock"),top:Jn.spaceT("top"),insetBlockStart:Jn.spaceT("insetBlockStart"),bottom:Jn.spaceT("bottom"),insetBlockEnd:Jn.spaceT("insetBlockEnd"),left:Jn.spaceT("left"),insetInlineStart:Jn.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Jn.spaceT("right"),insetInlineEnd:Jn.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(pr,{insetStart:pr.insetInlineStart,insetEnd:pr.insetInlineEnd});var vr={ring:{transform:Qn.ring},ringColor:Jn.colors("--chakra-ring-color"),ringOffset:Jn.prop("--chakra-ring-offset-width"),ringOffsetColor:Jn.colors("--chakra-ring-offset-color"),ringInset:Jn.prop("--chakra-ring-inset")},gr={margin:Jn.spaceT("margin"),marginTop:Jn.spaceT("marginTop"),marginBlockStart:Jn.spaceT("marginBlockStart"),marginRight:Jn.spaceT("marginRight"),marginInlineEnd:Jn.spaceT("marginInlineEnd"),marginBottom:Jn.spaceT("marginBottom"),marginBlockEnd:Jn.spaceT("marginBlockEnd"),marginLeft:Jn.spaceT("marginLeft"),marginInlineStart:Jn.spaceT("marginInlineStart"),marginX:Jn.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Jn.spaceT("marginInline"),marginY:Jn.spaceT(["marginTop","marginBottom"]),marginBlock:Jn.spaceT("marginBlock"),padding:Jn.space("padding"),paddingTop:Jn.space("paddingTop"),paddingBlockStart:Jn.space("paddingBlockStart"),paddingRight:Jn.space("paddingRight"),paddingBottom:Jn.space("paddingBottom"),paddingBlockEnd:Jn.space("paddingBlockEnd"),paddingLeft:Jn.space("paddingLeft"),paddingInlineStart:Jn.space("paddingInlineStart"),paddingInlineEnd:Jn.space("paddingInlineEnd"),paddingX:Jn.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Jn.space("paddingInline"),paddingY:Jn.space(["paddingTop","paddingBottom"]),paddingBlock:Jn.space("paddingBlock")};Object.assign(gr,{m:gr.margin,mt:gr.marginTop,mr:gr.marginRight,me:gr.marginInlineEnd,marginEnd:gr.marginInlineEnd,mb:gr.marginBottom,ml:gr.marginLeft,ms:gr.marginInlineStart,marginStart:gr.marginInlineStart,mx:gr.marginX,my:gr.marginY,p:gr.padding,pt:gr.paddingTop,py:gr.paddingY,px:gr.paddingX,pb:gr.paddingBottom,pl:gr.paddingLeft,ps:gr.paddingInlineStart,paddingStart:gr.paddingInlineStart,pr:gr.paddingRight,pe:gr.paddingInlineEnd,paddingEnd:gr.paddingInlineEnd});var mr={textDecorationColor:Jn.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Jn.shadows("textShadow")},yr={clipPath:!0,transform:Jn.propT("transform",Qn.transform),transformOrigin:!0,translateX:Jn.spaceT("--chakra-translate-x"),translateY:Jn.spaceT("--chakra-translate-y"),skewX:Jn.degreeT("--chakra-skew-x"),skewY:Jn.degreeT("--chakra-skew-y"),scaleX:Jn.prop("--chakra-scale-x"),scaleY:Jn.prop("--chakra-scale-y"),scale:Jn.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Jn.degreeT("--chakra-rotate")},br={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Jn.prop("transitionDuration","transition.duration"),transitionProperty:Jn.prop("transitionProperty","transition.property"),transitionTimingFunction:Jn.prop("transitionTimingFunction","transition.easing")},xr={fontFamily:Jn.prop("fontFamily","fonts"),fontSize:Jn.prop("fontSize","fontSizes",Qn.px),fontWeight:Jn.prop("fontWeight","fontWeights"),lineHeight:Jn.prop("lineHeight","lineHeights"),letterSpacing:Jn.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},kr={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Jn.spaceT("scrollMargin"),scrollMarginTop:Jn.spaceT("scrollMarginTop"),scrollMarginBottom:Jn.spaceT("scrollMarginBottom"),scrollMarginLeft:Jn.spaceT("scrollMarginLeft"),scrollMarginRight:Jn.spaceT("scrollMarginRight"),scrollMarginX:Jn.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Jn.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Jn.spaceT("scrollPadding"),scrollPaddingTop:Jn.spaceT("scrollPaddingTop"),scrollPaddingBottom:Jn.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Jn.spaceT("scrollPaddingLeft"),scrollPaddingRight:Jn.spaceT("scrollPaddingRight"),scrollPaddingX:Jn.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Jn.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function wr(e){return He(e)&&e.reference?e.reference:String(e)}var Sr=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.map(wr).join(" "+e+" ").replace(/calc/g,"")},_r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc("+Sr.apply(void 0,["+"].concat(t))+")"},Cr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc("+Sr.apply(void 0,["-"].concat(t))+")"},Er=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc("+Sr.apply(void 0,["*"].concat(t))+")"},Ar=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc("+Sr.apply(void 0,["/"].concat(t))+")"},Ir=function(e){var t=wr(e);return null==t||Number.isNaN(parseFloat(t))?Er(t,-1):String(t).startsWith("-")?String(t).slice(1):"-"+t},Tr=Object.assign((function(e){return{add:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tr(_r.apply(void 0,[e].concat(n)))},subtract:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tr(Cr.apply(void 0,[e].concat(n)))},multiply:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tr(Er.apply(void 0,[e].concat(n)))},divide:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tr(Ar.apply(void 0,[e].concat(n)))},negate:function(){return Tr(Ir(e))},toString:function(){return e.toString()}}}),{add:_r,subtract:Cr,multiply:Er,divide:Ar,negate:Ir});function Rr(e){var t=function(e,t){return void 0===t&&(t="-"),e.replace(/\s+/g,t)}(e.toString());return t.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?t.replace(".","\\."):e}function Nr(e,t){return"var("+Rr(e)+(t?", "+t:"")+")"}function Mr(e,t){return void 0===t&&(t=""),"--"+function(e,t){return void 0===t&&(t=""),[t,Rr(e)].filter(Boolean).join("-")}(e,t)}var Or=function(e,t){return e+":hover "+t+", "+e+"[data-hover] "+t},Pr=function(e,t){return e+":focus "+t+", "+e+"[data-focus] "+t},Fr=function(e,t){return e+":focus-visible "+t},Dr=function(e,t){return e+":focus-within "+t},Lr=function(e,t){return e+":active "+t+", "+e+"[data-active] "+t},zr=function(e,t){return e+":disabled "+t+", "+e+"[data-disabled] "+t},jr=function(e,t){return e+":invalid "+t+", "+e+"[data-invalid] "+t},Br=function(e,t){return e+":checked "+t+", "+e+"[data-checked] "+t},Wr=function(e,t){return e+":placeholder-shown "+t},Ur=function(e){return Hr((function(t){return e(t,"&")}),"[role=group]","[data-group]",".group")},Vr=function(e){return Hr((function(t){return e(t,"~ &")}),"[data-peer]",".peer")},Hr=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.map(e).join(", ")},Gr={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Ur(Or),_peerHover:Vr(Or),_groupFocus:Ur(Pr),_peerFocus:Vr(Pr),_groupFocusVisible:Ur(Fr),_peerFocusVisible:Vr(Fr),_groupActive:Ur(Lr),_peerActive:Vr(Lr),_groupDisabled:Ur(zr),_peerDisabled:Vr(zr),_groupInvalid:Ur(jr),_peerInvalid:Vr(jr),_groupChecked:Ur(Br),_peerChecked:Vr(Br),_groupFocusWithin:Ur(Dr),_peerFocusWithin:Vr(Dr),_peerPlaceholderShown:Vr(Wr),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]"},qr=et(Gr);function Xr(e,t){return function(e,t,n){var r=Mr(e,n);return{variable:r,reference:Nr(r,t)}}(String(e).replace(/\./g,"-"),void 0,t)}function Yr(e,t){for(var n={},r={},a=function(){var a=o[i],s=a[0],u=a[1],l=u.isSemantic,c=u.value,f=Xr(s,null==t?void 0:t.cssVarPrefix),d=f.variable,h=f.reference;if(!l){if(s.startsWith("space")){var p=s.split("."),v=p[0]+".-"+p.slice(1).join("."),g=Tr.negate(c),m=Tr.negate(h);r[v]={value:g,var:d,varRef:m}}return n[d]=c,r[s]={value:c,var:d,varRef:h},"continue"}var y=He(c)?c:{default:c};n=Fe()(n,Object.entries(y).reduce((function(n,r){var a,i,o=r[0],u=function(n){var r=[String(s).split(".")[0],n].join(".");return e[r]?Xr(r,null==t?void 0:t.cssVarPrefix).reference:n}(r[1]);return"default"===o?(n[d]=u,n):(n[null!=(a=null==Gr?void 0:Gr[o])?a:o]=((i={})[d]=u,i),n)}),{})),r[s]={value:h,var:d,varRef:h}},i=0,o=Object.entries(e);i<o.length;i++)a();return{cssVars:n,cssMap:r}}var Kr=["__cssMap","__cssVars","__breakpoints"],$r=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur"];function Zr(e){return function(e,t){var n={};return t.forEach((function(t){t in e&&(n[t]=e[t])})),n}(e,$r)}function Qr(e){e.__cssMap,e.__cssVars,e.__breakpoints;var t=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Kr);return t}function Jr(e){var t,n=Qr(e),r=Zr(n),a=function(e){return e.semanticTokens}(n),i=function(e){var t,n,r=e.tokens,a=e.semanticTokens,i=Object.entries(null!=(t=Mt(r))?t:{}).map((function(e){return[e[0],{isSemantic:!1,value:e[1]}]})),o=Object.entries(null!=(n=Mt(a,1))?n:{}).map((function(e){return[e[0],{isSemantic:!0,value:e[1]}]}));return tt([].concat(i,o))}({tokens:r,semanticTokens:a}),o=Yr(i,{cssVarPrefix:null==(t=n.config)?void 0:t.cssVarPrefix}),s=o.cssMap,u=o.cssVars;return Object.assign(n,{__cssVars:In({},{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},u),__cssMap:s,__breakpoints:ut(n.breakpoints)}),n}function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ta(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ea(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var na=Fe()({},er,tr,nr,ir,ur,ar,vr,sr,or,hr,pr,rr,gr,kr,xr,mr,yr,lr,br),ra=Object.assign({},gr,ur,ir,or,pr),aa=et(ra),ia=[].concat(et(na),qr),oa=In({},na,Gr),sa=function(e){return e in oa},ua=function(e,t){return e.startsWith("--")&&qe(t)&&!Xe(t)},la=function(e,t){var n,r;if(null==t)return t;var a=function(t){var n,r;return null==(n=e.__cssMap)||null==(r=n[t])?void 0:r.varRef},i=function(e){var t;return null!=(t=a(e))?t:e},o=t.split(",").map((function(e){return e.trim()})),s=o[0],u=o[1];return t=null!=(n=null!=(r=a(s))?r:i(u))?n:i(t)};function ca(e){var t=e.configs,n=void 0===t?{}:t,r=e.pseudos,a=void 0===r?{}:r,i=e.theme;return function e(t,r){void 0===r&&(r=!1);var o=_t(t,i),s=function(e){return function(t){if(!t.__breakpoints)return e;var n=t.__breakpoints,r=n.isResponsive,a=n.toArrayValue,i=n.media,o={};for(var s in e){var u=_t(e[s],t);if(null!=u)if(u=He(u)&&r(u)?a(u):u,Array.isArray(u))for(var l=u.slice(0,i.length).length,c=0;c<l;c+=1){var f=null==i?void 0:i[c];f?(o[f]=o[f]||{},null!=u[c]&&(o[f][s]=u[c])):o[s]=u[c]}else o[s]=u}return o}}(o)(i),u={};for(var l in s){var c,f,d,h,p,v=_t(s[l],i);l in a&&(l=a[l]),ua(l,v)&&(v=la(i,v));var g=n[l];if(!0===g&&(g={property:l}),He(v)){var m;u[l]=null!=(m=u[l])?m:{},u[l]=Fe()({},u[l],e(v,!0))}else{var y=null!=(c=null==(f=g)||null==f.transform?void 0:f.transform(v,i,o))?c:v;y=null!=(d=g)&&d.processResult?e(y,!0):y;var b=_t(null==(h=g)?void 0:h.property,i);if(!r&&null!=(p=g)&&p.static){var x=_t(g.static,i);u=Fe()({},u,x)}if(b&&Array.isArray(b))for(var k,w=ta(b);!(k=w()).done;){u[k.value]=y}else b?"&"===b&&He(y)?u=Fe()({},u,y):u[b]=y:He(y)?u=Fe()({},u,y):u[l]=y}}return u}}var fa=function(e){return function(t){return ca({theme:t,pseudos:Gr,configs:na})(e)}};function da(e){var t=e.__breakpoints;return function(e,n,r,a){if(t){var i={},o=function(e,t){return We(e)?e:He(e)?t(e):null!=e?[e]:void 0}(r,t.toArrayValue);if(!o)return i;for(var s=o.length,u=1===s,l=!!e.parts,c=function(r){var s,c,f=t.details[r],d=t.details[function(e,t){for(var n=t+1;n<e.length;n++)if(null!=e[n])return n;return-1}(o,r)],h=st(f.minW,null==d?void 0:d._minW),p=_t(null==(s=e[n])?void 0:s[o[r]],a);return p?l?(null==(c=e.parts)||c.forEach((function(e){var t,n;Fe()(i,((n={})[e]=u?p[e]:((t={})[h]=p[e],t),n))})),"continue"):l?void(i[h]=p):(u?Fe()(i,p):i[h]=p,"continue"):"continue"},f=0;f<s;f++)c(f);return i}}}var ha=__webpack_require__(77),pa=__webpack_require__.n(ha),va=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ga=ce((function(e){return va.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),ma=function(e){return"theme"!==e},ya=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?ga:ma},ba=function(e,t,n){var r;if(t){var a=t.shouldForwardProp;r=e.__emotion_forwardProp&&a?function(t){return e.__emotion_forwardProp(t)&&a(t)}:a}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},xa=n.useInsertionEffect?n.useInsertionEffect:function(e){e()};var ka=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;Ae(t,n,r);xa((function(){return Ie(t,n,r)}));return null},wa=function e(n,r){var a,i,o=n.__emotion_real===n,s=o&&n.__emotion_base||n;void 0!==r&&(a=r.label,i=r.target);var u=ba(n,r,o),l=u||ya(s),c=!l("as");return function(){var f=arguments,d=o&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==a&&d.push("label:"+a+";"),null==f[0]||void 0===f[0].raw)d.push.apply(d,f);else{0,d.push(f[0][0]);for(var h=f.length,p=1;p<h;p++)d.push(f[p],f[0][p])}var v=we((function(e,n,r){var a=c&&e.as||s,o="",f=[],h=e;if(null==e.theme){for(var p in h={},e)h[p]=e[p];h.theme=(0,t.useContext)(Se)}"string"===typeof e.className?o=Ee(n.registered,f,e.className):null!=e.className&&(o=e.className+" ");var v=xe(d.concat(f),n.registered,h);o+=n.key+"-"+v.name,void 0!==i&&(o+=" "+i);var g=c&&void 0===u?ya(a):l,m={};for(var y in e)c&&"as"===y||g(y)&&(m[y]=e[y]);return m.className=o,m.ref=r,(0,t.createElement)(t.Fragment,null,(0,t.createElement)(ka,{cache:n,serialized:v,isStringTag:"string"===typeof a}),(0,t.createElement)(a,m))}));return v.displayName=void 0!==a?a:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",v.defaultProps=n.defaultProps,v.__emotion_real=v,v.__emotion_base=s,v.__emotion_styles=d,v.__emotion_forwardProp=u,Object.defineProperty(v,"toString",{value:function(){return"."+i}}),v.withComponent=function(t,n){return e(t,oe({},r,n,{shouldForwardProp:ba(v,n,!0)})).apply(void 0,d)},v}},Sa=wa.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Sa[e]=Sa(e)}));var _a=Sa;function Ca(){return Ca=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ca.apply(this,arguments)}var Ea=function(e){var n=e.cssVarsRoot,r=e.theme,a=e.children,i=t.useMemo((function(){return Jr(r)}),[r]);return t.createElement(Ce,{theme:i},t.createElement(Aa,{root:n}),a)},Aa=function(e){var n=e.root,r=[void 0===n?":host, :root":n,"[data-theme]"].join(",");return t.createElement(Re,{styles:function(e){var t;return(t={})[r]=e.__cssVars,t}})};function Ia(){var e=t.useContext(Se);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var Ta=Dt({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "}),Ra=(Ta[0],Ta[1],function(e){return Dt({name:e+"StylesContext",errorMessage:'useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<'+e+' />" '})}),Na=function(){var e=wn().colorMode;return t.createElement(Re,{styles:function(t){var n=_t(Ze(t,"styles.global"),{theme:t,colorMode:e});if(n){var r=fa(n)(t);return r}}})};function Ma(e){return $e(e,["styleConfig","size","variant","colorScheme"])}function Oa(){return Ca({},wn(),{theme:Ia()})}function Pa(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Fa=new Set([].concat(ia,["textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"])),Da=new Set(["htmlWidth","htmlHeight","htmlSize"]),La=function(e){return Da.has(e)||!Fa.has(e)},za=["theme","css","__css","sx"],ja=["baseStyle"];function Ba(e,t){var n=null!=t?t:{},r=n.baseStyle,a=Pa(n,ja);a.shouldForwardProp||(a.shouldForwardProp=La);var i=function(e){var t=e.baseStyle;return function(e){e.theme;var n=e.css,r=e.__css,a=e.sx,i=Qe(Pa(e,za),(function(e,t){return sa(t)})),o=_t(t,e),s=Object.assign({},r,o,Je(i),a),u=fa(s)(e.theme);return n?[u,n]:u}}({baseStyle:r});return _a(e,a)(i)}function Wa(e){return t.forwardRef(e)}var Ua=["styleConfig"];function Va(e,n){var r;void 0===n&&(n={});var a=n,i=a.styleConfig,o=Pa(a,Ua),s=Oa(),u=s.theme,l=s.colorMode,c=Ze(u,"components."+e),f=i||c,d=Fe()({theme:u,colorMode:l},null!=(r=null==f?void 0:f.defaultProps)?r:{},Je($e(o,["children"]))),h=(0,t.useRef)({});if(f){var p=function(e){return function(t){var n,r=t.variant,a=t.size,i=da(t.theme);return Fe()({},_t(null!=(n=e.baseStyle)?n:{},t),i(e,"sizes",a,t),i(e,"variants",r,t))}}(f),v=p(d);pa()(h.current,v)||(h.current=v)}return h.current}function Ha(e,t){return void 0===t&&(t={}),Va(e,t)}function Ga(e,t){return void 0===t&&(t={}),Va(e,t)}var qa=function(){var e=new Map;return new Proxy(Ba,{apply:function(e,t,n){return Ba.apply(void 0,n)},get:function(t,n){return e.has(n)||e.set(n,Ba(n)),e.get(n)}})}(),Xa={body:{classList:{add:function(){},remove:function(){}}},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}}},Ya=function(){},Ka={document:Xa,navigator:{userAgent:""},CustomEvent:function(){return this},addEventListener:Ya,removeEventListener:Ya,getComputedStyle:function(){return{getPropertyValue:function(){return""}}},matchMedia:function(){return{matches:!1,addListener:Ya,removeListener:Ya}},requestAnimationFrame:function(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!==typeof setTimeout&&clearTimeout(e)},setTimeout:function(){return 0},clearTimeout:Ya,setInterval:function(){return 0},clearInterval:Ya},$a=dt?{window:window,document:document}:{window:Ka,document:Xa},Za=(0,t.createContext)($a);function Qa(e){var n=e.children,r=e.environment,a=(0,t.useState)(null),i=a[0],o=a[1],s=(0,t.useMemo)((function(){var e,t=null==i?void 0:i.ownerDocument,n=null==i?void 0:i.ownerDocument.defaultView;return null!=(e=null!=r?r:t?{document:t,window:n}:void 0)?e:$a}),[i,r]);return t.createElement(Za.Provider,{value:s},n,t.createElement("span",{hidden:!0,className:"chakra-env",ref:function(e){(0,t.startTransition)((function(){e&&o(e)}))}}))}var Ja=function(e){var n=e.children,r=e.colorModeManager,a=e.portalZIndex,i=e.resetCSS,o=void 0===i||i,s=e.theme,u=void 0===s?{}:s,l=e.environment,c=e.cssVarsRoot,f=t.createElement(Qa,{environment:l},n);return t.createElement(Ea,{theme:u,cssVarsRoot:c},t.createElement(_n,{colorModeManager:r,options:u.config},o&&t.createElement(Oe,null),t.createElement(Na,null),a?t.createElement(nn,{zIndex:a},f):f))},ei={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"};function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ti.apply(this,arguments)}var ni=ti({},ei,{max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem"},{container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}});function ri(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function ai(e){return Math.min(1,Math.max(0,e))}function ii(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function oi(e){return e<=1?"".concat(100*Number(e),"%"):e}function si(e){return 1===e.length?"0"+e:String(e)}function ui(e,t,n){e=ri(e,255),t=ri(t,255),n=ri(n,255);var r=Math.max(e,t,n),a=Math.min(e,t,n),i=0,o=0,s=(r+a)/2;if(r===a)o=0,i=0;else{var u=r-a;switch(o=s>.5?u/(2-r-a):u/(r+a),r){case e:i=(t-n)/u+(t<n?6:0);break;case t:i=(n-e)/u+2;break;case n:i=(e-t)/u+4}i/=6}return{h:i,s:o,l:s}}function li(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ci(e,t,n){e=ri(e,255),t=ri(t,255),n=ri(n,255);var r=Math.max(e,t,n),a=Math.min(e,t,n),i=0,o=r,s=r-a,u=0===r?0:s/r;if(r===a)i=0;else{switch(r){case e:i=(t-n)/s+(t<n?6:0);break;case t:i=(n-e)/s+2;break;case n:i=(e-t)/s+4}i/=6}return{h:i,s:u,v:o}}function fi(e,t,n,r){var a=[si(Math.round(e).toString(16)),si(Math.round(t).toString(16)),si(Math.round(n).toString(16))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function di(e){return Math.round(255*parseFloat(e)).toString(16)}function hi(e){return pi(e)/255}function pi(e){return parseInt(e,16)}var vi={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function gi(e){var t={r:0,g:0,b:0},n=1,r=null,a=null,i=null,o=!1,s=!1;return"string"===typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(vi[e])e=vi[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=xi.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=xi.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=xi.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=xi.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=xi.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=xi.hsva.exec(e))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=xi.hex8.exec(e))return{r:pi(n[1]),g:pi(n[2]),b:pi(n[3]),a:hi(n[4]),format:t?"name":"hex8"};if(n=xi.hex6.exec(e))return{r:pi(n[1]),g:pi(n[2]),b:pi(n[3]),format:t?"name":"hex"};if(n=xi.hex4.exec(e))return{r:pi(n[1]+n[1]),g:pi(n[2]+n[2]),b:pi(n[3]+n[3]),a:hi(n[4]+n[4]),format:t?"name":"hex8"};if(n=xi.hex3.exec(e))return{r:pi(n[1]+n[1]),g:pi(n[2]+n[2]),b:pi(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(ki(e.r)&&ki(e.g)&&ki(e.b)?(t=function(e,t,n){return{r:255*ri(e,255),g:255*ri(t,255),b:255*ri(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):ki(e.h)&&ki(e.s)&&ki(e.v)?(r=oi(e.s),a=oi(e.v),t=function(e,t,n){e=6*ri(e,360),t=ri(t,100),n=ri(n,100);var r=Math.floor(e),a=e-r,i=n*(1-t),o=n*(1-a*t),s=n*(1-(1-a)*t),u=r%6;return{r:255*[n,o,i,i,s,n][u],g:255*[s,n,n,o,i,i][u],b:255*[i,i,s,n,n,o][u]}}(e.h,r,a),o=!0,s="hsv"):ki(e.h)&&ki(e.s)&&ki(e.l)&&(r=oi(e.s),i=oi(e.l),t=function(e,t,n){var r,a,i;if(e=ri(e,360),t=ri(t,100),n=ri(n,100),0===t)a=n,i=n,r=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;r=li(s,o,e+1/3),a=li(s,o,e),i=li(s,o,e-1/3)}return{r:255*r,g:255*a,b:255*i}}(e.h,r,i),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=ii(n),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var mi="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),yi="[\\s|\\(]+(".concat(mi,")[,|\\s]+(").concat(mi,")[,|\\s]+(").concat(mi,")\\s*\\)?"),bi="[\\s|\\(]+(".concat(mi,")[,|\\s]+(").concat(mi,")[,|\\s]+(").concat(mi,")[,|\\s]+(").concat(mi,")\\s*\\)?"),xi={CSS_UNIT:new RegExp(mi),rgb:new RegExp("rgb"+yi),rgba:new RegExp("rgba"+bi),hsl:new RegExp("hsl"+yi),hsla:new RegExp("hsla"+bi),hsv:new RegExp("hsv"+yi),hsva:new RegExp("hsva"+bi),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ki(e){return Boolean(xi.CSS_UNIT.exec(String(e)))}var wi=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var a=gi(t);this.originalInput=t,this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:a.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=a.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=ii(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var e=ci(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=ci(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=ui(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=ui(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),fi(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,r,a){var i=[si(Math.round(e).toString(16)),si(Math.round(t).toString(16)),si(Math.round(n).toString(16)),si(di(r))];return a&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))&&i[3].startsWith(i[3].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*ri(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*ri(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+fi(this.r,this.g,this.b,!1),t=0,n=Object.entries(vi);t<n.length;t++){var r=n[t],a=r[0];if(e===r[1])return a}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=ai(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=ai(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=ai(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=ai(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),a=new e(t).toRgb(),i=n/100;return new e({r:(a.r-r.r)*i+r.r,g:(a.g-r.g)*i+r.g,b:(a.b-r.b)*i+r.b,a:(a.a-r.a)*i+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),a=360/n,i=[this];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,i.push(new e(r));return i},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,a=n.s,i=n.v,o=[],s=1/t;t--;)o.push(new e({h:r,s:a,v:i})),i=(i+s)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb();return new e({r:r.r+(n.r-r.r)*n.a,g:r.g+(n.g-r.g)*n.a,b:r.b+(n.b-r.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,a=[this],i=360/t,o=1;o<t;o++)a.push(new e({h:(r+o*i)%360,s:n.s,l:n.l}));return a},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function Si(e){if(void 0===e&&(e={}),void 0!==e.count&&null!==e.count){var t=e.count,n=[];for(e.count=void 0;t>n.length;)e.count=null,e.seed&&(e.seed+=1),n.push(Si(e));return e.count=t,n}var r=function(e,t){var n=Ci(function(e){var t=parseInt(e,10);if(!Number.isNaN(t)&&t<360&&t>0)return[t,t];if("string"===typeof e){var n=Ai.find((function(t){return t.name===e}));if(n){var r=Ei(n);if(r.hueRange)return r.hueRange}var a=new wi(e);if(a.isValid){var i=a.toHsv().h;return[i,i]}}return[0,360]}(e),t);n<0&&(n=360+n);return n}(e.hue,e.seed),a=function(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return Ci([0,100],t.seed);var n=_i(e).saturationRange,r=n[0],a=n[1];switch(t.luminosity){case"bright":r=55;break;case"dark":r=a-10;break;case"light":a=55}return Ci([r,a],t.seed)}(r,e),i=function(e,t,n){var r=function(e,t){for(var n=_i(e).lowerBounds,r=0;r<n.length-1;r++){var a=n[r][0],i=n[r][1],o=n[r+1][0],s=n[r+1][1];if(t>=a&&t<=o){var u=(s-i)/(o-a);return u*t+(i-u*a)}}return 0}(e,t),a=100;switch(n.luminosity){case"dark":a=r+20;break;case"light":r=(a+r)/2;break;case"random":r=0,a=100}return Ci([r,a],n.seed)}(r,a,e),o={h:r,s:a,v:i};return void 0!==e.alpha&&(o.a=e.alpha),new wi(o)}function _i(e){e>=334&&e<=360&&(e-=360);for(var t=0,n=Ai;t<n.length;t++){var r=Ei(n[t]);if(r.hueRange&&e>=r.hueRange[0]&&e<=r.hueRange[1])return r}throw Error("Color not found")}function Ci(e,t){if(void 0===t)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var n=e[1]||1,r=e[0]||0,a=(t=(9301*t+49297)%233280)/233280;return Math.floor(r+a*(n-r))}function Ei(e){var t=e.lowerBounds[0][0],n=e.lowerBounds[e.lowerBounds.length-1][0],r=e.lowerBounds[e.lowerBounds.length-1][1],a=e.lowerBounds[0][1];return{name:e.name,hueRange:e.hueRange,lowerBounds:e.lowerBounds,saturationRange:[t,n],brightnessRange:[r,a]}}var Ai=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],Ii=function(e,t,n){var r=Ze(e,"colors."+t,t);return new wi(r).isValid?r:n},Ti=function(e){return function(t){var n=Ii(t,e);return new wi(n).isDark()?"dark":"light"}},Ri=function(e,t){return function(n){var r=Ii(n,e);return new wi(r).setAlpha(t).toRgbString()}};function Ni(e,t){return void 0===e&&(e="1rem"),void 0===t&&(t="rgba(255, 255, 255, 0.15)"),{backgroundImage:"linear-gradient(\n    45deg,\n    "+t+" 25%,\n    transparent 25%,\n    transparent 50%,\n    "+t+" 50%,\n    "+t+" 75%,\n    transparent 75%,\n    transparent\n  )",backgroundSize:e+" "+e}}function Mi(e){var t=Si().toHexString();return!e||Ge(e)?t:e.string&&e.colors?function(e,t){var n=0;if(0===e.length)return t[0];for(var r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n&=n;return n=(n%t.length+t.length)%t.length,t[n]}(e.string,e.colors):e.string&&!e.colors?function(e){var t=0;if(0===e.length)return t.toString();for(var n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t),t&=t;for(var r="#",a=0;a<3;a+=1){r+=("00"+(t>>8*a&255).toString(16)).substr(-2)}return r}(e.string):e.colors&&!e.string?function(e){return e[Math.floor(Math.random()*e.length)]}(e.colors):t}function Oi(e,t){return function(n){return"dark"===n.colorMode?t:e}}function Pi(e){var t=e.orientation,n=e.vertical,r=e.horizontal;return t?"vertical"===t?n:r:{}}function Fi(){return Fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fi.apply(this,arguments)}function Di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Li=function(){function e(e){var t=this;this.map={},this.called=!1,this.assert=function(){if(t.called)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");t.called=!0},this.parts=function(){t.assert();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];t.map[o]=t.toPart(o)}return t},this.extend=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];o in t.map||(t.map[o]=t.toPart(o))}return t},this.toPart=function(e){var n="chakra-"+(["container","root"].includes(null!=e?e:"")?[t.name]:[t.name,e]).filter(Boolean).join("__");return{className:n,selector:"."+n,toString:function(){return e}}},this.__type={}}var t,n,r;return t=e,n=[{key:"selectors",get:function(){var e=tt(Object.entries(this.map).map((function(e){return[e[0],e[1].selector]})));return e}},{key:"classNames",get:function(){return tt(Object.entries(this.map).map((function(e){return[e[0],e[1].className]})))}},{key:"keys",get:function(){return Object.keys(this.map)}}],n&&Di(t.prototype,n),r&&Di(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zi(e){return new Li(e)}function ji(e){return He(e)&&e.reference?e.reference:String(e)}var Bi=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.map(ji).join(" "+e+" ").replace(/calc/g,"")},Wi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc("+Bi.apply(void 0,["+"].concat(t))+")"},Ui=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc("+Bi.apply(void 0,["-"].concat(t))+")"},Vi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc("+Bi.apply(void 0,["*"].concat(t))+")"},Hi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"calc("+Bi.apply(void 0,["/"].concat(t))+")"},Gi=function(e){var t=ji(e);return null==t||Number.isNaN(parseFloat(t))?Vi(t,-1):String(t).startsWith("-")?String(t).slice(1):"-"+t},qi=Object.assign((function(e){return{add:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qi(Wi.apply(void 0,[e].concat(n)))},subtract:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qi(Ui.apply(void 0,[e].concat(n)))},multiply:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qi(Vi.apply(void 0,[e].concat(n)))},divide:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qi(Hi.apply(void 0,[e].concat(n)))},negate:function(){return qi(Gi(e))},toString:function(){return e.toString()}}}),{add:Wi,subtract:Ui,multiply:Vi,divide:Hi,negate:Gi});function Xi(e){var t=function(e,t){return void 0===t&&(t="-"),e.replace(/\s+/g,t)}(e.toString());return t.includes("\\.")?e:function(e){return!Number.isInteger(parseFloat(e.toString()))}(e)?t.replace(".","\\."):e}function Yi(e,t){return"var("+Xi(e)+(t?", "+t:"")+")"}function Ki(e,t){return void 0===t&&(t=""),"--"+function(e,t){return void 0===t&&(t=""),[t,Xi(e)].filter(Boolean).join("-")}(e,t)}function $i(e,t){var n=Ki(e,null==t?void 0:t.prefix);return{variable:n,reference:Yi(n,Zi(null==t?void 0:t.fallback))}}function Zi(e){return"string"===typeof e?e:null==e?void 0:e.reference}var Qi=zi("accordion").parts("root","container","button","panel").extend("icon"),Ji=zi("alert").parts("title","description","container").extend("icon","spinner"),eo=zi("avatar").parts("label","badge","container").extend("excessLabel","group"),to=zi("breadcrumb").parts("link","item","container").extend("separator"),no=(zi("button").parts(),zi("checkbox").parts("control","icon","container").extend("label")),ro=(zi("progress").parts("track","filledTrack").extend("label"),zi("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),ao=zi("editable").parts("preview","input","textarea"),io=zi("form").parts("container","requiredIndicator","helperText"),oo=zi("formError").parts("text","icon"),so=zi("input").parts("addon","field","element"),uo=zi("list").parts("container","item","icon"),lo=zi("menu").parts("button","list","item").extend("groupTitle","command","divider"),co=zi("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),fo=zi("numberinput").parts("root","field","stepperGroup","stepper"),ho=(zi("pininput").parts("field"),zi("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),po=zi("progress").parts("label","filledTrack","track"),vo=zi("radio").parts("container","control","label"),go=zi("select").parts("field","icon"),mo=zi("slider").parts("container","track","thumb","filledTrack"),yo=zi("stat").parts("container","label","helpText","number","icon"),bo=zi("switch").parts("container","track","thumb"),xo=zi("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),ko=zi("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),wo=zi("tag").parts("container","label","closeButton"),So={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},_o={root:{},container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"1rem",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:4,py:2},panel:{pt:2,px:4,pb:5},icon:{fontSize:"1.25em"}},Co={parts:Qi.keys,baseStyle:_o};function Eo(e){var t=e.theme,n=e.colorScheme;return Oi(Ii(t,n+".100",n),Ri(n+".200",.16)(t))(e)}var Ao={subtle:function(e){var t=e.colorScheme;return{container:{bg:Eo(e)},icon:{color:Oi(t+".500",t+".200")(e)},spinner:{color:Oi(t+".500",t+".200")(e)}}},"left-accent":function(e){var t=e.colorScheme;return{container:{paddingStart:3,borderStartWidth:"4px",borderStartColor:Oi(t+".500",t+".200")(e),bg:Eo(e)},icon:{color:Oi(t+".500",t+".200")(e)},spinner:{color:Oi(t+".500",t+".200")(e)}}},"top-accent":function(e){var t=e.colorScheme;return{container:{pt:2,borderTopWidth:"4px",borderTopColor:Oi(t+".500",t+".200")(e),bg:Eo(e)},icon:{color:Oi(t+".500",t+".200")(e)},spinner:{color:Oi(t+".500",t+".200")(e)}}},solid:function(e){var t=e.colorScheme;return{container:{bg:Oi(t+".500",t+".200")(e),color:Oi("white","gray.900")(e)}}}},Io={parts:Ji.keys,baseStyle:{container:{px:4,py:3},title:{fontWeight:"bold",lineHeight:6,marginEnd:2},description:{lineHeight:6},icon:{flexShrink:0,marginEnd:3,w:5,h:6},spinner:{flexShrink:0,marginEnd:3,w:5,h:5}},variants:Ao,defaultProps:{variant:"subtle",colorScheme:"blue"}},To=function(e){return{transform:"translate(25%, 25%)",borderRadius:"full",border:"0.2em solid",borderColor:Oi("white","gray.800")(e)}},Ro=function(e){return{bg:Oi("gray.200","whiteAlpha.400")(e)}},No=function(e){var t=e.name,n=e.theme,r=t?Mi({string:t}):"gray.400",a=function(e){return function(t){return"dark"===Ti(e)(t)}}(r)(n),i="white";return a||(i="gray.800"),{bg:r,color:i,borderColor:Oi("white","gray.800")(e),verticalAlign:"top"}};function Mo(e){var t="100%"!==e?ni[e]:void 0;return{container:{width:e,height:e,fontSize:"calc("+(null!=t?t:e)+" / 2.5)"},excessLabel:{width:e,height:e},label:{fontSize:"calc("+(null!=t?t:e)+" / 2.5)",lineHeight:"100%"!==e?null!=t?t:e:void 0}}}var Oo,Po,Fo,Do={"2xs":Mo(4),xs:Mo(6),sm:Mo(8),md:Mo(12),lg:Mo(16),xl:Mo(24),"2xl":Mo(32),full:Mo("100%")},Lo={parts:eo.keys,baseStyle:function(e){return{badge:To(e),excessLabel:Ro(e),container:No(e)}},sizes:Do,defaultProps:{size:"md"}},zo={solid:function(e){var t=e.colorScheme,n=e.theme;return{bg:Oi(t+".500",Ri(t+".500",.6)(n))(e),color:Oi("white","whiteAlpha.800")(e)}},subtle:function(e){var t=e.colorScheme,n=e.theme;return{bg:Oi(t+".100",Ri(t+".200",.16)(n))(e),color:Oi(t+".800",t+".200")(e)}},outline:function(e){var t=e.colorScheme,n=e.theme,r=Ri(t+".200",.8)(n),a=Oi(Ii(n,t+".500"),r)(e);return{color:a,boxShadow:"inset 0 0 0px 1px "+a}}},jo={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"},variants:zo,defaultProps:{variant:"subtle",colorScheme:"gray"}},Bo={link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},Wo={parts:to.keys,baseStyle:Bo},Uo=function(e){var t=e.colorScheme,n=e.theme;if("gray"===t)return{color:Oi("inherit","whiteAlpha.900")(e),_hover:{bg:Oi("gray.100","whiteAlpha.200")(e)},_active:{bg:Oi("gray.200","whiteAlpha.300")(e)}};var r=Ri(t+".200",.12)(n),a=Ri(t+".200",.24)(n);return{color:Oi(t+".600",t+".200")(e),bg:"transparent",_hover:{bg:Oi(t+".50",r)(e)},_active:{bg:Oi(t+".100",a)(e)}}},Vo={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Ho={ghost:Uo,outline:function(e){var t=e.colorScheme,n=Oi("gray.200","whiteAlpha.300")(e);return ti({border:"1px solid",borderColor:"gray"===t?n:"currentColor",".chakra-button__group[data-attached] > &:not(:last-of-type)":{marginEnd:"-1px"}},Uo(e))},solid:function(e){var t,n=e.colorScheme;if("gray"===n){var r=Oi("gray.100","whiteAlpha.200")(e);return{bg:r,_hover:{bg:Oi("gray.200","whiteAlpha.300")(e),_disabled:{bg:r}},_active:{bg:Oi("gray.300","whiteAlpha.400")(e)}}}var a=null!=(t=Vo[n])?t:{},i=a.bg,o=void 0===i?n+".500":i,s=a.color,u=void 0===s?"white":s,l=a.hoverBg,c=void 0===l?n+".600":l,f=a.activeBg,d=void 0===f?n+".700":f,h=Oi(o,n+".200")(e);return{bg:h,color:Oi(u,"gray.800")(e),_hover:{bg:Oi(c,n+".300")(e),_disabled:{bg:h}},_active:{bg:Oi(d,n+".400")(e)}}},link:function(e){var t=e.colorScheme;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Oi(t+".500",t+".200")(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Oi(t+".700",t+".500")(e)}}},unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:0,p:0}},Go={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:Ho,sizes:{lg:{h:12,minW:12,fontSize:"lg",px:6},md:{h:10,minW:10,fontSize:"md",px:4},sm:{h:8,minW:8,fontSize:"sm",px:3},xs:{h:6,minW:6,fontSize:"xs",px:2}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},qo=function(e){var t=e.colorScheme;return{w:"100%",transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Oi(t+".500",t+".200")(e),borderColor:Oi(t+".500",t+".200")(e),color:Oi("white","gray.900")(e),_hover:{bg:Oi(t+".600",t+".300")(e),borderColor:Oi(t+".600",t+".300")(e)},_disabled:{borderColor:Oi("gray.200","transparent")(e),bg:Oi("gray.200","whiteAlpha.300")(e),color:Oi("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:Oi(t+".500",t+".200")(e),borderColor:Oi(t+".500",t+".200")(e),color:Oi("white","gray.900")(e)},_disabled:{bg:Oi("gray.100","whiteAlpha.100")(e),borderColor:Oi("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Oi("red.500","red.300")(e)}}},Xo={_disabled:{cursor:"not-allowed"}},Yo={userSelect:"none",_disabled:{opacity:.4}},Ko={transitionProperty:"transform",transitionDuration:"normal"},$o={parts:no.keys,baseStyle:function(e){return{icon:Ko,container:Xo,control:qo(e),label:Yo}},sizes:{sm:{control:{h:3,w:3},label:{fontSize:"sm"},icon:{fontSize:"0.45rem"}},md:{control:{w:4,h:4},label:{fontSize:"md"},icon:{fontSize:"0.625rem"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"},icon:{fontSize:"0.625rem"}}},defaultProps:{size:"md",colorScheme:"blue"}},Zo=$i("close-button-size"),Qo={baseStyle:function(e){var t=Oi("blackAlpha.100","whiteAlpha.100")(e),n=Oi("blackAlpha.200","whiteAlpha.200")(e);return{w:[Zo.reference],h:[Zo.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{bg:t},_active:{bg:n},_focusVisible:{boxShadow:"outline"}}},sizes:{lg:(Oo={},Oo[Zo.variable]="40px",Oo.fontSize="16px",Oo),md:(Po={},Po[Zo.variable]="32px",Po.fontSize="12px",Po),sm:(Fo={},Fo[Zo.variable]="24px",Fo.fontSize="10px",Fo)},defaultProps:{size:"md"}},Jo={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"},variants:jo.variants,defaultProps:jo.defaultProps},es={baseStyle:{w:"100%",mx:"auto",maxW:"60ch",px:"1rem"}},ts={baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}};function ns(e){return"full"===e?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}}}var rs={bg:"blackAlpha.600",zIndex:"overlay"},as={display:"flex",zIndex:"modal",justifyContent:"center"},is=function(e){return ti({},e.isFullHeight&&{height:"100vh"},{zIndex:"modal",maxH:"100vh",bg:Oi("white","gray.700")(e),color:"inherit",boxShadow:Oi("lg","dark-lg")(e)})},os={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},ss={position:"absolute",top:2,insetEnd:3},us={px:6,py:2,flex:1,overflow:"auto"},ls={px:6,py:4},cs={xs:ns("xs"),sm:ns("md"),md:ns("lg"),lg:ns("2xl"),xl:ns("4xl"),full:ns("full")},fs={parts:ro.keys,baseStyle:function(e){return{overlay:rs,dialogContainer:as,dialog:is(e),header:os,closeButton:ss,body:us,footer:ls}},sizes:cs,defaultProps:{size:"xs"}},ds={preview:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}}},hs={parts:ao.keys,baseStyle:ds},ps=function(e){return{marginStart:1,color:Oi("red.500","red.300")(e)}},vs=function(e){return{mt:2,color:Oi("gray.500","whiteAlpha.600")(e),lineHeight:"normal",fontSize:"sm"}},gs={parts:io.keys,baseStyle:function(e){return{container:{width:"100%",position:"relative"},requiredIndicator:ps(e),helperText:vs(e)}}},ms=function(e){return{color:Oi("red.500","red.300")(e),mt:2,fontSize:"sm",lineHeight:"normal"}},ys=function(e){return{marginEnd:"0.5em",color:Oi("red.500","red.300")(e)}},bs={parts:oo.keys,baseStyle:function(e){return{text:ms(e),icon:ys(e)}}},xs={baseStyle:{fontSize:"md",marginEnd:3,mb:2,fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},ks={baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},ws={lg:{fontSize:"lg",px:4,h:12,borderRadius:"md"},md:{fontSize:"md",px:4,h:10,borderRadius:"md"},sm:{fontSize:"sm",px:3,h:8,borderRadius:"sm"},xs:{fontSize:"xs",px:2,h:6,borderRadius:"sm"}},Ss={lg:{field:ws.lg,addon:ws.lg},md:{field:ws.md,addon:ws.md},sm:{field:ws.sm,addon:ws.sm},xs:{field:ws.xs,addon:ws.xs}};function _s(e){var t=e.focusBorderColor,n=e.errorBorderColor;return{focusBorderColor:t||Oi("blue.500","blue.300")(e),errorBorderColor:n||Oi("red.500","red.300")(e)}}var Cs={outline:function(e){var t=e.theme,n=_s(e),r=n.focusBorderColor,a=n.errorBorderColor;return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Oi("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:Ii(t,a),boxShadow:"0 0 0 1px "+Ii(t,a)},_focusVisible:{zIndex:1,borderColor:Ii(t,r),boxShadow:"0 0 0 1px "+Ii(t,r)}},addon:{border:"1px solid",borderColor:Oi("inherit","whiteAlpha.50")(e),bg:Oi("gray.100","whiteAlpha.300")(e)}}},filled:function(e){var t=e.theme,n=_s(e),r=n.focusBorderColor,a=n.errorBorderColor;return{field:{border:"2px solid",borderColor:"transparent",bg:Oi("gray.100","whiteAlpha.50")(e),_hover:{bg:Oi("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:Ii(t,a)},_focusVisible:{bg:"transparent",borderColor:Ii(t,r)}},addon:{border:"2px solid",borderColor:"transparent",bg:Oi("gray.100","whiteAlpha.50")(e)}}},flushed:function(e){var t=e.theme,n=_s(e),r=n.focusBorderColor,a=n.errorBorderColor;return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ii(t,a),boxShadow:"0px 1px 0px 0px "+Ii(t,a)},_focusVisible:{borderColor:Ii(t,r),boxShadow:"0px 1px 0px 0px "+Ii(t,r)}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent"}}},unstyled:{field:{bg:"transparent",px:0,height:"auto"},addon:{bg:"transparent",px:0,height:"auto"}}},Es={parts:so.keys,baseStyle:{field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal"}},sizes:Ss,variants:Cs,defaultProps:{size:"md",variant:"outline"}},As={baseStyle:function(e){return{bg:Oi("gray.100","whiteAlpha")(e),borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}}},Is={baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}}},Ts={container:{},item:{},icon:{marginEnd:"0.5rem",display:"inline",verticalAlign:"text-bottom"}},Rs={parts:uo.keys,baseStyle:Ts},Ns=function(e){return{bg:Oi("#fff","gray.700")(e),boxShadow:Oi("sm","dark-lg")(e),color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px"}},Ms=function(e){return{py:"0.4rem",px:"0.8rem",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{bg:Oi("gray.100","whiteAlpha.100")(e)},_active:{bg:Oi("gray.200","whiteAlpha.200")(e)},_expanded:{bg:Oi("gray.100","whiteAlpha.100")(e)},_disabled:{opacity:.4,cursor:"not-allowed"}}},Os={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},Ps={opacity:.6},Fs={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"0.5rem",opacity:.6},Ds={transitionProperty:"common",transitionDuration:"normal"},Ls={parts:lo.keys,baseStyle:function(e){return{button:Ds,list:Ns(e),item:Ms(e),groupTitle:Os,command:Ps,divider:Fs}}},zs={bg:"blackAlpha.600",zIndex:"modal"},js=function(e){return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e.isCentered?"center":"flex-start",overflow:"inside"===e.scrollBehavior?"hidden":"auto"}},Bs=function(e){var t=e.scrollBehavior;return{borderRadius:"md",bg:Oi("white","gray.700")(e),color:"inherit",my:"3.75rem",zIndex:"modal",maxH:"inside"===t?"calc(100% - 7.5rem)":void 0,boxShadow:Oi("lg","dark-lg")(e)}},Ws={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},Us={position:"absolute",top:2,insetEnd:3},Vs=function(e){return{px:6,py:2,flex:1,overflow:"inside"===e.scrollBehavior?"auto":void 0}},Hs={px:6,py:4};function Gs(e){return"full"===e?{dialog:{maxW:"100vw",minH:"100vh","@supports(min-height: -webkit-fill-available)":{minH:"-webkit-fill-available"},my:0}}:{dialog:{maxW:e}}}var qs,Xs,Ys,Ks={xs:Gs("xs"),sm:Gs("sm"),md:Gs("md"),lg:Gs("lg"),xl:Gs("xl"),"2xl":Gs("2xl"),"3xl":Gs("3xl"),"4xl":Gs("4xl"),"5xl":Gs("5xl"),"6xl":Gs("6xl"),full:Gs("full")},$s={parts:co.keys,baseStyle:function(e){return{overlay:zs,dialogContainer:js(e),dialog:Bs(e),header:Ws,closeButton:Us,body:Vs(e),footer:Hs}},sizes:Ks,defaultProps:{size:"md"}},Zs=Es.variants,Qs=Es.defaultProps,Js=$i("number-input-stepper-width"),eu=$i("number-input-input-padding"),tu=qi(Js).add("0.5rem").toString(),nu=((qs={})[Js.variable]="24px",qs[eu.variable]=tu,qs),ru=null!=(Xs=null==(Ys=Es.baseStyle)?void 0:Ys.field)?Xs:{},au={width:[Js.reference]},iu=function(e){return{borderStart:"1px solid",borderStartColor:Oi("inherit","whiteAlpha.300")(e),color:Oi("inherit","whiteAlpha.800")(e),_active:{bg:Oi("gray.200","whiteAlpha.300")(e)},_disabled:{opacity:.4,cursor:"not-allowed"}}};function ou(e){var t,n,r=Es.sizes[e],a={lg:"md",md:"md",sm:"sm",xs:"sm"},i=null!=(t=null==(n=r.field)?void 0:n.fontSize)?t:"md",o=So.fontSizes[i];return{field:ti({},r.field,{paddingInlineEnd:eu.reference,verticalAlign:"top"}),stepper:{fontSize:qi(o).multiply(.75).toString(),_first:{borderTopEndRadius:a[e]},_last:{borderBottomEndRadius:a[e],mt:"-1px",borderTopWidth:1}}}}var su,uu={xs:ou("xs"),sm:ou("sm"),md:ou("md"),lg:ou("lg")},lu={parts:fo.keys,baseStyle:function(e){return{root:nu,field:ru,stepperGroup:au,stepper:iu(e)}},sizes:uu,variants:Zs,defaultProps:Qs},cu={baseStyle:ti({},Es.baseStyle.field,{textAlign:"center"}),sizes:{lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},variants:{outline:function(e){var t;return null!=(t=Es.variants.outline(e).field)?t:{}},flushed:function(e){var t;return null!=(t=Es.variants.flushed(e).field)?t:{}},filled:function(e){var t;return null!=(t=Es.variants.filled(e).field)?t:{}},unstyled:null!=(su=Es.variants.unstyled.field)?su:{}},defaultProps:Es.defaultProps},fu=$i("popper-bg"),du=$i("popper-arrow-bg"),hu=$i("popper-arrow-shadow-color"),pu={zIndex:10},vu=function(e){var t,n=Oi("white","gray.700")(e),r=Oi("gray.200","whiteAlpha.300")(e);return(t={})[fu.variable]="colors."+n,t.bg=fu.reference,t[du.variable]=fu.reference,t[hu.variable]="colors."+r,t.width="xs",t.border="1px solid",t.borderColor="inherit",t.borderRadius="md",t.boxShadow="sm",t.zIndex="inherit",t._focusVisible={outline:0,boxShadow:"outline"},t},gu={px:3,py:2,borderBottomWidth:"1px"},mu={px:3,py:2},yu={px:3,py:2,borderTopWidth:"1px"},bu={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},xu={parts:ho.keys,baseStyle:function(e){return{popper:pu,content:vu(e),header:gu,body:mu,footer:yu,arrow:{},closeButton:bu}}};var ku={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},wu=function(e){return{bg:Oi("gray.100","whiteAlpha.300")(e)}},Su=function(e){return ti({transitionProperty:"common",transitionDuration:"slow"},function(e){var t=e.colorScheme,n=e.theme,r=e.isIndeterminate,a=e.hasStripe,i=Oi(Ni(),Ni("1rem","rgba(0,0,0,0.1)"))(e),o=Oi(t+".500",t+".200")(e),s="linear-gradient(\n    to right,\n    transparent 0%,\n    "+Ii(n,o)+" 50%,\n    transparent 100%\n  )";return ti({},!r&&a&&i,r?{bgImage:s}:{bgColor:o})}(e))},_u={parts:po.keys,sizes:{xs:{track:{h:"0.25rem"}},sm:{track:{h:"0.5rem"}},md:{track:{h:"0.75rem"}},lg:{track:{h:"1rem"}}},baseStyle:function(e){return{label:ku,filledTrack:Su(e),track:wu(e)}},defaultProps:{size:"md",colorScheme:"blue"}},Cu=function(e){var t=$o.baseStyle(e).control,n=void 0===t?{}:t;return ti({},n,{borderRadius:"full",_checked:ti({},n._checked,{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},Eu={parts:vo.keys,baseStyle:function(e){return{label:$o.baseStyle(e).label,container:$o.baseStyle(e).container,control:Cu(e)}},sizes:{md:{control:{w:4,h:4},label:{fontSize:"md"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"}},sm:{control:{width:3,height:3},label:{fontSize:"sm"}}},defaultProps:{size:"md",colorScheme:"blue"}},Au=function(e){return ti({},Es.baseStyle.field,{bg:Oi("white","gray.700")(e),appearance:"none",paddingBottom:"1px",lineHeight:"normal","> option, > optgroup":{bg:Oi("white","gray.700")(e)}})},Iu={width:"1.5rem",height:"100%",insetEnd:"0.5rem",position:"relative",color:"currentColor",fontSize:"1.25rem",_disabled:{opacity:.5}},Tu={paddingInlineEnd:"2rem"},Ru=Fe()({},Es.sizes,{lg:{field:Tu},md:{field:Tu},sm:{field:Tu},xs:{field:Tu,icon:{insetEnd:"0.25rem"}}}),Nu={parts:go.keys,baseStyle:function(e){return{field:Au(e),icon:Iu}},sizes:Ru,variants:Es.variants,defaultProps:Es.defaultProps},Mu=function(e,t){return Me({from:{borderColor:e,background:e},to:{borderColor:t,background:t}})},Ou={baseStyle:function(e){var t=Oi("gray.100","gray.800")(e),n=Oi("gray.400","gray.600")(e),r=e.startColor,a=void 0===r?t:r,i=e.endColor,o=void 0===i?n:i,s=e.speed,u=e.theme,l=Ii(u,a),c=Ii(u,o);return{opacity:.7,borderRadius:"2px",borderColor:l,background:c,animation:s+"s linear infinite alternate "+Mu(l,c)}}},Pu={baseStyle:function(e){return{borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"1rem",position:"fixed",top:"1.5rem",insetStart:"1.5rem",bg:Oi("white","gray.700")(e)}}}};var Fu,Du,Lu,zu,ju,Bu,Wu,Uu,Vu,Hu,Gu,qu,Xu,Yu=function(e){return ti({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},Pi({orientation:e.orientation,vertical:{h:"100%"},horizontal:{w:"100%"}}))},Ku=function(e){return{overflow:"hidden",borderRadius:"sm",bg:Oi("gray.200","whiteAlpha.200")(e),_disabled:{bg:Oi("gray.300","whiteAlpha.300")(e)}}},$u=function(e){return ti({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}},function(e){return Pi({orientation:e.orientation,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}})}(e))},Zu=function(e){var t=e.colorScheme;return{width:"inherit",height:"inherit",bg:Oi(t+".500",t+".200")(e)}},Qu={lg:function(e){return{thumb:{w:"16px",h:"16px"},track:Pi({orientation:e.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},md:function(e){return{thumb:{w:"14px",h:"14px"},track:Pi({orientation:e.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},sm:function(e){return{thumb:{w:"10px",h:"10px"},track:Pi({orientation:e.orientation,horizontal:{h:"2px"},vertical:{w:"2px"}})}}},Ju={parts:mo.keys,sizes:Qu,baseStyle:function(e){return{container:Yu(e),track:Ku(e),thumb:$u(e),filledTrack:Zu(e)}},defaultProps:{size:"md",colorScheme:"blue"}},el=$i("spinner-size"),tl={baseStyle:{width:[el.reference],height:[el.reference]},sizes:{xs:(Fu={},Fu[el.variable]="0.75rem",Fu),sm:(Du={},Du[el.variable]="1rem",Du),md:(Lu={},Lu[el.variable]="1.5rem",Lu),lg:(zu={},zu[el.variable]="2rem",zu),xl:(ju={},ju[el.variable]="3rem",ju)},defaultProps:{size:"md"}},nl={container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:2},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"14px",h:"14px",verticalAlign:"middle"}},rl={parts:yo.keys,baseStyle:nl,sizes:{md:{label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}}},defaultProps:{size:"md"}},al=$i("switch-track-width"),il=$i("switch-track-height"),ol=$i("switch-track-diff"),sl=qi.subtract(al,il),ul=$i("switch-thumb-x"),ll=function(e){var t=e.colorScheme;return{borderRadius:"full",p:"2px",width:[al.reference],height:[il.reference],transitionProperty:"common",transitionDuration:"fast",bg:Oi("gray.300","whiteAlpha.400")(e),_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{bg:Oi(t+".500",t+".200")(e)}}},cl={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[il.reference],height:[il.reference],_checked:{transform:"translateX("+ul.reference+")"}},fl={sm:{container:(Bu={},Bu[al.variable]="1.375rem",Bu[il.variable]="0.75rem",Bu)},md:{container:(Wu={},Wu[al.variable]="1.875rem",Wu[il.variable]="1rem",Wu)},lg:{container:(Uu={},Uu[al.variable]="2.875rem",Uu[il.variable]="1.5rem",Uu)}},dl={parts:bo.keys,baseStyle:function(e){var t,n;return{container:(n={},n[ol.variable]=sl,n[ul.variable]=ol.reference,n._rtl=(t={},t[ul.variable]=qi(ol).negate().toString(),t),n),track:ll(e),thumb:cl}},sizes:fl,defaultProps:{size:"md",colorScheme:"blue"}},hl={"&[data-is-numeric=true]":{textAlign:"end"}},pl={simple:function(e){var t=e.colorScheme;return{th:ti({color:Oi("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Oi(t+".100",t+".700")(e)},hl),td:ti({borderBottom:"1px",borderColor:Oi(t+".100",t+".700")(e)},hl),caption:{color:Oi("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},striped:function(e){var t=e.colorScheme;return{th:ti({color:Oi("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Oi(t+".100",t+".700")(e)},hl),td:ti({borderBottom:"1px",borderColor:Oi(t+".100",t+".700")(e)},hl),caption:{color:Oi("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Oi(t+".100",t+".700")(e)},td:{background:Oi(t+".100",t+".700")(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},unstyled:{}},vl={parts:xo.keys,baseStyle:{table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}},variants:pl,sizes:{sm:{th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}},md:{th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}},lg:{th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}}},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}},gl=function(e){return{display:"vertical"===e.orientation?"flex":"block"}},ml=function(e){return{flex:e.isFitted?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},yl=function(e){var t=e.align,n=void 0===t?"start":t,r=e.orientation;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[n],flexDirection:"vertical"===r?"column":"row"}},bl={p:4},xl={line:function(e){var t,n,r=e.colorScheme,a=e.orientation,i="vertical"===a?"borderStart":"borderBottom",o="vertical"===a?"marginStart":"marginBottom";return{tablist:(t={},t[i]="2px solid",t.borderColor="inherit",t),tab:(n={},n[i]="2px solid",n.borderColor="transparent",n[o]="-2px",n._selected={color:Oi(r+".600",r+".300")(e),borderColor:"currentColor"},n._active={bg:Oi("gray.200","whiteAlpha.300")(e)},n._disabled={_active:{bg:"none"}},n)}},enclosed:function(e){var t=e.colorScheme;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",_selected:{color:Oi(t+".600",t+".300")(e),borderColor:"inherit",borderBottomColor:Oi("white","gray.800")(e)}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"enclosed-colored":function(e){var t=e.colorScheme;return{tab:{border:"1px solid",borderColor:"inherit",bg:Oi("gray.50","whiteAlpha.50")(e),mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{bg:Oi("#fff","gray.800")(e),color:Oi(t+".600",t+".300")(e),borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"soft-rounded":function(e){var t=e.colorScheme,n=e.theme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Ii(n,t+".700"),bg:Ii(n,t+".100")}}}},"solid-rounded":function(e){var t=e.colorScheme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:Oi("gray.600","inherit")(e),_selected:{color:Oi("#fff","gray.800")(e),bg:Oi(t+".600",t+".300")(e)}}}},unstyled:{}},kl={parts:ko.keys,baseStyle:function(e){return{root:gl(e),tab:ml(e),tablist:yl(e),tabpanel:bl}},sizes:{sm:{tab:{py:1,px:4,fontSize:"sm"}},md:{tab:{fontSize:"md",py:2,px:4}},lg:{tab:{fontSize:"lg",py:3,px:4}}},variants:xl,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}},wl={container:{fontWeight:"medium",lineHeight:1.2,outline:0,borderRadius:"md",_focusVisible:{boxShadow:"outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"18px",w:"1.25rem",h:"1.25rem",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"0.375rem",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}},Sl={subtle:function(e){return{container:jo.variants.subtle(e)}},solid:function(e){return{container:jo.variants.solid(e)}},outline:function(e){return{container:jo.variants.outline(e)}}},_l={parts:wo.keys,variants:Sl,baseStyle:wl,sizes:{sm:{container:{minH:"1.25rem",minW:"1.25rem",fontSize:"xs",px:2},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}},md:{container:{minH:"1.5rem",minW:"1.5rem",fontSize:"sm",px:2}},lg:{container:{minH:8,minW:8,fontSize:"md",px:3}}},defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}},Cl=ti({},Es.baseStyle.field,{paddingY:"8px",minHeight:"80px",lineHeight:"short",verticalAlign:"top"}),El={outline:function(e){var t;return null!=(t=Es.variants.outline(e).field)?t:{}},flushed:function(e){var t;return null!=(t=Es.variants.flushed(e).field)?t:{}},filled:function(e){var t;return null!=(t=Es.variants.filled(e).field)?t:{}},unstyled:null!=(Vu=Es.variants.unstyled.field)?Vu:{}},Al={baseStyle:Cl,sizes:{xs:null!=(Hu=Es.sizes.xs.field)?Hu:{},sm:null!=(Gu=Es.sizes.sm.field)?Gu:{},md:null!=(qu=Es.sizes.md.field)?qu:{},lg:null!=(Xu=Es.sizes.lg.field)?Xu:{}},variants:El,defaultProps:{size:"md",variant:"outline"}},Il=$i("tooltip-bg"),Tl=$i("popper-arrow-bg"),Rl={baseStyle:function(e){var t,n=Oi("gray.700","gray.300")(e);return(t={})[Il.variable]="colors."+n,t.px="8px",t.py="2px",t.bg=[Il.reference],t[Tl.variable]=[Il.reference],t.color=Oi("whiteAlpha.900","gray.900")(e),t.borderRadius="sm",t.fontWeight="medium",t.fontSize="sm",t.boxShadow="md",t.maxW="320px",t.zIndex="tooltip",t}},Nl={Accordion:Co,Alert:Io,Avatar:Lo,Badge:jo,Breadcrumb:Wo,Button:Go,Checkbox:$o,CloseButton:Qo,Code:Jo,Container:es,Divider:ts,Drawer:fs,Editable:hs,Form:gs,FormError:bs,FormLabel:xs,Heading:ks,Input:Es,Kbd:As,Link:Is,List:Rs,Menu:Ls,Modal:$s,NumberInput:lu,PinInput:cu,Popover:xu,Progress:_u,Radio:Eu,Select:Nu,Skeleton:Ou,SkipLink:Pu,Slider:Ju,Spinner:tl,Stat:rl,Switch:dl,Table:vl,Tabs:kl,Tag:_l,Textarea:Al,Tooltip:Rl},Ml=function(e){return It({condition:!0,message:["[chakra-ui]: createBreakpoints(...) will be deprecated pretty soon","simply pass the breakpoints as an object. Remove the createBreakpoint(..) call"].join("")}),Fi({base:"0em"},e)}({sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"}),Ol=ti({breakpoints:Ml,zIndices:{hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},radii:{none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},blur:{none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},colors:{transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}}},So,{sizes:ni,shadows:{xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},space:ei,borders:{none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},transition:{property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}}}),Pl=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function Fl(e){return!!He(e)&&Pl.every((function(t){return Object.prototype.hasOwnProperty.call(e,t)}))}var Dl=ti({semanticTokens:{colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},direction:"ltr"},Ol,{components:Nl,styles:{global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color",wordWrap:"break-word"}}},config:{useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"}}),Ll={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},zl=qa("span",{baseStyle:Ll});qa("input",{baseStyle:Ll});function jl(){return jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jl.apply(this,arguments)}var Bl=["label","thickness","speed","emptyColor","className"],Wl=Me({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Ul=Wa((function(e,n){var r=Ha("Spinner",e),a=Ma(e),i=a.label,o=void 0===i?"Loading...":i,s=a.thickness,u=void 0===s?"2px":s,l=a.speed,c=void 0===l?"0.45s":l,f=a.emptyColor,d=void 0===f?"transparent":f,h=a.className,p=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(a,Bl),v=vt("chakra-spinner",h),g=jl({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:u,borderBottomColor:d,borderLeftColor:d,animation:Wl+" "+c+" linear infinite"},r);return t.createElement(qa.div,jl({ref:n,__css:g,className:v},p),o&&t.createElement(zl,null,o))}));function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vl.apply(this,arguments)}var Hl=["as","viewBox","color","focusable","children","className","__css"],Gl={path:t.createElement("g",{stroke:"currentColor",strokeWidth:"1.5"},t.createElement("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),t.createElement("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),t.createElement("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})),viewBox:"0 0 24 24"},ql=Wa((function(e,n){var r=e.as,a=e.viewBox,i=e.color,o=void 0===i?"currentColor":i,s=e.focusable,u=void 0!==s&&s,l=e.children,c=e.className,f=e.__css,d=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Hl),h={ref:n,focusable:u,className:vt("chakra-icon",c),__css:Vl({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:o},f)},p=null!=a?a:Gl.viewBox;if(r&&"string"!==typeof r)return t.createElement(qa.svg,Vl({as:r},h,d));var v=null!=l?l:Gl.path;return t.createElement(qa.svg,Vl({verticalAlign:"middle",viewBox:p},h,d),v)}));function Xl(e){var n=e.viewBox,r=void 0===n?"0 0 24 24":n,a=e.d,i=(e.displayName,e.defaultProps),o=void 0===i?{}:i,s=t.Children.toArray(e.path),u=Wa((function(e,n){return t.createElement(ql,Vl({ref:n,viewBox:r},o,e),s.length?s:t.createElement("path",{fill:"currentColor",d:a}))}));return u}function Yl(){return Yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yl.apply(this,arguments)}var Kl=function(e){return t.createElement(ql,Yl({viewBox:"0 0 24 24"},e),t.createElement("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"}))},$l=["status"],Zl=Ra("Alert"),Ql=Zl[0],Jl=Zl[1],ec={info:{icon:function(e){return t.createElement(ql,Yl({viewBox:"0 0 24 24"},e),t.createElement("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"}))},colorScheme:"blue"},warning:{icon:Kl,colorScheme:"orange"},success:{icon:function(e){return t.createElement(ql,Yl({viewBox:"0 0 24 24"},e),t.createElement("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"}))},colorScheme:"green"},error:{icon:Kl,colorScheme:"red"},loading:{icon:Ul,colorScheme:"blue"}},tc=Dt({name:"AlertContext",errorMessage:"useAlertContext: `context` is undefined. Seems you forgot to wrap alert components in `<Alert />`"}),nc=tc[0],rc=tc[1],ac=Wa((function(e,n){var r,a=Ma(e),i=a.status,o=void 0===i?"info":i,s=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(a,$l),u=Ga("Alert",Yl({},e,{colorScheme:null!=(r=e.colorScheme)?r:ec[o].colorScheme})),l=Yl({width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},u.container);return t.createElement(nc,{value:{status:o}},t.createElement(Ql,{value:u},t.createElement(qa.div,Yl({role:"alert",ref:n},s,{className:vt("chakra-alert",e.className),__css:l}))))})),ic=Wa((function(e,n){var r=Jl();return t.createElement(qa.div,Yl({ref:n},e,{className:vt("chakra-alert__title",e.className),__css:r.title}))})),oc=Wa((function(e,n){var r=Yl({display:"inline"},Jl().description);return t.createElement(qa.div,Yl({ref:n},e,{className:vt("chakra-alert__desc",e.className),__css:r}))})),sc=function(e){var n=rc().status,r=ec[n].icon,a=Jl(),i="loading"===n?a.spinner:a.icon;return t.createElement(qa.span,Yl({display:"inherit"},e,{className:vt("chakra-alert__icon",e.className),__css:i}),e.children||t.createElement(r,{h:"100%",w:"100%"}))};function uc(){return uc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uc.apply(this,arguments)}var lc=["children","isDisabled","__css"],cc=function(e){return t.createElement(ql,uc({focusable:"false","aria-hidden":!0},e),t.createElement("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}))},fc=Wa((function(e,n){var r=Ha("CloseButton",e),a=Ma(e),i=a.children,o=a.isDisabled,s=a.__css,u=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(a,lc);return t.createElement(qa.button,uc({type:"button","aria-label":"Close",ref:n,disabled:o,__css:uc({},{outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},r,s)},u),i||t.createElement(cc,{width:"1em",height:"1em"}))}));var dc=(0,t.createContext)(null);function hc(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}var pc=0,vc=function(){return pc++},gc=function(){return hc(vc)};function mc(){var e=(0,t.useContext)(dc);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,a=e.register,i=gc();(0,t.useEffect)((function(){return a(i)}),[]);return!n&&r?[!1,function(){return null===r||void 0===r?void 0:r(i)}]:[!0]}function yc(){return null===(e=(0,t.useContext)(dc))||e.isPresent;var e}var bc=function(e,t){return bc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},bc(e,t)};function xc(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}bc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var kc=function(){return kc=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},kc.apply(this,arguments)};function wc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;function Sc(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _c(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function Cc(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var Ec=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},Ac={measureLayout:Ec(["layout","layoutId","drag"]),animation:Ec(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:Ec(["exit"]),drag:Ec(["drag","dragControls"]),focus:Ec(["whileFocus"]),hover:Ec(["whileHover","onHoverStart","onHoverEnd"]),tap:Ec(["whileTap","onTap","onTapStart","onTapCancel"]),pan:Ec(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:Ec(["whileInView","onViewportEnter","onViewportLeave"])};var Ic=(0,t.createContext)({strict:!1}),Tc=Object.keys(Ac),Rc=Tc.length;var Nc=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),Mc=(0,t.createContext)({});var Oc="undefined"!==typeof document,Pc=Oc?t.useLayoutEffect:t.useEffect,Fc={current:null},Dc=!1;function Lc(){return!Dc&&function(){if(Dc=!0,Oc)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return Fc.current=e.matches};e.addListener(t),t()}else Fc.current=!1}(),_c((0,t.useState)(Fc.current),1)[0]}function zc(e,n,r,a){var i=(0,t.useContext)(Ic),o=(0,t.useContext)(Mc).visualElement,s=(0,t.useContext)(dc),u=function(){var e=Lc(),n=(0,t.useContext)(Nc).reducedMotion;return"never"!==n&&("always"===n||e)}(),l=(0,t.useRef)(void 0);a||(a=i.renderer),!l.current&&a&&(l.current=a(e,{visualState:n,parent:o,props:r,presenceId:null===s||void 0===s?void 0:s.id,blockInitialAnimation:!1===(null===s||void 0===s?void 0:s.initial),shouldReduceMotion:u}));var c=l.current;return Pc((function(){null===c||void 0===c||c.syncRender()})),(0,t.useEffect)((function(){var e;null===(e=null===c||void 0===c?void 0:c.animationState)||void 0===e||e.animateChanges()})),Pc((function(){return function(){return null===c||void 0===c?void 0:c.notifyUnmount()}}),[]),c}function jc(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Bc(e){return Array.isArray(e)}function Wc(e){return"string"===typeof e||Bc(e)}function Uc(e,t,n,r,a){var i;return void 0===r&&(r={}),void 0===a&&(a={}),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,r,a)),"string"===typeof t&&(t=null===(i=e.variants)||void 0===i?void 0:i[t]),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,r,a)),t}function Vc(e,t,n){var r=e.getProps();return Uc(r,t,null!==n&&void 0!==n?n:r.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function Hc(e){var t;return"function"===typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||Wc(e.initial)||Wc(e.animate)||Wc(e.whileHover)||Wc(e.whileDrag)||Wc(e.whileTap)||Wc(e.whileFocus)||Wc(e.exit)}function Gc(e){return Boolean(Hc(e)||e.variants)}function qc(e){var n=function(e,t){if(Hc(e)){var n=e.initial,r=e.animate;return{initial:!1===n||Wc(n)?n:void 0,animate:Wc(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Mc)),r=n.initial,a=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:a}}),[Xc(r),Xc(a)])}function Xc(e){return Array.isArray(e)?e.join(" "):e}var Yc=1/60*1e3,Kc="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},$c="undefined"!==typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(Kc())}),Yc)};var Zc=!0,Qc=!1,Jc=!1,ef={delta:0,timestamp:0},tf=["read","update","preRender","render","postRender"],nf=tf.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,a=!1,i=!1,o=new WeakSet,s={schedule:function(e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&a,s=i?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===s.indexOf(e)&&(s.push(e),i&&a&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(u){if(a)i=!0;else{a=!0;var l=[n,t];if(t=l[0],(n=l[1]).length=0,r=t.length)for(var c=0;c<r;c++){var f=t[c];f(u),o.has(f)&&(s.schedule(f),e())}a=!1,i&&(i=!1,s.process(u))}}};return s}((function(){return Qc=!0})),e}),{}),rf=tf.reduce((function(e,t){var n=nf[t];return e[t]=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Qc||lf(),n.schedule(e,t,r)},e}),{}),af=tf.reduce((function(e,t){return e[t]=nf[t].cancel,e}),{}),of=tf.reduce((function(e,t){return e[t]=function(){return nf[t].process(ef)},e}),{}),sf=function(e){return nf[e].process(ef)},uf=function e(t){Qc=!1,ef.delta=Zc?Yc:Math.max(Math.min(t-ef.timestamp,40),1),ef.timestamp=t,Jc=!0,tf.forEach(sf),Jc=!1,Qc&&(Zc=!1,$c(e))},lf=function(){Qc=!0,Zc=!0,Jc||$c(uf)},cf=function(){return ef},ff=rf,df=function(e,t,n){return-n*e+n*t+e};function hf(e,t){return t?e*(1e3/t):0}function pf(e,t){-1===e.indexOf(t)&&e.push(t)}function vf(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var gf=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return pf(this.subscriptions,e),function(){return vf(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var a=0;a<r;a++){var i=this.subscriptions[a];i&&i(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),mf=function(){function e(e){var t,n=this;this.version="6.3.11",this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new gf,this.velocityUpdateSubscribers=new gf,this.renderSubscribers=new gf,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),n.prev=n.current,n.current=e;var r=cf(),a=r.delta,i=r.timestamp;n.lastUpdated!==i&&(n.timeDelta=a,n.lastUpdated=i,ff.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return ff.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?hf(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function yf(e){return new mf(e)}var bf=function(e){return Boolean(null!==e&&"object"===typeof e&&e.getVelocity)};function xf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;Object.create;var kf=function(e,t,n){return Math.min(Math.max(n,e),t)},wf=.001;function Sf(e){var t,n,r=e.duration,a=void 0===r?800:r,i=e.bounce,o=void 0===i?.25:i,s=e.velocity,u=void 0===s?0:s,l=e.mass,c=void 0===l?1:l,f=1-o;f=kf(.05,1,f),a=kf(.01,10,a/1e3),f<1?(t=function(e){var t=e*f,n=t*a,r=t-u,i=_f(e,f),o=Math.exp(-n);return wf-r/i*o},n=function(e){var n=e*f*a,r=n*u+u,i=Math.pow(f,2)*Math.pow(e,2)*a,o=Math.exp(-n),s=_f(Math.pow(e,2),f);return(-t(e)+wf>0?-1:1)*((r-i)*o)/s}):(t=function(e){return Math.exp(-e*a)*((e-u)*a+1)-.001},n=function(e){return Math.exp(-e*a)*(a*a*(u-e))});var d=function(e,t,n){for(var r=n,a=1;a<12;a++)r-=e(r)/t(r);return r}(t,n,5/a);if(a*=1e3,isNaN(d))return{stiffness:100,damping:10,duration:a};var h=Math.pow(d,2)*c;return{stiffness:h,damping:2*f*Math.sqrt(c*h),duration:a}}function _f(e,t){return e*Math.sqrt(1-t*t)}var Cf=["duration","bounce"],Ef=["stiffness","damping","mass"];function Af(e,t){return t.some((function(t){return void 0!==e[t]}))}function If(e){var t=e.from,n=void 0===t?0:t,r=e.to,a=void 0===r?1:r,i=e.restSpeed,o=void 0===i?2:i,s=e.restDelta,u=xf(e,["from","to","restSpeed","restDelta"]),l={done:!1,value:n},c=function(e){var t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!Af(e,Ef)&&Af(e,Cf)){var n=Sf(e);(t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(u),f=c.stiffness,d=c.damping,h=c.mass,p=c.velocity,v=c.duration,g=c.isResolvedFromDuration,m=Tf,y=Tf;function b(){var e=p?-p/1e3:0,t=a-n,r=d/(2*Math.sqrt(f*h)),i=Math.sqrt(f/h)/1e3;if(void 0===s&&(s=Math.min(Math.abs(a-n)/100,.4)),r<1){var o=_f(i,r);m=function(n){var s=Math.exp(-r*i*n);return a-s*((e+r*i*t)/o*Math.sin(o*n)+t*Math.cos(o*n))},y=function(n){var a=Math.exp(-r*i*n);return r*i*a*(Math.sin(o*n)*(e+r*i*t)/o+t*Math.cos(o*n))-a*(Math.cos(o*n)*(e+r*i*t)-o*t*Math.sin(o*n))}}else if(1===r)m=function(n){return a-Math.exp(-i*n)*(t+(e+i*t)*n)};else{var u=i*Math.sqrt(r*r-1);m=function(n){var o=Math.exp(-r*i*n),s=Math.min(u*n,300);return a-o*((e+r*i*t)*Math.sinh(s)+u*t*Math.cosh(s))/u}}}return b(),{next:function(e){var t=m(e);if(g)l.done=e>=v;else{var n=1e3*y(e),r=Math.abs(n)<=o,i=Math.abs(a-t)<=s;l.done=r&&i}return l.value=l.done?a:t,l},flipTarget:function(){p=-p;var e=[a,n];n=e[0],a=e[1],b()}}}If.needsInterpolation=function(e,t){return"string"===typeof e||"string"===typeof t};var Tf=function(e){return 0};function Rf(e){if(Array.isArray(e))return e}function Nf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mf(e,t){if(e){if("string"===typeof e)return Nf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nf(e,t):void 0}}function Of(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pf(e,t){return Rf(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||Mf(e,t)||Of()}var Ff=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},Df=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},Lf=function(e){return e%1?Number(e.toFixed(5)):e},zf=/(-)?([\d]*\.?[\d])+/g,jf=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,Bf=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function Wf(e){return"string"===typeof e}var Uf={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},Vf=Object.assign(Object.assign({},Uf),{transform:Df(0,1)}),Hf=Object.assign(Object.assign({},Uf),{default:1});function Gf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qf=function(e,t){return function(n){return Boolean(Wf(n)&&Bf.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},Xf=function(e,t,n){return function(r){var a;if(!Wf(r))return r;var i=Pf(r.match(zf),4),o=i[0],s=i[1],u=i[2],l=i[3];return Gf(a={},e,parseFloat(o)),Gf(a,t,parseFloat(s)),Gf(a,n,parseFloat(u)),Gf(a,"alpha",void 0!==l?parseFloat(l):1),a}},Yf=Df(0,255),Kf=Object.assign(Object.assign({},Uf),{transform:function(e){return Math.round(Yf(e))}}),$f={test:qf("rgb","red"),parse:Xf("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,a=e.alpha,i=void 0===a?1:a;return"rgba("+Kf.transform(t)+", "+Kf.transform(n)+", "+Kf.transform(r)+", "+Lf(Vf.transform(i))+")"}};var Zf={test:qf("#"),parse:function(e){var t="",n="",r="",a="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),a=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),a=e.substr(4,1),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}},transform:$f.transform},Qf=function(e){return{test:function(t){return Wf(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},Jf=Qf("deg"),ed=Qf("%"),td=Qf("px"),nd=Qf("vh"),rd=Qf("vw"),ad=Object.assign(Object.assign({},ed),{parse:function(e){return ed.parse(e)/100},transform:function(e){return ed.transform(100*e)}}),id={test:qf("hsl","hue"),parse:Xf("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,a=e.alpha,i=void 0===a?1:a;return"hsla("+Math.round(t)+", "+ed.transform(Lf(n))+", "+ed.transform(Lf(r))+", "+Lf(Vf.transform(i))+")"}};function od(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function sd(e){var t=e.hue,n=e.saturation,r=e.lightness,a=e.alpha;t/=360,r/=100;var i=0,o=0,s=0;if(n/=100){var u=r<.5?r*(1+n):r+n-r*n,l=2*r-u;i=od(l,u,t+1/3),o=od(l,u,t),s=od(l,u,t-1/3)}else i=o=s=r;return{red:Math.round(255*i),green:Math.round(255*o),blue:Math.round(255*s),alpha:a}}var ud=function(e,t,n){var r=e*e,a=t*t;return Math.sqrt(Math.max(0,n*(a-r)+r))},ld=[Zf,$f,id],cd=function(e){return ld.find((function(t){return t.test(e)}))},fd=function(e){return"'".concat(e,"' is not an animatable color. Use the equivalent color code instead.")},dd=function(e,t){var n=cd(e),r=cd(t);fd(e),fd(t);var a=n.parse(e),i=r.parse(t);n===id&&(a=sd(a),n=$f),r===id&&(i=sd(i),r=$f);var o=Object.assign({},a);return function(e){for(var t in o)"alpha"!==t&&(o[t]=ud(a[t],i[t],e));return o.alpha=df(a.alpha,i.alpha,e),n.transform(o)}};function hd(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function pd(e){return function(e){if(Array.isArray(e))return Nf(e)}(e)||hd(e)||Mf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vd={test:function(e){return $f.test(e)||Zf.test(e)||id.test(e)},parse:function(e){return $f.test(e)?$f.parse(e):id.test(e)?id.parse(e):Zf.parse(e)},transform:function(e){return Wf(e)?e:e.hasOwnProperty("red")?$f.transform(e):id.transform(e)}},gd="${c}",md="${n}";function yd(e){"number"===typeof e&&(e="".concat(e));var t=[],n=0,r=e.match(jf);r&&(n=r.length,e=e.replace(jf,gd),t.push.apply(t,pd(r.map(vd.parse))));var a=e.match(zf);return a&&(e=e.replace(zf,md),t.push.apply(t,pd(a.map(Uf.parse)))),{values:t,numColors:n,tokenised:e}}function bd(e){return yd(e).values}function xd(e){var t=yd(e),n=t.values,r=t.numColors,a=t.tokenised,i=n.length;return function(e){for(var t=a,n=0;n<i;n++)t=t.replace(n<r?gd:md,n<r?vd.transform(e[n]):Lf(e[n]));return t}}var kd=function(e){return"number"===typeof e?0:e};var wd={test:function(e){var t,n,r,a;return isNaN(e)&&Wf(e)&&(null!==(n=null===(t=e.match(zf))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(a=null===(r=e.match(jf))||void 0===r?void 0:r.length)&&void 0!==a?a:0)>0},parse:bd,createTransformer:xd,getAnimatableNone:function(e){var t=bd(e);return xd(e)(t.map(kd))}},Sd=function(e){return"number"===typeof e},_d=function(e,t){return function(n){return t(e(n))}},Cd=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(_d)};function Ed(e,t){return Sd(e)?function(n){return df(e,t,n)}:vd.test(e)?dd(e,t):Rd(e,t)}var Ad=function(e,t){var n=pd(e),r=n.length,a=e.map((function(e,n){return Ed(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=a[t](e);return n}},Id=function(e,t){var n=Object.assign(Object.assign({},e),t),r={};for(var a in n)void 0!==e[a]&&void 0!==t[a]&&(r[a]=Ed(e[a],t[a]));return function(e){for(var t in r)n[t]=r[t](e);return n}};function Td(e){for(var t=wd.parse(e),n=t.length,r=0,a=0,i=0,o=0;o<n;o++)r||"number"===typeof t[o]?r++:void 0!==t[o].hue?i++:a++;return{parsed:t,numNumbers:r,numRGB:a,numHSL:i}}var Rd=function(e,t){var n=wd.createTransformer(t),r=Td(e),a=Td(t);return r.numHSL===a.numHSL&&r.numRGB===a.numRGB&&r.numNumbers>=a.numNumbers?Cd(Ad(r.parsed,a.parsed),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),function(n){return"".concat(n>0?t:e)})},Nd=function(e,t){return function(n){return df(e,t,n)}};function Md(e,t,n){for(var r,a=[],i=n||("number"===typeof(r=e[0])?Nd:"string"===typeof r?vd.test(r)?dd:Rd:Array.isArray(r)?Ad:"object"===typeof r?Id:void 0),o=e.length-1,s=0;s<o;s++){var u=i(e[s],e[s+1]);if(t){var l=Array.isArray(t)?t[s]:t;u=Cd(l,u)}a.push(u)}return a}function Od(e,t){var n=Pf(e,2),r=n[0],a=n[1],i=Pf(t,1)[0];return function(e){return i(Ff(r,a,e))}}function Pd(e,t){var n=e.length,r=n-1;return function(a){var i=0,o=!1;if(a<=e[0]?o=!0:a>=e[r]&&(i=r-1,o=!0),!o){for(var s=1;s<n&&!(e[s]>a||s===r);s++);i=s-1}var u=Ff(e[i],e[i+1],a);return t[i](u)}}function Fd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clamp,a=void 0===r||r,i=n.ease,o=n.mixer,s=e.length;t.length,!i||!Array.isArray(i)||i.length,e[0]>e[s-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());var u=Md(t,i,o),l=2===s?Od(e,u):Pd(e,u);return a?function(t){return l(kf(e[0],e[s-1],t))}:l}var Dd,Ld=function(e){return function(t){return 1-e(1-t)}},zd=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},jd=function(e){return function(t){return t*t*((e+1)*t-e)}},Bd=function(e){return e},Wd=(Dd=2,function(e){return Math.pow(e,Dd)}),Ud=Ld(Wd),Vd=zd(Wd),Hd=function(e){return 1-Math.sin(Math.acos(e))},Gd=Ld(Hd),qd=zd(Gd),Xd=jd(1.525),Yd=Ld(Xd),Kd=zd(Xd),$d=function(e){var t=jd(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}}(1.525),Zd=function(e){if(1===e||0===e)return e;var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},Qd=Ld(Zd);function Jd(e,t){return e.map((function(){return t||Vd})).splice(0,e.length-1)}function eh(e){var t=e.from,n=void 0===t?0:t,r=e.to,a=void 0===r?1:r,i=e.ease,o=e.offset,s=e.duration,u=void 0===s?300:s,l={done:!1,value:n},c=Array.isArray(a)?a:[n,a],f=function(e,t){return e.map((function(e){return e*t}))}(o&&o.length===c.length?o:function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(c),u);function d(){return Fd(f,c,{ease:Array.isArray(i)?i:Jd(c,i)})}var h=d();return{next:function(e){return l.value=h(e),l.done=e>=u,l},flipTarget:function(){c.reverse(),h=d()}}}var th={keyframes:eh,spring:If,decay:function(e){var t=e.velocity,n=void 0===t?0:t,r=e.from,a=void 0===r?0:r,i=e.power,o=void 0===i?.8:i,s=e.timeConstant,u=void 0===s?350:s,l=e.restDelta,c=void 0===l?.5:l,f=e.modifyTarget,d={done:!1,value:a},h=o*n,p=a+h,v=void 0===f?p:f(p);return v!==p&&(h=v-a),{next:function(e){var t=-h*Math.exp(-e/u);return d.done=!(t>c||t<-c),d.value=d.done?v:v+t,d},flipTarget:function(){}}}};var nh=1/60*1e3,rh="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},ah="undefined"!==typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(rh())}),nh)};var ih=!0,oh=!1,sh=!1,uh={delta:0,timestamp:0},lh=["read","update","preRender","render","postRender"],ch=lh.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,a=!1,i=!1,o=new WeakSet,s={schedule:function(e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&a,s=i?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===s.indexOf(e)&&(s.push(e),i&&a&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(u){if(a)i=!0;else{a=!0;var l=[n,t];if(t=l[0],(n=l[1]).length=0,r=t.length)for(var c=0;c<r;c++){var f=t[c];f(u),o.has(f)&&(s.schedule(f),e())}a=!1,i&&(i=!1,s.process(u))}}};return s}((function(){return oh=!0})),e}),{}),fh=lh.reduce((function(e,t){var n=ch[t];return e[t]=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return oh||vh(),n.schedule(e,t,r)},e}),{}),dh=lh.reduce((function(e,t){return e[t]=ch[t].cancel,e}),{}),hh=(lh.reduce((function(e,t){return e[t]=function(){return ch[t].process(uh)},e}),{}),function(e){return ch[e].process(uh)}),ph=function e(t){oh=!1,uh.delta=ih?nh:Math.max(Math.min(t-uh.timestamp,40),1),uh.timestamp=t,sh=!0,lh.forEach(hh),sh=!1,oh&&(ih=!1,ah(e))},vh=function(){oh=!0,ih=!0,sh||ah(ph)},gh=fh;function mh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e-t-n}var yh=function(e){var t=function(t){var n=t.delta;return e(n)};return{start:function(){return gh.update(t,!0)},stop:function(){return dh.update(t)}}};function bh(e){var t,n,r,a,i,o=e.from,s=e.autoplay,u=void 0===s||s,l=e.driver,c=void 0===l?yh:l,f=e.elapsed,d=void 0===f?0:f,h=e.repeat,p=void 0===h?0:h,v=e.repeatType,g=void 0===v?"loop":v,m=e.repeatDelay,y=void 0===m?0:m,b=e.onPlay,x=e.onStop,k=e.onComplete,w=e.onRepeat,S=e.onUpdate,_=xf(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),C=_.to,E=0,A=_.duration,I=!1,T=!0,R=function(e){if(Array.isArray(e.to))return eh;if(th[e.type])return th[e.type];var t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?eh:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?If:eh}(_);(null===(n=(t=R).needsInterpolation)||void 0===n?void 0:n.call(t,o,C))&&(i=Fd([0,100],[o,C],{clamp:!1}),o=0,C=100);var N=R(Object.assign(Object.assign({},_),{from:o,to:C}));function M(){E++,"reverse"===g?d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?t-(e-t)+n:mh(t+-e,t,n)}(d,A,y,T=E%2===0):(d=mh(d,A,y),"mirror"===g&&N.flipTarget()),I=!1,w&&w()}function O(e){if(T||(e=-e),d+=e,!I){var t=N.next(Math.max(0,d));a=t.value,i&&(a=i(a)),I=T?t.done:d<=0}null===S||void 0===S||S(a),I&&(0===E&&(null!==A&&void 0!==A||(A=d)),E<p?function(e,t,n,r){return r?e>=t+n:e<=-n}(d,A,y,T)&&M():(r.stop(),k&&k()))}return u&&(null===b||void 0===b||b(),(r=c(O)).start()),{stop:function(){null===x||void 0===x||x(),r.stop()}}}function xh(e){var t,n=e.from,r=void 0===n?0:n,a=e.velocity,i=void 0===a?0:a,o=e.min,s=e.max,u=e.power,l=void 0===u?.8:u,c=e.timeConstant,f=void 0===c?750:c,d=e.bounceStiffness,h=void 0===d?500:d,p=e.bounceDamping,v=void 0===p?10:p,g=e.restDelta,m=void 0===g?1:g,y=e.modifyTarget,b=e.driver,x=e.onUpdate,k=e.onComplete,w=e.onStop;function S(e){return void 0!==o&&e<o||void 0!==s&&e>s}function _(e){return void 0===o?s:void 0===s||Math.abs(o-e)<Math.abs(s-e)?o:s}function C(e){null===t||void 0===t||t.stop(),t=bh(Object.assign(Object.assign({},e),{driver:b,onUpdate:function(t){var n;null===x||void 0===x||x(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:k,onStop:w}))}function E(e){C(Object.assign({type:"spring",stiffness:h,damping:v,restDelta:m},e))}if(S(r))E({from:r,velocity:i,to:_(r)});else{var A=l*i+r;"undefined"!==typeof y&&(A=y(A));var I,T,R=_(A),N=R===o?-1:1;C({type:"decay",from:r,velocity:i,timeConstant:f,power:l,restDelta:m,modifyTarget:y,onUpdate:S(A)?function(e){I=T,T=e,i=hf(e-I,uh.delta),(1===N&&e>R||-1===N&&e<R)&&E({from:e,to:R,velocity:i})}:void 0})}return{stop:function(){return null===t||void 0===t?void 0:t.stop()}}}var kh=function(e){return 1e3*e},wh=function(e,t){return 1-3*t+3*e},Sh=function(e,t){return 3*t-6*e},_h=function(e){return 3*e},Ch=function(e,t,n){return((wh(t,n)*e+Sh(t,n))*e+_h(t))*e},Eh=function(e,t,n){return 3*wh(t,n)*e*e+2*Sh(t,n)*e+_h(t)};var Ah=.1;function Ih(e,t,n,r){if(e===t&&n===r)return Bd;for(var a=new Float32Array(11),i=0;i<11;++i)a[i]=Ch(i*Ah,e,n);function o(t){for(var r=0,i=1;10!==i&&a[i]<=t;++i)r+=Ah;--i;var o=r+(t-a[i])/(a[i+1]-a[i])*Ah,s=Eh(o,e,n);return s>=.001?function(e,t,n,r){for(var a=0;a<8;++a){var i=Eh(t,n,r);if(0===i)return t;t-=(Ch(t,n,r)-e)/i}return t}(t,o,e,n):0===s?o:function(e,t,n,r,a){var i,o,s=0;do{(i=Ch(o=t+(n-t)/2,r,a)-e)>0?n=o:t=o}while(Math.abs(i)>1e-7&&++s<10);return o}(t,r,r+Ah,e,n)}return function(e){return 0===e||1===e?e:Ch(o(e),t,r)}}var Th={linear:Bd,easeIn:Wd,easeInOut:Vd,easeOut:Ud,circIn:Hd,circInOut:qd,circOut:Gd,backIn:Xd,backInOut:Kd,backOut:Yd,anticipate:$d,bounceIn:Qd,bounceInOut:function(e){return e<.5?.5*(1-Zd(1-2*e)):.5*Zd(2*e-1)+.5},bounceOut:Zd},Rh=function(e){if(Array.isArray(e)){e.length;var t=_c(e,4);return Ih(t[0],t[1],t[2],t[3])}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),Th[e]):e},Nh=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!wd.test(t)||t.startsWith("url(")))},Mh=function(e){return Array.isArray(e)},Oh=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},Ph=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},Fh=function(){return{type:"keyframes",ease:"linear",duration:.3}},Dh=function(e){return{type:"keyframes",duration:.8,values:e}},Lh={x:Oh,y:Oh,z:Oh,rotate:Oh,rotateX:Oh,rotateY:Oh,rotateZ:Oh,scaleX:Ph,scaleY:Ph,scale:Ph,opacity:Fh,backgroundColor:Fh,color:Fh,default:Ph},zh=new Set(["brightness","contrast","saturate","opacity"]);function jh(e){var t=Pf(e.slice(0,-1).split("("),2),n=t[0],r=t[1];if("drop-shadow"===n)return e;var a=Pf(r.match(zf)||[],1)[0];if(!a)return e;var i=r.replace(a,""),o=zh.has(n)?1:0;return a!==r&&(o*=100),n+"("+o+i+")"}var Bh=/([a-z-]*)\(.*?\)/g,Wh=Object.assign(Object.assign({},wd),{getAnimatableNone:function(e){var t=e.match(Bh);return t?t.map(jh).join(" "):e}}),Uh=kc(kc({},Uf),{transform:Math.round}),Vh={borderWidth:td,borderTopWidth:td,borderRightWidth:td,borderBottomWidth:td,borderLeftWidth:td,borderRadius:td,radius:td,borderTopLeftRadius:td,borderTopRightRadius:td,borderBottomRightRadius:td,borderBottomLeftRadius:td,width:td,maxWidth:td,height:td,maxHeight:td,size:td,top:td,right:td,bottom:td,left:td,padding:td,paddingTop:td,paddingRight:td,paddingBottom:td,paddingLeft:td,margin:td,marginTop:td,marginRight:td,marginBottom:td,marginLeft:td,rotate:Jf,rotateX:Jf,rotateY:Jf,rotateZ:Jf,scale:Hf,scaleX:Hf,scaleY:Hf,scaleZ:Hf,skew:Jf,skewX:Jf,skewY:Jf,distance:td,translateX:td,translateY:td,translateZ:td,x:td,y:td,z:td,perspective:td,transformPerspective:td,opacity:Vf,originX:ad,originY:ad,originZ:td,zIndex:Uh,fillOpacity:Vf,strokeOpacity:Vf,numOctaves:Uh},Hh=kc(kc({},Vh),{color:vd,backgroundColor:vd,outlineColor:vd,fill:vd,stroke:vd,borderColor:vd,borderTopColor:vd,borderRightColor:vd,borderBottomColor:vd,borderLeftColor:vd,filter:Wh,WebkitFilter:Wh}),Gh=function(e){return Hh[e]};function qh(e,t){var n,r=Gh(e);return r!==Wh&&(r=wd),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}var Xh=!1,Yh=function(e){return Mh(e)?e[e.length-1]||0:e};function Kh(e){var t=e.ease,n=e.times,r=e.yoyo,a=e.flip,i=e.loop,o=wc(e,["ease","times","yoyo","flip","loop"]),s=kc({},o);return n&&(s.offset=n),o.duration&&(s.duration=kh(o.duration)),o.repeatDelay&&(s.repeatDelay=kh(o.repeatDelay)),t&&(s.ease=function(e){return Array.isArray(e)&&"number"!==typeof e[0]}(t)?t.map(Rh):Rh(t)),"tween"===o.type&&(s.type="keyframes"),(r||i||a)&&(!0,r?s.repeatType="reverse":i?s.repeatType="loop":a&&(s.repeatType="mirror"),s.repeat=i||r||a||o.repeat),"spring"!==o.type&&(s.type="keyframes"),s}function $h(e,t,n){var r;return Array.isArray(t.to)&&(null!==(r=e.duration)&&void 0!==r||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=Cc([],_c(e.to),!1),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=wc(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=kc(kc({},e),function(e,t){var n;return n=Mh(t)?Dh:Lh[e]||Lh.default,kc({to:t},n(t))}(n,t.to))),kc(kc({},t),Kh(e))}function Zh(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function Qh(e){return"number"===typeof e?0:qh("",e)}function Jh(e,t){return e[t]||e.default||e}function ep(e,t,n,r){return void 0===r&&(r={}),Xh&&(r={type:!1}),t.start((function(a){var i,o,s=function(e,t,n,r,a){var i,o=Jh(r,e),s=null!==(i=o.from)&&void 0!==i?i:t.get(),u=Nh(e,n);"none"===s&&u&&"string"===typeof n?s=qh(e,n):Zh(s)&&"string"===typeof n?s=Qh(n):!Array.isArray(n)&&Zh(n)&&"string"===typeof s&&(n=Qh(s));var l=Nh(e,s);return"You are trying to animate ".concat(e,' from "').concat(s,'" to "').concat(n,'". ').concat(s," is not an animatable value - to enable this animation set ").concat(s," to a value animatable to ").concat(n," via the `style` property."),l&&u&&!1!==o.type?function(){var r={from:s,to:n,velocity:t.getVelocity(),onComplete:a,onUpdate:function(e){return t.set(e)}};return"inertia"===o.type||"decay"===o.type?xh(kc(kc({},r),o)):bh(kc(kc({},$h(o,r,e)),{onUpdate:function(e){var t;r.onUpdate(e),null===(t=o.onUpdate)||void 0===t||t.call(o,e)},onComplete:function(){var e;r.onComplete(),null===(e=o.onComplete)||void 0===e||e.call(o)}}))}:function(){var e,r,i=Yh(n);return t.set(i),a(),null===(e=null===o||void 0===o?void 0:o.onUpdate)||void 0===e||e.call(o,i),null===(r=null===o||void 0===o?void 0:o.onComplete)||void 0===r||r.call(o),{stop:function(){}}}}(e,t,n,r,a),u=function(e,t){var n,r;return null!==(r=null!==(n=(Jh(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==r?r:0}(r,e),l=function(){return o=s()};return u?i=window.setTimeout(l,kh(u)):l(),function(){clearTimeout(i),null===o||void 0===o||o.stop()}}))}var tp=["TopLeft","TopRight","BottomLeft","BottomRight"],np=tp.length,rp=function(e){return"string"===typeof e?parseFloat(e):e},ap=function(e){return"number"===typeof e||td.test(e)};function ip(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}var op=up(0,.5,Gd),sp=up(.5,.95,Bd);function up(e,t,n){return function(r){return r<e?0:r>t?1:n(Ff(e,t,r))}}function lp(e,t){e.min=t.min,e.max=t.max}function cp(e,t){lp(e.x,t.x),lp(e.y,t.y)}function fp(e){return void 0===e||1===e}function dp(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!fp(t)||!fp(n)||!fp(r)}function hp(e){return dp(e)||pp(e.x)||pp(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function pp(e){return e&&"0%"!==e}function vp(e,t,n){return n+t*(e-n)}function gp(e,t,n,r,a){return void 0!==a&&(e=vp(e,a,r)),vp(e,n,r)+t}function mp(e,t,n,r,a){void 0===t&&(t=0),void 0===n&&(n=1),e.min=gp(e.min,t,n,r,a),e.max=gp(e.max,t,n,r,a)}function yp(e,t){var n=t.x,r=t.y;mp(e.x,n.translate,n.scale,n.originPoint),mp(e.y,r.translate,r.scale,r.originPoint)}function bp(e,t){e.min=e.min+t,e.max=e.max+t}function xp(e,t,n){var r=_c(n,3),a=r[0],i=r[1],o=r[2],s=void 0!==t[o]?t[o]:.5,u=df(e.min,e.max,s);mp(e,t[a],t[i],u,t.scale)}var kp=["x","scaleX","originX"],wp=["y","scaleY","originY"];function Sp(e,t){xp(e.x,t,kp),xp(e.y,t,wp)}var _p=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},Cp=function(e){return _p(e)&&e.hasOwnProperty("z")},Ep=function(e,t){return Math.abs(e-t)};function Ap(e,t){if(Sd(e)&&Sd(t))return Ep(e,t);if(_p(e)&&_p(t)){var n=Ep(e.x,t.x),r=Ep(e.y,t.y),a=Cp(e)&&Cp(t)?Ep(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(a,2))}}function Ip(e){return e.max-e.min}function Tp(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),Ap(e,t)<n}function Rp(e,t,n,r){void 0===r&&(r=.5),e.origin=r,e.originPoint=df(t.min,t.max,e.origin),e.scale=Ip(n)/Ip(t),(Tp(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=df(n.min,n.max,e.origin)-e.originPoint,(Tp(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Np(e,t,n,r){Rp(e.x,t.x,n.x,null===r||void 0===r?void 0:r.originX),Rp(e.y,t.y,n.y,null===r||void 0===r?void 0:r.originY)}function Mp(e,t,n){e.min=n.min+t.min,e.max=e.min+Ip(t)}function Op(e,t,n){e.min=t.min-n.min,e.max=e.min+Ip(t)}function Pp(e,t,n){Op(e.x,t.x,n.x),Op(e.y,t.y,n.y)}function Fp(e,t,n,r,a){return e=vp(e-=t,1/n,r),void 0!==a&&(e=vp(e,1/a,r)),e}function Dp(e,t,n,r,a){var i=_c(n,3),o=i[0],s=i[1],u=i[2];!function(e,t,n,r,a,i,o){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===i&&(i=e),void 0===o&&(o=e),ed.test(t)&&(t=parseFloat(t),t=df(o.min,o.max,t/100)-o.min),"number"===typeof t){var s=df(i.min,i.max,r);e===i&&(s-=t),e.min=Fp(e.min,t,n,s,a),e.max=Fp(e.max,t,n,s,a)}}(e,t[o],t[s],t[u],t.scale,r,a)}var Lp=["x","scaleX","originX"],zp=["y","scaleY","originY"];function jp(e,t,n,r){Dp(e.x,t,Lp,null===n||void 0===n?void 0:n.x,null===r||void 0===r?void 0:r.x),Dp(e.y,t,zp,null===n||void 0===n?void 0:n.y,null===r||void 0===r?void 0:r.y)}function Bp(e){return 0===e.translate&&1===e.scale}function Wp(e){return Bp(e.x)&&Bp(e.y)}function Up(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var Vp=function(){function e(){this.members=[]}return e.prototype.add=function(e){pf(this.members,e),e.scheduleRender()},e.prototype.remove=function(e){if(vf(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},e.prototype.relegate=function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var a=this.members[r];if(!1!==a.isPresent){t=a;break}}return!!t&&(this.promote(t),!0)},e.prototype.promote=function(e,t){var n,r=this.lead;e!==r&&(this.prevLead=r,this.lead=e,e.show(),r&&(r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&r.hide()))},e.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,n,r,a,i;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(i=null===(r=e.resumingFrom)||void 0===r?void 0:(a=r.options).onExitComplete)||void 0===i||i.call(a)}))},e.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}(),Hp={};function Gp(e,t,n){var r=e.x.translate/t.x,a=e.y.translate/t.y,i="translate3d(".concat(r,"px, ").concat(a,"px, 0) ");if(i+="scale(".concat(1/t.x,", ").concat(1/t.y,") "),n){var o=n.rotate,s=n.rotateX,u=n.rotateY;o&&(i+="rotate(".concat(o,"deg) ")),s&&(i+="rotateX(".concat(s,"deg) ")),u&&(i+="rotateY(".concat(u,"deg) "))}var l=e.x.scale*t.x,c=e.y.scale*t.y;return"translate3d(0px, 0px, 0) scale(1, 1) scale(1, 1)"===(i+="scale(".concat(l,", ").concat(c,")"))?"none":i}function qp(e){return[e("x"),e("y")]}var Xp=["","X","Y","Z"],Yp=["transformPerspective","x","y","z"];function Kp(e,t){return Yp.indexOf(e)-Yp.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return Xp.forEach((function(t){return Yp.push(e+t)}))}));var $p=new Set(Yp);function Zp(e){return $p.has(e)}var Qp=new Set(["originX","originY","originZ"]);function Jp(e){return Qp.has(e)}var ev=function(e,t){return e.depth-t.depth},tv=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){pf(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){vf(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(ev),this.isDirty=!1,this.children.forEach(e)},e}();function nv(e){var t,n=bf(e)?e.get():e;return t=n,Boolean(t&&"object"===typeof t&&t.mix&&t.toValue)?n.toValue():n}var rv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function av(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,a=e.resetTransform;return function(){function e(e,t,r){var a=this;void 0===t&&(t={}),void 0===r&&(r=null===n||void 0===n?void 0:n()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){a.isUpdating&&(a.isUpdating=!1,a.clearAllSnapshots())},this.updateProjection=function(){a.nodes.forEach(fv),a.nodes.forEach(dv)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=r?r.root||r:this,this.path=r?Cc(Cc([],_c(r.path),!1),[r],!1):[],this.parent=r,this.depth=r?r.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(var i=0;i<this.path.length;i++)this.path[i].shouldResetTransform=!0;this.root===this&&(this.nodes=new tv)}return e.prototype.addEventListener=function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new gf),this.eventHandlers.get(e).add(t)},e.prototype.notifyListeners=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.eventHandlers.get(e);null===r||void 0===r||r.notify.apply(r,Cc([],_c(t),!1))},e.prototype.hasListeners=function(e){return this.eventHandlers.has(e)},e.prototype.registerPotentialNode=function(e,t){this.potentialNodes.set(e,t)},e.prototype.mount=function(e,n){var r,a=this;if(void 0===n&&(n=!1),!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var i=this.options,o=i.layoutId,s=i.layout,u=i.visualElement;if(u&&!u.getInstance()&&u.mount(e),this.root.nodes.add(this),null===(r=this.parent)||void 0===r||r.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),n&&(s||o)&&(this.isLayoutDirty=!0),t){var l,c=function(){return a.root.updateBlockedByResize=!1};t(e,(function(){a.root.updateBlockedByResize=!0,clearTimeout(l),l=window.setTimeout(c,250),rv.hasAnimatedSinceResize&&(rv.hasAnimatedSinceResize=!1,a.nodes.forEach(cv))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&u&&(o||s)&&this.addEventListener("didUpdate",(function(e){var t,n,r,i,o,s=e.delta,l=e.hasLayoutChanged,c=e.hasRelativeTargetChanged,f=e.layout;if(a.isTreeAnimationBlocked())return a.target=void 0,void(a.relativeTarget=void 0);var d=null!==(n=null!==(t=a.options.transition)&&void 0!==t?t:u.getDefaultTransition())&&void 0!==n?n:yv,h=u.getProps(),p=h.onLayoutAnimationStart,v=h.onLayoutAnimationComplete,g=!a.targetLayout||!Up(a.targetLayout,f)||c,m=!l&&c;if((null===(r=a.resumeFrom)||void 0===r?void 0:r.instance)||m||l&&(g||!a.currentAnimation)){a.resumeFrom&&(a.resumingFrom=a.resumeFrom,a.resumingFrom.resumingFrom=void 0),a.setAnimationOrigin(s,m);var y=kc(kc({},Jh(d,"layout")),{onPlay:p,onComplete:v});u.shouldReduceMotion&&(y.delay=0,y.type=!1),a.startAnimation(y)}else l||0!==a.animationProgress||a.finishAnimation(),a.isLead()&&(null===(o=(i=a.options).onExitComplete)||void 0===o||o.call(i));a.targetLayout=f}))}},e.prototype.unmount=function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,af.preRender(this.updateProjection)},e.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},e.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},e.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},e.prototype.isTreeAnimationBlocked=function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1},e.prototype.startUpdate=function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(hv))},e.prototype.willUpdate=function(e){var t,n,r;if(void 0===e&&(e=!0),this.root.isUpdateBlocked())null===(n=(t=this.options).onExitComplete)||void 0===n||n.call(t);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var a=0;a<this.path.length;a++){var i=this.path[a];i.shouldResetTransform=!0,i.updateScroll()}var o=this.options,s=o.layoutId,u=o.layout;if(void 0!==s||u){var l=null===(r=this.options.visualElement)||void 0===r?void 0:r.getProps().transformTemplate;this.prevTransformTemplateValue=null===l||void 0===l?void 0:l(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}},e.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(uv);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(bv),this.potentialNodes.clear()),this.nodes.forEach(lv),this.nodes.forEach(iv),this.nodes.forEach(ov),this.clearAllSnapshots(),of.update(),of.preRender(),of.render())},e.prototype.clearAllSnapshots=function(){this.nodes.forEach(sv),this.sharedNodes.forEach(pv)},e.prototype.scheduleUpdateProjection=function(){ff.preRender(this.updateProjection,!1,!0)},e.prototype.scheduleCheckAfterUnmount=function(){var e=this;ff.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))},e.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));kv(t),this.snapshot={measured:e,layout:t,latestValues:{}}}},e.prototype.updateLayout=function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++){this.path[t].updateScroll()}var n=this.measure();kv(n);var r=this.layout;this.layout={measured:n,actual:this.removeElementScroll(n)},this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null===r||void 0===r?void 0:r.actual)}},e.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.scroll=r(this.instance))},e.prototype.resetTransform=function(){var e;if(a){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!Wp(this.projectionDelta),r=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,i=null===r||void 0===r?void 0:r(this.latestValues,""),o=i!==this.prevTransformTemplateValue;t&&(n||hp(this.latestValues)||o)&&(a(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}},e.prototype.measure=function(){var e=this.options.visualElement;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};var t=e.measureViewportBox(),n=this.root.scroll;return n&&(bp(t.x,n.x),bp(t.y,n.y)),t},e.prototype.removeElementScroll=function(e){var t={x:{min:0,max:0},y:{min:0,max:0}};cp(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],a=r.scroll,i=r.options;r!==this.root&&a&&i.layoutScroll&&(bp(t.x,a.x),bp(t.y,a.y))}return t},e.prototype.applyTransform=function(e,t){void 0===t&&(t=!1);var n={x:{min:0,max:0},y:{min:0,max:0}};cp(n,e);for(var r=0;r<this.path.length;r++){var a=this.path[r];!t&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Sp(n,{x:-a.scroll.x,y:-a.scroll.y}),hp(a.latestValues)&&Sp(n,a.latestValues)}return hp(this.latestValues)&&Sp(n,this.latestValues),n},e.prototype.removeTransform=function(e){var t,n={x:{min:0,max:0},y:{min:0,max:0}};cp(n,e);for(var r=0;r<this.path.length;r++){var a=this.path[r];if(a.instance&&hp(a.latestValues)){dp(a.latestValues)&&a.updateSnapshot();var i={x:{min:0,max:0},y:{min:0,max:0}};cp(i,a.measure()),jp(n,a.latestValues,null===(t=a.snapshot)||void 0===t?void 0:t.layout,i)}}return hp(this.latestValues)&&jp(n,this.latestValues),n},e.prototype.setTargetDelta=function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()},e.prototype.setOptions=function(e){var t;this.options=kc(kc(kc({},this.options),e),{crossfade:null===(t=e.crossfade)||void 0===t||t})},e.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},e.prototype.resolveTargetDelta=function(){var e,t,n,r,a=this.options,i=a.layout,o=a.layoutId;this.layout&&(i||o)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Pp(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),cp(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(t=this.target,n=this.relativeTarget,r=this.relativeParent.target,Mp(t.x,n.x,r.x),Mp(t.y,n.y,r.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):cp(this.target,this.layout.actual),yp(this.target,this.targetDelta)):cp(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Pp(this.relativeTargetOrigin,this.target,this.relativeParent.target),cp(this.relativeTarget,this.relativeTargetOrigin)))))},e.prototype.getClosestProjectingParent=function(){if(this.parent&&!hp(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},e.prototype.calcProjection=function(){var e,t=this.options,n=t.layout,r=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(n||r)){var a=this.getLead();cp(this.layoutCorrected,this.layout.actual),function(e,t,n,r){var a,i;void 0===r&&(r=!1);var o=n.length;if(o){var s,u;t.x=t.y=1;for(var l=0;l<o;l++)u=(s=n[l]).projectionDelta,"contents"!==(null===(i=null===(a=s.instance)||void 0===a?void 0:a.style)||void 0===i?void 0:i.display)&&(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Sp(e,{x:-s.scroll.x,y:-s.scroll.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,yp(e,u)),r&&hp(s.latestValues)&&Sp(e,s.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==a);var i=a.target;if(i){this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});var o=this.treeScale.x,s=this.treeScale.y,u=this.projectionTransform;Np(this.projectionDelta,this.layoutCorrected,i,this.latestValues),this.projectionTransform=Gp(this.projectionDelta,this.treeScale),this.projectionTransform===u&&this.treeScale.x===o&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",i))}}},e.prototype.hide=function(){this.isVisible=!1},e.prototype.show=function(){this.isVisible=!0},e.prototype.scheduleRender=function(e){var t,n,r;void 0===e&&(e=!0),null===(n=(t=this.options).scheduleRender)||void 0===n||n.call(t),e&&(null===(r=this.getStack())||void 0===r||r.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},e.prototype.setAnimationOrigin=function(e,t){var n,r=this;void 0===t&&(t=!1);var a=this.snapshot,i=(null===a||void 0===a?void 0:a.latestValues)||{},o=kc({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;var u={x:{min:0,max:0},y:{min:0,max:0}},l=null===a||void 0===a?void 0:a.isShared,c=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,f=Boolean(l&&!c&&!0===this.options.crossfade&&!this.path.some(mv));this.animationProgress=0,this.mixTargetDelta=function(t){var n,a=t/1e3;vv(s.x,e.x,a),vv(s.y,e.y,a),r.setTargetDelta(s),r.relativeTarget&&r.relativeTargetOrigin&&r.layout&&(null===(n=r.relativeParent)||void 0===n?void 0:n.layout)&&(Pp(u,r.layout.actual,r.relativeParent.layout.actual),function(e,t,n,r){gv(e.x,t.x,n.x,r),gv(e.y,t.y,n.y,r)}(r.relativeTarget,r.relativeTargetOrigin,u,a)),l&&(r.animationValues=o,function(e,t,n,r,a,i){var o,s,u,l;a?(e.opacity=df(0,null!==(o=n.opacity)&&void 0!==o?o:1,op(r)),e.opacityExit=df(null!==(s=t.opacity)&&void 0!==s?s:1,0,sp(r))):i&&(e.opacity=df(null!==(u=t.opacity)&&void 0!==u?u:1,null!==(l=n.opacity)&&void 0!==l?l:1,r));for(var c=0;c<np;c++){var f="border".concat(tp[c],"Radius"),d=ip(t,f),h=ip(n,f);void 0===d&&void 0===h||(d||(d=0),h||(h=0),0===d||0===h||ap(d)===ap(h)?(e[f]=Math.max(df(rp(d),rp(h),r),0),(ed.test(h)||ed.test(d))&&(e[f]+="%")):e[f]=h)}(t.rotate||n.rotate)&&(e.rotate=df(t.rotate||0,n.rotate||0,r))}(o,i,r.latestValues,a,f,c)),r.root.scheduleUpdateProjection(),r.scheduleRender(),r.animationProgress=a},this.mixTargetDelta(0)},e.prototype.startAnimation=function(e){var t,n,r=this;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(af.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ff.update((function(){rv.hasAnimatedSinceResize=!0,r.currentAnimation=function(e,t,n){void 0===n&&(n={});var r=bf(e)?e:yf(e);return ep("",r,t,n),{stop:function(){return r.stop()},isAnimating:function(){return r.isAnimating()}}}(0,1e3,kc(kc({},e),{onUpdate:function(t){var n;r.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),r.completeAnimation()}})),r.resumingFrom&&(r.resumingFrom.currentAnimation=r.currentAnimation),r.pendingAnimation=void 0}))},e.prototype.completeAnimation=function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},e.prototype.finishAnimation=function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},e.prototype.applyTransformsToTarget=function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,a=e.latestValues;t&&n&&r&&(cp(t,n),Sp(t,a),Np(this.projectionDeltaWithTransform,this.layoutCorrected,t,a))},e.prototype.registerSharedNode=function(e,t){var n,r,a;this.sharedNodes.has(e)||this.sharedNodes.set(e,new Vp),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(a=null===(r=t.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===a?void 0:a.call(r,t)})},e.prototype.isLead=function(){var e=this.getStack();return!e||e.lead===this},e.prototype.getLead=function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this},e.prototype.getPrevLead=function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0},e.prototype.getStack=function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)},e.prototype.promote=function(e){var t=void 0===e?{}:e,n=t.needsReset,r=t.transition,a=t.preserveFollowOpacity,i=this.getStack();i&&i.promote(this,a),n&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})},e.prototype.relegate=function(){var e=this.getStack();return!!e&&e.relegate(this)},e.prototype.resetRotation=function(){var e=this.options.visualElement;if(e){for(var t=!1,n={},r=0;r<Xp.length;r++){var a="rotate"+Xp[r];e.getStaticValue(a)&&(t=!0,n[a]=e.getStaticValue(a),e.setStaticValue(a,0))}if(t){for(var a in null===e||void 0===e||e.syncRender(),n)e.setStaticValue(a,n[a]);e.scheduleRender()}}},e.prototype.getProjectionStyles=function(e){var t,n,r,a,i,o;void 0===e&&(e={});var s={};if(!this.instance||this.isSVG)return s;if(!this.isVisible)return{visibility:"hidden"};s.visibility="";var u=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=nv(e.pointerEvents)||"",s.transform=u?u(this.latestValues,""):"none",s;var l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){var c={};return this.options.layoutId&&(c.opacity=null!==(n=this.latestValues.opacity)&&void 0!==n?n:1,c.pointerEvents=nv(e.pointerEvents)||""),this.hasProjected&&!hp(this.latestValues)&&(c.transform=u?u({},""):"none",this.hasProjected=!1),c}var f=l.animationValues||l.latestValues;this.applyTransformsToTarget(),s.transform=Gp(this.projectionDeltaWithTransform,this.treeScale,f),u&&(s.transform=u(f,s.transform));var d=this.projectionDelta,h=d.x,p=d.y;for(var v in s.transformOrigin="".concat(100*h.origin,"% ").concat(100*p.origin,"% 0"),l.animationValues?s.opacity=l===this?null!==(a=null!==(r=f.opacity)&&void 0!==r?r:this.latestValues.opacity)&&void 0!==a?a:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:s.opacity=l===this?null!==(i=f.opacity)&&void 0!==i?i:"":null!==(o=f.opacityExit)&&void 0!==o?o:0,Hp)if(void 0!==f[v]){var g=Hp[v],m=g.correct,y=g.applyTo,b=m(f[v],l);if(y)for(var x=y.length,k=0;k<x;k++)s[y[k]]=b;else s[v]=b}return this.options.layoutId&&(s.pointerEvents=l===this?nv(e.pointerEvents)||"":"none"),s},e.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},e.prototype.resetTree=function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(uv),this.root.sharedNodes.clear()},e}()}function iv(e){e.updateLayout()}function ov(e){var t,n,r,a,i=null!==(n=null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)&&void 0!==n?n:e.snapshot;if(e.isLead()&&e.layout&&i&&e.hasListeners("didUpdate")){var o=e.layout,s=o.actual,u=o.measured;"size"===e.options.animationType?qp((function(e){var t=i.isShared?i.measured[e]:i.layout[e],n=Ip(t);t.min=s[e].min,t.max=t.min+n})):"position"===e.options.animationType&&qp((function(e){var t=i.isShared?i.measured[e]:i.layout[e],n=Ip(s[e]);t.max=t.min+n}));var l={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Np(l,s,i.layout);var c={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i.isShared?Np(c,e.applyTransform(u,!0),i.measured):Np(c,s,i.layout);var f=!Wp(l),d=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var h=e.relativeParent,p=h.snapshot,v=h.layout;if(p&&v){var g={x:{min:0,max:0},y:{min:0,max:0}};Pp(g,i.layout,p.layout);var m={x:{min:0,max:0},y:{min:0,max:0}};Pp(m,s,v.actual),Up(g,m)||(d=!0)}}e.notifyListeners("didUpdate",{layout:s,snapshot:i,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeTargetChanged:d})}else e.isLead()&&(null===(a=(r=e.options).onExitComplete)||void 0===a||a.call(r));e.options.transition=void 0}function sv(e){e.clearSnapshot()}function uv(e){e.clearMeasurements()}function lv(e){var t=e.options.visualElement;(null===t||void 0===t?void 0:t.getProps().onBeforeLayoutMeasure)&&t.notifyBeforeLayoutMeasure(),e.resetTransform()}function cv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function fv(e){e.resolveTargetDelta()}function dv(e){e.calcProjection()}function hv(e){e.resetRotation()}function pv(e){e.removeLeadSnapshot()}function vv(e,t,n){e.translate=df(t.translate,0,n),e.scale=df(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function gv(e,t,n,r){e.min=df(t.min,n.min,r),e.max=df(t.max,n.max,r)}function mv(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var yv={duration:.45,ease:[.4,0,.1,1]};function bv(e,t){for(var n=e.root,r=e.path.length-1;r>=0;r--)if(Boolean(e.path[r].instance)){n=e.path[r];break}var a=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));a&&e.mount(a,!0)}function xv(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function kv(e){xv(e.x),xv(e.y)}var wv=1;var Sv=(0,t.createContext)({}),_v=(0,t.createContext)({});var Cv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xc(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var e=this.props,t=e.visualElement,n=e.props;t&&t.setProps(n)},t.prototype.render=function(){return this.props.children},t}(t.Component);function Ev(e){var n=e.preloadedFeatures,r=e.createVisualElement,a=e.projectionNodeConstructor,i=e.useRender,o=e.useVisualState,s=e.Component;return n&&function(e){for(var t in e)null!==e[t]&&("projectionNodeConstructor"===t?Ac.projectionNodeConstructor=e[t]:Ac[t].Component=e[t])}(n),(0,t.forwardRef)((function(e,n){var u=function(e){var n,r=e.layoutId,a=null===(n=(0,t.useContext)(Sv))||void 0===n?void 0:n.id;return a&&void 0!==r?a+"-"+r:r}(e);e=kc(kc({},e),{layoutId:u});var l=(0,t.useContext)(Nc),c=null,f=qc(e),d=l.isStatic?void 0:hc((function(){if(rv.hasEverUpdated)return wv++})),h=o(e,l.isStatic);return!l.isStatic&&Oc&&(f.visualElement=zc(s,h,kc(kc({},l),e),r),function(e,n,r,a){var i,o=n.layoutId,s=n.layout,u=n.drag,l=n.dragConstraints,c=n.layoutScroll,f=(0,t.useContext)(_v);a&&r&&!(null===r||void 0===r?void 0:r.projection)&&(r.projection=new a(e,r.getLatestValues(),null===(i=r.parent)||void 0===i?void 0:i.projection),r.projection.setOptions({layoutId:o,layout:s,alwaysMeasureLayout:Boolean(u)||l&&jc(l),visualElement:r,scheduleRender:function(){return r.scheduleRender()},animationType:"string"===typeof s?s:"both",initialPromotionConfig:f,layoutScroll:c}))}(d,e,f.visualElement,a||Ac.projectionNodeConstructor),c=function(e,n,r){var a=[];if((0,t.useContext)(Ic),!n)return null;for(var i=0;i<Rc;i++){var o=Tc[i],s=Ac[o],u=s.isEnabled,l=s.Component;u(e)&&l&&a.push(t.createElement(l,kc({key:o},e,{visualElement:n})))}return a}(e,f.visualElement)),t.createElement(Cv,{visualElement:f.visualElement,props:kc(kc({},l),e)},c,t.createElement(Mc.Provider,{value:f},i(s,e,d,function(e,n,r){return(0,t.useCallback)((function(t){var a;t&&(null===(a=e.mount)||void 0===a||a.call(e,t)),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):jc(r)&&(r.current=t))}),[n])}(h,f.visualElement,n),h,l.isStatic,f.visualElement)))}))}function Av(e){function t(t,n){return void 0===n&&(n={}),Ev(e(t,n))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var Iv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function Tv(e){return"string"===typeof e&&!e.includes("-")&&!!(Iv.indexOf(e)>-1||/[A-Z]/.test(e))}function Rv(e,t){var n=t.layout,r=t.layoutId;return Zp(e)||Jp(e)||(n||void 0!==r)&&(!!Hp[e]||"opacity"===e)}var Nv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function Mv(e){return e.startsWith("--")}var Ov=function(e,t){return t&&"number"===typeof e?t.transform(e):e};function Pv(e,t,n,r){var a,i=e.style,o=e.vars,s=e.transform,u=e.transformKeys,l=e.transformOrigin;u.length=0;var c=!1,f=!1,d=!0;for(var h in t){var p=t[h];if(Mv(h))o[h]=p;else{var v=Vh[h],g=Ov(p,v);if(Zp(h)){if(c=!0,s[h]=g,u.push(h),!d)continue;p!==(null!==(a=v.default)&&void 0!==a?a:0)&&(d=!1)}else Jp(h)?(l[h]=g,f=!0):i[h]=g}}c?i.transform=function(e,t,n,r){var a=e.transform,i=e.transformKeys,o=t.enableHardwareAcceleration,s=void 0===o||o,u=t.allowTransformNone,l=void 0===u||u,c="";i.sort(Kp);for(var f=!1,d=i.length,h=0;h<d;h++){var p=i[h];c+="".concat(Nv[p]||p,"(").concat(a[p],") "),"z"===p&&(f=!0)}return!f&&s?c+="translateZ(0)":c=c.trim(),r?c=r(a,n?"":c):l&&n&&(c="none"),c}(e,n,d,r):r?i.transform=r({},""):!t.transform&&i.transform&&(i.transform="none"),f&&(i.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,r=e.originY,a=void 0===r?"50%":r,i=e.originZ,o=void 0===i?0:i;return"".concat(n," ").concat(a," ").concat(o)}(l))}var Fv=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function Dv(e,t,n){for(var r in t)bf(t[r])||Rv(r,n)||(e[r]=t[r])}function Lv(e,n,r){var a={};return Dv(a,e.style||{},e),Object.assign(a,function(e,n,r){var a=e.transformTemplate;return(0,t.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};Pv(e,n,{enableHardwareAcceleration:!r},a);var t=e.style;return kc(kc({},e.vars),t)}),[n])}(e,n,r)),e.transformValues&&(a=e.transformValues(a)),a}function zv(e,t,n){var r={},a=Lv(e,t,n);return Boolean(e.drag)&&!1!==e.dragListener&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),r.style=a,r}var jv=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function Bv(e){return jv.has(e)}var Wv,Uv=function(e){return!Bv(e)};try{(Wv=require("@emotion/is-prop-valid").default)&&(Uv=function(e){return e.startsWith("on")?!Bv(e):Wv(e)})}catch(yfe){}function Vv(e,t,n){return"string"===typeof e?e:td.transform(t+n*e)}var Hv={offset:"stroke-dashoffset",array:"stroke-dasharray"},Gv={offset:"strokeDashoffset",array:"strokeDasharray"};function qv(e,t,n,r){var a=t.attrX,i=t.attrY,o=t.originX,s=t.originY,u=t.pathLength,l=t.pathSpacing,c=void 0===l?1:l,f=t.pathOffset,d=void 0===f?0:f;Pv(e,wc(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r),e.attrs=e.style,e.style={};var h=e.attrs,p=e.style,v=e.dimensions;h.transform&&(v&&(p.transform=h.transform),delete h.transform),v&&(void 0!==o||void 0!==s||p.transform)&&(p.transformOrigin=function(e,t,n){var r=Vv(t,e.x,e.width),a=Vv(n,e.y,e.height);return"".concat(r," ").concat(a)}(v,void 0!==o?o:.5,void 0!==s?s:.5)),void 0!==a&&(h.x=a),void 0!==i&&(h.y=i),void 0!==u&&function(e,t,n,r,a){void 0===n&&(n=1),void 0===r&&(r=0),void 0===a&&(a=!0),e.pathLength=1;var i=a?Hv:Gv;e[i.offset]=td.transform(-r);var o=td.transform(t),s=td.transform(n);e[i.array]="".concat(o," ").concat(s)}(h,u,c,d,!1)}var Xv=function(){return kc(kc({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function Yv(e,n){var r=(0,t.useMemo)((function(){var t=Xv();return qv(t,n,{enableHardwareAcceleration:!1},e.transformTemplate),kc(kc({},t.attrs),{style:kc({},t.style)})}),[n]);if(e.style){var a={};Dv(a,e.style,e),r.style=kc(kc({},a),r.style)}return r}function Kv(e){void 0===e&&(e=!1);return function(n,r,a,i,o,s){var u=o.latestValues,l=(Tv(n)?Yv:zv)(r,u,s),c=function(e,t,n){var r={};for(var a in e)(Uv(a)||!0===n&&Bv(a)||!t&&!Bv(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}(r,"string"===typeof n,e),f=kc(kc(kc({},c),l),{ref:i});return a&&(f["data-projection-id"]=a),(0,t.createElement)(n,f)}}var $v=/([a-z])([A-Z])/g,Zv=function(e){return e.replace($v,"$1-$2").toLowerCase()};function Qv(e,t,n,r){var a=t.style,i=t.vars;for(var o in Object.assign(e.style,a,r&&r.getProjectionStyles(n)),i)e.style.setProperty(o,i[o])}var Jv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function eg(e,t,n,r){for(var a in Qv(e,t,void 0,r),t.attrs)e.setAttribute(Jv.has(a)?a:Zv(a),t.attrs[a])}function tg(e){var t=e.style,n={};for(var r in t)(bf(t[r])||Rv(r,e))&&(n[r]=t[r]);return n}function ng(e){var t=tg(e);for(var n in e){if(bf(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function rg(e){return"object"===typeof e&&"function"===typeof e.start}function ag(e,t,n,r){var a=e.scrapeMotionValuesFromProps,i=e.createRenderState,o=e.onMount,s={latestValues:og(t,n,r,a),renderState:i()};return o&&(s.mount=function(e){return o(t,e,s)}),s}var ig=function(e){return function(n,r){var a=(0,t.useContext)(Mc),i=(0,t.useContext)(dc);return r?ag(e,n,a,i):hc((function(){return ag(e,n,a,i)}))}};function og(e,t,n,r){var a={},i=!1===(null===n||void 0===n?void 0:n.initial),o=r(e);for(var s in o)a[s]=nv(o[s]);var u=e.initial,l=e.animate,c=Hc(e),f=Gc(e);t&&f&&!c&&!1!==e.inherit&&(null!==u&&void 0!==u||(u=t.initial),null!==l&&void 0!==l||(l=t.animate));var d=i||!1===u,h=d?l:u;h&&"boolean"!==typeof h&&!rg(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var n=Uc(e,t);if(n){var r=n.transitionEnd;n.transition;var i=wc(n,["transitionEnd","transition"]);for(var o in i){var s=i[o];if(Array.isArray(s))s=s[d?s.length-1:0];null!==s&&(a[o]=s)}for(var o in r)a[o]=r[o]}}));return a}var sg,ug={useVisualState:ig({scrapeMotionValuesFromProps:ng,createRenderState:Xv,onMount:function(e,t,n){var r=n.renderState,a=n.latestValues;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(i){r.dimensions={x:0,y:0,width:0,height:0}}qv(r,a,{enableHardwareAcceleration:!1},e.transformTemplate),eg(t,r)}})},lg={useVisualState:ig({scrapeMotionValuesFromProps:tg,createRenderState:Fv})};function cg(e,t,n,r){return void 0===r&&(r={passive:!0}),e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}function fg(e,n,r,a){(0,t.useEffect)((function(){var t=e.current;if(r&&t)return cg(t,n,r,a)}),[e,n,r,a])}function dg(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function hg(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(sg||(sg={}));var pg={pageX:0,pageY:0};function vg(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||pg;return{x:n[t+"X"],y:n[t+"Y"]}}function gg(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function mg(e,t){return void 0===t&&(t="page"),{point:hg(e)?vg(e,t):gg(e,t)}}var yg=function(e,t){void 0===t&&(t=!1);var n,r=function(t){return e(t,mg(t))};return t?(n=r,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):r},bg={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},xg={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function kg(e){return Oc&&null===window.onpointerdown?e:Oc&&null===window.ontouchstart?xg[e]:Oc&&null===window.onmousedown?bg[e]:e}function wg(e,t,n,r){return cg(e,kg(t),yg(n,"pointerdown"===t),r)}function Sg(e,t,n,r){return fg(e,kg(t),n&&yg(n,"pointerdown"===t),r)}function _g(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var Cg=_g("dragHorizontal"),Eg=_g("dragVertical");function Ag(e){var t=!1;if("y"===e)t=Eg();else if("x"===e)t=Cg();else{var n=Cg(),r=Eg();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function Ig(){var e=Ag(!0);return!e||(e(),!1)}function Tg(e,t,n){return function(r,a){var i;dg(r)&&!Ig()&&(null===(i=e.animationState)||void 0===i||i.setActive(sg.Hover,t),null===n||void 0===n||n(r,a))}}var Rg=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))};function Ng(e){return(0,t.useEffect)((function(){return function(){return e()}}),[])}new Set;var Mg=new WeakMap,Og=new WeakMap,Pg=function(e){var t;null===(t=Mg.get(e.target))||void 0===t||t(e)},Fg=function(e){e.forEach(Pg)};function Dg(e,t,n){var r=function(e){var t=e.root,n=wc(e,["root"]),r=t||document;Og.has(r)||Og.set(r,{});var a=Og.get(r),i=JSON.stringify(n);return a[i]||(a[i]=new IntersectionObserver(Fg,kc({root:t},n))),a[i]}(t);return Mg.set(e,n),r.observe(e),function(){Mg.delete(e),r.unobserve(e)}}var Lg={some:0,all:1};function zg(e,n,r,a){var i=a.root,o=a.margin,s=a.amount,u=void 0===s?"some":s,l=a.once;(0,t.useEffect)((function(){if(e){var t={root:null===i||void 0===i?void 0:i.current,rootMargin:o,threshold:"number"===typeof u?u:Lg[u]};return Dg(r.getInstance(),t,(function(e){var t,a=e.isIntersecting;if(n.isInView!==a&&(n.isInView=a,!l||a||!n.hasEnteredView)){a&&(n.hasEnteredView=!0),null===(t=r.animationState)||void 0===t||t.setActive(sg.InView,a);var i=r.getProps(),o=a?i.onViewportEnter:i.onViewportLeave;null===o||void 0===o||o(e)}}))}}),[e,i,o,u])}function jg(e,n,r,a){var i=a.fallback,o=void 0===i||i;(0,t.useEffect)((function(){e&&o&&requestAnimationFrame((function(){var e;n.hasEnteredView=!0;var t=r.getProps().onViewportEnter;null===t||void 0===t||t(null),null===(e=r.animationState)||void 0===e||e.setActive(sg.InView,!0)}))}),[e])}var Bg=function(e){return function(t){return e(t),null}},Wg={inView:Bg((function(e){var n=e.visualElement,r=e.whileInView,a=e.onViewportEnter,i=e.onViewportLeave,o=e.viewport,s=void 0===o?{}:o,u=(0,t.useRef)({hasEnteredView:!1,isInView:!1}),l=Boolean(r||a||i);s.once&&u.current.hasEnteredView&&(l=!1),("undefined"===typeof IntersectionObserver?jg:zg)(l,u.current,n,s)})),tap:Bg((function(e){var n=e.onTap,r=e.onTapStart,a=e.onTapCancel,i=e.whileTap,o=e.visualElement,s=n||r||a||i,u=(0,t.useRef)(!1),l=(0,t.useRef)(null),c={passive:!(r||n||a||v)};function f(){var e;null===(e=l.current)||void 0===e||e.call(l),l.current=null}function d(){var e;return f(),u.current=!1,null===(e=o.animationState)||void 0===e||e.setActive(sg.Tap,!1),!Ig()}function h(e,t){d()&&(Rg(o.getInstance(),e.target)?null===n||void 0===n||n(e,t):null===a||void 0===a||a(e,t))}function p(e,t){d()&&(null===a||void 0===a||a(e,t))}function v(e,t){var n;f(),u.current||(u.current=!0,l.current=Cd(wg(window,"pointerup",h,c),wg(window,"pointercancel",p,c)),null===(n=o.animationState)||void 0===n||n.setActive(sg.Tap,!0),null===r||void 0===r||r(e,t))}Sg(o,"pointerdown",s?v:void 0,c),Ng(f)})),focus:Bg((function(e){var t=e.whileFocus,n=e.visualElement;fg(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(sg.Focus,!0)}:void 0),fg(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(sg.Focus,!1)}:void 0)})),hover:Bg((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,a=e.visualElement;Sg(a,"pointerenter",t||r?Tg(a,!0,t):void 0,{passive:!t}),Sg(a,"pointerleave",n||r?Tg(a,!1,n):void 0,{passive:!n})}))};function Ug(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var Vg=function(e){return/^0[^.\s]+$/.test(e)},Hg=function(e){return function(t){return t.test(e)}},Gg=[Uf,td,ed,Jf,rd,nd,{test:function(e){return"auto"===e},parse:function(e){return e}}],qg=function(e){return Gg.find(Hg(e))},Xg=Cc(Cc([],_c(Gg),!1),[vd,wd],!1),Yg=function(e){return Xg.find(Hg(e))};function Kg(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,yf(n))}function $g(e,t){var n=Vc(e,t),r=n?e.makeTargetAnimatable(n,!1):{},a=r.transitionEnd,i=void 0===a?{}:a;r.transition;var o=wc(r,["transitionEnd","transition"]);for(var s in o=kc(kc({},o),i)){Kg(e,s,Yh(o[s]))}}function Zg(e,t){if(t)return(t[e]||t.default||t).from}function Qg(e,t,n){var r;void 0===n&&(n={});var a=Vc(e,t,n.custom),i=(a||{}).transition,o=void 0===i?e.getDefaultTransition()||{}:i;n.transitionOverride&&(o=n.transitionOverride);var s=a?function(){return Jg(e,a,n)}:function(){return Promise.resolve()},u=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var a=o.delayChildren,i=void 0===a?0:a,s=o.staggerChildren,u=o.staggerDirection;return function(e,t,n,r,a,i){void 0===n&&(n=0);void 0===r&&(r=0);void 0===a&&(a=1);var o=[],s=(e.variantChildren.size-1)*r,u=1===a?function(e){return void 0===e&&(e=0),e*r}:function(e){return void 0===e&&(e=0),s-e*r};return Array.from(e.variantChildren).sort(em).forEach((function(e,r){o.push(Qg(e,t,kc(kc({},i),{delay:n+u(r)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(o)}(e,t,i+r,s,u,n)}:function(){return Promise.resolve()},l=o.when;if(l){var c=_c("beforeChildren"===l?[s,u]:[u,s],2),f=c[0],d=c[1];return f().then(d)}return Promise.all([s(),u(n.delay)])}function Jg(e,t,n){var r,a=void 0===n?{}:n,i=a.delay,o=void 0===i?0:i,s=a.transitionOverride,u=a.type,l=e.makeTargetAnimatable(t),c=l.transition,f=void 0===c?e.getDefaultTransition():c,d=l.transitionEnd,h=wc(l,["transition","transitionEnd"]);s&&(f=s);var p=[],v=u&&(null===(r=e.animationState)||void 0===r?void 0:r.getState()[u]);for(var g in h){var m=e.getValue(g),y=h[g];if(!(!m||void 0===y||v&&tm(v,g))){var b=kc({delay:o},f);e.shouldReduceMotion&&Zp(g)&&(b=kc(kc({},b),{type:!1,delay:0}));var x=ep(g,m,y,b);p.push(x)}}return Promise.all(p).then((function(){d&&$g(e,d)}))}function em(e,t){return e.sortNodePosition(t)}function tm(e,t){var n=e.protectedKeys,r=e.needsAnimating,a=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,a}var nm=[sg.Animate,sg.InView,sg.Focus,sg.Hover,sg.Tap,sg.Drag,sg.Exit],rm=Cc([],_c(nm),!1).reverse(),am=nm.length;function im(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t,n){var r;if(void 0===n&&(n={}),e.notifyAnimationStart(t),Array.isArray(t)){var a=t.map((function(t){return Qg(e,t,n)}));r=Promise.all(a)}else if("string"===typeof t)r=Qg(e,t,n);else{var i="function"===typeof t?Vc(e,t,n.custom):t;r=Jg(e,i,n)}return r.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,r)})))}}function om(e){var t=im(e),n=function(){var e;return(e={})[sg.Animate]=sm(!0),e[sg.InView]=sm(),e[sg.Hover]=sm(),e[sg.Tap]=sm(),e[sg.Drag]=sm(),e[sg.Focus]=sm(),e[sg.Exit]=sm(),e}(),r={},a=!0,i=function(t,n){var r=Vc(e,n);if(r){r.transition;var a=r.transitionEnd,i=wc(r,["transition","transitionEnd"]);t=kc(kc(kc({},t),i),a)}return t};function o(o,s){for(var u,l=e.getProps(),c=e.getVariantContext(!0)||{},f=[],d=new Set,h={},p=1/0,v=function(t){var r=rm[t],v=n[r],g=null!==(u=l[r])&&void 0!==u?u:c[r],m=Wc(g),y=r===s?v.isActive:null;!1===y&&(p=t);var b=g===c[r]&&g!==l[r]&&m;if(b&&a&&e.manuallyAnimateOnMount&&(b=!1),v.protectedKeys=kc({},h),!v.isActive&&null===y||!g&&!v.prevProp||rg(g)||"boolean"===typeof g)return"continue";var x=function(e,t){if("string"===typeof t)return t!==e;if(Bc(t))return!Ug(t,e);return!1}(v.prevProp,g),k=x||r===s&&v.isActive&&!b&&m||t>p&&m,w=Array.isArray(g)?g:[g],S=w.reduce(i,{});!1===y&&(S={});var _=v.prevResolvedValues,C=void 0===_?{}:_,E=kc(kc({},C),S),A=function(e){k=!0,d.delete(e),v.needsAnimating[e]=!0};for(var I in E){var T=S[I],R=C[I];h.hasOwnProperty(I)||(T!==R?Mh(T)&&Mh(R)?!Ug(T,R)||x?A(I):v.protectedKeys[I]=!0:void 0!==T?A(I):d.add(I):void 0!==T&&d.has(I)?A(I):v.protectedKeys[I]=!0)}v.prevProp=g,v.prevResolvedValues=S,v.isActive&&(h=kc(kc({},h),S)),a&&e.blockInitialAnimation&&(k=!1),k&&!b&&f.push.apply(f,Cc([],_c(w.map((function(e){return{animation:e,options:kc({type:r},o)}}))),!1))},g=0;g<am;g++)v(g);if(r=kc({},h),d.size){var m={};d.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(m[t]=n)})),f.push({animation:m})}var y=Boolean(f.length);return a&&!1===l.initial&&!e.manuallyAnimateOnMount&&(y=!1),a=!1,y?t(f):Promise.resolve()}return{isAnimated:function(e){return void 0!==r[e]},animateChanges:o,setActive:function(t,r,a){var i;if(n[t].isActive===r)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;var s=o(a,t);for(var u in n)n[u].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function sm(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var um={animation:Bg((function(e){var n=e.visualElement,r=e.animate;n.animationState||(n.animationState=om(n)),rg(r)&&(0,t.useEffect)((function(){return r.subscribe(n)}),[r])})),exit:Bg((function(e){var n=e.custom,r=e.visualElement,a=_c(mc(),2),i=a[0],o=a[1],s=(0,t.useContext)(dc);(0,t.useEffect)((function(){var e,t;r.isPresent=i;var a=null===(e=r.animationState)||void 0===e?void 0:e.setActive(sg.Exit,!i,{custom:null!==(t=null===s||void 0===s?void 0:s.custom)&&void 0!==t?t:n});!i&&(null===a||void 0===a||a.then(o))}),[i])}))},lm=function(){function e(e,t,n){var r=this,a=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=dm(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=Ap(e.offset,{x:0,y:0})>=3;if(t||n){var a=e.point,i=cf().timestamp;r.history.push(kc(kc({},a),{timestamp:i}));var o=r.handlers,s=o.onStart,u=o.onMove;t||(s&&s(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),u&&u(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=cm(t,r.transformPagePoint),dg(e)&&0===e.buttons?r.handlePointerUp(e,t):ff.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,a=n.onEnd,i=n.onSessionEnd,o=dm(cm(t,r.transformPagePoint),r.history);r.startEvent&&a&&a(e,o),i&&i(e,o)},!(hg(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=a;var i=cm(mg(e),this.transformPagePoint),o=i.point,s=cf().timestamp;this.history=[kc(kc({},o),{timestamp:s})];var u=t.onSessionStart;u&&u(e,dm(i,this.history)),this.removeListeners=Cd(wg(window,"pointermove",this.handlePointerMove),wg(window,"pointerup",this.handlePointerUp),wg(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),af.update(this.updatePoint)},e}();function cm(e,t){return t?{point:t(e.point)}:e}function fm(e,t){return{x:e.x-t.x,y:e.y-t.y}}function dm(e,t){var n=e.point;return{point:n,delta:fm(n,pm(t)),offset:fm(n,hm(t)),velocity:vm(t,.1)}}function hm(e){return e[0]}function pm(e){return e[e.length-1]}function vm(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,a=pm(e);n>=0&&(r=e[n],!(a.timestamp-r.timestamp>kh(t)));)n--;if(!r)return{x:0,y:0};var i=(a.timestamp-r.timestamp)/1e3;if(0===i)return{x:0,y:0};var o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function gm(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function mm(e,t){var n,r=t.min-e.min,a=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=_c([a,r],2))[0],a=n[1]),{min:r,max:a}}var ym=.35;function bm(e,t,n){return{min:xm(e,t),max:xm(e,n)}}function xm(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function km(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function wm(e,t){return km(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var Sm=new WeakMap,_m=function(){function e(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}return e.prototype.start=function(e,t){var n=this,r=(void 0===t?{}:t).snapToCursor,a=void 0!==r&&r;if(!1!==this.visualElement.isPresent){this.panSession=new lm(e,{onSessionStart:function(e){n.stopAnimation(),a&&n.snapToCursor(mg(e,"page").point)},onStart:function(e,t){var r,a=n.getProps(),i=a.drag,o=a.dragPropagation,s=a.onDragStart;(!i||o||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=Ag(i),n.openGlobalLock))&&(n.isDragging=!0,n.currentDirection=null,n.resolveConstraints(),n.visualElement.projection&&(n.visualElement.projection.isAnimationBlocked=!0,n.visualElement.projection.target=void 0),qp((function(e){var t,r,a=n.getAxisMotionValue(e).get()||0;if(ed.test(a)){var i=null===(r=null===(t=n.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===r?void 0:r.actual[e];if(i)a=Ip(i)*(parseFloat(a)/100)}n.originPoint[e]=a})),null===s||void 0===s||s(e,t),null===(r=n.visualElement.animationState)||void 0===r||r.setActive(sg.Drag,!0))},onMove:function(e,t){var r=n.getProps(),a=r.dragPropagation,i=r.dragDirectionLock,o=r.onDirectionLock,s=r.onDrag;if(a||n.openGlobalLock){var u=t.offset;if(i&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(u),void(null!==n.currentDirection&&(null===o||void 0===o||o(n.currentDirection)));n.updateAxis("x",t.point,u),n.updateAxis("y",t.point,u),n.visualElement.syncRender(),null===s||void 0===s||s(e,t)}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},e.prototype.stop=function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var a=this.getProps().onDragEnd;null===a||void 0===a||a(e,t)}},e.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(sg.Drag,!1)},e.prototype.updateAxis=function(e,t,n){var r=this.getProps().drag;if(n&&Cm(e,r,this.currentDirection)){var a=this.getAxisMotionValue(e),i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,t,n){var r=t.min,a=t.max;return void 0!==r&&e<r?e=n?df(r,e,n.min):Math.max(e,r):void 0!==a&&e>a&&(e=n?df(a,e,n.max):Math.min(e,a)),e}(i,this.constraints[e],this.elastic[e])),a.set(i)}},e.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,a=(this.visualElement.projection||{}).layout,i=this.constraints;n&&jc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!a)&&function(e,t){var n=t.top,r=t.left,a=t.bottom,i=t.right;return{x:gm(e.x,r,i),y:gm(e.y,n,a)}}(a.actual,n),this.elastic=function(e){return void 0===e&&(e=ym),!1===e?e=0:!0===e&&(e=ym),{x:bm(e,"left","right"),y:bm(e,"top","bottom")}}(r),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&qp((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(a.actual[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!jc(t))return!1;var r=t.current,a=this.visualElement.projection;if(!a||!a.layout)return!1;var i=function(e,t,n){var r=wm(e,n),a=t.scroll;return a&&(bp(r.x,a.x),bp(r.y,a.y)),r}(r,a.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:mm(e.x,t.x),y:mm(e.y,t.y)}}(a.layout.actual,i);if(n){var s=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!s,s&&(o=km(s))}return o},e.prototype.startAnimation=function(e){var t=this,n=this.getProps(),r=n.drag,a=n.dragMomentum,i=n.dragElastic,o=n.dragTransition,s=n.dragSnapToOrigin,u=n.onDragTransitionEnd,l=this.constraints||{},c=qp((function(n){var u;if(Cm(n,r,t.currentDirection)){var c=null!==(u=null===l||void 0===l?void 0:l[n])&&void 0!==u?u:{};s&&(c={min:0,max:0});var f=i?200:1e6,d=i?40:1e7,h=kc(kc({type:"inertia",velocity:a?e[n]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},o),c);return t.startAxisValueAnimation(n,h)}}));return Promise.all(c).then(u)},e.prototype.startAxisValueAnimation=function(e,t){return ep(e,this.getAxisMotionValue(e),0,t)},e.prototype.stopAnimation=function(){var e=this;qp((function(t){return e.getAxisMotionValue(t).stop()}))},e.prototype.getAxisMotionValue=function(e){var t,n,r="_drag"+e.toUpperCase(),a=this.visualElement.getProps()[r];return a||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)},e.prototype.snapToCursor=function(e){var t=this;qp((function(n){if(Cm(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,a=t.getAxisMotionValue(n);if(r&&r.layout){var i=r.layout.actual[n],o=i.min,s=i.max;a.set(e[n]-df(o,s,.5))}}}))},e.prototype.scalePositionWithinConstraints=function(){var e,t=this,n=this.getProps(),r=n.drag,a=n.dragConstraints,i=this.visualElement.projection;if(jc(a)&&i&&this.constraints){this.stopAnimation();var o={x:0,y:0};qp((function(e){var n=t.getAxisMotionValue(e);if(n){var r=n.get();o[e]=function(e,t){var n=.5,r=Ip(e),a=Ip(t);return a>r?n=Ff(t.min,t.max-r,e.min):r>a&&(n=Ff(e.min,e.max-a,t.min)),kf(0,1,n)}({min:r,max:r},t.constraints[e])}}));var s=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=s?s({},""):"none",null===(e=i.root)||void 0===e||e.updateScroll(),i.updateLayout(),this.resolveConstraints(),qp((function(e){if(Cm(e,r,null)){var n=t.getAxisMotionValue(e),a=t.constraints[e],i=a.min,s=a.max;n.set(df(i,s,o[e]))}}))}},e.prototype.addListeners=function(){var e,t=this;Sm.set(this.visualElement,this);var n=wg(this.visualElement.getInstance(),"pointerdown",(function(e){var n=t.getProps(),r=n.drag,a=n.dragListener;r&&(void 0===a||a)&&t.start(e)})),r=function(){jc(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},a=this.visualElement.projection,i=a.addEventListener("measure",r);a&&!a.layout&&(null===(e=a.root)||void 0===e||e.updateScroll(),a.updateLayout()),r();var o=cg(window,"resize",(function(){return t.scalePositionWithinConstraints()}));return a.addEventListener("didUpdate",(function(e){var n=e.delta,r=e.hasLayoutChanged;t.isDragging&&r&&(qp((function(e){var r=t.getAxisMotionValue(e);r&&(t.originPoint[e]+=n[e].translate,r.set(r.get()+n[e].translate))})),t.visualElement.syncRender())})),function(){o(),n(),i()}},e.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,a=void 0!==r&&r,i=e.dragPropagation,o=void 0!==i&&i,s=e.dragConstraints,u=void 0!==s&&s,l=e.dragElastic,c=void 0===l?ym:l,f=e.dragMomentum,d=void 0===f||f;return kc(kc({},e),{drag:n,dragDirectionLock:a,dragPropagation:o,dragConstraints:u,dragElastic:c,dragMomentum:d})},e}();function Cm(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var Em={pan:Bg((function(e){var n=e.onPan,r=e.onPanStart,a=e.onPanEnd,i=e.onPanSessionStart,o=e.visualElement,s=n||r||a||i,u=(0,t.useRef)(null),l=(0,t.useContext)(Nc).transformPagePoint,c={onSessionStart:i,onStart:r,onMove:n,onEnd:function(e,t){u.current=null,a&&a(e,t)}};(0,t.useEffect)((function(){null!==u.current&&u.current.updateHandlers(c)})),Sg(o,"pointerdown",s&&function(e){u.current=new lm(e,c,{transformPagePoint:l})}),Ng((function(){return u.current&&u.current.end()}))})),drag:Bg((function(e){var n=e.dragControls,r=e.visualElement,a=hc((function(){return new _m(r)}));(0,t.useEffect)((function(){return n&&n.subscribe(a)}),[a,n]),(0,t.useEffect)((function(){return a.addListeners()}),[a])}))},Am=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];var Im=function(e){var t=e.treeType,n=void 0===t?"":t,r=e.build,a=e.getBaseTarget,i=e.makeTargetAnimatable,o=e.measureViewportBox,s=e.render,u=e.readValueFromInstance,l=e.removeValueFromRenderState,c=e.sortNodePosition,f=e.scrapeMotionValuesFromProps;return function(e,t){var d=e.parent,h=e.props,p=e.presenceId,v=e.blockInitialAnimation,g=e.visualState,m=e.shouldReduceMotion;void 0===t&&(t={});var y,b,x=!1,k=g.latestValues,w=g.renderState,S=function(){var e=Am.map((function(){return new gf})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){Am.forEach((function(r){var a,i="on"+r,o=e[i];null===(a=t[r])||void 0===a||a.call(t),o&&(t[r]=n[i](o))}))}};return e.forEach((function(e,t){n["on"+Am[t]]=function(t){return e.add(t)},n["notify"+Am[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.notify.apply(e,Cc([],_c(t),!1))}})),n}(),_=new Map,C=new Map,E={},A=kc({},k);function I(){y&&x&&(T(),s(y,w,h.style,L.projection))}function T(){r(L,w,k,t,h)}function R(){S.notifyUpdate(k)}function N(e,t){var n=t.onChange((function(t){k[e]=t,h.onUpdate&&ff.update(R,!1,!0)})),r=t.onRenderRequest(L.scheduleRender);C.set(e,(function(){n(),r()}))}var M=f(h);for(var O in M){var P=M[O];void 0!==k[O]&&bf(P)&&P.set(k[O],!1)}var F=Hc(h),D=Gc(h),L=kc(kc({treeType:n,current:null,depth:d?d.depth+1:0,parent:d,children:new Set,presenceId:p,shouldReduceMotion:m,variantChildren:D?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===d||void 0===d?void 0:d.isMounted()),blockInitialAnimation:v,isMounted:function(){return Boolean(y)},mount:function(e){x=!0,y=L.current=e,L.projection&&L.projection.mount(e),D&&d&&!F&&(b=null===d||void 0===d?void 0:d.addVariantChild(L)),_.forEach((function(e,t){return N(t,e)})),null===d||void 0===d||d.children.add(L),L.setProps(h)},unmount:function(){var e;null===(e=L.projection)||void 0===e||e.unmount(),af.update(R),af.render(I),C.forEach((function(e){return e()})),null===b||void 0===b||b(),null===d||void 0===d||d.children.delete(L),S.clearAllListeners(),y=void 0,x=!1},addVariantChild:function(e){var t,n=L.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return c&&n===e.treeType?c(L.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return D?L:null===d||void 0===d?void 0:d.getClosestVariantNode()},getLayoutId:function(){return h.layoutId},getInstance:function(){return y},getStaticValue:function(e){return k[e]},setStaticValue:function(e,t){return k[e]=t},getLatestValues:function(){return k},setVisibility:function(e){L.isVisible!==e&&(L.isVisible=e,L.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),i(L,e,h,t)},measureViewportBox:function(){return o(y,h)},addValue:function(e,t){L.hasValue(e)&&L.removeValue(e),_.set(e,t),k[e]=t.get(),N(e,t)},removeValue:function(e){var t;_.delete(e),null===(t=C.get(e))||void 0===t||t(),C.delete(e),delete k[e],l(e,w)},hasValue:function(e){return _.has(e)},getValue:function(e,t){var n=_.get(e);return void 0===n&&void 0!==t&&(n=yf(t),L.addValue(e,n)),n},forEachValue:function(e){return _.forEach(e)},readValue:function(e){var n;return null!==(n=k[e])&&void 0!==n?n:u(y,e,t)},setBaseTarget:function(e,t){A[e]=t},getBaseTarget:function(e){if(a){var t=a(h,e);if(void 0!==t&&!bf(t))return t}return A[e]}},S),{build:function(){return T(),w},scheduleRender:function(){ff.render(I,!1,!0)},syncRender:I,setProps:function(e){(e.transformTemplate||h.transformTemplate)&&L.scheduleRender(),h=e,S.updatePropListeners(e),E=function(e,t,n){var r;for(var a in t){var i=t[a],o=n[a];if(bf(i))e.addValue(a,i);else if(bf(o))e.addValue(a,yf(i));else if(o!==i)if(e.hasValue(a)){var s=e.getValue(a);!s.hasAnimated&&s.set(i)}else e.addValue(a,yf(null!==(r=e.getStaticValue(a))&&void 0!==r?r:i))}for(var a in n)void 0===t[a]&&e.removeValue(a);return t}(L,f(h),E)},getProps:function(){return h},getVariant:function(e){var t;return null===(t=h.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return h.transition},getTransformPagePoint:function(){return h.transformPagePoint},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null===d||void 0===d?void 0:d.getVariantContext();if(!F){var t=(null===d||void 0===d?void 0:d.getVariantContext())||{};return void 0!==h.initial&&(t.initial=h.initial),t}for(var n={},r=0;r<Rm;r++){var a=Tm[r],i=h[a];(Wc(i)||!1===i)&&(n[a]=i)}return n}});return L}},Tm=Cc(["initial"],_c(nm),!1),Rm=Tm.length;function Nm(e){return"string"===typeof e&&e.startsWith("var(--")}var Mm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Om(e,t,n){void 0===n&&(n=1),'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');var r=_c(function(e){var t=Mm.exec(e);if(!t)return[,];var n=_c(t,3);return[n[1],n[2]]}(e),2),a=r[0],i=r[1];if(a){var o=window.getComputedStyle(t).getPropertyValue(a);return o?o.trim():Nm(i)?Om(i,t,n+1):i}}var Pm,Fm=new Set(["width","height","top","left","right","bottom","x","y"]),Dm=function(e){return Fm.has(e)},Lm=function(e,t){e.set(t,!1),e.set(t)},zm=function(e){return e===Uf||e===td};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(Pm||(Pm={}));var jm=function(e,t){return parseFloat(e.split(", ")[t])},Bm=function(e,t){return function(n,r){var a=r.transform;if("none"===a||!a)return 0;var i=a.match(/^matrix3d\((.+)\)$/);if(i)return jm(i[1],t);var o=a.match(/^matrix\((.+)\)$/);return o?jm(o[1],e):0}},Wm=new Set(["x","y","z"]),Um=Yp.filter((function(e){return!Wm.has(e)}));var Vm={width:function(e,t){var n=e.x,r=t.paddingLeft,a=void 0===r?"0":r,i=t.paddingRight,o=void 0===i?"0":i;return n.max-n.min-parseFloat(a)-parseFloat(o)},height:function(e,t){var n=e.y,r=t.paddingTop,a=void 0===r?"0":r,i=t.paddingBottom,o=void 0===i?"0":i;return n.max-n.min-parseFloat(a)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:Bm(4,13),y:Bm(5,14)},Hm=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=kc({},t),r=kc({},r);var a=Object.keys(t).filter(Dm),i=[],o=!1,s=[];if(a.forEach((function(a){var u=e.getValue(a);if(e.hasValue(a)){var l,c=n[a],f=qg(c),d=t[a];if(Mh(d)){var h=d.length,p=null===d[0]?1:0;c=d[p],f=qg(c);for(var v=p;v<h;v++)l?qg(d[v]):(l=qg(d[v]))===f||zm(f)&&zm(l)}else l=qg(d);if(f!==l)if(zm(f)&&zm(l)){var g=u.get();"string"===typeof g&&u.set(parseFloat(g)),"string"===typeof d?t[a]=parseFloat(d):Array.isArray(d)&&l===td&&(t[a]=d.map(parseFloat))}else(null===f||void 0===f?void 0:f.transform)&&(null===l||void 0===l?void 0:l.transform)&&(0===c||0===d)?0===c?u.set(l.transform(c)):t[a]=f.transform(d):(o||(i=function(e){var t=[];return Um.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),o=!0),s.push(a),r[a]=void 0!==r[a]?r[a]:t[a],Lm(u,d))}})),s.length){var u=s.indexOf("height")>=0?window.pageYOffset:null,l=function(e,t,n){var r=t.measureViewportBox(),a=t.getInstance(),i=getComputedStyle(a),o=i.display,s={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){s[e]=Vm[e](r,i)})),t.syncRender();var u=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);Lm(r,s[n]),e[n]=Vm[n](u,i)})),e}(t,e,s);return i.length&&i.forEach((function(t){var n=_c(t,2),r=n[0],a=n[1];e.getValue(r).set(a)})),e.syncRender(),null!==u&&window.scrollTo({top:u}),{target:l,transitionEnd:r}}return{target:t,transitionEnd:r}};function Gm(e,t,n,r){return function(e){return Object.keys(e).some(Dm)}(t)?Hm(e,t,n,r):{target:t,transitionEnd:r}}var qm=function(e,t,n,r){var a=function(e,t,n){var r,a=wc(t,[]),i=e.getInstance();if(!(i instanceof Element))return{target:a,transitionEnd:n};for(var o in n&&(n=kc({},n)),e.forEachValue((function(e){var t=e.get();if(Nm(t)){var n=Om(t,i);n&&e.set(n)}})),a){var s=a[o];if(Nm(s)){var u=Om(s,i);u&&(a[o]=u,n&&(null!==(r=n[o])&&void 0!==r||(n[o]=s)))}}return{target:a,transitionEnd:n}}(e,t,r);return Gm(e,t=a.target,n,r=a.transitionEnd)};var Xm={treeType:"dom",readValueFromInstance:function(e,t){if(Zp(t)){var n=Gh(t);return n&&n.default||0}var r,a=(r=e,window.getComputedStyle(r));return(Mv(t)?a.getPropertyValue(t):a[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return wm(e,t.transformPagePoint)},resetTransform:function(e,t,n){var r=n.transformTemplate;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]},makeTargetAnimatable:function(e,t,n,r){var a=n.transformValues;void 0===r&&(r=!0);var i=t.transition,o=t.transitionEnd,s=wc(t,["transition","transitionEnd"]),u=function(e,t,n){var r,a,i={};for(var o in e)i[o]=null!==(r=Zg(o,t))&&void 0!==r?r:null===(a=n.getValue(o))||void 0===a?void 0:a.get();return i}(s,i||{},e);if(a&&(o&&(o=a(o)),s&&(s=a(s)),u&&(u=a(u))),r){!function(e,t,n){var r,a,i,o,s=Object.keys(t).filter((function(t){return!e.hasValue(t)})),u=s.length;if(u)for(var l=0;l<u;l++){var c=s[l],f=t[c],d=null;Array.isArray(f)&&(d=f[0]),null===d&&(d=null!==(a=null!==(r=n[c])&&void 0!==r?r:e.readValue(c))&&void 0!==a?a:t[c]),void 0!==d&&null!==d&&("string"===typeof d&&(/^\-?\d*\.?\d+$/.test(d)||Vg(d))?d=parseFloat(d):!Yg(d)&&wd.test(f)&&(d=qh(c,f)),e.addValue(c,yf(d)),null!==(i=(o=n)[c])&&void 0!==i||(o[c]=d),e.setBaseTarget(c,d))}}(e,s,u);var l=qm(e,s,u,o);o=l.transitionEnd,s=l.target}return kc({transition:i,transitionEnd:o},s)},scrapeMotionValuesFromProps:tg,build:function(e,t,n,r,a){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),Pv(t,n,r,a.transformTemplate)},render:Qv},Ym=Im(Xm),Km=Im(kc(kc({},Xm),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return Zp(t)?(null===(n=Gh(t))||void 0===n?void 0:n.default)||0:(t=Jv.has(t)?t:Zv(t),e.getAttribute(t))},scrapeMotionValuesFromProps:ng,build:function(e,t,n,r,a){qv(t,n,r,a.transformTemplate)},render:eg})),$m=function(e,t){return Tv(e)?Km(t,{enableHardwareAcceleration:!1}):Ym(t,{enableHardwareAcceleration:!0})};function Zm(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var Qm={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!td.test(e))return e;e=parseFloat(e)}var n=Zm(e,t.target.x),r=Zm(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},Jm="_$css",ey={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,a=e,i=e.includes("var("),o=[];i&&(e=e.replace(Mm,(function(e){return o.push(e),Jm})));var s=wd.parse(e);if(s.length>5)return a;var u=wd.createTransformer(e),l="number"!==typeof s[0]?1:0,c=r.x.scale*n.x,f=r.y.scale*n.y;s[0+l]/=c,s[1+l]/=f;var d=df(c,f,.5);"number"===typeof s[2+l]&&(s[2+l]/=d),"number"===typeof s[3+l]&&(s[3+l]/=d);var h=u(s);if(i){var p=0;h=h.replace(Jm,(function(){var e=o[p];return p++,e}))}return h}},ty=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xc(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,r=n.visualElement,a=n.layoutGroup,i=n.switchLayoutGroup,o=n.layoutId,s=r.projection;e=ny,Object.assign(Hp,e),s&&((null===a||void 0===a?void 0:a.group)&&a.group.add(s),(null===i||void 0===i?void 0:i.register)&&o&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(function(){t.safeToRemove()})),s.setOptions(kc(kc({},s.options),{onExitComplete:function(){return t.safeToRemove()}}))),rv.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this,n=this.props,r=n.layoutDependency,a=n.visualElement,i=n.drag,o=n.isPresent,s=a.projection;return s?(s.isPresent=o,i||e.layoutDependency!==r||void 0===r?s.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?s.promote():s.relegate()||ff.postRender((function(){var e;(null===(e=s.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null},t.prototype.componentDidUpdate=function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,a=t.projection;a&&(a.scheduleCheckAfterUnmount(),(null===n||void 0===n?void 0:n.group)&&n.group.remove(a),(null===r||void 0===r?void 0:r.deregister)&&r.deregister(a))},t.prototype.safeToRemove=function(){var e=this.props.safeToRemove;null===e||void 0===e||e()},t.prototype.render=function(){return null},t}(t.Component);var ny={borderRadius:kc(kc({},Qm),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Qm,borderTopRightRadius:Qm,borderBottomLeftRadius:Qm,borderBottomRightRadius:Qm,boxShadow:ey},ry={measureLayout:function(e){var n=_c(mc(),2),r=n[0],a=n[1],i=(0,t.useContext)(Sv);return t.createElement(ty,kc({},e,{layoutGroup:i,switchLayoutGroup:(0,t.useContext)(_v),isPresent:r,safeToRemove:a}))}},ay=av({attachResizeListener:function(e,t){return cg(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}}}),iy={current:void 0},oy=av({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!iy.current){var e=new ay(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),iy.current=e}return iy.current},resetTransform:function(e,t){e.style.transform=null!==t&&void 0!==t?t:"none"}}),sy=kc(kc(kc(kc({},um),Wg),Em),ry),uy=Av((function(e,t){return function(e,t,n,r,a){var i=t.forwardMotionProps,o=void 0!==i&&i,s=Tv(e)?ug:lg;return kc(kc({},s),{preloadedFeatures:n,useRender:Kv(o),createVisualElement:r,projectionNodeConstructor:a,Component:e})}(e,t,sy,$m,oy)}));function ly(){var e=(0,t.useRef)(!1);return Pc((function(){return e.current=!0,function(){e.current=!1}}),[]),e}var cy=function(e){var n=e.children,r=e.initial,a=e.isPresent,i=e.onExitComplete,o=e.custom,s=e.presenceAffectsLayout,u=hc(fy),l=gc(),c=(0,t.useMemo)((function(){return{id:l,initial:r,isPresent:a,custom:o,onExitComplete:function(e){var t,n;u.set(e,!0);try{for(var r=Sc(u.values()),a=r.next();!a.done;a=r.next()){if(!a.value)return}}catch(o){t={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}null===i||void 0===i||i()},register:function(e){return u.set(e,!1),function(){return u.delete(e)}}}}),s?void 0:[a]);return(0,t.useMemo)((function(){u.forEach((function(e,t){return u.set(t,!1)}))}),[a]),t.useEffect((function(){!a&&!u.size&&(null===i||void 0===i||i())}),[a]),t.createElement(dc.Provider,{value:c},n)};function fy(){return new Map}var dy=function(e){return e.key||""};var hy=function(e){var n=e.children,r=e.custom,a=e.initial,i=void 0===a||a,o=e.onExitComplete,s=e.exitBeforeEnter,u=e.presenceAffectsLayout,l=void 0===u||u,c=_c(function(){var e=ly(),n=_c((0,t.useState)(0),2),r=n[0],a=n[1],i=(0,t.useCallback)((function(){e.current&&a(r+1)}),[r]);return[(0,t.useCallback)((function(){return ff.postRender(i)}),[i]),r]}(),1),f=c[0],d=(0,t.useContext)(Sv).forceRender;d&&(f=d);var h=ly(),p=function(e){var n=[];return t.Children.forEach(e,(function(e){(0,t.isValidElement)(e)&&n.push(e)})),n}(n),v=p,g=new Set,m=(0,t.useRef)(v),y=(0,t.useRef)(new Map).current,b=(0,t.useRef)(!0);if(Pc((function(){b.current=!1,function(e,t){e.forEach((function(e){var n=dy(e);t.set(n,e)}))}(p,y),m.current=v})),Ng((function(){b.current=!0,y.clear(),g.clear()})),b.current)return t.createElement(t.Fragment,null,v.map((function(e){return t.createElement(cy,{key:dy(e),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:l},e)})));v=Cc([],_c(v),!1);for(var x=m.current.map(dy),k=p.map(dy),w=x.length,S=0;S<w;S++){var _=x[S];-1===k.indexOf(_)&&g.add(_)}return s&&g.size&&(v=[]),g.forEach((function(e){if(-1===k.indexOf(e)){var n=y.get(e);if(n){var a=x.indexOf(e);v.splice(a,0,t.createElement(cy,{key:dy(n),isPresent:!1,onExitComplete:function(){y.delete(e),g.delete(e);var t=m.current.findIndex((function(t){return t.key===e}));if(m.current.splice(t,1),!g.size){if(m.current=p,!1===h.current)return;f(),o&&o()}},custom:r,presenceAffectsLayout:l},n))}}})),v=v.map((function(e){var n=e.key;return g.has(n)?e:t.createElement(cy,{key:dy(e),isPresent:!0,presenceAffectsLayout:l},e)})),t.createElement(t.Fragment,null,g.size?v:v.map((function(e){return(0,t.cloneElement)(e)})))};function py(){return py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},py.apply(this,arguments)}function vy(e,t){var n=gy(e,t);return{position:n,index:n?e[n].findIndex((function(e){return e.id===t})):-1}}var gy=function(e,t){var n;return null==(n=Object.values(e).flat().find((function(e){return e.id===t})))?void 0:n.position};function my(e){return{position:"fixed",zIndex:5500,pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===e||"bottom"===e?"0 auto":void 0,top:e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,bottom:e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,right:e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",left:e.includes("right")?void 0:"env(safe-area-inset-left, 0px)"}}var yy=function(e){var t=e,n=new Set,r=function(e){t=e(t),n.forEach((function(e){return e()}))};return{getState:function(){return t},subscribe:function(t){return n.add(t),function(){r((function(){return e})),n.delete(t)}},removeToast:function(e,t){r((function(n){var r;return py({},n,((r={})[t]=n[t].filter((function(t){return t.id!=e})),r))}))},notify:function(e,t){var n=function(e,t){var n,r;void 0===t&&(t={});by+=1;var a=null!=(n=t.id)?n:by,i=null!=(r=t.position)?r:"bottom";return{id:a,message:e,position:i,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:function(){return yy.removeToast(String(a),i)},status:t.status,requestClose:!1,containerStyle:t.containerStyle}}(e,t),a=n.position,i=n.id;return r((function(e){var t,r,i,o=a.includes("top")?[n].concat(null!=(t=e[a])?t:[]):[].concat(null!=(r=e[a])?r:[],[n]);return py({},e,((i={})[a]=o,i))})),i},update:function(e,t){e&&r((function(n){var r=py({},n),a=vy(r,e),i=a.position,o=a.index;return i&&-1!==o&&(r[i][o]=py({},r[i][o],t,{message:ky(t)})),r}))},closeAll:function(e){var t=(void 0===e?{}:e).positions;r((function(e){return(null!=t?t:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((function(t,n){return t[n]=e[n].map((function(e){return py({},e,{requestClose:!0})})),t}),py({},e))}))},close:function(e){r((function(t){var n,r=gy(t,e);return r?py({},t,((n={})[r]=t[r].map((function(t){return t.id==e?py({},t,{requestClose:!0}):t})),n)):t}))},isActive:function(e){return Boolean(vy(yy.getState(),e).position)}}}({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]});var by=0;var xy=function(e){var n=e.status,r=e.variant,a=void 0===r?"solid":r,i=e.id,o=e.title,s=e.isClosable,u=e.onClose,l=e.description,c=e.icon,f="undefined"!==typeof i?"toast-"+i+"-title":void 0;return t.createElement(ac,{status:n,variant:a,id:String(i),alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto","aria-labelledby":f},t.createElement(sc,null,c),t.createElement(qa.div,{flex:"1",maxWidth:"100%"},o&&t.createElement(ic,{id:f},o),l&&t.createElement(oc,{display:"block"},l)),s&&t.createElement(fc,{size:"sm",onClick:u,position:"absolute",insetEnd:1,top:1}))};function ky(e){void 0===e&&(e={});var n=e,r=n.render,a=n.toastComponent,i=void 0===a?xy:a;return function(n){return Ue(r)?r(n):t.createElement(i,py({},n,e))}}var wy={initial:function(e){var t,n=e.position,r=["top","bottom"].includes(n)?"y":"x",a=["top-right","bottom-right"].includes(n)?1:-1;return"bottom"===n&&(a=1),(t={opacity:0})[r]=24*a,t},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},Sy=t.memo((function(e){var n=e.id,r=e.message,a=e.onCloseComplete,i=e.onRequestRemove,o=e.requestClose,s=void 0!==o&&o,u=e.position,l=void 0===u?"bottom":u,c=e.duration,f=void 0===c?5e3:c,d=e.containerStyle,h=e.motionVariants,p=void 0===h?wy:h,v=e.toastSpacing,g=void 0===v?"0.5rem":v,m=t.useState(f),y=m[0],b=m[1],x=yc();Xt((function(){x||null==a||a()}),[x]),Xt((function(){b(f)}),[f]);var k=function(){x&&i()};t.useEffect((function(){x&&s&&i()}),[x,s,i]),function(e,n){var r=jt(e);t.useEffect((function(){var e;if(null!=n)return e=window.setTimeout((function(){r()}),n),function(){e&&window.clearTimeout(e)}}),[n,r])}(k,y);var w=t.useMemo((function(){return py({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:g},d)}),[d,g]),S=t.useMemo((function(){return function(e){var t="center";return e.includes("right")&&(t="flex-end"),e.includes("left")&&(t="flex-start"),{display:"flex",flexDirection:"column",alignItems:t}}(l)}),[l]);return t.createElement(uy.li,{layout:!0,className:"chakra-toast",variants:p,initial:"initial",animate:"animate",exit:"exit",onHoverStart:function(){return b(null)},onHoverEnd:function(){return b(f)},custom:{position:l},style:S},t.createElement(qa.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:w},_t(r,{id:n,onClose:k})))}));var _y=function(e){var n=t.useSyncExternalStore(yy.subscribe,yy.getState,yy.getState),r=e.children,a=e.motionVariants,i=e.component,o=void 0===i?Sy:i,s=e.portalProps,u=et(n).map((function(e){var r=n[e];return t.createElement("ul",{role:"region","aria-live":"polite",key:e,id:"chakra-toast-manager-"+e,style:my(e)},t.createElement(hy,{initial:!1},r.map((function(e){return t.createElement(o,py({key:e.id,motionVariants:a},e))}))))}));return t.createElement(t.Fragment,null,r,t.createElement(hn,s,u))};var Cy=["children","toastOptions"],Ey=function(e){var n=e.children,r=e.toastOptions,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,Cy);return t.createElement(Ja,a,n,t.createElement(_y,r))};function Ay(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fe().apply(void 0,[{}].concat(t,[Iy]))}function Iy(e,t,n,r){if((Ue(e)||Ue(t))&&Object.prototype.hasOwnProperty.call(r,n))return function(){var n=Ue(e)?e.apply(void 0,arguments):e,r=Ue(t)?t.apply(void 0,arguments):t;return Fe()({},n,r,Iy)}}Ey.defaultProps={theme:Dl};var Ty,Ry=__webpack_require__(250);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Ty||(Ty={}));var Ny=function(e){return e};var My="beforeunload",Oy="popstate";function Py(e){e.preventDefault(),e.returnValue=""}function Fy(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function Dy(){return Math.random().toString(36).substr(2,8)}function Ly(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,a=void 0===r?"":r,i=e.hash,o=void 0===i?"":i;return a&&"?"!==a&&(n+="?"===a.charAt(0)?a:"?"+a),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function zy(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var jy=(0,t.createContext)(null);var By=(0,t.createContext)(null);var Wy=(0,t.createContext)({outlet:null,matches:[]});function Uy(e,t){if(!e)throw new Error(t)}function Vy(e,t,n){void 0===n&&(n="/");var r=Zy(("string"===typeof t?zy(t):t).pathname||"/",n);if(null==r)return null;var a=Hy(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=Yy(a[o],r);return i}function Hy(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(i.relativePath.startsWith(r)||Uy(!1),i.relativePath=i.relativePath.slice(r.length));var o=Qy([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(!0===e.index&&Uy(!1),Hy(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:Xy(o,e.index),routesMeta:s})})),t}var Gy=/^:\w+$/,qy=function(e){return"*"===e};function Xy(e,t){var n=e.split("/"),r=n.length;return n.some(qy)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!qy(e)})).reduce((function(e,t){return e+(Gy.test(t)?3:""===t?1:10)}),r)}function Yy(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===a?t:t.slice(a.length)||"/",c=Ky({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var f=s.route;i.push({params:r,pathname:Qy([a,c.pathname]),pathnameBase:Jy(Qy([a,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(a=Qy([a,c.pathnameBase]))}return i}function Ky(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=Pf(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),c=i.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{});return{params:c,pathname:s,pathnameBase:u,pattern:e}}function $y(e,t,n){var r,a="string"===typeof e?zy(e):e,i=""===e||""===a.pathname?"/":a.pathname;if(null==i)r=n;else{var o=t.length-1;if(i.startsWith("..")){for(var s=i.split("/");".."===s[0];)s.shift(),o-=1;a.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?zy(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:eb(i),hash:tb(s)}}(a,r);return i&&"/"!==i&&i.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function Zy(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var Qy=function(e){return e.join("/").replace(/\/\/+/g,"/")},Jy=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},eb=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},tb=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function nb(){return null!=(0,t.useContext)(By)}function rb(){return nb()||Uy(!1),(0,t.useContext)(By).location}function ab(){nb()||Uy(!1);var e=(0,t.useContext)(jy),n=e.basename,r=e.navigator,a=(0,t.useContext)(Wy).matches,i=rb().pathname,o=JSON.stringify(a.map((function(e){return e.pathnameBase}))),s=(0,t.useRef)(!1);(0,t.useEffect)((function(){s.current=!0}));var u=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var a=$y(e,JSON.parse(o),i);"/"!==n&&(a.pathname=Qy([n,a.pathname])),(t.replace?r.replace:r.push)(a,t.state)}else r.go(e)}),[n,r,o,i]);return u}function ib(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,a,i){return(0,t.createElement)(Wy.Provider,{children:void 0!==a.route.element?a.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,i+1))}})}),null)}function ob(e){Uy(!1)}function sb(e){var n=e.basename,r=void 0===n?"/":n,a=e.children,i=void 0===a?null:a,o=e.location,s=e.navigationType,u=void 0===s?Ty.Pop:s,l=e.navigator,c=e.static,f=void 0!==c&&c;nb()&&Uy(!1);var d=Jy(r),h=(0,t.useMemo)((function(){return{basename:d,navigator:l,static:f}}),[d,l,f]);"string"===typeof o&&(o=zy(o));var p=o,v=p.pathname,g=void 0===v?"/":v,m=p.search,y=void 0===m?"":m,b=p.hash,x=void 0===b?"":b,k=p.state,w=void 0===k?null:k,S=p.key,_=void 0===S?"default":S,C=(0,t.useMemo)((function(){var e=Zy(g,d);return null==e?null:{pathname:e,search:y,hash:x,state:w,key:_}}),[d,g,y,x,w,_]);return null==C?null:(0,t.createElement)(jy.Provider,{value:h},(0,t.createElement)(By.Provider,{children:i,value:{location:C,navigationType:u}}))}function ub(e){var n=e.children,r=e.location;return function(e,n){nb()||Uy(!1);var r,a=(0,t.useContext)(Wy).matches,i=a[a.length-1],o=i?i.params:{},s=(i&&i.pathname,i?i.pathnameBase:"/"),u=(i&&i.route,rb());if(n){var l,c="string"===typeof n?zy(n):n;"/"===s||(null==(l=c.pathname)?void 0:l.startsWith(s))||Uy(!1),r=c}else r=u;var f=r.pathname||"/",d=Vy(e,{pathname:"/"===s?f:f.slice(s.length)||"/"});return ib(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:Qy([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:Qy([s,e.pathnameBase])})})),a)}(lb(n),r)}function lb(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==ob&&Uy(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=lb(e.props.children)),n.push(r)}else n.push.apply(n,lb(e.props.children))})),n}function cb(e){var n=e.basename,r=e.children,a=e.window,i=(0,t.useRef)();null==i.current&&(i.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function a(){var e=n.location,t=e.pathname,a=e.search,i=e.hash,o=r.state||{};return[o.idx,Ny({pathname:t,search:a,hash:i,state:o.usr||null,key:o.key||"default"})]}var i=null;n.addEventListener(Oy,(function(){if(i)f.call(i),i=null;else{var e=Ty.Pop,t=a(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=u-n;o&&(i={action:e,location:r,retry:function(){m(-1*o)}},m(o))}}else g(e)}}));var o=Ty.Pop,s=a(),u=s[0],l=s[1],c=Fy(),f=Fy();function d(e){return"string"===typeof e?e:Ly(e)}function h(e,t){return void 0===t&&(t=null),Ny(oe({pathname:l.pathname,hash:"",search:""},"string"===typeof e?zy(e):e,{state:t,key:Dy()}))}function p(e,t){return[{usr:e.state,key:e.key,idx:t},d(e)]}function v(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function g(e){o=e;var t=a();u=t[0],l=t[1],c.call({action:o,location:l})}function m(e){r.go(e)}null==u&&(u=0,r.replaceState(oe({},r.state,{idx:u}),""));var y={get action(){return o},get location(){return l},createHref:d,push:function e(t,a){var i=Ty.Push,o=h(t,a);if(v(i,o,(function(){e(t,a)}))){var s=p(o,u+1),l=s[0],c=s[1];try{r.pushState(l,"",c)}catch(f){n.location.assign(c)}g(i)}},replace:function e(t,n){var a=Ty.Replace,i=h(t,n);if(v(a,i,(function(){e(t,n)}))){var o=p(i,u),s=o[0],l=o[1];r.replaceState(s,"",l),g(a)}},go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(e){return c.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(My,Py),function(){t(),f.length||n.removeEventListener(My,Py)}}};return y}({window:a}));var o=i.current,s=Pf((0,t.useState)({action:o.action,location:o.location}),2),u=s[0],l=s[1];return(0,t.useLayoutEffect)((function(){return o.listen(l)}),[o]),(0,t.createElement)(sb,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:o})}function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fb.apply(this,arguments)}function db(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var hb=qa("div");var pb=qa("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});var vb=["borderLeftWidth","borderBottomWidth","borderTopWidth","borderRightWidth","borderWidth","borderStyle","borderColor"],gb=["className","orientation","__css"],mb=Wa((function(e,n){var r=Ha("Divider",e),a=r.borderLeftWidth,i=r.borderBottomWidth,o=r.borderTopWidth,s=r.borderRightWidth,u=r.borderWidth,l=r.borderStyle,c=r.borderColor,f=db(r,vb),d=Ma(e),h=d.className,p=d.orientation,v=void 0===p?"horizontal":p,g=d.__css,m=db(d,gb),y={vertical:{borderLeftWidth:a||s||u||"1px",height:"100%"},horizontal:{borderBottomWidth:i||o||u||"1px",width:"100%"}};return t.createElement(qa.hr,fb({ref:n,"aria-orientation":v},m,{__css:fb({},f,{border:"0",borderColor:c,borderStyle:l},y[v],g),className:vt("chakra-divider",h)}))}));var yb=["direction","align","justify","wrap","basis","grow","shrink"],bb=Wa((function(e,n){var r=e.direction,a=e.align,i=e.justify,o=e.wrap,s=e.basis,u=e.grow,l=e.shrink,c=db(e,yb),f={display:"flex",flexDirection:r,alignItems:a,justifyContent:i,flexWrap:o,flexBasis:s,flexGrow:u,flexShrink:l};return t.createElement(qa.div,fb({ref:n,__css:f},c))}));var xb=Ra("List");xb[0],xb[1];var kb=qa("div",{baseStyle:{flex:1,justifySelf:"stretch",alignSelf:"stretch"}});var wb="& > *:not(style) ~ *:not(style)";var Sb=["isInline","direction","align","justify","spacing","wrap","children","divider","className","shouldWrapChildren"],_b=function(e){return t.createElement(qa.div,fb({className:"chakra-stack__item"},e,{__css:fb({display:"inline-block",flex:"0 0 auto",minWidth:0},e.__css)}))},Cb=Wa((function(e,n){var r,a=e.isInline,i=e.direction,o=e.align,s=e.justify,u=e.spacing,l=void 0===u?"0.5rem":u,c=e.wrap,f=e.children,d=e.divider,h=e.className,p=e.shouldWrapChildren,v=db(e,Sb),g=a?"row":null!=i?i:"column",m=t.useMemo((function(){return function(e){var t,n=e.spacing,r=e.direction,a={column:{marginTop:n,marginEnd:0,marginBottom:0,marginStart:0},row:{marginTop:0,marginEnd:0,marginBottom:0,marginStart:n},"column-reverse":{marginTop:0,marginEnd:0,marginBottom:n,marginStart:0},"row-reverse":{marginTop:0,marginEnd:n,marginBottom:0,marginStart:0}};return(t={flexDirection:r})[wb]=Ot(r,(function(e){return a[e]})),t}({direction:g,spacing:l})}),[g,l]),y=t.useMemo((function(){return function(e){var t=e.spacing,n=e.direction,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":Ot(n,(function(e){return r[e]}))}}({spacing:l,direction:g})}),[l,g]),b=!!d,x=!p&&!b,k=Lt(f),w=x?k:k.map((function(e,n){var r="undefined"!==typeof e.key?e.key:n,a=n+1===k.length,i=p?t.createElement(_b,{key:r},e):e;if(!b)return i;var o=a?null:t.cloneElement(d,{__css:y});return t.createElement(t.Fragment,{key:r},i,o)})),S=vt("chakra-stack",h);return t.createElement(qa.div,fb({ref:n,display:"flex",alignItems:o,justifyContent:s,flexDirection:m.flexDirection,flexWrap:c,className:S,__css:b?{}:(r={},r[wb]=m[wb],r)},v),w)}));var Eb=Wa((function(e,n){return t.createElement(Cb,fb({align:"center"},e,{direction:"row",ref:n}))}));var Ab=Wa((function(e,n){return t.createElement(Cb,fb({align:"center"},e,{direction:"column",ref:n}))}));var Ib=["className","align","decoration","casing"],Tb=Wa((function(e,n){var r=Ha("Text",e),a=Ma(e);a.className,a.align,a.decoration,a.casing;var i=db(a,Ib),o=Je({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return t.createElement(qa.p,fb({ref:n,className:vt("chakra-text",e.className)},o,i,{__css:r}))}));var Rb=["spacing","spacingX","spacingY","children","justify","direction","align","className","shouldWrapChildren"],Nb=["className"];function Mb(e){return"number"===typeof e?e+"px":e}var Ob=Wa((function(e,n){var r=e.spacing,a=void 0===r?"0.5rem":r,i=e.spacingX,o=e.spacingY,s=e.children,u=e.justify,l=e.direction,c=e.align,f=e.className,d=e.shouldWrapChildren,h=db(e,Rb),p=t.useMemo((function(){var e={spacingX:i,spacingY:o},t=e.spacingX,n=void 0===t?a:t,r=e.spacingY,s=void 0===r?a:r;return{"--chakra-wrap-x-spacing":function(e){return Ot(n,(function(t){return Mb(Rn("space",t)(e))}))},"--chakra-wrap-y-spacing":function(e){return Ot(s,(function(t){return Mb(Rn("space",t)(e))}))},"--wrap-x-spacing":"calc(var(--chakra-wrap-x-spacing) / 2)","--wrap-y-spacing":"calc(var(--chakra-wrap-y-spacing) / 2)",display:"flex",flexWrap:"wrap",justifyContent:u,alignItems:c,flexDirection:l,listStyleType:"none",padding:"0",margin:"calc(var(--wrap-y-spacing) * -1) calc(var(--wrap-x-spacing) * -1)","& > *:not(style)":{margin:"var(--wrap-y-spacing) var(--wrap-x-spacing)"}}}),[a,i,o,u,c,l]),v=d?t.Children.map(s,(function(e,n){return t.createElement(Pb,{key:n},e)})):s;return t.createElement(qa.div,fb({ref:n,className:vt("chakra-wrap",f),overflow:"hidden"},h),t.createElement(qa.ul,{className:"chakra-wrap__list",__css:p},v))}));var Pb=Wa((function(e,n){var r=e.className,a=db(e,Nb);return t.createElement(qa.li,fb({ref:n,__css:{display:"flex",alignItems:"flex-start"},className:vt("chakra-wrap__listitem",r)},a))}));var Fb=__webpack_require__(184);var Db=function(e){var t=e.text;return(0,Fb.jsx)(bb,{direction:"row",justify:"left",align:"center",p:1,_hover:{bg:"gray.100",cursor:"pointer"},children:(0,Fb.jsx)(Tb,{ml:"3",color:"gray.400",fontWeight:"bold",children:t})})};function Lb(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zb.apply(this,arguments)}var jb=Dt({strict:!1,name:"ButtonGroupContext"}),Bb=(jb[0],jb[1]);var Wb=["label","placement","spacing","children","className","__css"],Ub=function(e){var n=e.label,r=e.placement,a=e.spacing,i=void 0===a?"0.5rem":a,o=e.children,s=void 0===o?t.createElement(Ul,{color:"currentColor",width:"1em",height:"1em"}):o,u=e.className,l=e.__css,c=Lb(e,Wb),f=vt("chakra-button__spinner",u),d="start"===r?"marginEnd":"marginStart",h=t.useMemo((function(){var e;return zb(((e={display:"flex",alignItems:"center",position:n?"relative":"absolute"})[d]=n?i:0,e.fontSize="1em",e.lineHeight="normal",e),l)}),[l,n,d,i]);return t.createElement(qa.div,zb({className:f},c,{__css:h}),s)};var Vb=["children","className"],Hb=function(e){var n=e.children,r=e.className,a=Lb(e,Vb),i=t.isValidElement(n)?t.cloneElement(n,{"aria-hidden":!0,focusable:!1}):n,o=vt("chakra-button__icon",r);return t.createElement(qa.span,zb({display:"inline-flex",alignSelf:"center",flexShrink:0},a,{className:o}),i)};var Gb=["isDisabled","isLoading","isActive","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"],qb=Wa((function(e,n){var r=Bb(),a=Ha("Button",zb({},r,e)),i=Ma(e),o=i.isDisabled,s=void 0===o?null==r?void 0:r.isDisabled:o,u=i.isLoading,l=i.isActive,c=i.children,f=i.leftIcon,d=i.rightIcon,h=i.loadingText,p=i.iconSpacing,v=void 0===p?"0.5rem":p,g=i.type,m=i.spinner,y=i.spinnerPlacement,b=void 0===y?"start":y,x=i.className,k=i.as,w=Lb(i,Gb),S=t.useMemo((function(){var e,t=Fe()({},null!=(e=null==a?void 0:a._focus)?e:{},{zIndex:1});return zb({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none"},a,!!r&&{_focus:t})}),[a,r]),_=function(e){var n=t.useState(!e),r=n[0],a=n[1],i=t.useCallback((function(e){e&&a("BUTTON"===e.tagName)}),[]);return{ref:i,type:r?"button":void 0}}(k),C=_.ref,E=_.type,A={rightIcon:d,leftIcon:f,iconSpacing:v,children:c};return t.createElement(qa.button,zb({disabled:s||u,ref:Zt(n,C),as:k,type:null!=g?g:E,"data-active":ht(l),"data-loading":ht(u),__css:S,className:vt("chakra-button",x)},w),u&&"start"===b&&t.createElement(Ub,{className:"chakra-button__spinner--start",label:h,placement:"start",spacing:v},m),u?h||t.createElement(qa.span,{opacity:0},t.createElement(Xb,A)):t.createElement(Xb,A),u&&"end"===b&&t.createElement(Ub,{className:"chakra-button__spinner--end",label:h,placement:"end",spacing:v},m))}));function Xb(e){var n=e.leftIcon,r=e.rightIcon,a=e.children,i=e.iconSpacing;return t.createElement(t.Fragment,null,n&&t.createElement(Hb,{marginEnd:i},n),a,r&&t.createElement(Hb,{marginStart:i},r))}var Yb=["icon","children","isRound","aria-label"],Kb=Wa((function(e,n){var r=e.icon,a=e.children,i=e.isRound,o=e["aria-label"],s=Lb(e,Yb),u=r||a,l=t.isValidElement(u)?t.cloneElement(u,{"aria-hidden":!0,focusable:!1}):null;return t.createElement(qb,zb({padding:"0",borderRadius:i?"full":void 0,ref:n,"aria-label":o},s),l)}));function $b(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Zb="data-focus-lock",Qb="data-focus-lock-disabled";function Jb(e,n){return function(e,n){var r=(0,t.useState)((function(){return{value:e,callback:n,facade:{get current(){return r.value},set current(e){var t=r.value;t!==e&&(r.value=e,r.callback(e,t))}}}}))[0];return r.callback=n,r.facade}(n||null,(function(t){return e.forEach((function(e){return function(e,t){return"function"===typeof e?e(t):e&&(e.current=t),e}(e,t)}))}))}var ex={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},tx=function(e){var n=e.children;return t.createElement(t.Fragment,null,t.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:ex}),n,n&&t.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:ex}))};tx.propTypes={},tx.defaultProps={children:null};var nx=function(){return nx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},nx.apply(this,arguments)};Object.create;Object.create;function rx(e){return e}function ax(e,t){void 0===t&&(t=rx);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var a=t(e,r);return n.push(a),function(){n=n.filter((function(e){return e!==a}))}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var a=n;n=[],a.forEach(e),t=n}var i=function(){var n=t;t=[],n.forEach(e)},o=function(){return Promise.resolve().then(i)};o(),n={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),n}}}};return a}function ix(e,t){return void 0===t&&(t=rx),ax(e,t)}function ox(e){void 0===e&&(e={});var t=ax(null);return t.options=nx({async:!0,ssr:!1},e),t}var sx=ix({},(function(e){return{target:e.target,currentTarget:e.currentTarget}})),ux=ix(),lx=ix(),cx=ox({async:!0}),fx=[],dx=t.forwardRef((function(e,n){var r,a=t.useState(),i=a[0],o=a[1],s=t.useRef(),u=t.useRef(!1),l=t.useRef(null),c=e.children,f=e.disabled,d=e.noFocusGuards,h=e.persistentFocus,p=e.crossFrame,v=e.autoFocus,g=(e.allowTextSelection,e.group),m=e.className,y=e.whiteList,b=e.hasPositiveIndices,x=e.shards,k=void 0===x?fx:x,w=e.as,S=void 0===w?"div":w,_=e.lockProps,C=void 0===_?{}:_,E=e.sideCar,A=e.returnFocus,I=e.focusOptions,T=e.onActivation,R=e.onDeactivation,N=t.useState({})[0],M=t.useCallback((function(){l.current=l.current||document&&document.activeElement,s.current&&T&&T(s.current),u.current=!0}),[T]),O=t.useCallback((function(){u.current=!1,R&&R(s.current)}),[R]);(0,t.useEffect)((function(){f||(l.current=null)}),[]);var P=t.useCallback((function(e){var t=l.current;if(t&&t.focus){var n="function"===typeof A?A(t):A;if(n){var r="object"===typeof n?n:void 0;l.current=null,e?Promise.resolve().then((function(){return t.focus(r)})):t.focus(r)}}}),[A]),F=t.useCallback((function(e){u.current&&sx.useMedium(e)}),[]),D=ux.useMedium,L=t.useCallback((function(e){s.current!==e&&(s.current=e,o(e))}),[]);var z=oe(((r={})[Qb]=f&&"disabled",r[Zb]=g,r),C),j=!0!==d,B=j&&"tail"!==d,W=Jb([n,L]);return t.createElement(t.Fragment,null,j&&[t.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:f?-1:0,style:ex}),b?t.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:f?-1:1,style:ex}):null],!f&&t.createElement(E,{id:N,sideCar:cx,observed:i,disabled:f,persistentFocus:h,crossFrame:p,autoFocus:v,whiteList:y,shards:k,onActivation:M,onDeactivation:O,returnFocus:P,focusOptions:I}),t.createElement(S,oe({ref:W},z,{className:m,onBlur:D,onFocus:F}),c),B&&t.createElement("div",{"data-focus-guard":!0,tabIndex:f?-1:0,style:ex}))}));dx.propTypes={},dx.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var hx=dx;function px(e,t){return px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},px(e,t)}var vx=function(e,n){return function(r){var a,i=[];function o(){a=e(i.map((function(e){return e.props}))),n(a)}var s=function(e){var n,s;function u(){return e.apply(this,arguments)||this}s=e,(n=u).prototype=Object.create(s.prototype),n.prototype.constructor=n,px(n,s),u.peek=function(){return a};var l=u.prototype;return l.componentDidMount=function(){i.push(this),o()},l.componentDidUpdate=function(){o()},l.componentWillUnmount=function(){var e=i.indexOf(this);i.splice(e,1),o()},l.render=function(){return t.createElement(r,this.props)},u}(t.PureComponent);return Gf(s,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),s}},gx=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},mx=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},yx=function(e,t){return!e||mx(e)||!function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!(!t||!t.getPropertyValue)&&("none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility"))}(e)&&t(gx(e))},bx=function e(t,n){var r=t.get(n);if(void 0!==r)return r;var a=yx(n,e.bind(void 0,t));return t.set(n,a),a},xx=function e(t,n){var r=t.get(n);if(void 0!==r)return r;var a=function(e,t){return!(e&&!mx(e))||!!_x(e)&&t(gx(e))}(n,e.bind(void 0,t));return t.set(n,a),a},kx=function(e){return e.dataset},wx=function(e){return"INPUT"===e.tagName},Sx=function(e){return wx(e)&&"radio"===e.type},_x=function(e){var t=e.getAttribute("data-no-autofocus");return![!0,"true",""].includes(t)},Cx=function(e){var t;return Boolean(e&&(null===(t=kx(e))||void 0===t?void 0:t.focusGuard))},Ex=function(e){return!Cx(e)},Ax=function(e){return Boolean(e)},Ix=function(e,t){return Sx(e)&&e.name?function(e,t){return t.filter(Sx).filter((function(t){return t.name===e.name})).filter((function(e){return e.checked}))[0]||e}(e,t):e},Tx=function(e){return e[0]&&e.length>1?Ix(e[0],e):e[0]},Rx=function(e,t){return e.length>1?e.indexOf(Ix(e[t],e)):t},Nx="NEW_FOCUS",Mx=function(e,t,n,r){var a=e.length,i=e[0],o=e[a-1],s=Cx(n);if(!(n&&e.indexOf(n)>=0)){var u=void 0!==n?t.indexOf(n):-1,l=r?t.indexOf(r):u,c=r?e.indexOf(r):-1,f=u-l,d=t.indexOf(i),h=t.indexOf(o),p=function(e){var t=new Set;return e.forEach((function(n){return t.add(Ix(n,e))})),e.filter((function(e){return t.has(e)}))}(t),v=(void 0!==n?p.indexOf(n):-1)-(r?p.indexOf(r):u),g=Rx(e,0),m=Rx(e,a-1);return-1===u||-1===c?Nx:!f&&c>=0?c:u<=d&&s&&Math.abs(f)>1?m:u>=h&&s&&Math.abs(f)>1?g:f&&Math.abs(v)>1?c:u<=d?m:u>h?g:f?Math.abs(f)>1?c:(a+c+f)%a:void 0}},Ox=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},Px=function(e){return Array.isArray(e)?e:[e]},Fx=function(e,t){var n=e.tabIndex-t.tabIndex,r=e.index-t.index;if(n){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return n||r},Dx=function(e,t,n){return Ox(e).map((function(e,t){return{node:e,index:t,tabIndex:n&&-1===e.tabIndex?(e.dataset||{}).focusGuard?0:-1:e.tabIndex}})).filter((function(e){return!t||e.tabIndex>=0})).sort(Fx)},Lx=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"].join(","),zx="".concat(Lx,", [data-focus-guard]"),jx=function e(t,n){var r;return Ox((null===(r=t.shadowRoot)||void 0===r?void 0:r.children)||t.children).reduce((function(t,r){return t.concat(r.matches(n?zx:Lx)?[r]:[],e(r))}),[])},Bx=function(e,t){return e.reduce((function(e,n){return e.concat(jx(n,t),n.parentNode?Ox(n.parentNode.querySelectorAll(Lx)).filter((function(e){return e===n})):[])}),[])},Wx=function(e,t){return Ox(e).filter((function(e){return bx(t,e)})).filter((function(e){return function(e){return!((wx(e)||function(e){return"BUTTON"===e.tagName}(e))&&("hidden"===e.type||e.disabled))}(e)}))},Ux=function(e,t){return void 0===t&&(t=new Map),Ox(e).filter((function(e){return xx(t,e)}))},Vx=function(e,t,n){return Dx(Wx(Bx(e,n),t),!0,n)},Hx=function(e,t){return Dx(Wx(Bx(e),t),!1)},Gx=function(e,t){return Wx(function(e){var t=e.querySelectorAll("[".concat("data-autofocus-inside","]"));return Ox(t).map((function(e){return Bx([e])})).reduce((function(e,t){return e.concat(t)}),[])}(e),t)},qx=function e(t,n){return(t.shadowRoot?e(t.shadowRoot,n):Object.getPrototypeOf(t).contains.call(t,n))||Ox(t.children).some((function(t){return e(t,n)}))},Xx=function e(t){return t.parentNode?e(t.parentNode):t},Yx=function(e){return Px(e).filter(Boolean).reduce((function(e,t){var n=t.getAttribute(Zb);return e.push.apply(e,n?function(e){for(var t=new Set,n=e.length,r=0;r<n;r+=1)for(var a=r+1;a<n;a+=1){var i=e[r].compareDocumentPosition(e[a]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(a),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(r)}return e.filter((function(e,n){return!t.has(n)}))}(Ox(Xx(t).querySelectorAll("[".concat(Zb,'="').concat(n,'"]:not([').concat(Qb,'="disabled"])')))):[t]),e}),[])},Kx=function e(t){return t.activeElement?t.activeElement.shadowRoot?e(t.activeElement.shadowRoot):t.activeElement:void 0},$x=function(){return document.activeElement?document.activeElement.shadowRoot?Kx(document.activeElement.shadowRoot):document.activeElement:void 0},Zx=function e(t,n){return void 0===n&&(n=[]),n.push(t),t.parentNode&&e(t.parentNode.host||t.parentNode,n),n},Qx=function(e,t){for(var n=Zx(e),r=Zx(t),a=0;a<n.length;a+=1){var i=n[a];if(r.indexOf(i)>=0)return i}return!1},Jx=function(e,t,n){var r=Px(e),a=Px(t),i=r[0],o=!1;return a.filter(Boolean).forEach((function(e){o=Qx(o||e,e)||o,n.filter(Boolean).forEach((function(e){var t=Qx(i,e);t&&(o=!o||qx(t,o)?t:Qx(t,o))}))})),o},ek=function(e,t){var n=document&&$x(),r=Yx(e).filter(Ex),a=Jx(n||e,e,r),i=new Map,o=Hx(r,i),s=Vx(r,i).filter((function(e){var t=e.node;return Ex(t)}));if(s[0]||(s=o)[0]){var u,l=Hx([a],i).map((function(e){return e.node})),c=function(e,t){var n=new Map;return t.forEach((function(e){return n.set(e.node,e)})),e.map((function(e){return n.get(e)})).filter(Ax)}(l,s),f=c.map((function(e){return e.node})),d=Mx(f,l,n,t);if(d===Nx){var h=Ux(o.map((function(e){return e.node}))).filter((u=function(e,t){return e.reduce((function(e,n){return e.concat(Gx(n,t))}),[])}(r,i),function(e){var t;return e.autofocus||!!(null===(t=kx(e))||void 0===t?void 0:t.autofocus)||u.indexOf(e)>=0}));return{node:h&&h.length?Tx(h):Tx(Ux(f))}}return void 0===d?d:c[d]}},tk=0,nk=!1,rk=function(e,t,n){void 0===n&&(n={});var r,a,i=ek(e,t);if(!nk&&i){if(tk>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),nk=!0,void setTimeout((function(){nk=!1}),1);tk++,r=i.node,a=n.focusOptions,"focus"in r&&r.focus(a),"contentWindow"in r&&r.contentWindow&&r.contentWindow.focus(),tk--}},ak=function(e){return Boolean(Ox(e.querySelectorAll("iframe")).some((function(e){return e===document.activeElement})))},ik=function(e){var t=document&&$x();return!(!t||t.dataset&&t.dataset.focusGuard)&&Yx(e).some((function(e){return qx(e,t)||ak(e)}))},ok=function(e){var t=Yx(e).filter(Ex),n=Jx(e,e,t),r=new Map,a=Vx([n],r,!0),i=Vx(t,r).filter((function(e){var t=e.node;return Ex(t)})).map((function(e){return e.node}));return a.map((function(e){var t=e.node;return{node:t,index:e.index,lockItem:i.indexOf(t)>=0,guard:Cx(t)}}))};function sk(e){var t=window.setImmediate;"undefined"!==typeof t?t(e):setTimeout(e,1)}var uk=function(){return document&&document.activeElement===document.body||function(){var e=document&&$x();return!!e&&Ox(document.querySelectorAll("[".concat("data-no-focus-lock","]"))).some((function(t){return qx(t,e)}))}()},lk=null,ck=null,fk=null,dk=!1,hk=function(){return!0};function pk(e,t,n,r){var a=null,i=e;do{var o=r[i];if(o.guard)o.node.dataset.focusAutoGuard&&(a=o);else{if(!o.lockItem)break;if(i!==e)return;a=null}}while((i+=n)!==t);a&&(a.node.tabIndex=0)}var vk=function(e){return e&&"current"in e?e.current:e},gk=function e(t,n,r){return n&&(n.host===t&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,r))},mk=function(){var e,t=!1;if(lk){var n=lk,r=n.observed,a=n.persistentFocus,i=n.autoFocus,o=n.shards,s=n.crossFrame,u=n.focusOptions,l=r||fk&&fk.portaledElement,c=document&&document.activeElement;if(l){var f=[l].concat(o.map(vk).filter(Boolean));if(c&&!function(e){return(lk.whiteList||hk)(e)}(c)||(a||(s?Boolean(dk):"meanwhile"===dk)||!uk()||!ck&&i)&&(l&&!(ik(f)||c&&function(e,t){return t.some((function(t){return gk(e,t,t)}))}(c,f)||(e=c,fk&&fk.portaledElement===e))&&(document&&!ck&&c&&!i?(c.blur&&c.blur(),document.body.focus()):(t=rk(f,ck,{focusOptions:u}),fk={})),dk=!1,ck=document&&document.activeElement),document){var d=document&&document.activeElement,h=ok(f),p=h.map((function(e){return e.node})).indexOf(d);p>-1&&(h.filter((function(e){var t=e.guard,n=e.node;return t&&n.dataset.focusAutoGuard})).forEach((function(e){return e.node.removeAttribute("tabIndex")})),pk(p,h.length,1,h),pk(p,-1,-1,h))}}}return t},yk=function(e){mk()&&e&&(e.stopPropagation(),e.preventDefault())},bk=function(){return sk(mk)},xk=function(e){var t=e.target,n=e.currentTarget;n.contains(t)||(fk={observerNode:n,portaledElement:t})},kk=function(){dk="just",setTimeout((function(){dk="meanwhile"}),0)};sx.assignSyncMedium(xk),ux.assignMedium(bk),lx.assignMedium((function(e){return e({moveFocusInside:rk,focusInside:ik})}));var wk=vx((function(e){return e.filter((function(e){return!e.disabled}))}),(function(e){var t=e.slice(-1)[0];t&&!lk&&(document.addEventListener("focusin",yk),document.addEventListener("focusout",bk),window.addEventListener("blur",kk));var n=lk,r=n&&t&&t.id===n.id;lk=t,n&&!r&&(n.onDeactivation(),e.filter((function(e){return e.id===n.id})).length||n.returnFocus(!t)),t?(ck=null,r&&n.observed===t.observed||t.onActivation(),mk(),sk(mk)):(document.removeEventListener("focusin",yk),document.removeEventListener("focusout",bk),window.removeEventListener("blur",kk),ck=null)}))((function(){return null})),Sk=t.forwardRef((function(e,n){return t.createElement(hx,oe({sideCar:wk,ref:n},e))})),_k=hx.propTypes||{};_k.sideCar,$b(_k,["sideCar"]);Sk.propTypes={};var Ck=Sk,Ek=function(e){var n=e.initialFocusRef,r=e.finalFocusRef,a=e.contentRef,i=e.restoreFocus,o=e.children,s=e.isDisabled,u=e.autoFocus,l=e.persistentFocus,c=e.lockFocusAcrossFrames,f=t.useCallback((function(){if(null!=n&&n.current)n.current.focus();else if(null!=a&&a.current){0===kt(a.current).length&&Rt(a.current,{nextTick:!0})}}),[n,a]),d=t.useCallback((function(){var e;null==r||null==(e=r.current)||e.focus()}),[r]),h=i&&!r;return t.createElement(Ck,{crossFrame:c,persistentFocus:l,autoFocus:u,disabled:s,onActivation:f,onDeactivation:d,returnFocus:h},o)};function Ak(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Ik(){return Ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ik.apply(this,arguments)}var Tk={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},Rk={position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},Nk={position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},Mk={position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},Ok={position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}};function Pk(e){var t;switch(null!=(t=null==e?void 0:e.direction)?t:"right"){case"right":default:return Nk;case"left":return Rk;case"bottom":return Ok;case"top":return Mk}}var Fk={enter:{duration:.2,ease:Tk.easeOut},exit:{duration:.1,ease:Tk.easeIn}},Dk=function(e,t){return Ik({},e,{delay:Be(t)?t:null==t?void 0:t.enter})},Lk=function(e,t){return Ik({},e,{delay:Be(t)?t:null==t?void 0:t.exit})},zk=["in","unmountOnExit","animateOpacity","startingHeight","endingHeight","style","className","transition","transitionEnd"],jk={exit:{height:{duration:.2,ease:Tk.ease},opacity:{duration:.3,ease:Tk.ease}},enter:{height:{duration:.3,ease:Tk.ease},opacity:{duration:.4,ease:Tk.ease}}},Bk={exit:function(e){var t,n,r=e.animateOpacity,a=e.startingHeight,i=e.transition,o=e.transitionEnd,s=e.delay;return Ik({},r&&{opacity:(n=a,null!=n&&parseInt(n.toString(),10)>0?1:0)},{height:a,transitionEnd:null==o?void 0:o.exit,transition:null!=(t=null==i?void 0:i.exit)?t:Lk(jk.exit,s)})},enter:function(e){var t,n=e.animateOpacity,r=e.endingHeight,a=e.transition,i=e.transitionEnd,o=e.delay;return Ik({},n&&{opacity:1},{height:r,transitionEnd:null==i?void 0:i.enter,transition:null!=(t=null==a?void 0:a.enter)?t:Dk(jk.enter,o)})}},Wk=t.forwardRef((function(e,n){var r=e.in,a=e.unmountOnExit,i=e.animateOpacity,o=void 0===i||i,s=e.startingHeight,u=void 0===s?0:s,l=e.endingHeight,c=void 0===l?"auto":l,f=e.style,d=e.className,h=e.transition,p=e.transitionEnd,v=Ak(e,zk),g=t.useState(!1),m=g[0],y=g[1];t.useEffect((function(){var e=setTimeout((function(){y(!0)}));return function(){return clearTimeout(e)}}),[]),It({condition:Boolean(u>0&&a),message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});var b=parseFloat(u.toString())>0,x={startingHeight:u,endingHeight:c,animateOpacity:o,transition:m?h:{enter:{duration:0}},transitionEnd:Fe()(p,{exit:a?void 0:{display:b?"block":"none"}})},k=!a||r,w=r||a?"enter":"exit";return t.createElement(hy,{initial:!1,custom:x},k&&t.createElement(uy.div,Ik({ref:n},v,{className:vt("chakra-collapse",d),style:Ik({overflow:"hidden",display:"block"},f),custom:x,variants:Bk,initial:!!a&&"exit",animate:w,exit:"exit"})))}));var Uk={enter:function(e){var t,n=void 0===e?{}:e,r=n.transition,a=n.transitionEnd,i=n.delay;return{opacity:1,transition:null!=(t=null==r?void 0:r.enter)?t:Dk(Fk.enter,i),transitionEnd:null==a?void 0:a.enter}},exit:function(e){var t,n=void 0===e?{}:e,r=n.transition,a=n.transitionEnd,i=n.delay;return{opacity:0,transition:null!=(t=null==r?void 0:r.exit)?t:Lk(Fk.exit,i),transitionEnd:null==a?void 0:a.exit}}},Vk={initial:"exit",animate:"enter",exit:"exit",variants:Uk};var Hk={exit:function(e){var t,n=e.reverse,r=e.initialScale,a=e.transition,i=e.transitionEnd,o=e.delay;return Ik({opacity:0},n?{scale:r,transitionEnd:null==i?void 0:i.exit}:{transitionEnd:Ik({scale:r},null==i?void 0:i.exit)},{transition:null!=(t=null==a?void 0:a.exit)?t:Lk(Fk.exit,o)})},enter:function(e){var t,n=e.transitionEnd,r=e.transition,a=e.delay;return{opacity:1,scale:1,transition:null!=(t=null==r?void 0:r.enter)?t:Dk(Fk.enter,a),transitionEnd:null==n?void 0:n.enter}}},Gk={initial:"exit",animate:"enter",exit:"exit",variants:Hk};var qk=["direction","style","unmountOnExit","in","className","transition","transitionEnd","delay"],Xk={exit:{duration:.15,ease:Tk.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},Yk={exit:function(e){var t,n=e.direction,r=e.transition,a=e.transitionEnd,i=e.delay;return Ik({},Pk({direction:n}).exit,{transition:null!=(t=null==r?void 0:r.exit)?t:Lk(Xk.exit,i),transitionEnd:null==a?void 0:a.exit})},enter:function(e){var t,n=e.direction,r=e.transitionEnd,a=e.transition,i=e.delay;return Ik({},Pk({direction:n}).enter,{transition:null!=(t=null==a?void 0:a.enter)?t:Dk(Xk.enter,i),transitionEnd:null==r?void 0:r.enter})}},Kk=t.forwardRef((function(e,n){var r=e.direction,a=void 0===r?"right":r,i=e.style,o=e.unmountOnExit,s=e.in,u=e.className,l=e.transition,c=e.transitionEnd,f=e.delay,d=Ak(e,qk),h=Pk({direction:a}),p=Object.assign({position:"fixed"},h.position,i),v=!o||s&&o,g=s||o?"enter":"exit",m={transitionEnd:c,transition:l,direction:a,delay:f};return t.createElement(hy,{custom:m},v&&t.createElement(uy.div,Ik({},d,{ref:n,initial:"exit",className:vt("chakra-slide",u),animate:g,exit:"exit",custom:m,variants:Yk,style:p})))}));var $k={initial:function(e){var t,n=e.offsetX,r=e.offsetY,a=e.transition,i=e.transitionEnd,o=e.delay;return{opacity:0,x:n,y:r,transition:null!=(t=null==a?void 0:a.exit)?t:Lk(Fk.exit,o),transitionEnd:null==i?void 0:i.exit}},enter:function(e){var t,n=e.transition,r=e.transitionEnd,a=e.delay;return{opacity:1,x:0,y:0,transition:null!=(t=null==n?void 0:n.enter)?t:Dk(Fk.enter,a),transitionEnd:null==r?void 0:r.enter}},exit:function(e){var t,n=e.offsetY,r=e.offsetX,a=e.transition,i=e.transitionEnd,o=e.reverse,s=e.delay,u={x:r,y:n};return Ik({opacity:0,transition:null!=(t=null==a?void 0:a.exit)?t:Lk(Fk.exit,s)},o?Ik({},u,{transitionEnd:null==i?void 0:i.exit}):{transitionEnd:Ik({},u,null==i?void 0:i.exit)})}},Zk={initial:"initial",animate:"enter",exit:"exit",variants:$k};var Qk=function(){return Qk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Qk.apply(this,arguments)};Object.create;Object.create;var Jk="right-scroll-bar-position",ew="width-before-scroll-bar",tw=ox(),nw=function(){},rw=t.forwardRef((function(e,n){var r=t.useRef(null),a=t.useState({onScrollCapture:nw,onWheelCapture:nw,onTouchMoveCapture:nw}),i=a[0],o=a[1],s=e.forwardProps,u=e.children,l=e.className,c=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,p=e.noIsolation,v=e.inert,g=e.allowPinchZoom,m=e.as,y=void 0===m?"div":m,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=h,k=Jb([r,n]),w=Qk(Qk({},b),i);return t.createElement(t.Fragment,null,f&&t.createElement(x,{sideCar:tw,removeScrollBar:c,shards:d,noIsolation:p,inert:v,setCallbacks:o,allowPinchZoom:!!g,lockRef:r}),s?t.cloneElement(t.Children.only(u),Qk(Qk({},w),{ref:k})):t.createElement(y,Qk({},w,{className:l,ref:k}),u))}));rw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},rw.classNames={fullWidth:ew,zeroRight:Jk};var aw,iw=function(e){var n=e.sideCar,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=n.read();if(!a)throw new Error("Sidecar medium not found");return t.createElement(a,nx({},r))};iw.isSideCarExport=!0;function ow(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=aw||__webpack_require__.nc;return t&&e.setAttribute("nonce",t),e}var sw=function(){var e=0,t=null;return{add:function(n){var r;0==e&&(t=ow())&&(!function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}(t,n),r=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(r)),e++},remove:function(){!--e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},uw=function(){var e=function(){var e=sw();return function(n,r){t.useEffect((function(){return e.add(n),function(){e.remove()}}),[n&&r])}}();return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},lw={left:0,top:0,right:0,gap:0},cw=function(e){return parseInt(e||"",10)||0},fw=function(e){if(void 0===e&&(e="margin"),"undefined"===typeof window)return lw;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[cw(n),cw(r),cw(a)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},dw=uw(),hw=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(i,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Jk," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(ew," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Jk," .").concat(Jk," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(ew," .").concat(ew," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},pw=function(e){var n=e.noRelative,r=e.noImportant,a=e.gapMode,i=void 0===a?"margin":a,o=t.useMemo((function(){return fw(i)}),[i]);return t.createElement(dw,{styles:hw(o,!n,i,r?"":"!important")})},vw=!1;if("undefined"!==typeof window)try{var gw=Object.defineProperty({},"passive",{get:function(){return vw=!0,!0}});window.addEventListener("test",gw,gw),window.removeEventListener("test",gw,gw)}catch(bfe){vw=!1}var mw=!!vw&&{passive:!1},yw=function(e,t){var n=t;do{if("undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),bw(e,n)){var r=xw(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},bw=function(e,t){return"v"===e?function(e){var t=window.getComputedStyle(e);return"hidden"!==t.overflowY&&!(t.overflowY===t.overflowX&&"visible"===t.overflowY)}(t):function(e){var t=window.getComputedStyle(e);return"hidden"!==t.overflowX&&!(t.overflowY===t.overflowX&&"visible"===t.overflowX)}(t)},xw=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},kw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ww=function(e){return[e.deltaX,e.deltaY]},Sw=function(e){return e&&"current"in e?e.current:e},_w=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Cw=0,Ew=[];var Aw,Iw=(Aw=function(e){var n=t.useRef([]),r=t.useRef([0,0]),a=t.useRef(),i=t.useState(Cw++)[0],o=t.useState((function(){return uw()}))[0],s=t.useRef(e);t.useEffect((function(){s.current=e}),[e]),t.useEffect((function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(Sw),!0).filter(Boolean);return t.forEach((function(e){return e.classList.add("allow-interactivity-".concat(i))})),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach((function(e){return e.classList.remove("allow-interactivity-".concat(i))}))}}}),[e.inert,e.lockRef.current,e.shards]);var u=t.useCallback((function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var n,i=kw(e),o=r.current,u="deltaX"in e?e.deltaX:o[0]-i[0],l="deltaY"in e?e.deltaY:o[1]-i[1],c=e.target,f=Math.abs(u)>Math.abs(l)?"h":"v";if("touches"in e&&"h"===f&&"range"===c.type)return!1;var d=yw(f,c);if(!d)return!0;if(d?n=f:(n="v"===f?"h":"v",d=yw(f,c)),!d)return!1;if(!a.current&&"changedTouches"in e&&(u||l)&&(a.current=n),!n)return!0;var h=a.current||n;return function(e,t,n,r,a){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,u=t.contains(s),l=!1,c=o>0,f=0,d=0;do{var h=xw(e,s),p=h[0],v=h[1]-h[2]-i*p;(p||v)&&bw(e,s)&&(f+=v,d+=p),s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(c&&(a&&0===f||!a&&o>f)||!c&&(a&&0===d||!a&&-o>d))&&(l=!0),l}(h,t,e,"h"===h?u:l,!0)}),[]),l=t.useCallback((function(e){var t=e;if(Ew.length&&Ew[Ew.length-1]===o){var r="deltaY"in t?ww(t):kw(t),a=n.current.filter((function(e){return e.name===t.type&&e.target===t.target&&(n=e.delta,a=r,n[0]===a[0]&&n[1]===a[1]);var n,a}))[0];if(a&&a.should)t.preventDefault();else if(!a){var i=(s.current.shards||[]).map(Sw).filter(Boolean).filter((function(e){return e.contains(t.target)}));(i.length>0?u(t,i[0]):!s.current.noIsolation)&&t.preventDefault()}}}),[]),c=t.useCallback((function(e,t,r,a){var i={name:e,delta:t,target:r,should:a};n.current.push(i),setTimeout((function(){n.current=n.current.filter((function(e){return e!==i}))}),1)}),[]),f=t.useCallback((function(e){r.current=kw(e),a.current=void 0}),[]),d=t.useCallback((function(t){c(t.type,ww(t),t.target,u(t,e.lockRef.current))}),[]),h=t.useCallback((function(t){c(t.type,kw(t),t.target,u(t,e.lockRef.current))}),[]);t.useEffect((function(){return Ew.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,mw),document.addEventListener("touchmove",l,mw),document.addEventListener("touchstart",f,mw),function(){Ew=Ew.filter((function(e){return e!==o})),document.removeEventListener("wheel",l,mw),document.removeEventListener("touchmove",l,mw),document.removeEventListener("touchstart",f,mw)}}),[]);var p=e.removeScrollBar,v=e.inert;return t.createElement(t.Fragment,null,v?t.createElement(o,{styles:_w(i)}):null,p?t.createElement(pw,{gapMode:"margin"}):null)},tw.useMedium(Aw),iw),Tw=t.forwardRef((function(e,n){return t.createElement(rw,Qk({},e,{ref:n,sideCar:Iw}))}));Tw.classNames=rw.classNames;var Rw=Tw,Nw=new WeakMap,Mw=new WeakMap,Ow={},Pw=0,Fw=function(e,t,n){void 0===t&&(t=function(e){return"undefined"===typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e)),void 0===n&&(n="data-aria-hidden");var r=Array.isArray(e)?e:[e];Ow[n]||(Ow[n]=new WeakMap);var a=Ow[n],i=[],o=new Set;r.forEach((function e(t){t&&!o.has(t)&&(o.add(t),e(t.parentNode))}));return function e(t){!t||r.indexOf(t)>=0||Array.prototype.forEach.call(t.children,(function(t){if(o.has(t))e(t);else{var r=t.getAttribute("aria-hidden"),s=null!==r&&"false"!==r,u=(Nw.get(t)||0)+1,l=(a.get(t)||0)+1;Nw.set(t,u),a.set(t,l),i.push(t),1===u&&s&&Mw.set(t,!0),1===l&&t.setAttribute(n,"true"),s||t.setAttribute("aria-hidden","true")}}))}(t),o.clear(),Pw++,function(){i.forEach((function(e){var t=Nw.get(e)-1,r=a.get(e)-1;Nw.set(e,t),a.set(e,r),t||(Mw.has(e)||e.removeAttribute("aria-hidden"),Mw.delete(e)),r||e.removeAttribute(n)})),--Pw||(Nw=new WeakMap,Nw=new WeakMap,Mw=new WeakMap,Ow={})}};function Dw(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function Lw(){return Lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lw.apply(this,arguments)}var zw=["preset"],jw={slideInBottom:Lw({},Zk,{custom:{offsetY:16,reverse:!0}}),slideInRight:Lw({},Zk,{custom:{offsetX:16,reverse:!0}}),scale:Lw({},Gk,{custom:{initialScale:.95,reverse:!0}}),none:{}},Bw=qa(uy.section),Ww=t.forwardRef((function(e,n){var r=e.preset,a=Dw(e,zw),i=jw[r];return t.createElement(Bw,Lw({ref:n},i,a))})),Uw=new(function(){function e(){this.modals=void 0,this.modals=[]}var t=e.prototype;return t.add=function(e){this.modals.push(e)},t.remove=function(e){this.modals=this.modals.filter((function(t){return t!==e}))},t.isTopModal=function(e){return this.modals[this.modals.length-1]===e},e}());function Vw(e){var n=e.isOpen,r=e.onClose,a=e.id,i=e.closeOnOverlayClick,o=void 0===i||i,s=e.closeOnEsc,u=void 0===s||s,l=e.useInert,c=void 0===l||l,f=e.onOverlayClick,d=e.onEsc,h=(0,t.useRef)(null),p=(0,t.useRef)(null),v=Gt(a,"chakra-modal","chakra-modal--header","chakra-modal--body"),g=v[0],m=v[1],y=v[2];!function(e,n){var r=e.current;(0,t.useEffect)((function(){if(e.current&&n)return Fw(e.current)}),[n,e,r])}(h,n&&c),function(e,n){(0,t.useEffect)((function(){return n&&Uw.add(e),function(){Uw.remove(e)}}),[n,e])}(h,n);var b=(0,t.useRef)(null),x=(0,t.useCallback)((function(e){b.current=e.target}),[]),k=(0,t.useCallback)((function(e){"Escape"===e.key&&(e.stopPropagation(),u&&(null==r||r()),null==d||d())}),[u,r,d]),w=(0,t.useState)(!1),S=w[0],_=w[1],C=(0,t.useState)(!1),E=C[0],A=C[1],I=(0,t.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),Lw({role:"dialog"},e,{ref:Ft(t,h),id:g,tabIndex:-1,"aria-modal":!0,"aria-labelledby":S?m:void 0,"aria-describedby":E?y:void 0,onClick:Ct(e.onClick,(function(e){return e.stopPropagation()}))})}),[y,E,g,m,S]),T=(0,t.useCallback)((function(e){e.stopPropagation(),b.current===e.target&&Uw.isTopModal(h)&&(o&&(null==r||r()),null==f||f())}),[r,o,f]),R=(0,t.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),Lw({},e,{ref:Ft(t,p),onClick:Ct(e.onClick,T),onKeyDown:Ct(e.onKeyDown,k),onMouseDown:Ct(e.onMouseDown,x)})}),[k,x,T]);return{isOpen:n,onClose:r,headerId:m,bodyId:y,setBodyMounted:A,setHeaderMounted:_,dialogRef:h,overlayRef:p,getDialogProps:I,getDialogContainerProps:R}}var Hw=["className","children","containerProps"],Gw=["className","transition"],qw=["className"],Xw=["className"],Yw=["onClick","className"],Kw=Ra("Modal"),$w=Kw[0],Zw=Kw[1],Qw=Zw,Jw=Dt({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),eS=Jw[0],tS=Jw[1],nS=function(e){var n=e.portalProps,r=e.children,a=e.autoFocus,i=e.trapFocus,o=e.initialFocusRef,s=e.finalFocusRef,u=e.returnFocusOnClose,l=e.blockScrollOnMount,c=e.allowPinchZoom,f=e.preserveScrollBarGap,d=e.motionPreset,h=e.lockFocusAcrossFrames,p=e.onCloseComplete,v=Ga("Modal",e),g=Lw({},Vw(e),{autoFocus:a,trapFocus:i,initialFocusRef:o,finalFocusRef:s,returnFocusOnClose:u,blockScrollOnMount:l,allowPinchZoom:c,preserveScrollBarGap:f,motionPreset:d,lockFocusAcrossFrames:h});return t.createElement(eS,{value:g},t.createElement($w,{value:v},t.createElement(hy,{onExitComplete:p},g.isOpen&&t.createElement(hn,n,r))))};nS.defaultProps={lockFocusAcrossFrames:!0,returnFocusOnClose:!0,scrollBehavior:"outside",trapFocus:!0,autoFocus:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale"};var rS=qa(uy.div),aS=Wa((function(e,n){var r=e.className,a=e.children,i=e.containerProps,o=Dw(e,Hw),s=tS(),u=s.getDialogProps,l=s.getDialogContainerProps,c=u(o,n),f=l(i),d=vt("chakra-modal__content",r),h=Zw(),p=Lw({display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0},h.dialog),v=Lw({display:"flex",width:"100vw",height:"100vh","@supports(height: -webkit-fill-available)":{height:"-webkit-fill-available"},position:"fixed",left:0,top:0},h.dialogContainer),g=tS().motionPreset;return t.createElement(iS,null,t.createElement(qa.div,Lw({},f,{className:"chakra-modal__content-container",tabIndex:-1,__css:v}),t.createElement(Ww,Lw({preset:g,className:d},c,{__css:p}),a)))}));function iS(e){var n=tS(),r=n.autoFocus,a=n.trapFocus,i=n.dialogRef,o=n.initialFocusRef,s=n.blockScrollOnMount,u=n.allowPinchZoom,l=n.finalFocusRef,c=n.returnFocusOnClose,f=n.preserveScrollBarGap,d=n.lockFocusAcrossFrames,h=mc(),p=h[0],v=h[1];return t.useEffect((function(){!p&&v&&setTimeout(v)}),[p,v]),t.createElement(Ek,{autoFocus:r,isDisabled:!a,initialFocusRef:o,finalFocusRef:l,restoreFocus:c,contentRef:i,lockFocusAcrossFrames:d},t.createElement(Rw,{removeScrollBar:!f,allowPinchZoom:u,enabled:s,forwardProps:!0},e.children))}var oS=Wa((function(e,n){var r=e.className;e.transition;var a=Dw(e,Gw),i=vt("chakra-modal__overlay",r),o=Lw({pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh"},Zw().overlay),s="none"===tS().motionPreset?{}:Vk;return t.createElement(rS,Lw({},s,{__css:o,ref:n,className:i},a))}));var sS=Wa((function(e,n){var r=e.className,a=Dw(e,qw),i=tS(),o=i.headerId,s=i.setHeaderMounted;t.useEffect((function(){return s(!0),function(){return s(!1)}}),[s]);var u=vt("chakra-modal__header",r),l=Lw({flex:0},Zw().header);return t.createElement(qa.header,Lw({ref:n,className:u,id:o},a,{__css:l}))}));var uS=Wa((function(e,n){var r=e.className,a=Dw(e,Xw),i=tS(),o=i.bodyId,s=i.setBodyMounted;t.useEffect((function(){return s(!0),function(){return s(!1)}}),[s]);var u=vt("chakra-modal__body",r),l=Zw();return t.createElement(qa.div,Lw({ref:n,className:u,id:o},a,{__css:l.body}))}));var lS=Wa((function(e,n){var r=e.onClick,a=e.className,i=Dw(e,Yw),o=tS().onClose,s=vt("chakra-modal__close-btn",a),u=Zw();return t.createElement(fc,Lw({ref:n,__css:u.closeButton,className:s,onClick:Ct(r,(function(e){e.stopPropagation(),o()}))},i))}));var cS=["isOpen","onClose","placement","children"],fS=["className","children"],dS=Dt(),hS=dS[0],pS=dS[1],vS={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function gS(e){var n,r=e.isOpen,a=e.onClose,i=e.placement,o=void 0===i?"right":i,s=e.children,u=Dw(e,cS),l=Ia(),c=null==(n=l.components)?void 0:n.Drawer,f=function(e,t){var n,r;if(e)return null!=(n=null==(r=vS[e])?void 0:r[t])?n:e}(o,l.direction);return t.createElement(hS,{value:{placement:f}},t.createElement(nS,Lw({isOpen:r,onClose:a,styleConfig:c},u),s))}var mS=qa(Kk),yS=Wa((function(e,n){var r=e.className,a=e.children,i=Dw(e,fS),o=tS(),s=o.getDialogProps,u=o.getDialogContainerProps,l=o.isOpen,c=s(i,n),f=u(),d=vt("chakra-modal__content",r),h=Qw(),p=Lw({display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0},h.dialog),v=Lw({display:"flex",width:"100vw",height:"100vh",position:"fixed",left:0,top:0},h.dialogContainer),g=pS().placement;return t.createElement(qa.div,Lw({},f,{className:"chakra-modal__content-container",__css:v}),t.createElement(iS,null,t.createElement(mS,Lw({direction:g,in:l,className:d},c,{__css:p}),a)))}));function bS(){return bS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bS.apply(this,arguments)}function xS(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var kS=["htmlWidth","htmlHeight","alt"],wS=["fallbackSrc","fallback","src","srcSet","align","fit","loading","ignoreFallback","crossOrigin","fallbackStrategy","referrerPolicy"],SS=t.forwardRef((function(e,n){var r=e.htmlWidth,a=e.htmlHeight,i=e.alt,o=xS(e,kS);return t.createElement("img",bS({width:r,height:a,ref:n,alt:i},o))})),_S=Wa((function(e,n){var r=e.fallbackSrc,a=e.fallback,i=e.src,o=e.srcSet,s=e.align,u=e.fit,l=e.loading,c=e.ignoreFallback,f=e.crossOrigin,d=e.fallbackStrategy,h=void 0===d?"beforeLoadOrError":d,p=e.referrerPolicy,v=xS(e,wS),g=null!=l||c||!(void 0!==r||void 0!==a),m=function(e){var n=e.loading,r=e.src,a=e.srcSet,i=e.onLoad,o=e.onError,s=e.crossOrigin,u=e.sizes,l=e.ignoreFallback,c=(0,t.useState)("pending"),f=c[0],d=c[1];(0,t.useEffect)((function(){d(r?"loading":"pending")}),[r]);var h=(0,t.useRef)(),p=(0,t.useCallback)((function(){if(r){v();var e=new Image;e.src=r,s&&(e.crossOrigin=s),a&&(e.srcset=a),u&&(e.sizes=u),n&&(e.loading=n),e.onload=function(e){v(),d("loaded"),null==i||i(e)},e.onerror=function(e){v(),d("failed"),null==o||o(e)},h.current=e}}),[r,s,a,u,i,o,n]),v=function(){h.current&&(h.current.onload=null,h.current.onerror=null,h.current=null)};return zt((function(){if(!l)return"loading"===f&&p(),function(){v()}}),[f,p,l]),l?"loaded":f}(bS({},e,{ignoreFallback:g})),y=function(e,t){return"loaded"!==e&&"beforeLoadOrError"===t||"failed"===e&&"onError"===t}(m,h),b=bS({ref:n,objectFit:u,objectPosition:s},g?v:$e(v,["onError","onLoad"]));return y?a||t.createElement(qa.img,bS({as:SS,className:"chakra-image__placeholder",src:r},b)):t.createElement(qa.img,bS({as:SS,src:i,srcSet:o,crossOrigin:f,loading:l,referrerPolicy:p,className:"chakra-image"},b))}));function CS(){return CS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CS.apply(this,arguments)}function ES(e){return e.sort((function(e,t){var n=e.compareDocumentPosition(t);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0}))}function AS(e,t,n){var r=e+1;return n&&r>=t&&(r=0),r}function IS(e,t,n){var r=e-1;return n&&r<0&&(r=t),r}var TS="undefined"!==typeof window?t.useLayoutEffect:t.useEffect,RS=function(){var e=this;this.descendants=new Map,this.register=function(t){var n;if(null!=t)return"object"==typeof(n=t)&&"nodeType"in n&&n.nodeType===Node.ELEMENT_NODE?e.registerNode(t):function(n){e.registerNode(n,t)}},this.unregister=function(t){e.descendants.delete(t);var n=ES(Array.from(e.descendants.keys()));e.assignIndex(n)},this.destroy=function(){e.descendants.clear()},this.assignIndex=function(t){e.descendants.forEach((function(e){var n=t.indexOf(e.node);e.index=n,e.node.dataset.index=e.index.toString()}))},this.count=function(){return e.descendants.size},this.enabledCount=function(){return e.enabledValues().length},this.values=function(){return Array.from(e.descendants.values()).sort((function(e,t){return e.index-t.index}))},this.enabledValues=function(){return e.values().filter((function(e){return!e.disabled}))},this.item=function(t){if(0!==e.count())return e.values()[t]},this.enabledItem=function(t){if(0!==e.enabledCount())return e.enabledValues()[t]},this.first=function(){return e.item(0)},this.firstEnabled=function(){return e.enabledItem(0)},this.last=function(){return e.item(e.descendants.size-1)},this.lastEnabled=function(){var t=e.enabledValues().length-1;return e.enabledItem(t)},this.indexOf=function(t){var n,r;return t&&null!=(n=null==(r=e.descendants.get(t))?void 0:r.index)?n:-1},this.enabledIndexOf=function(t){return null==t?-1:e.enabledValues().findIndex((function(e){return e.node.isSameNode(t)}))},this.next=function(t,n){void 0===n&&(n=!0);var r=AS(t,e.count(),n);return e.item(r)},this.nextEnabled=function(t,n){void 0===n&&(n=!0);var r=e.item(t);if(r){var a=AS(e.enabledIndexOf(r.node),e.enabledCount(),n);return e.enabledItem(a)}},this.prev=function(t,n){void 0===n&&(n=!0);var r=IS(t,e.count()-1,n);return e.item(r)},this.prevEnabled=function(t,n){void 0===n&&(n=!0);var r=e.item(t);if(r){var a=IS(e.enabledIndexOf(r.node),e.enabledCount()-1,n);return e.enabledItem(a)}},this.registerNode=function(t,n){if(t&&!e.descendants.has(t)){var r=ES(Array.from(e.descendants.keys()).concat(t));null!=n&&n.disabled&&(n.disabled=!!n.disabled);var a=CS({node:t,index:-1},n);e.descendants.set(t,a),e.assignIndex(r)}}};var NS=Dt({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"}),MS=NS[0],OS=NS[1];function PS(){return PS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PS.apply(this,arguments)}function FS(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var DS=["onChange","defaultIndex","index","allowMultiple","allowToggle"],LS=["isDisabled","isFocusable","id"],zS=[MS,function(){return OS()},function(){return function(){var e=(0,t.useRef)(new RS);return TS((function(){return function(){return e.current.destroy()}})),e.current}()},function(e){return function(e){var n=OS(),r=(0,t.useState)(-1),a=r[0],i=r[1],o=(0,t.useRef)(null);TS((function(){return function(){o.current&&n.unregister(o.current)}}),[]),TS((function(){if(o.current){var e=Number(o.current.dataset.index);a==e||Number.isNaN(e)||i(e)}}));var s=e?n.register(e):n.register;return{descendants:n,index:a,enabledIndex:n.enabledIndexOf(o.current),register:Ft(s,o)}}(e)}],jS=zS[0],BS=zS[2],WS=zS[3];function US(e){var n=e.onChange,r=e.defaultIndex,a=e.index,i=e.allowMultiple,o=e.allowToggle,s=FS(e,DS);!function(e){var t=e.index||e.defaultIndex,n=!Ve(t)&&!We(t)&&e.allowMultiple;It({condition:!!n,message:"If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: "+typeof t+","})}(e),function(e){It({condition:!(!e.allowMultiple||!e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}(e);var u=BS(),l=(0,t.useState)(-1),c=l[0],f=l[1];Yt((function(){f(-1)}));var d=Ut({value:a,defaultValue:function(){return i?null!=r?r:[]:null!=r?r:-1},onChange:n}),h=d[0],p=d[1];return{index:h,setIndex:p,htmlProps:s,getAccordionItemProps:function(e){var t=!1;null!==e&&(t=We(h)?h.includes(e):h===e);return{isOpen:t,onChange:function(t){if(null!==e)if(i&&We(h)){var n=t?je(h,e):function(e,t){return e.filter((function(e){return e!==t}))}(h,e);p(n)}else t?p(e):o&&p(-1)}}},focusedIndex:c,setFocusedIndex:f,descendants:u}}var VS=Dt({name:"AccordionContext",errorMessage:"useAccordionContext: `context` is undefined. Seems you forgot to wrap the accordion components in `<Accordion />`"}),HS=VS[0],GS=VS[1];function qS(e){var n=e.isDisabled,r=e.isFocusable,a=e.id,i=FS(e,LS),o=GS(),s=o.getAccordionItemProps,u=o.setFocusedIndex,l=(0,t.useRef)(null),c=Gt(a,"accordion-button","accordion-panel"),f=c[0],d=c[1];!function(e){It({condition:!(!e.isFocusable||e.isDisabled),message:"Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.\n    "})}(e);var h=WS({disabled:n&&!r}),p=h.register,v=h.index,g=h.descendants,m=s(-1===v?null:v),y=m.isOpen,b=m.onChange;!function(e){It({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}({isOpen:y,isDisabled:n});var x=(0,t.useCallback)((function(){null==b||b(!y),u(v)}),[v,u,y,b]),k=(0,t.useCallback)((function(e){var t=function(e){var t=e.key,n=e.keyCode;return n>=37&&n<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}(e),n={ArrowDown:function(){var e=g.nextEnabled(v);e&&Rt(e.node)},ArrowUp:function(){var e=g.prevEnabled(v);e&&Rt(e.node)},Home:function(){var e=g.firstEnabled();e&&Rt(e.node)},End:function(){var e=g.lastEnabled();e&&Rt(e.node)}},r=n[t];r&&(e.preventDefault(),r(e))}),[g,v]),w=(0,t.useCallback)((function(){u(v)}),[u,v]),S=(0,t.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),PS({},e,{type:"button",ref:Ft(p,l,t),id:f,disabled:!!n,"aria-expanded":!!y,"aria-controls":d,onClick:Ct(e.onClick,x),onFocus:Ct(e.onFocus,w),onKeyDown:Ct(e.onKeyDown,k)})}),[f,n,y,x,w,k,d,p]),_=(0,t.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),PS({},e,{ref:t,role:"region",id:d,"aria-labelledby":f,hidden:!y})}),[f,y,d]);return{isOpen:y,isDisabled:n,isFocusable:r,onOpen:function(){null==b||b(!0)},onClose:function(){null==b||b(!1)},getButtonProps:S,getPanelProps:_,htmlProps:i}}var XS=["children","reduceMotion"],YS=["htmlProps","descendants"],KS=["htmlProps"],$S=Ra("Accordion"),ZS=$S[0],QS=$S[1],JS=Wa((function(e,n){var r=e.children,a=e.reduceMotion,i=FS(e,XS),o=Ga("Accordion",i),s=US(Ma(i)),u=s.htmlProps,l=s.descendants,c=FS(s,YS),f=t.useMemo((function(){return PS({},c,{reduceMotion:!!a})}),[c,a]);return t.createElement(jS,{value:l},t.createElement(HS,{value:f},t.createElement(ZS,{value:o},t.createElement(qa.div,PS({ref:n},u,{className:vt("chakra-accordion",i.className),__css:o.root}),r))))}));var e_=Dt({name:"AccordionItemContext",errorMessage:"useAccordionItemContext: `context` is undefined. Seems you forgot to wrap the accordion item parts in `<AccordionItem />` "}),t_=e_[0],n_=e_[1],r_=Wa((function(e,n){var r=e.children,a=e.className,i=qS(e),o=i.htmlProps,s=FS(i,KS),u=PS({},QS().container,{overflowAnchor:"none"}),l=t.useMemo((function(){return s}),[s]);return t.createElement(t_,{value:l},t.createElement(qa.div,PS({ref:n},o,{className:vt("chakra-accordion__item",a),__css:u}),_t(r,{isExpanded:!!s.isOpen,isDisabled:!!s.isDisabled})))}));var a_=Wa((function(e,n){var r=(0,n_().getButtonProps)(e,n),a=PS({display:"flex",alignItems:"center",width:"100%",outline:0},QS().button);return t.createElement(qa.button,PS({},r,{className:vt("chakra-accordion__button",e.className),__css:a}))}));var i_=Wa((function(e,n){var r=GS().reduceMotion,a=n_(),i=a.getPanelProps,o=a.isOpen,s=i(e,n),u=vt("chakra-accordion__panel",e.className),l=QS();r||delete s.hidden;var c=t.createElement(qa.div,PS({},s,{__css:l.panel,className:u}));return r?c:t.createElement(Wk,{in:o},c)}));Xl({d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z",displayName:"CopyIcon"}),Xl({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"}),Xl({d:"M23.414,20.591l-4.645-4.645a10.256,10.256,0,1,0-2.828,2.829l4.645,4.644a2.025,2.025,0,0,0,2.828,0A2,2,0,0,0,23.414,20.591ZM10.25,3.005A7.25,7.25,0,1,1,3,10.255,7.258,7.258,0,0,1,10.25,3.005Z",displayName:"Search2Icon"}),Xl({d:"M21.4,13.7C20.6,13.9,19.8,14,19,14c-5,0-9-4-9-9c0-0.8,0.1-1.6,0.3-2.4c0.1-0.3,0-0.7-0.3-1 c-0.3-0.3-0.6-0.4-1-0.3C4.3,2.7,1,7.1,1,12c0,6.1,4.9,11,11,11c4.9,0,9.3-3.3,10.6-8.1c0.1-0.3,0-0.7-0.3-1 C22.1,13.7,21.7,13.6,21.4,13.7z",displayName:"MoonIcon"}),Xl({displayName:"SunIcon",path:t.createElement("g",{strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2",fill:"none",stroke:"currentColor"},t.createElement("circle",{cx:"12",cy:"12",r:"5"}),t.createElement("path",{d:"M12 1v2"}),t.createElement("path",{d:"M12 21v2"}),t.createElement("path",{d:"M4.22 4.22l1.42 1.42"}),t.createElement("path",{d:"M18.36 18.36l1.42 1.42"}),t.createElement("path",{d:"M1 12h2"}),t.createElement("path",{d:"M21 12h2"}),t.createElement("path",{d:"M4.22 19.78l1.42-1.42"}),t.createElement("path",{d:"M18.36 5.64l1.42-1.42"}))}),Xl({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"}),Xl({displayName:"SmallAddIcon",viewBox:"0 0 20 20",path:t.createElement("path",{fill:"currentColor",d:"M14 9h-3V6c0-.55-.45-1-1-1s-1 .45-1 1v3H6c-.55 0-1 .45-1 1s.45 1 1 1h3v3c0 .55.45 1 1 1s1-.45 1-1v-3h3c.55 0 1-.45 1-1s-.45-1-1-1z",fillRule:"evenodd"})}),Xl({viewBox:"0 0 14 14",d:"M14,7.77 L14,6.17 L12.06,5.53 L11.61,4.44 L12.49,2.6 L11.36,1.47 L9.55,2.38 L8.46,1.93 L7.77,0.01 L6.17,0.01 L5.54,1.95 L4.43,2.4 L2.59,1.52 L1.46,2.65 L2.37,4.46 L1.92,5.55 L0,6.23 L0,7.82 L1.94,8.46 L2.39,9.55 L1.51,11.39 L2.64,12.52 L4.45,11.61 L5.54,12.06 L6.23,13.98 L7.82,13.98 L8.45,12.04 L9.56,11.59 L11.4,12.47 L12.53,11.34 L11.61,9.53 L12.08,8.44 L14,7.75 L14,7.77 Z M7,10 C5.34,10 4,8.66 4,7 C4,5.34 5.34,4 7,4 C8.66,4 10,5.34 10,7 C10,8.66 8.66,10 7,10 Z",displayName:"SettingsIcon"}),Xl({displayName:"CheckCircleIcon",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"}),Xl({d:"M19.5,9.5h-.75V6.75a6.75,6.75,0,0,0-13.5,0V9.5H4.5a2,2,0,0,0-2,2V22a2,2,0,0,0,2,2h15a2,2,0,0,0,2-2V11.5A2,2,0,0,0,19.5,9.5Zm-9.5,6a2,2,0,1,1,3,1.723V19.5a1,1,0,0,1-2,0V17.223A1.994,1.994,0,0,1,10,15.5ZM7.75,6.75a4.25,4.25,0,0,1,8.5,0V9a.5.5,0,0,1-.5.5H8.25a.5.5,0,0,1-.5-.5Z",displayName:"LockIcon"}),Xl({d:"M19.5,9.5h-.75V6.75A6.751,6.751,0,0,0,5.533,4.811a1.25,1.25,0,1,0,2.395.717A4.251,4.251,0,0,1,16.25,6.75V9a.5.5,0,0,1-.5.5H4.5a2,2,0,0,0-2,2V22a2,2,0,0,0,2,2h15a2,2,0,0,0,2-2V11.5A2,2,0,0,0,19.5,9.5Zm-9.5,6a2,2,0,1,1,3,1.723V19.5a1,1,0,0,1-2,0V17.223A1.994,1.994,0,0,1,10,15.5Z",displayName:"UnlockIcon"}),Xl({displayName:"ViewIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M23.432,10.524C20.787,7.614,16.4,4.538,12,4.6,7.6,4.537,3.213,7.615.568,10.524a2.211,2.211,0,0,0,0,2.948C3.182,16.351,7.507,19.4,11.839,19.4h.308c4.347,0,8.671-3.049,11.288-5.929A2.21,2.21,0,0,0,23.432,10.524ZM7.4,12A4.6,4.6,0,1,1,12,16.6,4.6,4.6,0,0,1,7.4,12Z"}),t.createElement("circle",{cx:"12",cy:"12",r:"2"}))}),Xl({displayName:"ViewOffIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M23.2,10.549a20.954,20.954,0,0,0-4.3-3.6l4-3.995a1,1,0,1,0-1.414-1.414l-.018.018a.737.737,0,0,1-.173.291l-19.5,19.5c-.008.007-.018.009-.026.017a1,1,0,0,0,1.631,1.088l4.146-4.146a11.26,11.26,0,0,0,4.31.939h.3c4.256,0,8.489-2.984,11.051-5.8A2.171,2.171,0,0,0,23.2,10.549ZM16.313,13.27a4.581,4.581,0,0,1-3,3.028,4.3,4.3,0,0,1-3.1-.19.253.253,0,0,1-.068-.407l5.56-5.559a.252.252,0,0,1,.407.067A4.3,4.3,0,0,1,16.313,13.27Z"}),t.createElement("path",{d:"M7.615,13.4a.244.244,0,0,0,.061-.24A4.315,4.315,0,0,1,7.5,12,4.5,4.5,0,0,1,12,7.5a4.276,4.276,0,0,1,1.16.173.244.244,0,0,0,.24-.062l1.941-1.942a.254.254,0,0,0-.1-.421A10.413,10.413,0,0,0,12,4.75C7.7,4.692,3.4,7.7.813,10.549a2.15,2.15,0,0,0-.007,2.9,21.209,21.209,0,0,0,3.438,3.03.256.256,0,0,0,.326-.029Z"}))}),Xl({d:"M11.2857,6.05714 L10.08571,4.85714 L7.85714,7.14786 L7.85714,1 L6.14286,1 L6.14286,7.14786 L3.91429,4.85714 L2.71429,6.05714 L7,10.42857 L11.2857,6.05714 Z M1,11.2857 L1,13 L13,13 L13,11.2857 L1,11.2857 Z",displayName:"DownloadIcon",viewBox:"0 0 14 14"}),Xl({displayName:"DeleteIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"}))}),Xl({displayName:"RepeatIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M10.319,4.936a7.239,7.239,0,0,1,7.1,2.252,1.25,1.25,0,1,0,1.872-1.657A9.737,9.737,0,0,0,9.743,2.5,10.269,10.269,0,0,0,2.378,9.61a.249.249,0,0,1-.271.178l-1.033-.13A.491.491,0,0,0,.6,9.877a.5.5,0,0,0-.019.526l2.476,4.342a.5.5,0,0,0,.373.248.43.43,0,0,0,.062,0,.5.5,0,0,0,.359-.152l3.477-3.593a.5.5,0,0,0-.3-.844L5.15,10.172a.25.25,0,0,1-.2-.333A7.7,7.7,0,0,1,10.319,4.936Z"}),t.createElement("path",{d:"M23.406,14.1a.5.5,0,0,0,.015-.526l-2.5-4.329A.5.5,0,0,0,20.546,9a.489.489,0,0,0-.421.151l-3.456,3.614a.5.5,0,0,0,.3.842l1.848.221a.249.249,0,0,1,.183.117.253.253,0,0,1,.023.216,7.688,7.688,0,0,1-5.369,4.9,7.243,7.243,0,0,1-7.1-2.253,1.25,1.25,0,1,0-1.872,1.656,9.74,9.74,0,0,0,9.549,3.03,10.261,10.261,0,0,0,7.369-7.12.251.251,0,0,1,.27-.179l1.058.127a.422.422,0,0,0,.06,0A.5.5,0,0,0,23.406,14.1Z"}))}),Xl({displayName:"RepeatClockIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M12.965,6a1,1,0,0,0-1,1v5.5a1,1,0,0,0,1,1h5a1,1,0,0,0,0-2h-3.75a.25.25,0,0,1-.25-.25V7A1,1,0,0,0,12.965,6Z"}),t.createElement("path",{d:"M12.567,1.258A10.822,10.822,0,0,0,2.818,8.4a.25.25,0,0,1-.271.163L.858,8.309a.514.514,0,0,0-.485.213.5.5,0,0,0-.021.53l2.679,4.7a.5.5,0,0,0,.786.107l3.77-3.746a.5.5,0,0,0-.279-.85L5.593,9.007a.25.25,0,0,1-.192-.35,8.259,8.259,0,1,1,7.866,11.59,1.25,1.25,0,0,0,.045,2.5h.047a10.751,10.751,0,1,0-.792-21.487Z"}))}),Xl({displayName:"EditIcon",path:t.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},t.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))}),Xl({d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z",displayName:"ChevronLeftIcon"}),Xl({d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z",displayName:"ChevronRightIcon"}),Xl({displayName:"ChevronDownIcon",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),Xl({d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z",displayName:"ChevronUpIcon"}),Xl({d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",displayName:"ArrowBackIcon"}),Xl({d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z",displayName:"ArrowForwardIcon"}),Xl({d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z",displayName:"ArrowUpIcon"}),Xl({viewBox:"0 0 16 16",d:"M11.891 9.992a1 1 0 1 1 1.416 1.415l-4.3 4.3a1 1 0 0 1-1.414 0l-4.3-4.3A1 1 0 0 1 4.71 9.992l3.59 3.591 3.591-3.591zm0-3.984L8.3 2.417 4.709 6.008a1 1 0 0 1-1.416-1.415l4.3-4.3a1 1 0 0 1 1.414 0l4.3 4.3a1 1 0 1 1-1.416 1.415z",displayName:"ArrowUpDownIcon"}),Xl({d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z",displayName:"ArrowDownIcon"}),Xl({displayName:"ExternalLinkIcon",path:t.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},t.createElement("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),t.createElement("path",{d:"M15 3h6v6"}),t.createElement("path",{d:"M10 14L21 3"}))}),Xl({displayName:"LinkIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M10.458,18.374,7.721,21.11a2.853,2.853,0,0,1-3.942,0l-.892-.891a2.787,2.787,0,0,1,0-3.941l5.8-5.8a2.789,2.789,0,0,1,3.942,0l.893.892A1,1,0,0,0,14.94,9.952l-.893-.892a4.791,4.791,0,0,0-6.771,0l-5.8,5.8a4.787,4.787,0,0,0,0,6.77l.892.891a4.785,4.785,0,0,0,6.771,0l2.736-2.735a1,1,0,1,0-1.414-1.415Z"}),t.createElement("path",{d:"M22.526,2.363l-.892-.892a4.8,4.8,0,0,0-6.77,0l-2.905,2.9a1,1,0,0,0,1.414,1.414l2.9-2.9a2.79,2.79,0,0,1,3.941,0l.893.893a2.786,2.786,0,0,1,0,3.942l-5.8,5.8a2.769,2.769,0,0,1-1.971.817h0a2.766,2.766,0,0,1-1.969-.816,1,1,0,1,0-1.415,1.412,4.751,4.751,0,0,0,3.384,1.4h0a4.752,4.752,0,0,0,3.385-1.4l5.8-5.8a4.786,4.786,0,0,0,0-6.771Z"}))}),Xl({displayName:"PlusSquareIcon",path:t.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},t.createElement("rect",{height:"18",width:"18",rx:"2",ry:"2",x:"3",y:"3"}),t.createElement("path",{d:"M12 8v8"}),t.createElement("path",{d:"M8 12h8"}))}),Xl({displayName:"CalendarIcon",viewBox:"0 0 14 14",d:"M10.8889,5.5 L3.11111,5.5 L3.11111,7.05556 L10.8889,7.05556 L10.8889,5.5 Z M12.4444,1.05556 L11.6667,1.05556 L11.6667,0 L10.1111,0 L10.1111,1.05556 L3.88889,1.05556 L3.88889,0 L2.33333,0 L2.33333,1.05556 L1.55556,1.05556 C0.692222,1.05556 0.00777777,1.75556 0.00777777,2.61111 L0,12.5 C0,13.3556 0.692222,14 1.55556,14 L12.4444,14 C13.3,14 14,13.3556 14,12.5 L14,2.61111 C14,1.75556 13.3,1.05556 12.4444,1.05556 Z M12.4444,12.5 L1.55556,12.5 L1.55556,3.94444 L12.4444,3.94444 L12.4444,12.5 Z M8.55556,8.61111 L3.11111,8.61111 L3.11111,10.1667 L8.55556,10.1667 L8.55556,8.61111 Z"}),Xl({d:"M0.913134,0.920639 C1.49851,0.331726 2.29348,0 3.12342,0 L10.8766,0 C11.7065,0 12.5015,0.331725 13.0869,0.920639 C13.6721,1.50939 14,2.30689 14,3.13746 L14,8.12943 C13.9962,8.51443 13.9059,8.97125 13.7629,9.32852 C13.6128,9.683 13.3552,10.0709 13.0869,10.3462 C12.813,10.6163 12.4265,10.8761 12.0734,11.0274 C11.7172,11.1716 11.2607,11.263 10.8766,11.2669 L10.1234,11.2669 L10.1234,12.5676 L10.1209,12.5676 C10.1204,12.793 10.0633,13.0791 9.97807,13.262 C9.8627,13.466 9.61158,13.7198 9.40818,13.8382 L9.40824,13.8383 C9.4077,13.8386 9.40716,13.8388 9.40661,13.8391 C9.40621,13.8393 9.4058,13.8396 9.40539,13.8398 L9.40535,13.8397 C9.22958,13.9254 8.94505,13.9951 8.75059,14 L8.74789,14 C8.35724,13.9963 7.98473,13.8383 7.71035,13.5617 L5.39553,11.2669 L3.12342,11.2669 C2.29348,11.2669 1.49851,10.9352 0.913134,10.3462 C0.644826,10.0709 0.387187,9.683 0.23711,9.32852 C0.0941235,8.97125 0.00379528,8.51443 0,8.12943 L0,3.13746 C0,2.30689 0.327915,1.50939 0.913134,0.920639 Z M3.12342,1.59494 C2.71959,1.59494 2.33133,1.75628 2.04431,2.04503 C1.75713,2.33395 1.59494,2.72681 1.59494,3.13746 L1.59494,8.12943 C1.59114,8.35901 1.62114,8.51076 1.71193,8.72129 C1.79563,8.9346 1.88065,9.06264 2.04431,9.22185 C2.33133,9.5106 2.71959,9.67195 3.12342,9.67195 L5.72383,9.67195 C5.93413,9.67195 6.13592,9.75502 6.28527,9.90308 L8.52848,12.1269 L8.52848,10.4694 C8.52848,10.029 8.88552,9.67195 9.32595,9.67195 L10.8766,9.67195 C11.1034,9.67583 11.2517,9.64614 11.4599,9.55518 C11.6712,9.47132 11.7976,9.38635 11.9557,9.22185 C12.1193,9.06264 12.2044,8.9346 12.2881,8.72129 C12.3789,8.51076 12.4089,8.35901 12.4051,8.12943 L12.4051,3.13746 C12.4051,2.72681 12.2429,2.33394 11.9557,2.04503 C11.6687,1.75628 11.2804,1.59494 10.8766,1.59494 L3.12342,1.59494 Z",displayName:"ChatIcon",viewBox:"0 0 14 14"}),Xl({displayName:"TimeIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"}),t.createElement("path",{d:"M17.134,15.81,12.5,11.561V6.5a1,1,0,0,0-2,0V12a1,1,0,0,0,.324.738l4.959,4.545a1.01,1.01,0,0,0,1.413-.061A1,1,0,0,0,17.134,15.81Z"}))}),Xl({displayName:"ArrowRightIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M13.584,12a2.643,2.643,0,0,1-.775,1.875L3.268,23.416a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L.768,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,13.584,12Z"}),t.createElement("path",{d:"M23.75,12a2.643,2.643,0,0,1-.775,1.875l-9.541,9.541a1.768,1.768,0,0,1-2.5-2.5l8.739-8.739a.25.25,0,0,0,0-.354L10.934,3.084a1.768,1.768,0,0,1,2.5-2.5l9.541,9.541A2.643,2.643,0,0,1,23.75,12Z"}))}),Xl({displayName:"ArrowLeftIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M10.416,12a2.643,2.643,0,0,1,.775-1.875L20.732.584a1.768,1.768,0,0,1,2.5,2.5l-8.739,8.739a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5l-9.541-9.541A2.643,2.643,0,0,1,10.416,12Z"}),t.createElement("path",{d:"M.25,12a2.643,2.643,0,0,1,.775-1.875L10.566.584a1.768,1.768,0,0,1,2.5,2.5L4.327,11.823a.25.25,0,0,0,0,.354l8.739,8.739a1.768,1.768,0,0,1-2.5,2.5L1.025,13.875A2.643,2.643,0,0,1,.25,12Z"}))}),Xl({displayName:"AtSignIcon",d:"M12,.5A11.634,11.634,0,0,0,.262,12,11.634,11.634,0,0,0,12,23.5a11.836,11.836,0,0,0,6.624-2,1.25,1.25,0,1,0-1.393-2.076A9.34,9.34,0,0,1,12,21a9.132,9.132,0,0,1-9.238-9A9.132,9.132,0,0,1,12,3a9.132,9.132,0,0,1,9.238,9v.891a1.943,1.943,0,0,1-3.884,0V12A5.355,5.355,0,1,0,12,17.261a5.376,5.376,0,0,0,3.861-1.634,4.438,4.438,0,0,0,7.877-2.736V12A11.634,11.634,0,0,0,12,.5Zm0,14.261A2.763,2.763,0,1,1,14.854,12,2.812,2.812,0,0,1,12,14.761Z"}),Xl({displayName:"AttachmentIcon",d:"M21.843,3.455a6.961,6.961,0,0,0-9.846,0L1.619,13.832a5.128,5.128,0,0,0,7.252,7.252L17.3,12.653A3.293,3.293,0,1,0,12.646,8L7.457,13.184A1,1,0,1,0,8.871,14.6L14.06,9.409a1.294,1.294,0,0,1,1.829,1.83L7.457,19.67a3.128,3.128,0,0,1-4.424-4.424L13.411,4.869a4.962,4.962,0,1,1,7.018,7.018L12.646,19.67a1,1,0,1,0,1.414,1.414L21.843,13.3a6.96,6.96,0,0,0,0-9.846Z"}),Xl({displayName:"UpDownIcon",viewBox:"-1 -1 9 11",d:"M 3.5 0L 3.98809 -0.569442L 3.5 -0.987808L 3.01191 -0.569442L 3.5 0ZM 3.5 9L 3.01191 9.56944L 3.5 9.98781L 3.98809 9.56944L 3.5 9ZM 0.488094 3.56944L 3.98809 0.569442L 3.01191 -0.569442L -0.488094 2.43056L 0.488094 3.56944ZM 3.01191 0.569442L 6.51191 3.56944L 7.48809 2.43056L 3.98809 -0.569442L 3.01191 0.569442ZM -0.488094 6.56944L 3.01191 9.56944L 3.98809 8.43056L 0.488094 5.43056L -0.488094 6.56944ZM 3.98809 9.56944L 7.48809 6.56944L 6.51191 5.43056L 3.01191 8.43056L 3.98809 9.56944Z"}),Xl({d:"M23.555,8.729a1.505,1.505,0,0,0-1.406-.98H16.062a.5.5,0,0,1-.472-.334L13.405,1.222a1.5,1.5,0,0,0-2.81,0l-.005.016L8.41,7.415a.5.5,0,0,1-.471.334H1.85A1.5,1.5,0,0,0,.887,10.4l5.184,4.3a.5.5,0,0,1,.155.543L4.048,21.774a1.5,1.5,0,0,0,2.31,1.684l5.346-3.92a.5.5,0,0,1,.591,0l5.344,3.919a1.5,1.5,0,0,0,2.312-1.683l-2.178-6.535a.5.5,0,0,1,.155-.543l5.194-4.306A1.5,1.5,0,0,0,23.555,8.729Z",displayName:"StarIcon"}),Xl({displayName:"EmailIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("path",{d:"M11.114,14.556a1.252,1.252,0,0,0,1.768,0L22.568,4.87a.5.5,0,0,0-.281-.849A1.966,1.966,0,0,0,22,4H2a1.966,1.966,0,0,0-.289.021.5.5,0,0,0-.281.849Z"}),t.createElement("path",{d:"M23.888,5.832a.182.182,0,0,0-.2.039l-6.2,6.2a.251.251,0,0,0,0,.354l5.043,5.043a.75.75,0,1,1-1.06,1.061l-5.043-5.043a.25.25,0,0,0-.354,0l-2.129,2.129a2.75,2.75,0,0,1-3.888,0L7.926,13.488a.251.251,0,0,0-.354,0L2.529,18.531a.75.75,0,0,1-1.06-1.061l5.043-5.043a.251.251,0,0,0,0-.354l-6.2-6.2a.18.18,0,0,0-.2-.039A.182.182,0,0,0,0,6V18a2,2,0,0,0,2,2H22a2,2,0,0,0,2-2V6A.181.181,0,0,0,23.888,5.832Z"}))}),Xl({d:"M2.20731,0.0127209 C2.1105,-0.0066419 1.99432,-0.00664663 1.91687,0.032079 C0.871279,0.438698 0.212942,1.92964 0.0580392,2.95587 C-0.426031,6.28627 2.20731,9.17133 4.62766,11.0689 C6.77694,12.7534 10.9012,15.5223 13.3409,12.8503 C13.6507,12.5211 14.0186,12.037 13.9993,11.553 C13.9412,10.7397 13.186,10.1588 12.6051,9.71349 C12.1598,9.38432 11.2304,8.47427 10.6495,8.49363 C10.1267,8.51299 9.79754,9.05515 9.46837,9.38432 L8.88748,9.96521 C8.79067,10.062 7.55145,9.24878 7.41591,9.15197 C6.91248,8.8228 6.4284,8.45491 6.00242,8.04829 C5.57644,7.64167 5.18919,7.19632 4.86002,6.73161 C4.7632,6.59607 3.96933,5.41495 4.04678,5.31813 C4.04678,5.31813 4.72448,4.58234 4.91811,4.2919 C5.32473,3.67229 5.63453,3.18822 5.16982,2.45243 C4.99556,2.18135 4.78257,1.96836 4.55021,1.73601 C4.14359,1.34875 3.73698,0.942131 3.27227,0.612963 C3.02055,0.419335 2.59457,0.0708094 2.20731,0.0127209 Z",displayName:"PhoneIcon",viewBox:"0 0 14 14"}),Xl({viewBox:"0 0 10 10",d:"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z",displayName:"DragHandleIcon"}),Xl({displayName:"SpinnerIcon",path:t.createElement(t.Fragment,null,t.createElement("defs",null,t.createElement("linearGradient",{x1:"28.154%",y1:"63.74%",x2:"74.629%",y2:"17.783%",id:"a"},t.createElement("stop",{stopColor:"currentColor",offset:"0%"}),t.createElement("stop",{stopColor:"#fff",stopOpacity:"0",offset:"100%"}))),t.createElement("g",{transform:"translate(2)",fill:"none"},t.createElement("circle",{stroke:"url(#a)",strokeWidth:"4",cx:"10",cy:"12",r:"10"}),t.createElement("path",{d:"M10 2C4.477 2 0 6.477 0 12",stroke:"currentColor",strokeWidth:"4"}),t.createElement("rect",{fill:"currentColor",x:"8",width:"4",height:"4",rx:"8"})))}),Xl({displayName:"CloseIcon",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}),Xl({displayName:"SmallCloseIcon",viewBox:"0 0 16 16",path:t.createElement("path",{d:"M9.41 8l2.29-2.29c.19-.18.3-.43.3-.71a1.003 1.003 0 0 0-1.71-.71L8 6.59l-2.29-2.3a1.003 1.003 0 0 0-1.42 1.42L6.59 8 4.3 10.29c-.19.18-.3.43-.3.71a1.003 1.003 0 0 0 1.71.71L8 9.41l2.29 2.29c.18.19.43.3.71.3a1.003 1.003 0 0 0 .71-1.71L9.41 8z",fillRule:"evenodd",fill:"currentColor"})}),Xl({d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z",displayName:"NotAllowedIcon"}),Xl({d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z",displayName:"TriangleDownIcon"}),Xl({d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z",displayName:"TriangleUpIcon"}),Xl({displayName:"InfoOutlineIcon",path:t.createElement("g",{fill:"currentColor",stroke:"currentColor",strokeLinecap:"square",strokeWidth:"2"},t.createElement("circle",{cx:"12",cy:"12",fill:"none",r:"11",stroke:"currentColor"}),t.createElement("line",{fill:"none",x1:"11.959",x2:"11.959",y1:"11",y2:"17"}),t.createElement("circle",{cx:"11.959",cy:"7",r:"1",stroke:"none"}))}),Xl({displayName:"BellIcon",d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}),Xl({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"}),Xl({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,19a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,12,19Zm1.6-6.08a1,1,0,0,0-.6.917,1,1,0,1,1-2,0,3,3,0,0,1,1.8-2.75A2,2,0,1,0,10,9.255a1,1,0,1,1-2,0,4,4,0,1,1,5.6,3.666Z",displayName:"QuestionIcon"}),Xl({displayName:"QuestionOutlineIcon",path:t.createElement("g",{stroke:"currentColor",strokeWidth:"1.5"},t.createElement("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),t.createElement("path",{fill:"none",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),t.createElement("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"}))}),Xl({d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z",displayName:"WarningIcon"}),Xl({displayName:"WarningTwoIcon",d:"M23.119,20,13.772,2.15h0a2,2,0,0,0-3.543,0L.881,20a2,2,0,0,0,1.772,2.928H21.347A2,2,0,0,0,23.119,20ZM11,8.423a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Zm1.05,11.51h-.028a1.528,1.528,0,0,1-1.522-1.47,1.476,1.476,0,0,1,1.448-1.53h.028A1.527,1.527,0,0,1,13.5,18.4,1.475,1.475,0,0,1,12.05,19.933Z"}),Xl({viewBox:"0 0 14 14",path:t.createElement("g",{fill:"currentColor"},t.createElement("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"}))}),Xl({displayName:"MinusIcon",path:t.createElement("g",{fill:"currentColor"},t.createElement("rect",{height:"4",width:"20",x:"2",y:"10"}))});var o_=Xl({displayName:"HamburgerIcon",viewBox:"0 0 24 24",d:"M 3 5 A 1.0001 1.0001 0 1 0 3 7 L 21 7 A 1.0001 1.0001 0 1 0 21 5 L 3 5 z M 3 11 A 1.0001 1.0001 0 1 0 3 13 L 21 13 A 1.0001 1.0001 0 1 0 21 11 L 3 11 z M 3 17 A 1.0001 1.0001 0 1 0 3 19 L 21 19 A 1.0001 1.0001 0 1 0 21 17 L 3 17 z"}),s_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},u_=t.createContext&&t.createContext(s_),l_=function(){return l_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l_.apply(this,arguments)},c_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function f_(e){return e&&e.map((function(e,n){return t.createElement(e.tag,l_({key:n},e.attr),f_(e.child))}))}function d_(e){return function(n){return t.createElement(h_,l_({attr:l_({},e.attr)},n),f_(e.child))}}function h_(e){var n=function(n){var r,a=e.attr,i=e.size,o=e.title,s=c_(e,["attr","size","title"]),u=i||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",l_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,s,{className:r,style:l_(l_({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==u_?t.createElement(u_.Consumer,null,(function(e){return n(e)})):n(s_)}function p_(e){return d_({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function v_(e){return d_({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"}}]})(e)}function g_(e){return d_({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 256H96v64h192v-64zm89-151L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm256 304c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-200v96c0 8.84-7.16 16-16 16H80c-8.84 0-16-7.16-16-16v-96c0-8.84 7.16-16 16-16h224c8.84 0 16 7.16 16 16z"}}]})(e)}function m_(e){return d_({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"}}]})(e)}function y_(e){return d_({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"}}]})(e)}function b_(e){return d_({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z"}}]})(e)}function x_(e){return d_({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"}}]})(e)}function k_(e){return d_({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function w_(e){return d_({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"}}]})(e)}var S_=function(e){var t=e.icon,n=e.text;return(0,Fb.jsxs)(bb,{direction:"row",justify:"left",align:"center",p:3,children:[(0,Fb.jsx)(ql,{as:t,color:"blue.500",boxSize:"10"}),(0,Fb.jsx)(Tb,{ml:"3",color:"blue.500",fontWeight:"bold",children:n})]})},__=function(){var e,t=__webpack_require__(134),n=ab(),r=qt(),a=r.isOpen,i=r.onOpen,o=r.onClose;return(0,Fb.jsx)(bb,{backgroundColor:"white",h:"10vh",align:"center",borderWidth:2,direction:"row",p:4,children:(0,Fb.jsxs)(Fb.Fragment,{children:[(0,Fb.jsx)(Kb,{_hover:{bg:"gray.50"},backgroundColor:"transparent",color:"gray.500",icon:(0,Fb.jsx)(o_,{}),onClick:i,children:"Open Drawer"}),(0,Fb.jsx)(hb,(e={p:10,pl:0,maxWidth:"300px"},Gf(e,"maxWidth","40vh"),Gf(e,"children",(0,Fb.jsx)(_S,{src:t})),e)),(0,Fb.jsx)(gS,{placement:"left",onClose:o,isOpen:a,size:"xs",children:(0,Fb.jsxs)(yS,{borderRight:"solid",borderColor:"gray.200",borderRightWidth:5,children:[(0,Fb.jsx)(hb,{p:6,children:(0,Fb.jsx)(_S,{src:t})}),(0,Fb.jsxs)(JS,{allowToggle:!0,children:[(0,Fb.jsxs)(r_,{children:[(0,Fb.jsx)("h2",{children:(0,Fb.jsx)(a_,{children:(0,Fb.jsx)(S_,{text:"Time Estimation",icon:w_})})}),(0,Fb.jsxs)(i_,{children:[(0,Fb.jsx)(hb,{onClick:function(){n("/cte/Demo")},children:(0,Fb.jsx)(Db,{text:"Demo"})}),(0,Fb.jsx)(hb,{onClick:function(){n("/cte/Stat")},children:(0,Fb.jsx)(Db,{text:"Analytics"})})]})]}),(0,Fb.jsxs)(r_,{children:[(0,Fb.jsx)("h2",{children:(0,Fb.jsx)(a_,{children:(0,Fb.jsx)(S_,{text:"Invoice Reader",icon:g_})})}),(0,Fb.jsx)(i_,{children:(0,Fb.jsx)(hb,{onClick:function(){n("/invoiceReader/Demo")},children:(0,Fb.jsx)(Db,{text:"Demo"})})})]}),(0,Fb.jsxs)(r_,{children:[(0,Fb.jsx)("h2",{children:(0,Fb.jsx)(a_,{children:(0,Fb.jsx)(S_,{text:"Image Labelling",icon:x_})})}),(0,Fb.jsxs)(i_,{children:[(0,Fb.jsx)(hb,{onClick:function(){n("/imageLabelling/Training")},children:(0,Fb.jsx)(Db,{text:"Training"})}),(0,Fb.jsx)(hb,{onClick:function(){n("/imageLabelling/Demo")},children:(0,Fb.jsx)(Db,{text:"Demo"})})]})]})]})]})})]})})};function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C_.apply(this,arguments)}function E_(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var A_=Ra("FormControl"),I_=(A_[0],A_[1],Dt({strict:!1,name:"FormControlContext"})),T_=(I_[0],I_[1]);var R_=["isDisabled","isInvalid","isReadOnly","isRequired"],N_=["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"];function M_(e){var t=O_(e),n=t.isDisabled,r=t.isInvalid,a=t.isReadOnly,i=t.isRequired;return C_({},E_(t,R_),{disabled:n,readOnly:a,required:i,"aria-invalid":pt(r),"aria-required":pt(i),"aria-readonly":pt(a)})}function O_(e){var t,n,r,a=T_(),i=e.id,o=e.disabled,s=e.readOnly,u=e.required,l=e.isRequired,c=e.isInvalid,f=e.isReadOnly,d=e.isDisabled,h=e.onFocus,p=e.onBlur,v=E_(e,N_),g=e["aria-describedby"]?[e["aria-describedby"]]:[];return null!=a&&a.hasFeedbackText&&null!=a&&a.isInvalid&&g.push(a.feedbackId),null!=a&&a.hasHelpText&&g.push(a.helpTextId),C_({},v,{"aria-describedby":g.join(" ")||void 0,id:null!=i?i:null==a?void 0:a.id,isDisabled:null!=(t=null!=o?o:d)?t:null==a?void 0:a.isDisabled,isReadOnly:null!=(n=null!=s?s:f)?n:null==a?void 0:a.isReadOnly,isRequired:null!=(r=null!=u?u:l)?r:null==a?void 0:a.isRequired,isInvalid:null!=c?c:null==a?void 0:a.isInvalid,onFocus:Ct(null==a?void 0:a.onFocus,h),onBlur:Ct(null==a?void 0:a.onBlur,p)})}var P_=Ra("FormError");P_[0],P_[1];function F_(){return F_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F_.apply(this,arguments)}var D_=["className","rows"],L_=["h","minH","height","minHeight"],z_=Wa((function(e,n){var r=Ha("Textarea",e),a=Ma(e),i=a.className,o=a.rows,s=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(a,D_),u=M_(s),l=o?$e(r,L_):r;return t.createElement(qa.textarea,F_({ref:n,rows:o},u,{className:vt("chakra-textarea",i),__css:l}))}));function j_(){return j_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j_.apply(this,arguments)}function B_(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var W_=["className"],U_=["isNumeric"],V_=["isNumeric"],H_=Ra("Table"),G_=H_[0],q_=H_[1],X_=Wa((function(e,n){var r=Ga("Table",e),a=Ma(e),i=a.className,o=B_(a,W_);return t.createElement(G_,{value:r},t.createElement(qa.table,j_({role:"table",ref:n,__css:r.table,className:vt("chakra-table",i)},o)))}));var Y_=Wa((function(e,n){var r=q_();return t.createElement(qa.thead,j_({},e,{ref:n,__css:r.thead}))})),K_=Wa((function(e,n){var r=q_();return t.createElement(qa.tbody,j_({},e,{ref:n,__css:r.tbody}))})),$_=Wa((function(e,n){var r=e.isNumeric,a=B_(e,U_),i=q_();return t.createElement(qa.th,j_({},a,{ref:n,__css:i.th,"data-is-numeric":r}))})),Z_=Wa((function(e,n){var r=q_();return t.createElement(qa.tr,j_({role:"row"},e,{ref:n,__css:r.tr}))})),Q_=Wa((function(e,n){var r=e.isNumeric,a=B_(e,V_),i=q_();return t.createElement(qa.td,j_({role:"gridcell"},a,{ref:n,__css:i.td,"data-is-numeric":r}))}));function J_(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}function eC(){return eC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eC.apply(this,arguments)}var tC=Me({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}}),nC=Me({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});Me({"0%":{left:"-40%"},"100%":{left:"100%"}}),Me({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function rC(e){var t=e.value,n=void 0===t?0:t,r=e.min,a=e.max,i=e.valueText,o=e.getValueText,s=e.isIndeterminate,u=function(e,t,n){return 100*(e-t)/(n-t)}(n,r,a);return{bind:{"data-indeterminate":s?"":void 0,"aria-valuemax":a,"aria-valuemin":r,"aria-valuenow":s?void 0:n,"aria-valuetext":function(){if(null!=n)return Ue(o)?o(n,u):i}(),role:"progressbar"},percent:u,value:n}}var aC=["size","isIndeterminate"],iC=["size","max","min","valueText","getValueText","value","capIsRound","children","thickness","color","trackColor","isIndeterminate"],oC=function(e){return t.createElement(qa.circle,eC({cx:50,cy:50,r:42,fill:"transparent"},e))};var sC=function(e){var n=e.size,r=e.isIndeterminate,a=J_(e,aC);return t.createElement(qa.svg,eC({viewBox:"0 0 100 100",__css:{width:n,height:n,animation:r?nC+" 2s linear infinite":void 0}},a))};var uC=function(e){var n,r=e.size,a=void 0===r?"48px":r,i=e.max,o=void 0===i?100:i,s=e.min,u=void 0===s?0:s,l=e.valueText,c=e.getValueText,f=e.value,d=e.capIsRound,h=e.children,p=e.thickness,v=void 0===p?"10px":p,g=e.color,m=void 0===g?"#0078d4":g,y=e.trackColor,b=void 0===y?"#edebe9":y,x=e.isIndeterminate,k=J_(e,iC),w=rC({min:u,max:o,value:f,valueText:l,getValueText:c,isIndeterminate:x}),S=x?void 0:2.64*(null!=(n=w.percent)?n:0),_=Ve(S)?void 0:S+" "+(264-S),C=x?{css:{animation:tC+" 1.5s linear infinite"}}:{strokeDashoffset:66,strokeDasharray:_,transitionProperty:"stroke-dasharray, stroke",transitionDuration:"0.6s",transitionTimingFunction:"ease"},E={display:"inline-block",position:"relative",verticalAlign:"middle",fontSize:a};return t.createElement(qa.div,eC({className:"chakra-progress"},w.bind,k,{__css:E}),t.createElement(sC,{size:a,isIndeterminate:x},t.createElement(oC,{stroke:b,strokeWidth:v,className:"chakra-progress__track"}),t.createElement(oC,eC({stroke:m,strokeWidth:v,className:"chakra-progress__indicator",strokeLinecap:d?"round":void 0,opacity:0!==w.value||x?void 0:0},C))),h)};var lC=qa("div",{baseStyle:{fontSize:"0.24em",top:"50%",left:"50%",width:"100%",textAlign:"center",position:"absolute",transform:"translate(-50%, -50%)"}});var cC=Ra("Progress");cC[0],cC[1];var fC=function(e){var t=e.title,n=e.section;return(0,Fb.jsxs)(Ob,{spacing:4,alignItems:"left",p:2,children:[(0,Fb.jsxs)(Tb,{color:"blue.600",fontWeight:"bold",fontSize:"20",children:[" ",t]}),(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"20",children:" \u2022"}),(0,Fb.jsxs)(Tb,{color:"blue.600",fontWeight:"bold",fontSize:"20",children:["  ",n]})]})};function dC(e){return dC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dC(e)}function hC(){hC=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(bfe){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof f?t:f,i=Object.create(a.prototype),o=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return C()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(bfe){return{type:"throw",arg:bfe}}}e.wrap=u;var c={};function f(){}function d(){}function h(){}var p={};s(p,a,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(_([])));g&&g!==t&&n.call(g,a)&&(p=g);var m=h.prototype=f.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(a,i,o,s){var u=l(e[a],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==dC(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=h,s(m,"constructor",h),s(h,"constructor",d),d.displayName=s(h,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new b(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(m),s(m,o,"Generator"),s(m,a,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function pC(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function vC(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){pC(i,r,a,o,s,"next",e)}function s(e){pC(i,r,a,o,s,"throw",e)}o(void 0)}))}}function gC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yC(e,t,n){return t&&mC(e.prototype,t),n&&mC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bC(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Mf(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}var xC=function(){function e(t,n){gC(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return yC(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),kC=function(){function e(){gC(this,e)}return yC(e,[{key:"refCount",value:function(e){return wC("refCount")}},{key:"incRef",value:function(e){return wC("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return wC("time")}},{key:"read",value:function(e){return wC("read")}},{key:"readSync",value:function(e){return wC("readSync")}},{key:"readToGPU",value:function(e,t){return wC("readToGPU")}},{key:"numDataIds",value:function(){return wC("numDataIds")}},{key:"disposeData",value:function(e,t){return wC("disposeData")}},{key:"write",value:function(e,t,n){return wC("write")}},{key:"move",value:function(e,t,n,r,a){return wC("move")}},{key:"memory",value:function(){return wC("memory")}},{key:"floatPrecision",value:function(){return wC("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return wC("dispose")}}]),e}();function wC(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function SC(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,EC(e,--t,n)}function _C(e,t,n){return Math.max(e,Math.min(t,n))}function CC(e){return e%2===0?e:e+1}function EC(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function AC(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function IC(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function TC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";IC(OC(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function RC(e){IC(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function NC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||HC(e)&&!n)for(var r=0;r<e.length;++r)NC(e[r],t,n);else t.push(e);return t}function MC(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function OC(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function PC(e){return e%1===0}function FC(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function DC(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function LC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function zC(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function jC(e,t){var n=t.length;return IC((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),IC(e.every((function(e){return PC(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function BC(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:jC(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function WC(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function UC(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function VC(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function HC(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function GC(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function qC(e){return"string"===typeof e||e instanceof String}function XC(e){return"number"===typeof e}function YC(e){return Array.isArray(e)?YC(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":XC(e)?"float32":qC(e)?"string":"boolean"===typeof e?"bool":"float32"}function KC(e){return!!(e&&e.constructor&&e.call&&e.apply)}function $C(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function ZC(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function QC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),l=u.reduce((function(e,t){return e*t}))*(r?2:1),c=0;c<s;c++)a[c]=QC(e+c*l,u,n,r);return a}function JC(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return QC(0,e,t,n)}function eE(e,t){for(var n=tE(e,t),r=0;r<n.length;r++)n[r]=1;return n}function tE(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function nE(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return JC(e,new Float32Array(n));if("int32"===t)return JC(e,new Int32Array(n));if("bool"===t)return JC(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function rE(e){e.forEach((function(t){IC(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function aE(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function iE(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function oE(e){return e&&e.then&&"function"===typeof e.then}var sE="tfjsflags",uE=function(){function e(t){gC(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=lE,this.populateURLFlags()}return yC(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(fE().getBool("IS_TEST")||fE().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];fE().getBool("IS_TEST")||fE().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(oE(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(sE in t)t.tfjsflags.split(",").forEach((function(t){var n=Pf(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function lE(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return cE(t,r[0],r[1]),r.join("=")})),t}function cE(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function fE(){return hE}var dE,hE=null;function pE(){if(null==dE){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof __webpack_require__.g)e=__webpack_require__.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}dE=e}return dE}function vE(e,t){var n=function(){var e=pE();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var gE="Abs",mE="Acos",yE="Acosh",bE="Add",xE="AddN",kE="All",wE="Any",SE="ArgMax",_E="ArgMin",CE="Asin",EE="Asinh",AE="Atan",IE="Atanh",TE="Atan2",RE="AvgPool",NE="AvgPoolGrad",ME="AvgPool3D",OE="AvgPool3DGrad",PE="BatchMatMul",FE="BatchToSpaceND",DE="Bincount",LE="BroadcastArgs",zE="Cast",jE="Ceil",BE="ClipByValue",WE="Complex",UE="ComplexAbs",VE="Concat",HE="Conv2D",GE="Conv2DBackpropFilter",qE="Conv2DBackpropInput",XE="Conv3D",YE="Conv3DBackpropFilterV2",KE="Conv3DBackpropInputV2",$E="Cos",ZE="Cosh",QE="Cumprod",JE="Cumsum",eA="CropAndResize",tA="DenseBincount",nA="DepthToSpace",rA="DepthwiseConv2dNative",aA="DepthwiseConv2dNativeBackpropFilter",iA="DepthwiseConv2dNativeBackpropInput",oA="Diag",sA="Dilation2D",uA="Dilation2DBackpropInput",lA="Dilation2DBackpropFilter",cA="RealDiv",fA="Einsum",dA="Elu",hA="EluGrad",pA="Erf",vA="Equal",gA="Exp",mA="ExpandDims",yA="Expm1",bA="FFT",xA="Fill",kA="FlipLeftRight",wA="Floor",SA="FloorDiv",_A="FusedBatchNorm",CA="GatherV2",EA="GatherNd",AA="Greater",IA="GreaterEqual",TA="Identity",RA="IFFT",NA="Imag",MA="IsFinite",OA="IsInf",PA="IsNan",FA="LeakyRelu",DA="Less",LA="LessEqual",zA="LinSpace",jA="Log",BA="Log1p",WA="LogicalAnd",UA="LogicalNot",VA="LogicalOr",HA="LRN",GA="LRNGrad",qA="Max",XA="Maximum",YA="MaxPool",KA="MaxPoolGrad",$A="MaxPool3D",ZA="MaxPool3DGrad",QA="MaxPoolWithArgmax",JA="Mean",eI="Min",tI="Minimum",nI="MirrorPad",rI="Mod",aI="Multinomial",iI="Multiply",oI="Neg",sI="NotEqual",uI="NonMaxSuppressionV3",lI="NonMaxSuppressionV4",cI="NonMaxSuppressionV5",fI="OnesLike",dI="OneHot",hI="Pack",pI="PadV2",vI="Pow",gI="Prelu",mI="Prod",yI="Range",bI="Real",xI="Reciprocal",kI="Relu",wI="Reshape",SI="ResizeNearestNeighbor",_I="ResizeNearestNeighborGrad",CI="ResizeBilinear",EI="ResizeBilinearGrad",AI="Relu6",II="Reverse",TI="Round",RI="Rsqrt",NI="ScatterNd",MI="SearchSorted",OI="Select",PI="Selu",FI="Slice",DI="Sin",LI="Sinh",zI="Sign",jI="Sigmoid",BI="Softplus",WI="Sqrt",UI="Sum",VI="SpaceToBatchND",HI="SplitV",GI="Softmax",qI="SparseFillEmptyRows",XI="SparseReshape",YI="SparseSegmentMean",KI="SparseSegmentSum",$I="SparseToDense",ZI="SquaredDifference",QI="Square",JI="StridedSlice",eT="StringNGrams",tT="StringSplit",nT="StringToHashBucketFast",rT="Sub",aT="Tan",iT="Tanh",oT="Tile",sT="TopK",uT="Transform",lT="Transpose",cT="Unique",fT="Unpack",dT="UnsortedSegmentSum",hT="ZerosLike",pT="Step",vT="FromPixels",gT="RotateWithOffset",mT="_FusedMatMul",yT="FusedConv2D",bT="FusedDepthwiseConv2D";function xT(){var e;fE().getBool("IS_TEST")||fE().getBool("PROD")||(e=console).warn.apply(e,arguments)}var kT=vE("kernelRegistry",(function(){return new Map})),wT=vE("gradRegistry",(function(){return new Map}));function ST(e,t){var n=IT(e,t);return kT.get(n)}function _T(e){return wT.get(e)}function CT(e){for(var t=kT.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=Pf(i,2),s=o[0],u=o[1];Pf(s.split("_"),1)[0]===e&&n.push(u)}return n}function ET(e){var t=e.kernelName,n=e.backendName,r=IT(t,n);kT.has(r)&&xT("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),kT.set(r,e)}function AT(e){var t=e.kernelName;wT.has(t)&&fE().getBool("DEBUG")&&xT("Overriding the gradient for '".concat(t,"'")),wT.set(t,e)}function IT(e,t){return"".concat(t,"_").concat(e)}var TT=__webpack_require__(987),RT=__webpack_require__.n(TT)()||TT;function NT(e){return RT.fromString(e,!0,16)}var MT=NT("c3a5c85c97cb3127"),OT=NT("b492b66fbe98f273"),PT=NT("9ae16a3b2f90404f");function FT(e){return e.xor(e.shru(47))}function DT(e,t,n){var r=e.slice(t,t+n);return RT.fromBytes(Array.from(r),!0,!0)}function LT(e,t){return DT(e,t,8)}function zT(e,t){return DT(e,t,4)}function jT(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function BT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NT("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function WT(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=jT(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(jT(a,44)),[a.add(r),i.add(o)]}(LT(e,t),LT(e,t+8),LT(e,t+16),LT(e,t+24),n,r)}function UT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=PT.add(2*t),r=LT(e,0).add(PT),a=LT(e,t-8),i=jT(a,37).mul(n).add(r),o=jT(r,25).add(a).mul(n);return BT(i,o,n)}if(t>=4){var s=PT.add(2*t),u=zT(e,0);return BT(u.shl(3).add(t),zT(e,t-4),s)}if(t>0){var l=e[0],c=e[t>>1],f=e[t-1],d=l+(c<<8),h=t+(f<<2);return FT(PT.mul(d).xor(MT.mul(h))).mul(PT)}return PT}function VT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=PT.add(2*t),r=LT(e,0).mul(OT),a=LT(e,8),i=LT(e,t-8).mul(n),o=LT(e,t-16).mul(PT);return BT(jT(r.add(a),43).add(jT(i,30)).add(o),r.add(jT(a.add(PT),18)).add(i),n)}function HT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=PT.add(2*t),r=LT(e,0).mul(PT),a=LT(e,8),i=LT(e,t-8).mul(n),o=LT(e,t-16).mul(PT),s=jT(r.add(a),43).add(jT(i,30)).add(o),u=BT(s,r.add(jT(a.add(PT),18)).add(i),n),l=LT(e,16).mul(n),c=LT(e,24),f=s.add(LT(e,t-32)).mul(n),d=u.add(LT(e,t-24)).mul(n);return BT(jT(l.add(c),43).add(jT(f,30)).add(d),l.add(jT(c.add(r),18)).add(f),n)}function GT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=RT.fromNumber(81,!0);if(t<=32)return t<=16?UT(e,t):VT(e,t);if(t<=64)return HT(e,t);var r=n,a=n.mul(OT).add(113),i=FT(a.mul(PT).add(113)).mul(PT),o=[RT.UZERO,RT.UZERO],s=[RT.UZERO,RT.UZERO];r=r.mul(PT).add(LT(e,0));var u=0,l=64*(t-1>>6),c=l+(t-1&63)-63;do{r=jT(r.add(a).add(o[0]).add(LT(e,u+8)),37).mul(OT),a=jT(a.add(o[1]).add(LT(e,u+48)),42).mul(OT),r=r.xor(s[1]),a=a.add(o[0]).add(LT(e,u+40)),i=jT(i.add(s[0]),33).mul(OT),o=WT(e,u,o[1].mul(OT),r.add(s[0])),s=WT(e,u+32,i.add(s[1]),a.add(LT(e,u+16)));var f=[r,i];i=f[0],r=f[1],u+=64}while(u!==l);var d=OT.add(i.and(255).shl(1));u=c,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=jT(r.add(a).add(o[0]).add(LT(e,u+8)),37).mul(d),a=jT(a.add(o[1]).add(LT(e,u+48)),42).mul(d),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(LT(e,u+40))),i=jT(i.add(s[0]),33).mul(d),o=WT(e,u,o[1].mul(d),r.add(s[0])),s=WT(e,u+32,i.add(s[1]),a.add(LT(e,u+16)));var h=[r,i];return i=h[0],r=h[1],BT(BT(o[0],s[0],d).add(FT(a).mul(MT)).add(i),BT(o[1],s[1],d).add(r),d)}function qT(e,t){return"string"===t?KT(e):XT([e],t)}function XT(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=NC(e)),fE().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function YT(){return fE().platform.now()}function KT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",fE().platform.encode(e,t)}function $T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",fE().platform.decode(e,t)}var ZT=function(){function e(t,n){gC(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new QT)}return yC(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=YT();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=bC(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(bfe){u.e(bfe)}finally{u.f()}a=Promise.resolve({kernelMs:YT()-o})}if(fE().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},c=0;c<r.length;c++)l(c);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var QT=function(){function e(){gC(this,e)}return yC(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?DC("".concat(r,"ms"),9):r.error,s=DC(e,25),u=t.rank,l=t.size,c=DC(t.shape.toString(),14),f="";for(var d in a){var h=a[d];if(null!=h){var p=h.shape||t.shape,v=p.length;f+="".concat(d,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(c,"\t%c").concat(l,"\t%c").concat(f,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function JT(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var l in u){for(var c=u[l],f=!1,d=0;d<t.length;d++)if(r[c.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),f=!0,a[s.id]=!0;break}if(f)break}}var h={};h[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var g=e[v],m=g.inputs,y=0;y<g.outputs.length;y++)if(h[g.outputs[y].id]){for(var b in m)h[m[b].id]=!0,p[g.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&p[w.id]){var S={};for(var _ in w.inputs){var C=w.inputs[_];r[C.id]&&(S[_]=C)}var E=Object.assign({},w);E.inputs=S,E.outputs=w.outputs,x.push(E)}}return x}function eR(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!OC(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var l in i.inputs)u(l)},i=t.length-1;i>=0;i--)a(i)}function tR(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&px(e,t)}function nR(e){return nR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nR(e)}function rR(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function aR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iR(e,t){if(t&&("object"===dC(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return aR(e)}function oR(e){var t=rR();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}function sR(e,t,n,r){var a=ZC(t),i=function(e,t,n,r){var a=MC(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?fR(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,f=0;f<i;f++)o[f]=Math.max(o[f],uR(u[c+f],0,n).length);return o}(e,t,n,a),o=t.length,s=cR(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function uR(e,t,n){return DC(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):qC(e)?"'".concat(e,"'"):"bool"===n?lR(e):parseFloat(e.toFixed(7)).toString(),t)}function lR(e){return 0===e?"false":"true"}function cR(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var l=fR(e);return[uR(l[0],0,n)]}return"bool"===n?[lR(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var c=3*o,f=Array.from(e.slice(0,c)),d=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(f=fR(f),d=fR(d)),["["+f.map((function(e,t){return uR(e,a[t],n)})).join(", ")+", ..., "+d.map((function(e,t){return uR(e,a[s-3+t],n)})).join(", ")+"]"]}var h="complex64"===n?fR(e):Array.from(e);return["["+h.map((function(e,t){return uR(e,a[t],n)})).join(", ")+"]"]}var p=t.slice(1),v=r.slice(1),g=r[0]*o,m=[];if(s>20){for(var y=0;y<3;y++){var b=y*g,x=b+g;m.push.apply(m,pd(cR(e.slice(b,x),p,n,v,a,!1)))}m.push("...");for(var k=s-3;k<s;k++){var w=k*g,S=w+g;m.push.apply(m,pd(cR(e.slice(w,S),p,n,v,a,k===s-1)))}}else for(var _=0;_<s;_++){var C=_*g,E=C+g;m.push.apply(m,pd(cR(e.slice(C,E),p,n,v,a,_===s-1)))}var A=2===u?",":"";m[0]="["+m[0]+A;for(var I=1;I<m.length-1;I++)m[I]=" "+m[I]+A;for(var T=",\n",R=2;R<u;R++)T+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":T),m}function fR(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var dR=function(){function e(t,n,r){var a=this;if(gC(this,e),this.dtype=n,this.shape=t.slice(),this.size=MC(t),null!=r){var i=r.length;IC(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||UC(n,this.size),this.strides=ZC(t)}return yC(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),IC(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return hR().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),hR=null,pR=null;var vR=function(){function e(t,n,r,a){gC(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=MC(t),this.strides=ZC(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return yC(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",pR.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return pR.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",JC(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return JC(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=vC(hC().mark((function e(){var t,n;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=hR().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return $T(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),hR().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=hR().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return $T(e)}))}catch(yfe){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,hR().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(hR().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return pR.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),pR.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return sR(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),pR.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),hR().makeVariable(this,e,t,n)}}]),e}();function gR(){return vE("Tensor",(function(){return vR}))}Object.defineProperty(vR,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),gR();var mR,yR,bR,xR,kR,wR=function(e){tR(n,e);var t=oR(n);function n(e,r,a,i){var o;return gC(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return yC(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!OC(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));hR().disposeTensor(this),this.dataId=e.dataId,hR().incRef(this,null)}},{key:"dispose",value:function(){hR().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(vR);Object.defineProperty(wR,Symbol.hasInstance,{value:function(e){return e instanceof vR&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(mR||(mR={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(yR||(yR={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(bR||(bR={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(xR||(xR={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(kR||(kR={}));var SR={float32:xR,int32:yR,bool:bR,complex64:kR};function _R(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return SR[e][t]}function CR(e){return _R(e,"int32")}function ER(e,t){if(e.dtype===t.dtype)return[e,t];var n=_R(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function AR(e,t){return t.some((function(t){return t.id===e.id}))}function IR(e){var t=[];return TR(e,t,new Set),t}function TR(e,t,n){if(null!=e)if(e instanceof vR)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),TR(o,t,n))}}}function RR(e){return null!=e.kernelName}var NR=function(){function e(){gC(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return yC(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),MR=function(){function e(t){gC(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new NR}return yC(e,[{key:"ready",value:function(){var e=vC(hC().mark((function e(){var t,n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(xT("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new ZT(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;CT(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;CT(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof kC||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,xT("Initialization of backend ".concat(e," failed")),xT(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(bfe){return xT("Initialization of backend ".concat(e," failed")),xT(bfe.stack||bfe.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=DR.runKernel(TA,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return DR.runKernel(zE,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=ST(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var l=RR(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(RR(e)){var c=e.kernelName,f=e.inputs,d=e.attrs;null==this.backendName&&this.backend;var h=ST(c,this.backendName);IC(null!=h,(function(){return"Cannot find registered kernel '".concat(c,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=h.kernelFunc({inputs:f,attrs:d,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(c,f,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,v=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return p(a.backend,v)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t),t}}var g,m=e.inputs,y=e.attrs,b=RR(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(g=a.profiler.profileKernel(l,m,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(g),t=g.outputs):t=n()})),o&&this.addTapeNode(l,m,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(m).map((function(e){return null!=m[e]?m[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=_T(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(IC(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&qC(e[0])&&(a=e.map((function(e){return KT(e)})));var i=r.write(a,t,n),o=new vR(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new vR(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new wR(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*GC(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof wR||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*GC(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=vC(hC().mark((function e(t){var n,r,a,i,o;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,pd(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=bC(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=_T(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=tE(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=IR(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(IC(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));IC(i instanceof vR,(function(){return"The result y returned by f() must be a tensor."}));var o=JT(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?OR(i.shape):n,eR(e,o,(function(e){return r.tidy(e)}),LR);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=bC(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(bfe){n.e(bfe)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return IC(KC(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;IC(r.every((function(e){return e instanceof vR})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return IC((i=e.apply(void 0,[].concat(r,[n]))).value instanceof vR,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),IC(KC(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];IC(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),IC(a.every((function(e){return e instanceof vR})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=YT(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=YT()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new NR,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function OR(e){var t=eE(MC(e),"float32");return DR.makeTensor(t,e,"float32")}function PR(){var e=pE();if(null==e._tfengine){var t=new uE(e);e._tfengine=new MR(t)}return function(e){hE=e}(e._tfengine.ENV),hR=function(){return e._tfengine},e._tfengine}MR.nextTensorId=0,MR.nextVariableId=0;var FR,DR=PR();function LR(e,t){var n={a:e,b:t};return DR.runKernel(bE,n)}function zR(e){if(void 0!==FR)return FR;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function jR(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var BR=fE();function WR(e,t){var n=e;if(HC(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||HC(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&fE().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&UR(e,r,[]),r}function UR(e,t,n){if(n=n||[],Array.isArray(e)||HC(e)){IC(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),IC(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)UR(e[a],r,n.concat(a))}else IC(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function VR(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function HR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof vR)return VR(r,e.dtype,t,n),e;var a=YC(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),VR(r,a,t,n),null==e||!HC(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=WR(e,a);HC(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?XT(e,a):NC(e,[],s);return DR.makeTensor(u,o,a)}function GR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return HR(e,"".concat(t,"[").concat(a,"]"),n,r)}))}BR.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),BR.registerFlag("IS_BROWSER",(function(){return jR()})),BR.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),BR.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),BR.registerFlag("PROD",(function(){return!1})),BR.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return BR.getBool("DEBUG")})),BR.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),BR.registerFlag("IS_TEST",(function(){return!1})),BR.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),BR.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),BR.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));function qR(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){DR.startScope(n);try{var e=r.apply(void 0,arguments);return oE(e)&&console.error("Cannot return a Promise inside of tidy."),DR.endScope(e),e}catch(t){throw DR.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var XR=qR({complex_:function(e,t){var n=HR(e,"real","complex"),r=HR(t,"imag","complex");TC(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return DR.runKernel(WE,a)}});function YR(e,t,n,r){if(null==r&&(r=YC(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!HC(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){rE(t);var a=MC(t),i=MC(n);IC(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==MC(t.slice(o));IC(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return HC(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?XT(e,r):NC(e,[],!0),DR.makeTensor(e,t,r)}function KR(e,t,n){return YR(e,t,WR(e,n),n)}var $R={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function ZR(e,t){return QR.apply(this,arguments)}function QR(){return QR=vC(hC().mark((function e(t,n){var r,a,i,o,s,u;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var l=new Promise(function(){var e=vC(hC().mark((function e(t){var n,r,a,i,o,u,l;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],l=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(l,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(l)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:eN(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),QR.apply(this,arguments)}function JR(e,t){var n,r,a={},i=0,o=bC(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,l=s.dtype,c=s.shape,f=MC(c),d=void 0;if("quantization"in s){var h=s.quantization;if("uint8"===h.dtype||"uint16"===h.dtype){if(!("min"in h)||!("scale"in h))throw new Error("Weight ".concat(s.name," with quantization ").concat(h.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==h.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(h.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==l)throw new Error("Weight ".concat(s.name," is quantized with ").concat(h.dtype," ")+"which only supports weights of type float32 not ".concat(l,"."))}var p=$R[h.dtype],v=e.slice(i,i+f*p),g="uint8"===h.dtype?new Uint8Array(v):new Uint16Array(v);if("float32"===l)if("uint8"===h.dtype||"uint16"===h.dtype){d=new Float32Array(g.length);for(var m=0;m<g.length;m++){var y=g[m];d[m]=y*h.scale+h.min}}else{if("float16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type float32.");void 0===n&&(n=fN()),d=n(g)}else{if("int32"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));if("uint8"!==h.dtype&&"uint16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type int32.");d=new Int32Array(g.length);for(var b=0;b<g.length;b++){var x=g[b];d[b]=Math.round(x*h.scale+h.min)}}i+=f*p}else if("string"===l){var k=MC(s.shape);d=[];for(var w=0;w<k;w++){var S=new Uint32Array(e.slice(i,i+4))[0];i+=4;var _=new Uint8Array(e.slice(i,i+S));d.push(_),i+=S}}else{var C=$R[l],E=e.slice(i,i+f*C);if("float32"===l)d=new Float32Array(E);else if("int32"===l)d=new Int32Array(E);else if("bool"===l)d=new Uint8Array(E);else{if("complex64"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));d=new Float32Array(E);for(var A=new Float32Array(d.length/2),I=new Float32Array(d.length/2),T=0;T<A.length;T++)A[T]=d[2*T],I[T]=d[2*T+1];var R=KR(A,c,"float32"),N=KR(I,c,"float32");a[u]=XR(R,N),R.dispose(),N.dispose()}i+=f*C}"complex64"!==l&&(a[u]=KR(d,c,l))}}catch(bfe){o.e(bfe)}finally{o.f()}return a}function eN(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var tN="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function nN(e){return tN?Buffer.byteLength(e):new Blob([e]).size}function rN(e){if(tN)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function aN(e){if(tN){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function iN(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function oN(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function sN(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function uN(e,t){return lN.apply(this,arguments)}function lN(){return lN=vC(hC().mark((function e(t,n){var r,a,i,o,s;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=Pf(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),lN.apply(this,arguments)}function cN(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:nN(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:nN(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function fN(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var dN=function(){function e(){gC(this,e),this.saveRouters=[],this.loadRouters=[]}return yC(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),hN=function(e){return dN.registerSaveRouter(e)},pN=function(e){return dN.registerLoadRouter(e)},vN=function(e){return dN.getSaveHandlers(e)},gN=function(e,t){return dN.getLoadHandlers(e,t)},mN="tensorflowjs",yN="models_store",bN="model_info_store";function xN(){if(!fE().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function kN(e){var t=e.result;t.createObjectStore(yN,{keyPath:"modelPath"}),t.createObjectStore(bN,{keyPath:"modelPath"})}var wN=function(){function e(t){if(gC(this,e),this.indexedDB=xN(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return yC(e,[{key:"save",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(mN,1);a.onupgradeneeded=function(){return kN(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(yN,"readonly"),s=o.objectStore(yN).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=cN(t),c=i.transaction(bN,"readwrite"),f=c.objectStore(bN),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:l});d.onsuccess=function(){var a=(u=i.transaction(yN,"readwrite")).objectStore(yN).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(f=c.objectStore(bN)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},d.onerror=function(e){return i.close(),r(d.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();wN.URL_SCHEME="indexeddb://";var SN=function(e){return fE().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(wN.URL_SCHEME)?(t=e.slice(wN.URL_SCHEME.length),new wN(t)):null;var t};function _N(e){return e.startsWith(wN.URL_SCHEME)?e.slice(wN.URL_SCHEME.length):e}dN.registerSaveRouter(SN),dN.registerLoadRouter(SN);var CN=function(){function e(){gC(this,e),this.indexedDB=xN()}return yC(e,[{key:"listModels",value:function(){var e=vC(hC().mark((function e(){var t=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(mN,1);r.onupgradeneeded=function(){return kN(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(bN,"readonly"),i=a.objectStore(bN).getAll();i.onsuccess=function(){var t,n={},r=bC(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(bfe){r.e(bfe)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=vC(hC().mark((function e(t){var n=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_N(t),e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(mN,1);a.onupgradeneeded=function(){return kN(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(bN,"readwrite"),s=o.objectStore(bN),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(yN,"readwrite")).objectStore(yN).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),EN="/",AN="tensorflowjs_models",IN="info",TN="model_topology",RN="weight_specs",NN="weight_data",MN="model_metadata";function ON(e){return{info:[AN,e,IN].join(EN),topology:[AN,e,TN].join(EN),weightSpecs:[AN,e,RN].join(EN),weightData:[AN,e,NN].join(EN),modelMetadata:[AN,e,MN].join(EN)}}function PN(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function FN(e){var t=e.split(EN);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(EN)}function DN(e){return e.startsWith(LN.URL_SCHEME)?e.slice(LN.URL_SCHEME.length):e}var LN=function(){function e(t){if(gC(this,e),!fE().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=ON(this.modelPath)}return yC(e,[{key:"save",value:function(){var e=vC(hC().mark((function e(t){var n,r,a,i;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=cN(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,rN(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),PN(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=vC(hC().mark((function e(){var t,n,r,a,i,o,s;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=aN(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();LN.URL_SCHEME="localstorage://";var zN=function(e){return fE().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(LN.URL_SCHEME)?(t=e.slice(LN.URL_SCHEME.length),new LN(t)):null;var t};dN.registerSaveRouter(zN),dN.registerLoadRouter(zN);var jN=function(){function e(){gC(this,e),IC(fE().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),IC("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return yC(e,[{key:"listModels",value:function(){var e=vC(hC().mark((function e(){var t,n,r,a,i,o;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=AN+EN,r=EN+IN,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=FN(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=DN(t),n=ON(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),PN(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),BN="://",WN=function(){function e(){gC(this,e),this.managers={}}return yC(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){IC(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(BN)&&(t=t.slice(0,t.indexOf(BN))),IC(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();IC(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function UN(e){if(-1===e.indexOf(BN))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(WN.getSchemes().join(",")));return{scheme:e.split(BN)[0],path:e.split(BN)[1]}}function VN(e,t){return HN.apply(this,arguments)}function HN(){return HN=vC(hC().mark((function e(t,n){var r,a,i,o,s,u,l,c,f,d,h=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]&&h[2],IC(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),IC((a=dN.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),IC(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],IC((o=dN.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),IC(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=UN(t).scheme,l=UN(t).path,c=u===UN(t).scheme,e.next=15,i.load();case 15:if(f=e.sent,!r||!c){e.next=19;break}return e.next=19,WN.getManager(u).removeModel(l);case 19:return e.next=21,s.save(f);case 21:if(d=e.sent,!r||c){e.next=25;break}return e.next=25,WN.getManager(u).removeModel(l);case 25:return e.abrupt("return",d.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),HN.apply(this,arguments)}function GN(){return qN.apply(this,arguments)}function qN(){return(qN=vC(hC().mark((function e(){var t,n,r,a,i,o,s;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=WN.getSchemes(),n={},r=bC(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,WN.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+BN+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function XN(e){return YN.apply(this,arguments)}function YN(){return YN=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=UN(t),r=WN.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)}))),YN.apply(this,arguments)}function KN(e,t){return $N.apply(this,arguments)}function $N(){return($N=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",VN(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZN(e,t){return QN.apply(this,arguments)}function QN(){return(QN=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",VN(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var JN=function(){function e(){gC(this,e)}return yC(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(fE().get("IS_BROWSER")){fE().setPlatform("browser",new JN);try{WN.registerManager(LN.URL_SCHEME,new jN)}catch(bfe){}try{WN.registerManager(wN.URL_SCHEME,new CN)}catch(bfe){}}var eM,tM=function(){return __webpack_require__(410)};var nM=function(){function e(){gC(this,e),this.util=__webpack_require__(628),this.textEncoder=new this.util.TextEncoder}return yC(e,[{key:"fetch",value:function(e,t){return null!=fE().global.fetch?fE().global.fetch(e,t):(null==eM&&(eM=tM()),eM(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function rM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",rE(e),new dR(e,t,n)}fE().get("IS_NODE")&&!fE().get("IS_BROWSER")&&fE().setPlatform("node",new nM);var aM=qR({cast_:function(e,t){var n=HR(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return DR.runKernel(zE,r,a)}});var iM=qR({clone_:function(e){var t={x:HR(e,"x","clone","string_or_numeric")};return DR.runKernel(TA,t)}});PR();var oM={buffer:rM,cast:aM,clone:iM,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};pR=oM;function sM(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var uM=function(){function e(t){if(gC(this,e),!fE().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return yC(e,[{key:"save",value:function(){var e=vC(hC().mark((function e(t){var n,r,a,i,o,s;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=sN(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,sM((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,sM((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:cN(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();uM.URL_SCHEME="downloads://";var lM=function(){function e(t){if(gC(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return yC(e,[{key:"load",value:function(){var e=vC(hC().mark((function e(){var t=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=uN(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=bC(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,pd(o.weights)),a.push.apply(a,pd(o.paths))}}catch(bfe){i.e(bfe)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,iN(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return oN(e.name)})),i={},o=bC(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=oN(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(bfe){o.e(bfe)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function cM(e){return new lM(e)}function fM(e,t,n,r){!function(e){IC(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){IC(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),IC(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),IC(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function dM(e,t){return hM.apply(this,arguments)}function hM(){return(hM=vC(hC().mark((function e(t,n){var r,a,i,o,s,u,l,c,f;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?fE().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,fM(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),l=.5,c=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,fM(u,n.onProgress,l,c);case 26:e.t1=e.sent;case 27:return f=e.t1,e.abrupt("return",f);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pM(e){return vM.apply(this,arguments)}function vM(){return vM=vC(hC().mark((function e(t){var n,r,a,i,o=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=gM((function(e){return dM(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),vM.apply(this,arguments)}function gM(e){return function(){var t=vC(hC().mark((function t(n){var r,a,i,o,s,u,l,c,f,d,h,p,v=arguments;return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,l=$R[r]*MC(e.shape),c=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),s[n]=!0)})):c(),u.push(e.name),n+=l}))})),s.every((function(e){return e}))){t.next=10;break}throw l=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(l.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return c=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),f=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)}))})),t.next=15,e(f);case 15:return d=t.sent,h={},p=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=d[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(d[p+l]);s.set(c,u),u+=c.byteLength}o[e].forEach((function(e){var t=JR(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]})),p+=t})),t.abrupt("return",h);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}dN.registerSaveRouter((function(e){return fE().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(uM.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new uM(e)}(e.slice(uM.URL_SCHEME.length)):null}));var mM=function(){function e(t,n){if(gC(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(IC("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=fE().platform.fetch,IC(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&IC(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return yC(e,[{key:"save",value:function(){var e=vC(hC().mark((function e(t){var n,r,a,i;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=sN(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:cN(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=vC(hC().mark((function e(){var t,n,r,a,i,o=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",uN(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=vC(hC().mark((function e(t){var n,r,a,i,o,s,u,l,c,f,d,h,p,v,g,m,y,b,x;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=yM(n),a=Pf(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],l=bC(t);try{for(l.s();!(c=l.n()).done;)f=c.value,u.push.apply(u,pd(f.weights))}catch(bfe){l.e(bfe)}finally{l.f()}d=[],h=[],p=bC(t);try{for(p.s();!(v=p.n()).done;){g=v.value,m=bC(g.paths);try{for(m.s();!(y=m.n()).done;)b=y.value,null!=this.weightUrlConverter?h.push(this.weightUrlConverter(b)):d.push(s+b+o)}catch(bfe){m.e(bfe)}finally{m.f()}}}catch(bfe){p.e(bfe)}finally{p.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=d.push,e.t1=d,e.t2=pd,e.next=16,Promise.all(h);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,dM(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[u,iN(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function yM(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function bM(e){return null!=e.match(mM.URL_SCHEME_REGEX)}mM.URL_SCHEME_REGEX=/^https?:\/\//;var xM=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return bM(e)})):bM(e))?kM(e,t):null};function kM(e,t){return new mM(e,t)}function wM(e,t){return kM(e,t)}dN.registerSaveRouter(xM),dN.registerLoadRouter(xM);var SM,_M=function(){function e(t){gC(this,e),this.modelArtifacts=t}return yC(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),CM=function(){function e(t){gC(this,e),this.saveHandler=t}return yC(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),EM=yC((function e(t){gC(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function AM(e,t,n,r){var a=arguments;return new EM(IM.apply(void 0,pd(a)))}function IM(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new _M(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _M({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _M({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function TM(e){return new CM(e)}function RM(e){return new CM(e)}function NM(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function MM(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function OM(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function PM(e,t,n){if(RC(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=WR(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return YR(e,t,r,n)}function FM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){var u=2;if(a&&e.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var l=ST(vT,DR.backendName);if(null!=l){var c={pixels:e},f={numChannels:t};return DR.runKernel(vT,c,f)}var d,h,p=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],v=Pf(p,2),g=v[0],m=v[1];if(o)d=e.getContext("2d").getImageData(0,0,g,m).data;else if(r||n)d=e.data;else if(i||a||s){if(null==SM)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");SM=new OffscreenCanvas(1,1).getContext("2d")}else SM=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});SM.canvas.width=g,SM.canvas.height=m,SM.drawImage(e,0,0,g,m),d=SM.getImageData(0,0,g,m).data}if(4===t)h=new Int32Array(d);else{var y=g*m;h=new Int32Array(y*t);for(var b=0;b<y;b++)for(var x=0;x<t;++x)h[b*t+x]=d[4*b+x]}var k=[m,g,t];return PM(h,k,"int32")}var DM=qR({fromPixels_:FM});function LM(e,t,n){var r=e.shape.length;IC(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),IC(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){IC(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function zM(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function jM(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function BM(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function WM(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat(pd(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){IC(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(pd(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(IC(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function UM(e,t,n,r,a,i,o,s,u){var l;if(null==r?(l=new Array(t.length)).fill(1):l=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var c=!1,f={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},d=0;d<f.dims;d++)c&&0!==(1<<d&s)&&f.numAddAxisAfterEllipsis++,1<<d&o&&(c=!0);c||(f.ellipsisMask|=1<<f.dims,f.dims++);var h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(f,h);for(var p=!0,v=!0,g=!0,m=[],y=[],b=0;b<e.length;++b){if(0===h.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(h.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var w=[h.beginMask&1<<b,h.endMask&1<<b],S=[h.strides[b]>0?0:-1,h.strides[b]>0?k:k-1];if(x&&h.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===h.strides[b];var _=!!(h.beginMask&1<<b&&h.endMask&1<<b);if(h.beginValid&&h.endValid){if(x){var C=h.begin[b]<0?k+h.begin[b]:h.begin[b];if(h.begin[b]=C,h.end[b]=h.begin[b]+1,C<0||C>=k)throw Error("slice index ".concat(h.begin[b]," of dimension ").concat(b," out of bounds."))}else h.begin[b]=VM(h.begin[b],0,h.strides[b],k,w,S),h.end[b]=VM(h.end[b],1,h.strides[b],k,w,S);var E=1===h.strides[b]&&0===h.begin[b]&&h.end[b]===k;p=p&&E,v=v&&(0===b&&1===h.strides[b]||E)}else p=p&&1===h.strides[b]&&_,v=v&&(0===b&&1===h.strides[b]||_);var A=void 0,I=!1;if(h.beginValid&&h.endValid?(A=h.end[b]-h.begin[b],I=!0):x?(A=1,I=!0):_&&k>=0&&(A=h.strides[b]<0?-k:k,I=!0),I){var T=void 0;T=0===A||A<0!==h.strides[b]<0?0:Math.trunc(A/h.strides[b])+(A%h.strides[b]!==0?1:0),m.push(T)}else m.push(-1)}else m.push(x?1:-1)}for(var R=0;R<h.finalShapeGatherIndices.length;++R){var N=h.finalShapeGatherIndices[R];N>=0?y.push(m[N]):-2===N&&y.push(1)}var M=y.filter((function(e,t){return-2!==h.finalShapeGatherIndices[t]}));return{finalShapeSparse:M,finalShape:y,isIdentity:p,sliceDim0:v,isSimpleSlice:g,begin:h.begin,end:h.end,strides:h.strides}}function VM(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var HM=function(){function e(){gC(this,e)}return yC(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),GM=function(){function e(){gC(this,e),this.classNameMap={}}return yC(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function qM(e){IC(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),IC("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),IC(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),GM.register(e)}function XM(){return DR}function YM(){return DR.memory()}function KM(e,t){return DR.tidy(e,t)}function $M(e){IR(e).forEach((function(e){return e.dispose()}))}function ZM(e){return DR.keep(e)}function QM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return DR.registerBackend(e,t,n)}function JM(e){return DR.customGrad(e)}function eO(e,t){if((HC(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&HC(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return YR(e,[],[],t)}var tO=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return $M(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){IC(KC(e),(function(){return"The f passed in variableGrads(f) must be a function"})),IC(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof wR})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],DR.registeredVariables)t.push(DR.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),IC(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=DR.gradients(e,t,null,!0),s=o.value,u=o.grads;IC(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),IC(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&$M(this.iterations_)}},{key:"saveIterations",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:eO(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(HM);Object.defineProperty(tO,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var nO=qR({abs_:function(e){var t=HR(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return DR.runKernel(UE,n)}var r={x:t};return DR.runKernel(gE,r)}});var rO=qR({add_:function(e,t){var n=HR(e,"a","add"),r=HR(t,"b","add"),a=Pf(ER(n,r),2),i={a:n=a[0],b:r=a[1]};return DR.runKernel(bE,i)}});var aO=qR({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=HR(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return DR.runKernel(kE,a,i)}});var iO=qR({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=HR(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return DR.runKernel(wE,a,i)}});var oO=qR({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=HR(e,"x","argMax"),r={x:n},a={axis:t};return DR.runKernel(SE,r,a)}});function sO(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat(pd(t),[o]),u=kO(a);return cO(e,s,n,i,r,null,null,u)}function uO(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=hO(t),l=Pf(u,2),c=l[0],f=l[1];if("channelsLast"===s)o=[c,f,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[c,f,e[1],e[1]]}return cO(e,o,n,r,a,i,!1,s)}function lO(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",l=pO(t),c=Pf(l,3),f=c[0],d=c[1],h=c[2];if("NDHWC"===u)s="channelsLast",o=[f,d,h,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[f,d,h,e[1],e[1]]}return fO(e,o,n,r,a,!1,s,i)}function cO(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,l=-1,c=-1,f=-1;if("channelsLast"===s){var d=Pf(e,4);u=d[0],l=d[1],c=d[2],f=d[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var h=Pf(e,4);u=h[0],f=h[1],l=h[2],c=h[3]}var p,v=Pf(t,4),g=v[0],m=v[1],y=v[3],b=hO(n),x=Pf(b,2),k=x[0],w=x[1],S=hO(r),_=Pf(S,2),C=_[0],E=_[1],A=vO(g,C),I=vO(m,E),T=gO(a,l,c,k,w,A,I,i,s),R=T.padInfo,N=T.outHeight,M=T.outWidth,O=o?y*f:y;return"channelsFirst"===s?p=[u,O,N,M]:"channelsLast"===s&&(p=[u,N,M,O]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:c,inChannels:f,outHeight:N,outWidth:M,outChannels:O,padInfo:R,strideHeight:k,strideWidth:w,filterHeight:g,filterWidth:m,effectiveFilterHeight:A,effectiveFilterWidth:I,dilationHeight:C,dilationWidth:E,inShape:e,outShape:p,filterShape:t}}function fO(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,l=-1,c=-1,f=-1,d=-1;if("channelsLast"===o){var h=Pf(e,5);u=h[0],l=h[1],c=h[2],f=h[3],d=h[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=Pf(e,5);u=p[0],d=p[1],l=p[2],c=p[3],f=p[4]}var v,g=Pf(t,5),m=g[0],y=g[1],b=g[2],x=g[4],k=pO(n),w=Pf(k,3),S=w[0],_=w[1],C=w[2],E=pO(r),A=Pf(E,3),I=A[0],T=A[1],R=A[2],N=vO(m,I),M=vO(y,T),O=vO(b,R),P=mO(a,l,c,f,S,_,C,N,M,O,s),F=P.padInfo,D=P.outDepth,L=P.outHeight,z=P.outWidth,j=i?x*d:x;return"channelsFirst"===o?v=[u,j,D,L,z]:"channelsLast"===o&&(v=[u,D,L,z,j]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:c,inWidth:f,inChannels:d,outDepth:D,outHeight:L,outWidth:z,outChannels:j,padInfo:F,strideDepth:S,strideHeight:_,strideWidth:C,filterDepth:m,filterHeight:y,filterWidth:b,effectiveFilterDepth:N,effectiveFilterHeight:M,effectiveFilterWidth:O,dilationDepth:I,dilationHeight:T,dilationWidth:R,inShape:e,outShape:v,filterShape:t}}function dO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=vO(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function hO(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function pO(e){return"number"===typeof e?[e,e,e]:e}function vO(e,t){return t<=1?e:e+(e-1)*(t-1)}function gO(e,t,n,r,a,i,o,s,u){var l,c,f;if("number"===typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,a){null==r&&(r=dO(e,t,n));var i=e[0],o=e[1];return[yO((i-t+2*r)/n+1,a),yO((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);c=d[0],f=d[1]}else if("same"===e){c=Math.ceil(t/r),f=Math.ceil(n/a);var h=Math.max(0,(c-1)*r+i-t),p=Math.max(0,(f-1)*a+o-n),v=Math.floor(h/2),g=h-v,m=Math.floor(p/2);l={top:v,bottom:g,left:m,right:p-m,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),f=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];l={top:y,bottom:b,left:x,right:k,type:0===y&&0===b&&0===x&&0===k?"VALID":"EXPLICIT"},c=yO((t-i+y+b)/r+1,s),f=yO((n-o+x+k)/a+1,s)}return{padInfo:l,outHeight:c,outWidth:f}}function mO(e,t,n,r,a,i,o,s,u,l,c){var f,d,h,p;if("number"===typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=dO(e,t,r));var o=e[0],s=e[1],u=e[2];return[yO((o-t+2*a)/r+1,i),yO((s-t+2*a)/r+1,i),yO((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,c);d=v[0],h=v[1],p=v[2]}else if("same"===e){var g=((d=Math.ceil(t/a))-1)*a+s-t,m=((h=Math.ceil(n/i))-1)*i+u-n,y=((p=Math.ceil(r/o))-1)*o+l-r,b=Math.floor(g/2),x=g-b,k=Math.floor(m/2),w=m-k,S=Math.floor(y/2);f={top:k,bottom:w,left:S,right:y-S,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/a),h=Math.ceil((n-u+1)/i),p=Math.ceil((r-l+1)/o)}return{padInfo:f,outDepth:d,outHeight:h,outWidth:p}}function yO(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function bO(e){var t=Pf(hO(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function xO(e,t){return bO(e)||bO(t)}function kO(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function wO(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)IC(PC(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){IC(PC(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var SO=qR({reshape_:function(e,t){var n={x:HR(e,"x","reshape","string_or_numeric")},r={shape:t};return DR.runKernel(wI,n,r)}});var _O=qR({avgPool_:function(e,t,n,r,a){var i=HR(e,"x","avgPool","float32");IC(xO(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=SO(i,[1,i.shape[0],i.shape[1],i.shape[2]])),IC(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),wO("avgPool",r,a);var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=DR.runKernel(RE,u,l);return c=aM(c,i.dtype),s?SO(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var CO=qR({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=HR(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=SO(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),IC(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),IC("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),wO("avgPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=DR.runKernel(ME,l,c);return f=aM(f,s.dtype),u?SO(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var EO=qR({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=HR(e,"x","batchNorm"),l=HR(t,"mean","batchNorm"),c=HR(n,"variance","batchNorm");null!=a&&(o=HR(a,"scale","batchNorm")),null!=r&&(s=HR(r,"offset","batchNorm")),IC(l.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),IC(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),IC(null==o||l.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var f=function(e){return 0===e.rank||1===e.rank?SO(e,[1,1,1,e.size]):2===e.rank?SO(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?SO(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),d={x:f,scale:o,offset:s,mean:l,variance:c},h={varianceEpsilon:i},p=DR.runKernel(_A,d,h);return SO(p,u.shape)}});var AO=qR({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=HR(e,"x","batchNorm"),l=HR(t,"mean","batchNorm"),c=HR(n,"variance","batchNorm");return null!=a&&(o=HR(a,"scale","batchNorm")),null!=r&&(s=HR(r,"offset","batchNorm")),IC(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),IC(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(l.rank,".")})),IC(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&IC(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&IC(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),EO(u,l,c,s,o,i)}});var IO=qR({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=HR(e,"x","batchNorm"),l=HR(t,"mean","batchNorm"),c=HR(n,"variance","batchNorm");return null!=a&&(o=HR(a,"scale","batchNorm")),null!=r&&(s=HR(r,"offset","batchNorm")),IC(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),IC(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(l.rank,".")})),IC(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&IC(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&IC(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),EO(u,l,c,s,o,i)}});var TO=qR({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=HR(e,"x","batchNorm"),l=HR(t,"mean","batchNorm"),c=HR(n,"variance","batchNorm");return null!=a&&(o=HR(a,"scale","batchNorm")),null!=r&&(s=HR(r,"offset","batchNorm")),IC(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),IC(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(l.rank,".")})),IC(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(c.rank,".")})),null!=o&&IC(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&IC(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),EO(u,l,c,s,o,i)}});var RO=qR({clipByValue_:function(e,t,n){var r=HR(e,"x","clipByValue");IC(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return DR.runKernel(BE,a,i)}});var NO=qR({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;IC(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=GR(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return iM(n[0]);var r=n,a={axis:t};return DR.runKernel(VE,r,a)}});var MO=qR({concat1d_:function(e){return NO(e,0)}});var OO=qR({concat2d_:function(e,t){return NO(e,t)}});var PO=qR({concat3d_:function(e,t){return NO(e,t)}});var FO=qR({concat4d_:function(e,t){return NO(e,t)}});var DO=qR({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=HR(e,"x","conv2d","float32"),u=HR(t,"filter","conv2d","float32"),l=s,c=!1;3===s.rank&&(c=!0,l=SO(s,[1,s.shape[0],s.shape[1],s.shape[2]])),IC(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")})),IC(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),wO("conv2d",r,o);var f="NHWC"===a?l.shape[3]:l.shape[1];IC(f===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(f,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),IC(xO(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=DR.runKernel(HE,d,h);return c?SO(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var LO=qR({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=HR(e,"x","conv1d"),u=HR(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=SO(s,[1,s.shape[0],s.shape[1]])),IC(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")})),IC(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),wO("conv1d",r,o),IC(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),IC(xO(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),IC("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var f=SO(u,[1,u.shape[0],u.shape[1],u.shape[2]]),d=SO(l,[l.shape[0],1,l.shape[1],l.shape[2]]),h=[1,n],p=[1,i],v="NHWC",g=DO(d,f,h,r,v,p,o);return SO(g,c?[g.shape[2],g.shape[3]]:[g.shape[0],g.shape[2],g.shape[3]])}});var zO=qR({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;IC(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=SO(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),IC(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),IC(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),IC(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var c="NHWC"===i?s[3]:s[1],f="NHWC"===i?u.shape[3]:u.shape[1];IC(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),IC(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(f,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),wO("conv2dDerInput",a,o);var d={dy:u,filter:n},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},p=DR.runKernel(qE,d,h);return l?SO(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var jO=qR({conv2dTranspose_:function(e,t,n,r,a,i){var o=HR(e,"x","conv2dTranspose"),s=HR(t,"filter","conv2dTranspose");return zO(n,o,s,r,a,"NHWC",i)}});var BO=qR({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=HR(e,"x","conv3d"),s=HR(t,"filter","conv3d"),u=o,l=!1;4===o.rank&&(l=!0,u=SO(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),IC(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),IC(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),IC(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),IC(xO(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),IC("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var c={x:u,filter:s},f={strides:n,pad:r,dataFormat:a,dilations:i},d=DR.runKernel(XE,c,f);return l?SO(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var WO=qR({conv3DBackpropInput_:function(e,t,n,r,a){IC(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=SO(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];IC(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),IC(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),IC(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),IC(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),IC(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(l,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var c={dy:o,filter:n},f={pad:a,strides:r,inputShape:i},d=DR.runKernel(KE,c,f);return s?SO(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var UO=qR({conv3dTranspose_:function(e,t,n,r,a){var i=HR(e,"x","conv3dTranspose"),o=HR(t,"filter","conv3dTranspose");return WO(n,i,o,r,a)}});var VO=qR({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=HR(e,"x","depthwiseConv2d","float32"),u=HR(t,"filter","depthwiseConv2d","float32"),l=s,c=!1;3===s.rank&&(c=!0,l=SO(s,[1,s.shape[0],s.shape[1],s.shape[2]])),IC(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),IC(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}));var f="NHWC"===a?l.shape[3]:l.shape[1];IC(f===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(f,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),wO("depthwiseConv2d",r,o);var d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=DR.runKernel(rA,d,h);return c?SO(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var HO=qR({floorDiv_:function(e,t){var n=HR(e,"a","floorDiv"),r=HR(t,"b","floorDiv"),a=Pf(ER(n,r),2),i={a:n=a[0],b:r=a[1]};return DR.runKernel(SA,i)}});var GO=qR({div_:function(e,t){var n=HR(e,"a","div"),r=HR(t,"b","div"),a=Pf(ER(n,r),2);if(n=a[0],r=a[1],"int32"===n.dtype&&"int32"===r.dtype)return HO(n,r);var i={a:n,b:r};return DR.runKernel(cA,i,{})}});var qO=qR({elu_:function(e){var t={x:HR(e,"x","elu","float32")};return DR.runKernel(dA,t)}});var XO=qR({equal_:function(e,t){var n=HR(e,"a","equal","string_or_numeric"),r=HR(t,"b","equal","string_or_numeric"),a=Pf(ER(n,r),2);n=a[0],r=a[1],OM(n.shape,r.shape);var i={a:n,b:r};return DR.runKernel(vA,i)}});var YO=qR({exp_:function(e){var t={x:HR(e,"x","exp")};return DR.runKernel(gA,t)}});var KO=qR({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=HR(e,"x","expandDims","string_or_numeric");IC(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return DR.runKernel(mA,r,a)}});var $O=qR({tile_:function(e,t){var n=HR(e,"x","tile","string_or_numeric");IC(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return DR.runKernel(oT,r,a)}});var ZO=qR({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=rM([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=SO(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return $O(KO(s,0),[n[0],1,1]);if(2===n.length)return $O(KO(KO(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return $O(KO(KO(KO(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});function QO(e,t,n){var r={shape:e,value:t,dtype:n};return DR.runKernel(xA,{},r)}var JO=qR({floor_:function(e){var t={x:HR(e,"x","floor","float32")};return DR.runKernel(wA,t)}});var eP=qR({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=HR(e,"x","gather"),i=HR(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return DR.runKernel(CA,o,s)}});var tP=qR({greater_:function(e,t){var n=HR(e,"a","greater","string_or_numeric"),r=HR(t,"b","greater","string_or_numeric"),a=Pf(ER(n,r),2);n=a[0],r=a[1],OM(n.shape,r.shape);var i={a:n,b:r};return DR.runKernel(AA,i)}});var nP=qR({greaterEqual_:function(e,t){var n=HR(e,"a","greaterEqual","string_or_numeric"),r=HR(t,"b","greaterEqual","string_or_numeric"),a=Pf(ER(n,r),2);n=a[0],r=a[1],OM(n.shape,r.shape);var i={a:n,b:r};return DR.runKernel(IA,i)}});var rP=qR({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=HR(e,"x","leakyRelu"),r={x:n},a={alpha:t};return DR.runKernel(FA,r,a)}});var aP=qR({log_:function(e){var t={x:HR(e,"x","log","float32")};return DR.runKernel(jA,t)}});var iP=qR({log1p_:function(e){var t={x:HR(e,"x","log1p")};return DR.runKernel(BA,t)}});var oP=qR({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=HR(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return DR.runKernel(qA,a,i)}});var sP=qR({mul_:function(e,t){var n=HR(e,"a","mul"),r=HR(t,"b","mul"),a=Pf(ER(n,r),2),i={a:n=a[0],b:r=a[1]};return DR.runKernel(iI,i)}});var uP=qR({sub_:function(e,t){var n=HR(e,"a","sub"),r=HR(t,"b","sub"),a=Pf(ER(n,r),2),i={a:n=a[0],b:r=a[1]};return DR.runKernel(rT,i)}});var lP=qR({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=HR(e,"x","sum");"bool"===r.dtype&&(r=aM(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return DR.runKernel(UI,a,i)}});var cP=qR({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=HR(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=JM((function(e,n){var r=oP(e,t,!0),a=uP(e,r),i=uP(aM(a,"float32"),aP(lP(YO(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=Pf(n,1)[0],a=YO(r);return uP(e,sP(lP(e,t,!0),a))}}}));return r(n)}});var fP=qR({logicalAnd_:function(e,t){var n=HR(e,"a","logicalAnd","bool"),r=HR(t,"b","logicalAnd","bool");OM(n.shape,r.shape);var a={a:n,b:r};return DR.runKernel(WA,a)}});var dP=qR({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=HR(e,"a","matMul"),i=HR(t,"b","matMul"),o=ER(a,i),s=Pf(o,2),u={a:a=s[0],b:i=s[1]},l={transposeA:n,transposeB:r};return DR.runKernel(PE,u,l)}});var hP=qR({maxPool_:function(e,t,n,r,a){var i=HR(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=SO(i,[1,i.shape[0],i.shape[1],i.shape[2]])),IC(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),IC(xO(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),wO("maxPool",r,a);var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=DR.runKernel(YA,u,l);return s?SO(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var pP=qR({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=HR(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=SO(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),IC(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),IC("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),wO("maxPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},f=DR.runKernel($A,l,c);return u?SO(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var vP=qR({maximum_:function(e,t){var n=HR(e,"a","maximum"),r=HR(t,"b","maximum"),a=Pf(ER(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=aM(n,"int32"),r=aM(r,"int32")),OM(n.shape,r.shape);var i={a:n,b:r};return DR.runKernel(XA,i)}});var gP=qR({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=HR(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return DR.runKernel(JA,a,i)}});var mP=qR({minimum_:function(e,t){var n=HR(e,"a","minimum"),r=HR(t,"b","minimum"),a=Pf(ER(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=aM(n,"int32"),r=aM(r,"int32")),OM(n.shape,r.shape);var i={a:n,b:r};return DR.runKernel(tI,i)}});function yP(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function bP(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function xP(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function kP(e,t,n){IC(yP(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function wP(e,t){if(yP(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function SP(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function _P(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var CP=qR({square_:function(e){var t=HR(e,"x","square");return DR.runKernel("Square",{x:t},{})}});var EP=qR({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=jC(t,(e=HR(e,"x","moments")).shape),a=gP(e,r,n),i=a.shape;n||(i=xP(a.shape,r));var o=CP(uP(aM(e,"float32"),SO(a,i))),s=gP(o,r,n);return{mean:a,variance:s}}});var AP=qR({neg_:function(e){var t={x:HR(e,"x","neg")};return DR.runKernel(oI,t)}});var IP=qR({notEqual_:function(e,t){var n=HR(e,"a","notEqual","string_or_numeric"),r=HR(t,"b","notEqual","string_or_numeric"),a=Pf(ER(n,r),2);n=a[0],r=a[1],OM(n.shape,r.shape);var i={a:n,b:r};return DR.runKernel(sI,i)}});var TP=qR({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a=HR(e,"indices","oneHot","int32"),i={indices:a},o={depth:t,onValue:n,offValue:r};return DR.runKernel(dI,i,o)}});function RP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=RP(e,"float32"),r=RP(e,"float32");return XR(n,r)}var a=tE(MC(e),t);return DR.makeTensor(a,e,t)}function NP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=NP(e,"float32"),r=RP(e,"float32");return XR(n,r)}var a=eE(MC(e),t);return DR.makeTensor(a,e,t)}var MP=qR({onesLike_:function(e){var t={x:HR(e,"x","onesLike")};return DR.runKernel(fI,t)}});var OP=qR({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=HR(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return DR.runKernel(pI,i,a)}});var PP=qR({prelu_:function(e,t){var n={x:HR(e,"x","prelu"),alpha:HR(t,"alpha","prelu")};return DR.runKernel(gI,n)}}),FP=__webpack_require__(699),DP=function(){function e(t,n,r,a,i){gC(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=FP.alea(o.toString())}return yC(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),LP=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(gC(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=FP.alea(i)}return yC(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var zP=qR({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new DP(t,n,r,!1,a),o=rM(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var jP=qR({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=rM(e,r),o=new LP(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});var BP=qR({relu_:function(e){var t={x:HR(e,"x","relu")};return DR.runKernel(kI,t)}});var WP=qR({reverse_:function(e,t){var n={x:HR(e,"x","reverse")},r={dims:t};return DR.runKernel(II,n,r)}});var UP=qR({selu_:function(e){var t={x:HR(e,"x","selu")};return DR.runKernel(PI,t)}});var VP=qR({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=HR(e,"x","separableConv2d"),u=HR(t,"depthwiseFilter","separableConv2d"),l=HR(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(3===s.rank&&(f=!0,c=SO(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");IC(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),IC(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),IC(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),IC(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(l.shape[0],".")})),IC(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(l.shape[1],".")}));var d=u.shape[2],h=u.shape[3];IC(l.shape[2]===d*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(d*h,", ")+"but got ".concat(l.shape[2],".")}));var p=VO(c,u,r,a,o,i),v=1,g=DO(p,l,v,"valid",o);return f?SO(g,[g.shape[1],g.shape[2],g.shape[3]]):g}});var HP=qR({sigmoid_:function(e){var t={x:HR(e,"x","sigmoid","float32")};return DR.runKernel(jI,t)}});var GP=qR({slice_:function(e,t,n){var r=HR(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return DR.runKernel(FI,a,i)}});var qP=qR({slice1d_:function(e,t,n){var r=HR(e,"x","slice1d");return IC(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),GP(r,[t],[n])}});var XP=qR({slice2d_:function(e,t,n){var r=HR(e,"x","slice2d");return IC(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),GP(r,t,n)}});var YP=qR({slice3d_:function(e,t,n){var r=HR(e,"x","slice3d");return IC(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),GP(r,t,n)}});var KP=qR({slice4d_:function(e,t,n){var r=HR(e,"x","slice4d");return IC(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),GP(r,t,n)}});var $P=qR({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=HR(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return DR.runKernel(GI,r,a)}});var ZP=qR({softplus_:function(e){var t={x:HR(e,"x","softplus")};return DR.runKernel(BI,t)}});var QP=qR({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=HR(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return DR.runKernel(HI,a,i)}});var JP=qR({sqrt_:function(e){var t={x:HR(e,"x","sqrt","float32")};return DR.runKernel(WI,t)}});var eF=qR({squeeze_:function(e,t){var n=HR(e,"x","squeeze","string_or_numeric");return SO(n,BC(n.shape,t).newShape)}});var tF=qR({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=GR(e,"tensors","stack","string_or_numeric");IC(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&IC(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return DR.runKernel(hI,r,a)}});var nF=qR({tanh_:function(e){var t={x:HR(e,"x","tanh","float32")};return DR.runKernel(iT,t)}});function rF(e,t){RC(e);var n=WR(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return YR(e,null,n,t)}var aF=qR({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new DP(t,n,r,!0,a),o=rM(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var iF=qR({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=HR(e,"x","unstack","string_or_numeric");IC(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return DR.runKernel(fT,r,a)}});function oF(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return DR.makeVariable(e,t,n,r)}var sF=qR({broadcastTo_:function(e,t){var n=HR(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=SO(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return iM(n);var l={x:n},c={reps:o};return DR.runKernel(oT,l,c)}});var uF=qR({where_:function(e,t,n){var r=HR(t,"a","where"),a=HR(n,"b","where"),i=HR(e,"condition","where","bool"),o=OM(OM(i.shape,r.shape),a.shape),s={condition:sF(i,o),t:sF(r,o),e:sF(a,o)};return DR.runKernel(OI,s)}});var lF=qR({zerosLike_:function(e){var t={x:HR(e,"x","zerosLike")};return DR.runKernel(hT,t)}});var cF=qR({imag_:function(e){var t={input:HR(e,"input","imag")};return DR.runKernel(NA,t)}});var fF=qR({real_:function(e){var t={input:HR(e,"input","real")};return DR.runKernel(bI,t)}});var dF=qR({transpose_:function(e,t,n){var r=HR(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),IC(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){IC(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?KM((function(){var e=fF(r),t=cF(r);return e=DR.runKernel(lT,{x:e},i),t=DR.runKernel(lT,{x:t},i),n&&(t=AP(t)),XR(e,t)})):DR.runKernel(lT,a,i)}});var hF=qR({dropout_:function(e,t,n,r){var a=HR(e,"x","dropout");if(IC("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),IC(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof vR?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(OC(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=GO(JO(rO(jP(i,0,1,"float32",r),o)),o);return sP(a,s)}});var pF=qR({fft_:function(e){IC("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return DR.runKernel(bA,t)}});var vF=qR({rfft_:function(e,t){IC("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=GP(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=NO([e,RP(s)],e.shape.length-1),r=t}else n=e;var u=lF(n),l=SO(XR(n,u),[a,r]),c=pF(l),f=Math.floor(r/2)+1,d=fF(c),h=cF(c),p=QP(d,[f,r-f],d.shape.length-1),v=QP(h,[f,r-f],h.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=f,SO(XR(p[0],v[0]),g)}});var gF=qR({ifft_:function(e){IC("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return DR.runKernel(RA,t)}});var mF=qR({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=SO(e,[r,n]);t=gF(a)}else{var i=[r,2*(n-1)],o=SO(fF(e),[r,n]),s=SO(cF(e),[r,n]),u=WP(GP(o,[0,1],[r,n-2]),1),l=sP(WP(GP(s,[0,1],[r,n-2]),1),eO(-1)),c=NO([o,u],1),f=NO([s,l],1),d=SO(XR(c,f),[i[0],i[1]]);t=gF(d)}if(t=fF(t),3===e.rank&&0!==e.shape[0]){var h=t,p=e.shape[0];t=SO(t,[p,t.shape[0]/p,t.shape[1]]),h.dispose()}return t}});var yF=qR({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=SO(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=SO(t,[1,t.shape[0],t.shape[1],t.shape[2]])),IC(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),IC(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),IC(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var l="NHWC"===i?s.shape[3]:s.shape[1],c="NHWC"===i?u.shape[3]:u.shape[1];IC(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(l,") must ")+"match input depth in filter (".concat(n[2],".")})),IC(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must ")+"match output depth for filter (".concat(n[3],").")})),wO("conv2dDerFilter",a,o);var f={x:s,dy:u},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return DR.runKernel(GE,f,d)}});var bF=qR({relu6_:function(e){var t={x:HR(e,"x","relu6")};return DR.runKernel(AI,t)}});var xF=qR({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=HR(e,"x","step"),r={x:n},a={alpha:t};return DR.runKernel(pT,r,a)}});function kF(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return sP(e,xF(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function wF(e,t){var n=t,r=MM(e.shape,t.shape);return r.length>0&&(n=lP(n,r)),SO(n,e.shape)}function SF(e,t,n,r){if("linear"===t)return e;if("relu"===t)return BP(e);if("elu"===t)return qO(e);if("relu6"===t)return bF(e);if("prelu"===t)return PP(e,n);if("leakyrelu"===t)return rP(e,r);if("sigmoid"===t)return HP(e);throw new Error("Unknown fused activation ".concat(t,"."))}var _F=function(e,t){return!(e>0)||"linear"===t};var CF=qR({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,d=void 0===f?"linear":f,h=e.preluActivationWeights,p=e.leakyreluAlpha;if(d=d||"linear",!1===_F(DR.state.gradientDepth,d)){IC("NHWC"===o,(function(){return"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var v=DO(t,n,r,a,o,u,l);return null!=c&&(v=rO(v,c)),SF(v,d,h,p)}var g=HR(t,"x","conv2d","float32"),m=HR(n,"filter","conv2d","float32"),y=g,b=!1;3===g.rank&&(b=!0,y=SO(g,[1,g.shape[0],g.shape[1],g.shape[2]])),IC(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),IC(4===m.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(m.rank,".")})),wO("fused conv2d",a,l);var x="NHWC"===o?y.shape[3]:y.shape[1];IC(m.shape[2]===x,(function(){return"Error in conv2d: depth of input (".concat(x,") must match ")+"input depth for filter ".concat(m.shape[2],".")})),IC(xO(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")}));var k,w,S=cO(y.shape,m.shape,r,u,a,l);if(null!=c){var _=Pf(ER(k=HR(c,"bias","fused conv2d"),g),1);k=_[0],"NHWC"===o?OM(S.outShape,k.shape):(IC(k.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(k.shape.length,".")})),IC(0===k.shape.length||k.shape[0]===S.outChannels||1===k.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(k.shape,") is not ")+"compatible with the number of output channels "+"(".concat(S.outChannels,")")})))}if(null!=h){var C=h.shape;if(IC(C.length<=1||3===C.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(C.length,".")})),1===C.length)IC(1===C[0]||C[0]===S.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(C,") is not compatible with the number of output ")+"channels (".concat(S.outChannels,").")}));else if(3===C.length)try{OM(C,S.outShape)}catch(M){var E="Error in fused conv2d: PReLU activation weights (".concat(C,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(S.outShape,").");throw Error(E)}w=HR(h,"prelu weights","fused conv2d")}var A=function(e,t){IC("NHWC"===o,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var n=Pf(t,4),i=n[0],s=n[1],l=n[2],c=n[3],f=kF(e,l,d);IC(bO(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var h=[zO(s.shape,f,i,r,a),yF(s,f,i.shape,r,a)];if(null!=c){var p=wF(c,f);h.push(p)}return h},I={x:y,filter:m,bias:k,preluActivationWeights:w},T={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:d,leakyreluAlpha:p};if(null==c){var R=JM((function(e,t,n){var r=DR.runKernel(yT,I,T);return n([t,e,r]),b&&(r=SO(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:A}}));return R(y,m)}var N=JM((function(e,t,n,r){var a=DR.runKernel(yT,I,T);return r([t,e,a,n]),b&&(a=SO(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:A}}));return N(y,m,k)}});var EF=qR({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=SO(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=SO(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return DR.runKernel(aA,l,c)}});var AF=qR({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=SO(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},f=DR.runKernel(iA,l,c);return u?SO(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});qR({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,f=e.activation,d=void 0===f?"linear":f,h=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===_F(DR.state.gradientDepth,d)){var v=VO(t,n,r,a,o,u,l);return null!=c&&(v=rO(v,c)),SF(v,d,h,p)}var g=HR(t,"x","depthwiseConv2d","float32"),m=HR(n,"filter","depthwiseConv2d","float32"),y=g,b=!1;3===g.rank&&(b=!0,y=SO(g,[1,g.shape[0],g.shape[1],g.shape[2]])),IC(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),IC(4===m.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(m.rank,".")})),IC(y.shape[3]===m.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(m.shape[2],".")})),null==u&&(u=[1,1]),IC(xO(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),wO("fused depthwiseConv2d",a,l);var x,k,w=cO(y.shape,m.shape,r,u,a,l,!0);if(null!=c){var S=Pf(ER(x=HR(c,"bias","fused conv2d"),g),1);x=S[0],OM(w.outShape,x.shape)}null!=h&&(k=HR(h,"prelu weights","fused depthwiseConv2d"));var _=function(e,t){IC(bO(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=Pf(t,4),i=n[0],o=n[1],s=n[2],c=n[3],f=kF(e,s,d),h=AF(o.shape,f,i,r,a,u,l),p=EF(o,f,i.shape,r,a,u,l);return null!=c?[h,p,wF(x,f)]:[h,p]},C={x:y,filter:m,bias:x,preluActivationWeights:k},E={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:d,leakyreluAlpha:p};if(null==c){var A=JM((function(e,t,n){var r=DR.runKernel(bT,C,E);return n([t,e,r]),b&&(r=SO(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:_}}));return A(y,m)}var I=JM((function(e,t,n,r){var a=DR.runKernel(bT,C,E);return r([t,e,a,n]),b&&(a=SO(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:_}}));return I(y,m,x)}});var IF=qR({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,l=void 0===u?"linear":u,c=e.preluActivationWeights,f=e.leakyreluAlpha,d=void 0===f?.2:f;if(!1===_F(DR.state.gradientDepth,l)){var h=dP(t,n,a,o);return null!=s&&(h=rO(h,s)),SF(h,l,c,d)}var p=HR(t,"a","fused matMul"),v=HR(n,"b","fused matMul"),g=Pf(ER(p,v),2);p=g[0],v=g[1];var m=a?p.shape[p.rank-2]:p.shape[p.rank-1],y=o?v.shape[v.rank-1]:v.shape[v.rank-2],b=a?p.shape[p.rank-1]:p.shape[p.rank-2],x=o?v.shape[v.rank-2]:v.shape[v.rank-1],k=p.shape.slice(0,-2),w=v.shape.slice(0,-2),S=MC(k),_=MC(w);IC(m===y,(function(){return"Error in fused matMul: inner shapes (".concat(m,") and (")+"".concat(y,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(v.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var C,E,A=OM(p.shape.slice(0,-2),v.shape.slice(0,-2)).concat([b,x]),I=SO(p,a?[S,m,b]:[S,b,m]),T=SO(v,o?[_,x,y]:[_,y,x]);null!=s&&(C=Pf(ER(C=HR(s,"bias","fused matMul"),p),1)[0],OM(A,C.shape)),null!=c&&(E=HR(c,"prelu weights","fused matMul"));var R=function(e,t){var n,r,i=Pf(t,4),u=i[0],c=i[1],f=i[2],d=i[3],h=kF(SO(e,f.shape),f,l);return a||o?!a&&o?(n=dP(h,c,!1,!1),r=dP(h,u,!0,!1)):a&&!o?(n=dP(c,h,!1,!0),r=dP(u,h,!1,!1)):(n=dP(c,h,!0,!0),r=dP(h,u,!0,!0)):(n=dP(h,c,!1,!0),r=dP(u,h,!0,!1)),null!=s?[n,r,wF(d,h)]:[n,r]},N={a:I,b:T,bias:C,preluActivationWeights:E},M={transposeA:a,transposeB:o,activation:l,leakyreluAlpha:d};if(null==s){var O=JM((function(e,t,n){var r=DR.runKernel(mT,N,M);return n([e,t,r]),{value:SO(r,A),gradFunc:R}}));return O(I,T)}var P=JM((function(e,t,n,r){var a=DR.runKernel(mT,N,M);return r([e,t,a,n]),{value:SO(a,A),gradFunc:R}}));return P(I,T,C)}});function TF(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function RF(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return rF(a,"float32")}qR({hammingWindow_:function(e){return RF(e,.54,.46)}});var NF=qR({hannWindow_:function(e){return RF(e,.5,.5)}});function MF(e,t,n){if(RC(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=WR(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return YR(e,t,r,n)}var OF=qR({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(GP(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=NO([GP(e,i,t-s),QO([s],a)]);o.push(u),i+=n}return 0===o.length?MF([],[0,t]):SO(NO(o),[o.length,t])}});qR({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:NF;null==r&&(r=TF(t));var i=OF(e,t,n),o=sP(i,a(t));return vF(o,r)}});var PF=qR({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=HR(e,"image","cropAndResize"),s=HR(t,"boxes","cropAndResize","float32"),u=HR(n,"boxInd","cropAndResize","int32"),l=s.shape[0];IC(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),IC(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,".")})),IC(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,".")})),IC(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),IC(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),IC("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var c={image:o,boxes:s,boxInd:u},f={method:a,extrapolationValue:i,cropSize:r},d=DR.runKernel(eA,c,f);return d}});var FF=qR({flipLeftRight_:function(e){var t=HR(e,"image","flipLeftRight","float32");IC(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return DR.runKernel(kA,n,{})}});var DF=qR({grayscaleToRGB_:function(e){var t=HR(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];IC(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),IC(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,$O(t,a)}});var LF=qR({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=HR(e,"image","rotateWithOffset","float32");IC(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=DR.runKernel(gT,i,o);return s}});function zF(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),IC(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),IC(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),IC(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),IC(1===t.rank,(function(){return"scores must be a 1D tensor"})),IC(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),IC(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var jF=qR({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=HR(e,"boxes","nonMaxSuppression","float32"),o=HR(t,"scores","nonMaxSuppression","float32"),s=zF(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return DR.runKernel(uI,{boxes:i,scores:o},u)}});function BF(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||WF)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function WF(e,t){return e>t?1:e<t?-1:0}function UF(e,t,n,r,a){return GF(e,t,n,r,a,0)}function VF(e,t,n,r,a,i){return GF(e,t,n,r,a,0,!1,i,!0)}function HF(e,t,n,r,a,i){return GF(e,t,n,r,a,i,!0)}function GF(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=[],c=0;c<t.length;c++)t[c]>a&&l.push({score:t[c],boxIndex:c,suppressBeginIndex:0});l.sort(YF);for(var f=i>0?-.5/i:0,d=[],h=[];d.length<n&&l.length>0;){var p=l.pop(),v=p.score,g=p.boxIndex,m=p.suppressBeginIndex;if(v<a)break;for(var y=!1,b=d.length-1;b>=m;--b){var x=qF(e,g,d[b]);if(x>=r){y=!0;break}if(p.score=p.score*XF(r,f,x),p.score<=a)break}p.suppressBeginIndex=d.length,y||(p.score===v?(d.push(g),h.push(p.score)):p.score>a&&BF(l,p,YF))}var k=d.length,w=n-k;s&&w>0&&(d.push.apply(d,pd(new Array(w).fill(0))),h.push.apply(h,pd(new Array(w).fill(0))));var S={selectedIndices:d};return o&&(S.selectedScores=h),u&&(S.validOutputs=k),S}function qF(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),f=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(s-i)*(u-o),p=(f-l)*(d-c);if(h<=0||p<=0)return 0;var v=Math.max(i,l),g=Math.max(o,c),m=Math.min(s,f),y=Math.min(u,d),b=Math.max(m-v,0)*Math.max(y-g,0);return b/(h+p-b)}function XF(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function YF(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function KF(){return KF=vC(hC().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=HR(t,"boxes","nonMaxSuppressionAsync"),s=HR(n,"scores","nonMaxSuppressionAsync"),u=zF(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return l=e.sent,c=l[0],f=l[1],d=UF(c,f,r,a,i),h=d.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",rF(h,"int32"));case 17:case"end":return e.stop()}}),e)}))),KF.apply(this,arguments)}var $F=function(e,t,n){return KF.apply(this,arguments)};var ZF=qR({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=HR(e,"boxes","nonMaxSuppression"),s=HR(t,"scores","nonMaxSuppression"),u=zF(o,s,n,r,a,i),l={boxes:o,scores:s},c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},f=DR.runKernel(cI,l,c);return{selectedIndices:f[0],selectedScores:f[1]}}});function QF(){return QF=vC(hC().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p,v,g=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>3&&void 0!==g[3]?g[3]:.5,i=g.length>4&&void 0!==g[4]?g[4]:Number.NEGATIVE_INFINITY,o=g.length>5&&void 0!==g[5]?g[5]:0,s=HR(t,"boxes","nonMaxSuppressionAsync"),u=HR(n,"scores","nonMaxSuppressionAsync"),l=zF(s,u,r,a,i,o),r=l.maxOutputSize,a=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return c=e.sent,f=c[0],d=c[1],h=HF(f,d,r,a,i,o),p=h.selectedIndices,v=h.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:rF(p,"int32"),selectedScores:rF(v)});case 19:case"end":return e.stop()}}),e)}))),QF.apply(this,arguments)}var JF=function(e,t,n){return QF.apply(this,arguments)};var eD=qR({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=HR(e,"boxes","nonMaxSuppression"),s=HR(t,"scores","nonMaxSuppression"),u=zF(o,s,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,f=u.scoreThreshold,d={boxes:o,scores:s},h={maxOutputSize:l,iouThreshold:c,scoreThreshold:f,padToMaxOutputSize:i},p=DR.runKernel(lI,d,h);return{selectedIndices:p[0],validOutputs:p[1]}}});function tD(){return tD=vC(hC().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p,v,g,m,y,b,x=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=HR(t,"boxes","nonMaxSuppressionAsync"),u=HR(n,"scores","nonMaxSuppressionAsync"),l=zF(s,u,r,a,i,null),c=l.maxOutputSize,f=l.iouThreshold,d=l.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return h=e.sent,p=Pf(h,2),v=p[0],g=p[1],m=VF(v,g,c,f,d,o),y=m.selectedIndices,b=m.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:rF(y,"int32"),validOutputs:eO(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),tD.apply(this,arguments)}var nD=function(e,t,n){return tD.apply(this,arguments)};function rD(e){return Rf(e)||hd(e)||Mf(e)||Of()}var aD=qR({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=HR(e,"images","resizeBilinear");IC(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),IC(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),IC(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=SO(a,[1,a.shape[0],a.shape[1],a.shape[2]])),rD(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=DR.runKernel(CI,s,u);return o?SO(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var iD=qR({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=HR(e,"images","resizeNearestNeighbor");IC(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),IC(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),IC("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),IC(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=SO(a,[1,a.shape[0],a.shape[1],a.shape[2]])),rD(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=DR.runKernel(SI,s,u);return o?SO(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var oD=qR({bincount_:function(e,t,n){var r=HR(e,"x","bincount"),a=HR(t,"weights","bincount");IC("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),IC(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),IC(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return DR.runKernel(DE,i,o)}});var sD=qR({lessEqual_:function(e,t){var n=HR(e,"a","lessEqual","string_or_numeric"),r=HR(t,"b","lessEqual","string_or_numeric"),a=Pf(ER(n,r),2);n=a[0],r=a[1],OM(n.shape,r.shape);var i={a:n,b:r};return DR.runKernel(LA,i)}});var uD=qR({round_:function(e){var t={x:HR(e,"x","round")};return DR.runKernel(TI,t)}});function lD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return DR.runKernel(yI,{},a)}function cD(e,t){for(var n,r,a,i,o,s,u=rF([-1]),l=rF([0]),c=rF([0]),f=0;f<e.size-1;f++){n=GP(e,0,f+1),r=GP(e,f+1),o=GO(lP(n),t),s=GO(lP(r),t);var d=lP(sP(n,lD(0,n.size)));a=GO(d,lP(n));var h=QO(r.shape,n.size),p=rO(lD(0,r.size),h),v=sP(r,p);i=GO(lP(v),lP(r));var g=uP(a,i),m=uP(a,i),y=sP(o,s);c=sP(sP(y,g),m);var b=tP(c,l);l=uF(b,c,l),u=uF(b,rF([f]),u)}return u}var fD=qR({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=HR(e,"image","threshold"),l=.2989,c=.587,f=.114,d=u.shape[0]*u.shape[1],h=sP(rF([s]),255);if(IC(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),IC(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),IC("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),IC("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var p=QP(u,[1,1,1],-1),v=Pf(p,3);t=v[0],n=v[1],r=v[2];var g=sP(t,l),m=sP(n,c),y=sP(r,f);a=rO(rO(g,m),y)}else a=e;if("otsu"===i){var b=oD(aM(uD(a),"int32"),KR([]),256);h=cD(b,d)}var x=o?sD(a,h):tP(a,h),k=aM(sP(x,255),"int32");return k}});var dD=qR({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=HR(e,"image","transform","float32"),s=HR(t,"transforms","transform","float32");IC(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),IC(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),IC(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},l={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return DR.runKernel(uT,u,l)}});var hD=qR({bandPart_:function(e,t,n){IC(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),IC(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=HR(e,"a","bandPart");IC(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=Pf(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var u=SO(lD(0,o,1,"int32"),[-1,1]),l=lD(0,s,1,"int32"),c=uP(u,l),f=fP(sD(c,eO(+t,"int32")),nP(c,eO(-n,"int32"))),d=RP([o,s],r.dtype);return SO(tF(iF(SO(r,[-1,o,s])).map((function(e){return uF(f,e,d)}))),a)}});var pD=qR({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=HR(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return DR.runKernel(eI,a,i)}});var vD=qR({pow_:function(e,t){var n=HR(e,"base","pow"),r=HR(t,"exp","pow"),a=Pf(ER(n,r),2),i={a:n=a[0],b:r=a[1]};return DR.runKernel(vI,i)}});function gD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return nO(e);if(1!==e.rank&&null===n)return gD(SO(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return lP(nO(e),n);if(t===1/0)return oP(nO(e),n);if(t===-1/0)return pD(nO(e),n);if("euclidean"===t||2===t)return JP(lP(vD(nO(e),eO(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return oP(lP(nO(e),n[0]),n[1]-1);if(t===1/0)return oP(lP(nO(e),n[1]),n[0]);if(t===-1/0)return pD(lP(nO(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return JP(lP(CP(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var mD=qR({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=gD(e=HR(e,"x","norm"),t,n),i=a.shape;if(r){var o=jC(n,e.shape);i=xP(a.shape,o)}return SO(a,i)}});var yD=qR({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,IC(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){IC(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=QP(e,e.shape[0],0).map((function(e){return eF(e,[0])}))),IC(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(DR.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=sP(lP(sP(n[a],t)),n[a]);t=uP(t,i)}return GO(t,mD(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?tF(n,0):n}});function bD(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return DR.tidy((function(){IC(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=ZO(n),i=iM(e),o=MF([[1]],[1,1]),s=iM(o),u=n>=r?r:n,l=function(e){var t=i,u=s,l=a,c=Pf(DR.tidy((function(){var t=GP(i,[e,e],[n-e,1]),u=mD(t),l=GP(i,[e,e],[1,1]),c=uF(tP(l,0),MF([[-1]]),MF([[1]])),f=uP(l,sP(c,u)),d=GO(t,f);s=1===d.shape[0]?iM(o):NO([o,GP(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);var h=AP(GO(dP(c,f),u)),p=GP(i,[e,0],[n-e,r]),v=sP(h,s),g=dF(s);if(0===e)i=uP(p,dP(v,dP(g,p)));else{var m=uP(p,dP(v,dP(g,p)));i=NO([GP(i,[0,0],[e,r]),m],0)}var y=dF(v),b=GP(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=uP(b,dP(dP(b,s),y));else{var x=uP(b,dP(dP(b,s),y));a=NO([GP(a,[0,0],[n,e]),x],1)}return[s,i,a]})),3);s=c[0],i=c[1],a=c[2],$M([t,u,l])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=GP(a,[0,0],[n,r]),i=GP(i,[0,0],[r,r])),[a,i]}))}var xD,kD=qR({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(IC(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return bD(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=iF(SO(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=Pf(bD(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)}));var o=SO(tF(a,0),e.shape),s=SO(tF(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(xD||(xD={}));var wD=qR({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xD.SUM_BY_NONZERO_WEIGHTS,r=HR(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=HR(t,"weights","computeWeightedLoss"));var i=null==a?r:sP(r,a);if(n===xD.NONE)return i;if(n===xD.SUM)return lP(i);if(n===xD.MEAN){if(null==a)return gP(i);var o=r.size/a.size,s=GO(lP(i),lP(a));return o>1?GO(s,eO(o)):s}if(n===xD.SUM_BY_NONZERO_WEIGHTS){if(null==a)return GO(lP(i),eO(r.size));var u=sP(a,NP(r.shape)),l=aM(lP(IP(u,eO(0))),"float32");return GO(lP(i),l)}throw Error("Unknown reduction: ".concat(n))}});qR({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xD.SUM_BY_NONZERO_WEIGHTS,a=HR(e,"labels","absoluteDifference"),i=HR(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=HR(n,"weights","absoluteDifference")),TC(a.shape,i.shape,"Error in absoluteDifference: ");var s=nO(uP(a,i));return wD(s,o,r)}});qR({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xD.SUM_BY_NONZERO_WEIGHTS,i=HR(e,"labels","cosineDistance"),o=HR(t,"predictions","cosineDistance"),s=null;null!=r&&(s=HR(r,"weights","cosineDistance")),TC(i.shape,o.shape,"Error in cosineDistance: ");var u=eO(1),l=uP(u,lP(sP(i,o),n,!0));return wD(l,s,a)}});qR({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xD.SUM_BY_NONZERO_WEIGHTS,a=HR(e,"labels","hingeLoss"),i=HR(t,"predictions","hingeLoss"),o=null;null!=n&&(o=HR(n,"weights","hingeLoss")),TC(a.shape,i.shape,"Error in hingeLoss: ");var s=eO(1);a=uP(sP(eO(2),a),s);var u=BP(uP(s,sP(a,i)));return wD(u,o,r)}});qR({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xD.SUM_BY_NONZERO_WEIGHTS,i=HR(e,"labels","huberLoss"),o=HR(t,"predictions","huberLoss"),s=null;null!=n&&(s=HR(n,"weights","huberLoss")),TC(i.shape,o.shape,"Error in huberLoss: ");var u=eO(r),l=nO(uP(o,i)),c=mP(l,u),f=uP(l,c),d=rO(sP(eO(.5),CP(c)),sP(u,f));return wD(d,s,a)}});qR({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xD.SUM_BY_NONZERO_WEIGHTS,i=HR(e,"labels","logLoss"),o=HR(t,"predictions","logLoss"),s=null;null!=n&&(s=HR(n,"weights","logLoss")),TC(i.shape,o.shape,"Error in logLoss: ");var u=eO(1),l=eO(r),c=AP(sP(i,aP(rO(o,l)))),f=sP(uP(u,i),aP(rO(uP(u,o),l))),d=uP(c,f);return wD(d,s,a)}});var SD=qR({squaredDifference_:function(e,t){var n=HR(e,"a","squaredDifference"),r=HR(t,"b","squaredDifference"),a=Pf(ER(n,r),2);n=a[0],r=a[1],OM(n.shape,r.shape);var i={a:n,b:r};return DR.runKernel(ZI,i,{})}});qR({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:xD.SUM_BY_NONZERO_WEIGHTS,a=HR(e,"labels","meanSquaredError"),i=HR(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=HR(n,"weights","meanSquaredError")),TC(a.shape,i.shape,"Error in meanSquaredError: ");var s=SD(a,i);return wD(s,o,r)}});function _D(e,t){var n=HR(e,"labels","sigmoidCrossEntropyWithLogits"),r=HR(t,"logits","sigmoidCrossEntropyWithLogits");TC(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=BP(r),i=sP(r,n),o=iP(YO(AP(nO(r))));return rO(uP(a,i),o)}qR({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xD.SUM_BY_NONZERO_WEIGHTS,i=HR(e,"multiClassLabels","sigmoidCrossEntropy"),o=HR(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=HR(n,"weights","sigmoidCrossEntropy")),TC(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=eO(r),l=eO(1),c=eO(.5);i=rO(sP(i,uP(l,u)),sP(c,u))}var f=_D(i,o);return wD(f,s,a)}});var CD=qR({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=HR(e,"x","logSumExp"),a=jC(t,r.shape),i=oP(r,a,!0),o=uP(r,i),s=YO(o),u=lP(s,a),l=aP(u),c=rO(SO(i,l.shape),l);if(n){var f=xP(c.shape,a);return SO(c,f)}return c}});function ED(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=JM((function(e,t,r){var a=CD(t,[n],!0),i=uP(aM(t,"float32"),a);r([e,i]);var o=AP(sP(i,e));return{value:lP(o,[n]),gradFunc:function(e,t){var r=Pf(t,2),a=r[0],i=r[1],o=xP(e.shape,[n]);return[sP(SO(e,o),uP(aM(a,"float32"),YO(i))),sP(SO(e,o),uP(YO(i),aM(a,"float32")))]}}}));return r(e,t)}qR({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xD.SUM_BY_NONZERO_WEIGHTS,i=HR(e,"onehotLabels","softmaxCrossEntropy"),o=HR(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=HR(n,"weights","softmaxCrossEntropy")),TC(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=eO(r),l=eO(1),c=eO(i.shape[1]);i=rO(sP(i,uP(l,u)),GO(u,c))}var f=ED(i,o);return wD(f,s,a)}});qR({sparseFillEmptyRows_:function(e,t,n,r){var a=HR(e,"indices","sparseFillEmptyRows","int32"),i=HR(t,"values","sparseFillEmptyRows"),o=HR(n,"denseShape","sparseFillEmptyRows","int32"),s=HR(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},l=DR.runKernel(qI,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}});qR({sparseReshape_:function(e,t,n){var r=HR(e,"inputIndices","sparseReshape","int32"),a=HR(t,"inputShape","sparseReshape","int32"),i=HR(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=DR.runKernel(XI,o);return{outputIndices:s[0],outputShape:s[1]}}});qR({sparseSegmentMean_:function(e,t,n){var r=HR(e,"data","sparseSegmentMean"),a=HR(t,"indices","sparseSegmentMean","int32"),i=HR(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return DR.runKernel(YI,o)}});qR({sparseSegmentSum_:function(e,t,n){var r=HR(e,"data","sparseSegmentSum"),a=HR(t,"indices","sparseSegmentSum","int32"),i=HR(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return DR.runKernel(KI,o)}});qR({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=HR(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var l=HR(t,"dataSplits","stringNGrams");if("int32"!==l.dtype)throw new Error("Data splits must be of datatype int32");var c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},f={data:u,dataSplits:l},d=DR.runKernel(eT,f,c);return{nGrams:d[0],nGramsSplits:d[1]}}});qR({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=HR(e,"input","stringSplit","string"),a=HR(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=DR.runKernel(tT,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});qR({stringToHashBucketFast_:function(e,t){var n=HR(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return DR.runKernel(nT,a,r)}});var AD={flipLeftRight:FF,grayscaleToRGB:DF,resizeNearestNeighbor:iD,resizeBilinear:aD,rotateWithOffset:LF,cropAndResize:PF,nonMaxSuppression:jF,nonMaxSuppressionAsync:$F,nonMaxSuppressionWithScore:ZF,nonMaxSuppressionWithScoreAsync:JF,nonMaxSuppressionPadded:eD,nonMaxSuppressionPaddedAsync:nD,threshold:fD,transform:dD},ID={bandPart:hD,gramSchmidt:yD,qr:kD},TD=function(e){tR(n,e);var t=oR(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return gC(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=DR.backend.epsilon()),a}return yC(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=DR.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:KM((function(){return lF(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:KM((function(){return lF(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;KM((function(){var e=rO(sP(o,t.rho),sP(CP(i),1-t.rho)),n=sP(GO(JP(rO(s,t.epsilon)),JP(rO(o,t.epsilon))),i),r=rO(sP(s,t.rho),sP(CP(n),1-t.rho));o.assign(e),s.assign(r);var u=rO(sP(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&($M(this.accumulatedGrads.map((function(e){return e.variable}))),$M(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(pd(this.accumulatedGrads),pd(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=vC(hC().mark((function e(t){var n;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(tO);TD.className="Adadelta",qM(TD);var RD=function(e){tR(n,e);var t=oR(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return gC(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return yC(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=DR.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:KM((function(){return QO(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;KM((function(){var e=rO(o,CP(i));o.assign(e);var n=rO(sP(GO(i,JP(rO(e,DR.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&$M(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(tO);RD.className="Adagrad",qM(RD);var ND=function(e){tR(n,e);var t=oR(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return gC(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],KM((function(){i.accBeta1=eO(r).variable(),i.accBeta2=eO(a).variable()})),null==o&&(i.epsilon=DR.backend.epsilon()),i}return yC(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);KM((function(){var r=uP(1,t.accBeta1),a=uP(1,t.accBeta2);n.forEach((function(n,i){var o=DR.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:KM((function(){return lF(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:KM((function(){return lF(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedSecondMoment[i].variable,c=rO(sP(u,t.beta1),sP(s,1-t.beta1)),f=rO(sP(l,t.beta2),sP(CP(s),1-t.beta2)),d=GO(c,r),h=GO(f,a);u.assign(c),l.assign(f);var p=rO(sP(GO(d,rO(JP(h),t.epsilon)),-t.learningRate),o);o.assign(p)}})),t.accBeta1.assign(sP(t.accBeta1,t.beta1)),t.accBeta2.assign(sP(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&$M(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&$M(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(pd(this.accumulatedFirstMoment),pd(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=vC(hC().mark((function e(t){var n,r=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,KM((function(){r.accBeta1.assign(vD(r.beta1,r.iterations_+1)),r.accBeta2.assign(vD(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(tO);ND.className="Adam",qM(ND);var MD=function(e){tR(n,e);var t=oR(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return gC(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],KM((function(){i.iteration=eO(0).variable(),i.accBeta1=eO(r).variable()})),null==o&&(i.epsilon=DR.backend.epsilon()),i}return yC(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);KM((function(){var r=uP(1,t.accBeta1),a=GO(-t.learningRate,rO(sP(t.iteration,t.decay),1));n.forEach((function(n,i){var o=DR.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:lF(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:lF(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedWeightedInfNorm[i].variable,c=rO(sP(u,t.beta1),sP(s,1-t.beta1)),f=sP(l,t.beta2),d=nO(s),h=vP(f,d);u.assign(c),l.assign(h);var p=rO(sP(GO(a,r),GO(c,rO(h,t.epsilon))),o);o.assign(p)}})),t.iteration.assign(rO(t.iteration,1)),t.accBeta1.assign(sP(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&$M(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&$M(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(tO);MD.className="Adamax",qM(MD);var OD=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return yC(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=DR.registeredVariables[n];KM((function(){var e=rO(sP(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=ZM(eO(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(tO);OD.className="SGD",qM(OD);var PD=function(e){tR(n,e);var t=oR(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return gC(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=eO(a.momentum),a}return yC(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=DR.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:KM((function(){return lF(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&KM((function(){var e,n=rO(sP(t.m,i),o);e=t.useNesterov?rO(sP(t.c,rO(o,sP(n,t.m))),a):rO(sP(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&$M(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(OD);PD.className="Momentum",qM(PD);var FD=function(e){tR(n,e);var t=oR(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(gC(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=DR.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return yC(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=DR.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:KM((function(){return lF(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:KM((function(){return lF(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:KM((function(){return lF(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;KM((function(){var e=rO(sP(s,t.decay),sP(CP(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=rO(sP(n,t.decay),sP(o,1-t.decay)),l=GO(sP(o,t.learningRate),JP(uP(e,rO(CP(i),t.epsilon)))),c=rO(sP(u,t.momentum),l);s.assign(e),n.assign(i),u.assign(c);var f=uP(a,c);a.assign(f)}else{var d=rO(sP(s,t.decay),sP(CP(o),1-t.decay)),h=rO(sP(u,t.momentum),GO(sP(o,t.learningRate),JP(rO(d,t.epsilon))));s.assign(d),u.assign(h);var p=uP(a,h);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&$M(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&$M(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&$M(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(pd(this.accumulatedMeanSquares),pd(this.accumulatedMoments)),this.centered&&t.push.apply(t,pd(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(tO);FD.className="RMSProp",qM(FD);var DD=function(){function e(){gC(this,e)}return yC(e,null,[{key:"sgd",value:function(e){return new OD(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new PD(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new FD(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new ND(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new TD(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new MD(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new RD(e,t)}}]),e}(),LD={sgd:DD.sgd,momentum:DD.momentum,adadelta:DD.adadelta,adagrad:DD.adagrad,rmsprop:DD.rmsprop,adamax:DD.adamax,adam:DD.adam},zD="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function jD(){return new Promise((function(e){return zD((function(){return e()}))}))}function BD(e,t){var n=e[0].length;e.forEach((function(e,t){IC(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),IC(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)IC(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function WD(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function UD(e){return e<=30?e:$C(e,Math.floor(Math.sqrt(e)))}function VD(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function HD(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function GD(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function qD(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function XD(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function YD(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function KD(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===MC(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,l=a.slice();l.pop();for(var c=1,f=i;f<n;++f)c*=u[f],l.push(u[f]);var d=[].concat(pd(ZC(e.shape).map((function(e){return e/c}))),[1]).slice(0,i);return[l,o,c,d]}function $D(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:MC(t.shape)/u,sliceSize:o,strides:[].concat(pd(ZC(n.slice(0,a))),[1]),outputSize:MC(n)}}var ZD=1.7580993408473768,QD=1.0507009873554805,JD=.3275911,eL=.254829592,tL=-.284496736,nL=1.421413741,rL=-1.453152027,aL=1.061405429;function iL(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function oL(e,t){return{real:e[2*t],imag:e[2*t+1]}}function sL(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function uL(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var lL="->",cL=/->/g;function fL(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(cL,"").length)/lL.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(lL,'").'));var r=Pf(e.split(lL),2),a=r[0],i=r[1];IC(-1===a.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var o=a.split(","),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var u=[],l=function(e){var t=i[e];if(!o.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===u.indexOf(t)&&u.push(t)},c=0;c<i.length;++c)l(c);for(var f=0;f<a.length;++f){var d=a[f];-1===u.indexOf(d)&&","!==d&&u.push(d)}for(var h=new Array(o.length),p=0;p<s;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error("Found duplicate axes in input component ".concat(o[p],". ")+"Support for duplicate axes in input is not implemented yet.");h[p]=[];for(var v=0;v<o[p].length;++v)h[p].push(u.indexOf(o[p][v]))}for(var g=u.length,m=[],y=i.length;y<g;++y)m.push(y);return{allDims:u,summedDims:m,idDims:h}}function dL(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function hL(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:IC(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function pL(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,l=bC(gL(t,r[s]));try{for(l.s();!(u=l.n()).done;){var c=u.value;-1===o.indexOf(c)&&(a[s].push(c),o.push(c))}}catch(bfe){l.e(bfe)}finally{l.f()}}return{path:r,steps:a}}function vL(e){return e.every((function(e,t){return e===t}))}function gL(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function mL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)IC(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);IC(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}IC(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function yL(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function bL(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function xL(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function kL(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function wL(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],l=1,c=1,f=1,d=0;d<r;++d)u.push(e.shape[d]),l*=e.shape[d];for(var h=r;h<n;h++)u.push(e.shape[h]),c*=e.shape[h];for(var p=r;p<a;p++)u.push(t.shape[p]);for(var v=n+1;v<i;v++)u.push(e.shape[v]),f*=e.shape[v];return{batchSize:l,sliceSize:f,outerSize:c,dimSize:s,outputShape:u}}function SL(e){try{return e.map((function(e){return $T(e)}))}catch(bfe){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(bfe))}}function _L(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=rM(e,"int32"),i=rM([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}var CL={kernelName:gE,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(e,xF(aM(n,"float32"),-1))}}}},EL={kernelName:mE,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){var t=CP(aM(n,"float32")),r=JP(uP(eO(1),t));return AP(GO(e,r))}}}},AL={kernelName:yE,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){var t=JP(uP(CP(aM(n,"float32")),1));return GO(e,t)}}}},IL={kernelName:bE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1],i=OM(r.shape,a.shape);return{a:function(){var t=e,n=MM(r.shape,i);return n.length>0&&(t=lP(t,n)),SO(t,r.shape)},b:function(){var t=e,n=MM(a.shape,i);return n.length>0&&(t=lP(t,n)),SO(t,a.shape)}}}},TL={kernelName:xE,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},RL={kernelName:SE,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return lF(n)}}}},NL={kernelName:_E,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return lF(n)}}}},ML={kernelName:CE,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return GO(e,JP(uP(eO(1),CP(aM(n,"float32")))))}}}},OL={kernelName:EE,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){var t=JP(rO(eO(1),CP(aM(n,"float32"))));return GO(e,t)}}}},PL={kernelName:TE,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1],i=OM(r.shape,a.shape);return{a:function(){var t=rO(CP(r),CP(a)),n=sP(e,GO(a,t)),o=MM(r.shape,i);return o.length>0&&(n=lP(n,o)),SO(n,r.shape)},b:function(){var t=rO(CP(r),CP(a)),n=AP(sP(e,GO(r,t))),o=MM(a.shape,i);return o.length>0&&(n=lP(n,o)),SO(n,a.shape)}}}},FL={kernelName:AE,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return GO(e,rO(CP(aM(n,"float32")),1))}}}},DL={kernelName:IE,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return GO(e,uP(eO(1),CP(aM(n,"float32"))))}}}};var LL=qR({avgPool3dGrad_:function(e,t,n,r,a,i){var o=HR(e,"dy","avgPool3dGrad"),s=HR(t,"input","avgPool3dGrad"),u=o,l=s,c=!1;4===s.rank&&(c=!0,u=SO(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),l=SO(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),IC(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),IC(5===l.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(l.rank,".")})),wO("avgPool3dGrad",a,i);var f={dy:u,input:l},d={filterSize:n,strides:r,pad:a,dimRoundingMode:i},h=DR.runKernel(OE,f,d);return c?SO(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),zL={kernelName:ME,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return LL(e,r,a,i,o,s)}}}};var jL=qR({avgPoolGrad_:function(e,t,n,r,a){var i=HR(e,"dy","avgPoolGrad"),o=HR(t,"input","avgPoolGrad");IC(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,l=!1;3===o.rank&&(l=!0,s=SO(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=SO(i,[1,i.shape[0],i.shape[1],i.shape[2]])),IC(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),IC(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var c={dy:u,input:s},f={filterSize:n,strides:r,pad:a},d=DR.runKernel(NE,c,f);return l?SO(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),BL={kernelName:RE,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return jL(e,r,a,i,o)}}}},WL={kernelName:PE,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=Pf(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return dP(e,i,!1,!1)},b:function(){return dP(e,a,!0,!1)}}:o&&!s?{a:function(){return dP(i,e,!1,!0)},b:function(){return dP(a,e,!1,!1)}}:{a:function(){return dP(i,e,!0,!0)},b:function(){return dP(e,a,!0,!0)}}:{a:function(){return dP(e,i,!1,!0)},b:function(){return dP(a,e,!0,!1)}}}};var UL=qR({spaceToBatchND_:function(e,t,n){var r=HR(e,"x","spaceToBatchND");IC(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),IC(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),IC(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return DR.runKernel(VI,a,i)}}),VL={kernelName:FE,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return UL(e,r,a)}}}},HL={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],l=0;l<o.length;l++)o[l]>1&&u.push(l);return{x:function(){return lP(e,u,!0)}}}},GL={kernelName:zE,gradFunc:function(e){return{x:function(){return e.clone()}}}},qL={kernelName:jE,gradFunc:function(e){return{x:function(){return lF(e)}}}},XL={kernelName:BE,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return uF(fP(nP(r,a),sD(r,i)),e,lF(e))}}}},YL={kernelName:UE,inputsToSave:["x"],gradFunc:CL.gradFunc},KL={kernelName:VE,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=jC(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return QP(e,i,a).map((function(e){return function(){return e}}))}},$L={kernelName:HE,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Pf(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,l=n.dataFormat;return IC(bO(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return zO(a.shape,e,i,s,u,l)},filter:function(){return yF(a,e,i.shape,s,u,l)}}}},ZL={kernelName:qE,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=Pf(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return DO(e,i,o,s,u,1,l)},filter:function(){return yF(e,a,i.shape,o,s,u,l)}}}};var QL=qR({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=SO(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=SO(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),IC(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),IC(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),IC(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),IC(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),IC(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return DR.runKernel(YE,s,u)}}),JL={kernelName:XE,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;IC(bO(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=Pf(t,2),s=o[0],u=o[1];return{x:function(){return WO(s.shape,e,u,a,i)},filter:function(){return QL(s,e,u.shape,a,i)}}}};var ez=qR({sin_:function(e){var t={x:HR(e,"x","sin","float32")};return DR.runKernel(DI,t)}}),tz={kernelName:$E,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(AP(ez(aM(n,"float32"))),e)}}}};var nz=qR({sinh_:function(e){var t={x:HR(e,"x","sinh")};return DR.runKernel(LI,t)}}),rz={kernelName:ZE,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(nz(aM(n,"float32")),e)}}}};var az=qR({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=HR(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return DR.runKernel(JE,i,o)}}),iz={kernelName:JE,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=wP([a],r.rank),n=az(e,a,i,!o);return null!=t&&(n=dF(n,t)),n}}}},oz={kernelName:rA,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;IC(bO(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=Pf(t,2),l=u[0],c=u[1];return IC(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(l.rank,".")})),IC(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(c.rank,".")})),IC(l.shape[3]===c.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(l.shape[3],") must match the inChannels dimension ")+"in filter ".concat(c.shape[2],".")})),IC(xO(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),wO("depthwiseConv2d",i,o),{x:function(){return AF(l.shape,e,c,a,i,s,o)},filter:function(){return EF(l,e,c.shape,a,i,s,o)}}}},sz={kernelName:sA,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=Pf(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return DR.runKernel(uA,o,n)},filter:function(){return DR.runKernel(lA,s,n)}}}},uz={kernelName:dA,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:Pf(t,1)[0]};return{x:function(){return DR.runKernel(hA,n)}}}},lz={kernelName:pA,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0],r=sP(YO(AP(CP(n))),2/Math.sqrt(Math.PI));return{x:function(){return sP(e,r)}}}},cz={kernelName:gA,outputsToSave:[!0],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(e,n)}}}},fz={kernelName:mA,inputsToSave:["input"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{input:function(){return SO(e,n.shape)}}}},dz={kernelName:yA,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(e,YO(n))}}}},hz={kernelName:wA,gradFunc:function(e){return{x:function(){return lF(e)}}}},pz={kernelName:SA,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1],i=OM(r.shape,a.shape);return{a:function(){var t=GO(e,aM(a,"float32")),n=MM(r.shape,i);return n.length>0?SO(lP(t,n),r.shape):t},b:function(){var t=sP(e,aM(r,"float32")),n=MM(a.shape,i);n.length>0&&(t=SO(lP(t,n),a.shape));var o=CP(a);return AP(GO(t,aM(o,"float32")))}}}};var vz=qR({rsqrt_:function(e){var t={x:HR(e,"x","rsqrt","float32")};return DR.runKernel(RI,t)}}),gz={kernelName:_A,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=Pf(t,4),i=a[0],o=a[1],s=a[2],u=a[3],l=null==u?eO(1):u,c=MM(o.shape,i.shape),f=[];if(1===o.rank){for(var d=0;d<i.shape.length-1;++d)f.push(i.shape[d]);f.push(1)}var h=uP(i,o),p=sP(e,l),v=vz(rO(s,eO(r))),g=sP(sP(sP(v,v),v),eO(-.5));return{x:function(){return 1===o.rank?SO(sP(sP(e,$O(SO(v,[1,1,1,o.shape[0]]),f)),l),i.shape):SO(sP(sP(e,v),l),i.shape)},mean:function(){var e=sP(sP(v,eO(-1)),p);return 1===o.rank&&(e=lP(e,c)),SO(e,o.shape)},variance:function(){var e=sP(sP(g,h),p);return 1===o.rank&&(e=lP(e,c)),SO(e,o.shape)},scale:function(){var t=sP(h,v),n=sP(e,t);return 1===o.rank&&(n=lP(n,c)),SO(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=lP(t,c)),SO(t,o.shape)}}}};var mz=qR({unsortedSegmentSum_:function(e,t,n){var r=HR(e,"x","unsortedSegmentSum"),a=HR(t,"segmentIds","unsortedSegmentSum","int32");IC(PC(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return DR.runKernel(dT,i,o)}}),yz={kernelName:CA,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=Pf(t,2),a=r[0],i=r[1],o=n.axis,s=jC(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,l=t.slice(o,t.length).slice(1),c=l.length,f=bz(0,u),d=bz(u+1,u+1+c),h=xz([r,[n],l]),p=SO(e,h),v=SO(i,[n]),g=xz([[u],f,d]),m=dF(p,g),y=mz(m,v,a.shape[s]),b=SP(g);return y=dF(y,b)},indices:function(){return i}}}};function bz(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function xz(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var kz={kernelName:IA,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1];return{a:function(){return lF(r)},b:function(){return lF(a)}}}},wz={kernelName:TA,gradFunc:function(e){return{x:function(){return aM(e,"float32")}}}},Sz={kernelName:MA,gradFunc:function(e){return{x:function(){return lF(e)}}}},_z={kernelName:OA,gradFunc:function(e){return{x:function(){return lF(e)}}}},Cz={kernelName:PA,gradFunc:function(e){return{x:function(){return lF(e)}}}},Ez={kernelName:FA,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=n.alpha,i=tP(r,0);return{x:function(){return uF(i,e,sP(e,a))}}}},Az={kernelName:BA,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return GO(e,rO(n,1))}}}},Iz={kernelName:jA,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return GO(e,aM(n,"float32"))}}}},Tz={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=n.axis;return{logits:function(){var t=YO(r);return uP(e,sP(lP(e,a,!0),t))}}}};var Rz=qR({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return DR.runKernel(GA,s,u)}}),Nz={kernelName:HA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Pf(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,l=n.beta;return{x:function(){return Rz(a,i,e,o,s,u,l)}}}};function Mz(e,t,n,r){return t.rank<n.rank&&(t=SO(t,xP(t.shape,r))),e.rank<n.rank&&(e=SO(e,xP(e.shape,r))),{x:function(){return sP(e,aM(XO(n,t),e.dtype))}}}var Oz={kernelName:qA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=Mz(e,t[1],a,jC(r,a.shape));return{x:function(){return i.x()}}}};var Pz=qR({less_:function(e,t){var n=HR(e,"a","less","string_or_numeric"),r=HR(t,"b","less","string_or_numeric"),a=Pf(ER(n,r),2);n=a[0],r=a[1],OM(n.shape,r.shape);var i={a:n,b:r};return DR.runKernel(DA,i)}}),Fz={kernelName:XA,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1];return{a:function(){return sP(e,aM(nP(r,a),"float32"))},b:function(){return sP(e,aM(Pz(r,a),"float32"))}}}};var Dz=qR({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=HR(e,"dy","maxPool3dGrad"),u=HR(t,"input","maxPool3dGrad"),l=HR(n,"output","maxPool3dGrad"),c=s,f=u,d=l,h=!1;4===u.rank&&(h=!0,c=SO(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),f=SO(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),d=SO(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),IC(5===c.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(c.rank,".")})),IC(5===f.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(f.rank,".")})),IC(5===d.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(d.rank,".")})),wO("maxPool3dGrad",i,o);var p={dy:c,input:f,output:d},v={filterSize:r,strides:a,pad:i,dimRoundingMode:o},g=DR.runKernel(ZA,p,v);return h?SO(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),Lz={kernelName:$A,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Pf(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,l=n.dimRoundingMode;return{x:function(){return Dz(e,a,i,o,s,u,l)}}}};var zz=qR({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=HR(e,"dy","maxPoolGrad"),u=HR(t,"input","maxPoolGrad"),l=HR(n,"output","maxPoolGrad");IC(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),IC(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),IC(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),wO("maxPoolGrad",i,o);var c={dy:s,input:u,output:l},f={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return DR.runKernel(KA,c,f)}}),jz={kernelName:YA,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=Pf(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return zz(e,a,i,o,s,u)}}}},Bz={kernelName:JA,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=jC(n.axis,r.shape),i=MC(bP(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=SO(e,t);return GO(sP(n,NP(r.shape,"float32")),i)}}}},Wz={kernelName:eI,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=Pf(t,2),i=a[0],o=Mz(e,a[1],i,jC(r,i.shape));return{x:function(){return o.x()}}}},Uz={kernelName:tI,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1];return{a:function(){return sP(e,aM(sD(r,a),"float32"))},b:function(){return sP(e,aM(tP(r,a),"float32"))}}}},Vz={kernelName:nI,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return GP(e,a,r.shape)}}}},Hz={kernelName:rI,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1],i=OM(r.shape,a.shape);return{a:function(){var t=MM(r.shape,i);return t.length>0?SO(lP(e,t),r.shape):e},b:function(){var t=sP(e,AP(JO(GO(r,a)))),n=MM(a.shape,i);return n.length>0?SO(lP(t,n),a.shape):t}}}},Gz={kernelName:iI,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1],i=OM(r.shape,a.shape);return{a:function(){var t=sP(e,aM(a,"float32")),n=MM(r.shape,i);return n.length>0?SO(lP(t,n),r.shape):t},b:function(){var t=sP(e,aM(r,"float32")),n=MM(a.shape,i);return n.length>0?SO(lP(t,n),a.shape):t}}}},qz={kernelName:oI,gradFunc:function(e){return{x:function(){return AP(e)}}}},Xz={kernelName:dI,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return RP(n.shape,"float32")}}}},Yz={kernelName:fI,gradFunc:function(e){return{x:function(){return lF(e)}}}},Kz={kernelName:hI,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return iF(e,r).map((function(e){return function(){return e}}))}},$z={kernelName:pI,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return GP(e,a,r.shape)}}}},Zz={kernelName:vI,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=Pf(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=OM(o.shape,s.shape);return{a:function(){var t=aM(s,"float32"),n=sP(e,sP(t,vD(o,uP(t,eO(1))))),r=MM(o.shape,u);return r.length>0&&(n=lP(n,r)),SO(n,o.shape)},b:function(){var t=tP(o,0),n=uF(t,aP(o),lF(o)),r=sP(e,sP(i,n)),a=MM(s.shape,u);return a.length>0&&(r=lP(r,a)),SO(r,s.shape)}}}},Qz={kernelName:gI,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1],i=tP(r,0);return{x:function(){return uF(i,e,sP(e,a))},alpha:function(){var t=uF(i,lF(e),sP(e,r)),n=MM(a.shape,e.shape);return n.length>0&&(t=lP(t,n)),SO(t,a.shape)}}}};var Jz=qR({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=HR(e,"x","cumprod"),i={x:a},o={axis:t,exclusive:n,reverse:r};return DR.runKernel(QE,i,o)}});function ej(e,t,n){var r=e.shape.length,a=r-n.length,i=wP(n,r),o=e;null!=i&&(o=dF(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var l=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=SO(t,r),i=Jz(e,n,!0,!1),o=Jz(e,n,!0,!0),s=sP(i,o);return sP(a,s)}(o.reshape(s),t,a);if(l=l.reshape(o.shape),null!=i){var c=SP(i);l=dF(l,c)}return l}var tj={kernelName:mI,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=n.axis,i=[];return i=void 0===a||null===a?r.shape.map((function(e,t){return t})):"number"===typeof a?[a]:a,{x:function(){return ej(r,e,i)}}}},nj={kernelName:cA,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1],i=OM(r.shape,a.shape);return{a:function(){var t=GO(e,aM(a,"float32")),n=MM(r.shape,i);return n.length>0?SO(lP(t,n),r.shape):t},b:function(){var t=sP(e,aM(r,"float32")),n=MM(a.shape,i);n.length>0&&(t=SO(lP(t,n),a.shape));var o=CP(a);return AP(GO(t,aM(o,"float32")))}}}},rj={kernelName:xI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return GO(e,AP(CP(n)))}}}},aj={kernelName:AI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0],r=sP(sD(n,6),xF(n));return{x:function(){return sP(e,aM(r,"float32"))}}}},ij={kernelName:kI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(e,aM(xF(n),"float32"))}}}},oj={kernelName:wI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return SO(e,n.shape)}}}},sj={kernelName:CI,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Pf(t,1)[0]};return{images:function(){return DR.runKernel(EI,r,n)}}}},uj={kernelName:SI,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:Pf(t,1)[0]};return{images:function(){return DR.runKernel(_I,r,n)}}}},lj={kernelName:II,gradFunc:function(e,t,n){var r=jC(n.dims,e.shape);return{x:function(){return WP(e,r)}}}},cj={kernelName:TI,gradFunc:function(e){return{x:function(){return lF(e)}}}},fj={kernelName:RI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return AP(GO(e,sP(vD(n,1.5),2)))}}}};var dj=qR({logicalNot_:function(e){var t={x:HR(e,"x","logicalNot","bool")};return DR.runKernel(UA,t)}}),hj={kernelName:OI,inputsToSave:["condition"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{condition:function(){return aM(lF(n),"float32")},t:function(){return sP(e,aM(n,e.dtype))},e:function(){return sP(e,aM(dj(n),e.dtype))}}}},pj={kernelName:PI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){var t=tP(n,eO(0)),r=eO(ZD),a=eO(QD),i=sP(e,a),o=sP(sP(e,r),YO(aM(n,"float32")));return uF(t,i,o)}}}},vj={kernelName:jI,outputsToSave:[!0],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(e,sP(n,uP(eO(1),n)))}}}},gj={kernelName:zI,gradFunc:function(e){return{x:function(){return lF(e)}}}};var mj=qR({cos_:function(e){var t={x:HR(e,"x","cos","float32")};return DR.runKernel($E,t)}}),yj={kernelName:DI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(mj(aM(n,"float32")),e)}}}};var bj=qR({cosh_:function(e){var t={x:HR(e,"x","cosh","float32")};return DR.runKernel(ZE,t)}}),xj={kernelName:LI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(bj(aM(n,"float32")),e)}}}},kj={kernelName:FI,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=Pf(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=Pf(WM(r,a,i),2),u=s[0],l=s[1],c=[],f=0;f<e.rank;f++)c.push([u[f],o[f]-u[f]-l[f]]);return{x:function(){return OP(e,c)}}}},wj={kernelName:GI,outputsToSave:[!0],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=n.dim,i=sP(e,r);return{logits:function(){return uP(i,sP(lP(i,[a],true),r))}}}},Sj={kernelName:BI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(e,HP(n))}}}};var _j=qR({batchToSpaceND_:function(e,t,n){var r=HR(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));IC(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),IC(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),IC(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return DR.runKernel(FE,i,o)}}),Cj={kernelName:VI,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return _j(e,r,a)}}}},Ej={kernelName:HI,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return NO(e,r)}}}},Aj={kernelName:ZI,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1],i=eO(2);return{a:function(){return sP(e,sP(i,uP(r,a)))},b:function(){return sP(e,sP(i,uP(a,r)))}}}},Ij={kernelName:rT,inputsToSave:["a","b"],gradFunc:function(e,t){var n=Pf(t,2),r=n[0],a=n[1],i=OM(r.shape,a.shape);return{a:function(){var t=e,n=MM(r.shape,i);return n.length>0&&(t=lP(t,n)),SO(t,r.shape)},b:function(){var t=e,n=MM(a.shape,i);return n.length>0&&(t=lP(t,n)),SO(AP(t),a.shape)}}}},Tj={kernelName:oT,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=n.reps;return{x:function(){var t=lF(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=rO(t,GP(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=rO(t,GP(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var l=0;l<a[2];++l)t=rO(t,GP(e,[s*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var c=0;c<a[0];++c)for(var f=0;f<a[1];++f)for(var d=0;d<a[2];++d)for(var h=0;h<a[3];++h)t=rO(t,GP(e,[c*r.shape[0],f*r.shape[1],d*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}};for(var Rj=0,Nj=[CL,EL,AL,IL,TL,RL,NL,ML,OL,PL,FL,DL,zL,BL,WL,VL,HL,GL,qL,XL,YL,KL,ZL,$L,JL,tz,rz,iz,oz,sz,nj,uz,lz,cz,fz,dz,pz,hz,gz,yz,kz,wz,Sz,_z,Cz,Ez,Az,Iz,Tz,Nz,Oz,Oz,Fz,Lz,jz,Bz,Wz,Uz,Vz,Hz,Gz,qz,Xz,Yz,Kz,$z,$z,Zz,Qz,tj,rj,aj,ij,oj,sj,uj,lj,cj,fj,hj,pj,vj,gj,yj,xj,kj,wj,Sj,Cj,Cj,Ej,Ej,{kernelName:WI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return GO(e,sP(JP(aM(n,"float32")),2))}}}},Aj,{kernelName:QI,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(e,sP(aM(n,"float32"),2))}}}},{kernelName:pT,gradFunc:function(e){return{x:function(){return lF(e)}}}},Ij,{kernelName:UI,inputsToSave:["x"],gradFunc:function(e,t,n){var r=Pf(t,1)[0],a=r.shape.slice();jC(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=SO(e,a),o=sP(i,NP(r.shape,"float32"));return{x:function(){return o}}}},{kernelName:aT,inputsToSave:["x"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return GO(e,CP(mj(n)))}}}},{kernelName:iT,outputsToSave:[!0],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return sP(uP(eO(1),CP(n)),e)}}}},Tj,{kernelName:lT,gradFunc:function(e,t,n){var r=SP(n.perm);return{x:function(){return dF(e,r)}}}},{kernelName:fT,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return tF(e,r)}}}},{kernelName:dT,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=Pf(t,1)[0];return{x:function(){return function(e,t){for(var n=vP(t,lF(t)),r=eP(e,n),a=nP(t,eO(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=KO(a,o+1);a=fP(a,NP(r.shape,"bool"));var s=lF(r);return uF(a,r,s)}(e,n)}}}},{kernelName:hT,gradFunc:function(e){return{x:function(){return lF(e)}}}}];Rj<Nj.length;Rj++){AT(Nj[Rj])}gR().prototype.abs=function(){return this.throwIfDisposed(),nO(this)};var Mj=qR({acos_:function(e){var t={x:HR(e,"x","acos")};return DR.runKernel(mE,t)}});gR().prototype.acos=function(){return this.throwIfDisposed(),Mj(this)};var Oj=qR({acosh_:function(e){var t={x:HR(e,"x","acosh")};return DR.runKernel(yE,t)}});gR().prototype.acosh=function(){return this.throwIfDisposed(),Oj(this)},gR().prototype.add=function(e){return this.throwIfDisposed(),rO(this,e)},gR().prototype.all=function(e,t){return this.throwIfDisposed(),aO(this,e,t)},gR().prototype.any=function(e,t){return this.throwIfDisposed(),iO(this,e,t)},gR().prototype.argMax=function(e){return this.throwIfDisposed(),oO(this,e)};var Pj=qR({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=HR(e,"x","argMin"),r={x:n},a={axis:t};return DR.runKernel(_E,r,a)}});gR().prototype.argMin=function(e){return this.throwIfDisposed(),Pj(this,e)},gR().prototype.asScalar=function(){return this.throwIfDisposed(),IC(1===this.size,(function(){return"The array must have only 1 element."})),SO(this,[])},gR().prototype.asType=function(e){return this.throwIfDisposed(),aM(this,e)},gR().prototype.as1D=function(){return this.throwIfDisposed(),SO(this,[this.size])},gR().prototype.as2D=function(e,t){return this.throwIfDisposed(),SO(this,[e,t])},gR().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),SO(this,[e,t,n])},gR().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),SO(this,[e,t,n,r])},gR().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),SO(this,[e,t,n,r,a])};var Fj=qR({asin_:function(e){var t={x:HR(e,"x","asin")};return DR.runKernel(CE,t)}});gR().prototype.asin=function(){return this.throwIfDisposed(),Fj(this)};var Dj=qR({asinh_:function(e){var t={x:HR(e,"x","asinh")};return DR.runKernel(EE,t)}});gR().prototype.asinh=function(){return this.throwIfDisposed(),Dj(this)};var Lj=qR({atan_:function(e){var t={x:HR(e,"x","atan")};return DR.runKernel(AE,t)}});gR().prototype.atan=function(){return this.throwIfDisposed(),Lj(this)};var zj=qR({atan2_:function(e,t){var n=HR(e,"a","atan2"),r=HR(t,"b","atan2"),a=Pf(ER(n,r),2),i={a:n=a[0],b:r=a[1]};return DR.runKernel(TE,i)}});gR().prototype.atan2=function(e){return this.throwIfDisposed(),zj(this,e)};var jj=qR({atanh_:function(e){var t={x:HR(e,"x","atanh")};return DR.runKernel(IE,t)}});gR().prototype.atanh=function(){return this.throwIfDisposed(),jj(this)},gR().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),_O(this,e,t,n,r)},gR().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),_j(this,e,t)},gR().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),EO(this,e,t,n,r,a)},gR().prototype.broadcastTo=function(e){return this.throwIfDisposed(),sF(this,e)},gR().prototype.cast=function(e){return this.throwIfDisposed(),aM(this,e)};var Bj=qR({ceil_:function(e){var t={x:HR(e,"x","ceil","float32")};return DR.runKernel(jE,t)}});gR().prototype.ceil=function(){return this.throwIfDisposed(),Bj(this)},gR().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),RO(this,e,t)},gR().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof vR&&(e=[e]),NO([this].concat(pd(e)),t)},gR().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),LO(this,e,t,n,r,a,i)},gR().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),jO(this,e,t,n,r,a)},gR().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),DO(this,e,t,n,r,a,i)},gR().prototype.cos=function(){return this.throwIfDisposed(),mj(this)},gR().prototype.cosh=function(){return this.throwIfDisposed(),bj(this)},gR().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Jz(this,e,t,n)},gR().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),az(this,e,t,n)};var Wj=qR({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=HR(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];IC(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),IC(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),IC(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),IC(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return DR.runKernel(nA,s,u)}});gR().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Wj(this,e,t)},gR().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),VO(this,e,t,n,r,a,i)};var Uj=qR({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=HR(e,"x","dilation2d"),s=HR(t,"filter","dilation2d");IC(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),IC(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),IC("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,l=!1;3===o.rank&&(u=SO(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0);var c={x:u,filter:s},f={strides:n,pad:r,dilations:a},d=DR.runKernel(sA,c,f);return l?SO(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});gR().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),Uj(this,e,t,n,r,a)};var Vj=qR({divNoNan_:function(e,t){var n=HR(e,"a","div"),r=HR(t,"b","div"),a=Pf(ER(n,r),2);n=a[0],r=a[1];var i=GO(n,r),o=lF(i),s=XO(r,o);return uF(s,o,i)}});gR().prototype.divNoNan=function(e){return this.throwIfDisposed(),Vj(this,e)},gR().prototype.div=function(e){return this.throwIfDisposed(),GO(this,e)};var Hj=qR({dot_:function(e,t){var n=HR(e,"t1","dot"),r=HR(t,"t2","dot");IC((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(IC(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=SO(n,[1,-1]),s=SO(r,[-1,1]),u=dP(o,s);return SO(u,[])}if(1===n.rank&&2===r.rank){var l=SO(n,[1,-1]),c=SO(r,[r.shape[0],r.shape[1]]),f=dP(l,c);return SO(f,[f.size])}if(2===n.rank&&1===r.rank){var d=SO(r,[-1,1]),h=dP(n,d);return SO(h,[h.size])}var p=SO(r,[r.shape[0],r.shape[1]]);return dP(n,p)}});gR().prototype.dot=function(e){return this.throwIfDisposed(),Hj(this,e)},gR().prototype.elu=function(){return this.throwIfDisposed(),qO(this)},gR().prototype.equal=function(e){return this.throwIfDisposed(),XO(this,e)};var Gj=qR({erf_:function(e){var t=HR(e,"x","erf");IC("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=aM(t,"float32"));var n={x:t};return DR.runKernel(pA,n)}});gR().prototype.erf=function(){return this.throwIfDisposed(),Gj(this)};var qj=qR({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return mD(e,"euclidean",t,n)}});gR().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),qj(this,e,t)},gR().prototype.exp=function(){return this.throwIfDisposed(),YO(this)},gR().prototype.expandDims=function(e){return this.throwIfDisposed(),KO(this,e)};var Xj=qR({expm1_:function(e){var t={x:HR(e,"x","expm1")};return DR.runKernel(yA,t)}});gR().prototype.expm1=function(){return this.throwIfDisposed(),Xj(this)},gR().prototype.fft=function(){return this.throwIfDisposed(),pF(this)},gR().prototype.flatten=function(){return this.throwIfDisposed(),SO(this,[this.size])},gR().prototype.floor=function(){return this.throwIfDisposed(),JO(this)},gR().prototype.floorDiv=function(e){return this.throwIfDisposed(),HO(this,e)},gR().prototype.gather=function(e,t){return this.throwIfDisposed(),eP(this,e,t)},gR().prototype.greaterEqual=function(e){return this.throwIfDisposed(),nP(this,e)},gR().prototype.greater=function(e){return this.throwIfDisposed(),tP(this,e)},gR().prototype.ifft=function(){return this.throwIfDisposed(),gF(this)},gR().prototype.irfft=function(){return this.throwIfDisposed(),mF(this)};var Yj=qR({isFinite_:function(e){var t={x:HR(e,"x","isFinite")};return DR.runKernel(MA,t)}});gR().prototype.isFinite=function(){return this.throwIfDisposed(),Yj(this)};var Kj=qR({isInf_:function(e){var t={x:HR(e,"x","isInf")};return DR.runKernel(OA,t)}});gR().prototype.isInf=function(){return this.throwIfDisposed(),Kj(this)};var $j=qR({isNaN_:function(e){var t={x:HR(e,"x","isNaN")};return DR.runKernel(PA,t)}});gR().prototype.isNaN=function(){return this.throwIfDisposed(),$j(this)},gR().prototype.leakyRelu=function(e){return this.throwIfDisposed(),rP(this,e)},gR().prototype.lessEqual=function(e){return this.throwIfDisposed(),sD(this,e)},gR().prototype.less=function(e){return this.throwIfDisposed(),Pz(this,e)};var Zj=qR({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=HR(e,"x","localResponseNormalization");IC(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),IC(PC(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=SO(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},l={depthRadius:t,bias:n,alpha:r,beta:a},c=DR.runKernel(HA,u,l);return s?SO(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});gR().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Zj(this,e,t,n,r)};var Qj=qR({logSigmoid_:function(e){var t=HR(e,"x","logSigmoid"),n=JM((function(e){return{value:AP(ZP(AP(e))),gradFunc:function(t){return sP(t,HP(AP(e)))}}}));return n(t)}});gR().prototype.logSigmoid=function(){return this.throwIfDisposed(),Qj(this)},gR().prototype.logSoftmax=function(e){return this.throwIfDisposed(),cP(this,e)},gR().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),CD(this,e,t)},gR().prototype.log=function(){return this.throwIfDisposed(),aP(this)},gR().prototype.log1p=function(){return this.throwIfDisposed(),iP(this)},gR().prototype.logicalAnd=function(e){return this.throwIfDisposed(),fP(this,e)},gR().prototype.logicalNot=function(){return this.throwIfDisposed(),dj(this)};var Jj=qR({logicalOr_:function(e,t){var n=HR(e,"a","logicalOr","bool"),r=HR(t,"b","logicalOr","bool");OM(n.shape,r.shape);var a={a:n,b:r};return DR.runKernel(VA,a)}});gR().prototype.logicalOr=function(e){return this.throwIfDisposed(),Jj(this,e)};var eB=qR({logicalXor_:function(e,t){var n=HR(e,"a","logicalXor","bool"),r=HR(t,"b","logicalXor","bool");return OM(n.shape,r.shape),fP(Jj(e,t),dj(fP(e,t)))}});gR().prototype.logicalXor=function(e){return this.throwIfDisposed(),eB(this,e)},gR().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),dP(this,e,t,n)},gR().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),hP(this,e,t,n,r)},gR().prototype.max=function(e,t){return this.throwIfDisposed(),oP(this,e,t)},gR().prototype.maximum=function(e){return this.throwIfDisposed(),vP(this,e)},gR().prototype.mean=function(e,t){return this.throwIfDisposed(),gP(this,e,t)},gR().prototype.min=function(e,t){return this.throwIfDisposed(),pD(this,e,t)},gR().prototype.minimum=function(e){return this.throwIfDisposed(),mP(this,e)};var tB=qR({mirrorPad_:function(e,t,n){IC("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=HR(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");IC(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){IC(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),IC(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return DR.runKernel(nI,u,s)}});gR().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),tB(this,e,t)};var nB=qR({mod_:function(e,t){var n=HR(e,"a","mod"),r=HR(t,"b","mod"),a=Pf(ER(n,r),2),i={a:n=a[0],b:r=a[1]};return DR.runKernel(rI,i)}});gR().prototype.mod=function(e){return this.throwIfDisposed(),nB(this,e)},gR().prototype.mul=function(e){return this.throwIfDisposed(),sP(this,e)},gR().prototype.neg=function(){return this.throwIfDisposed(),AP(this)},gR().prototype.norm=function(e,t,n){return this.throwIfDisposed(),mD(this,e,t,n)},gR().prototype.notEqual=function(e){return this.throwIfDisposed(),IP(this,e)},gR().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),TP(this,e,t,n)},gR().prototype.onesLike=function(){return this.throwIfDisposed(),MP(this)},gR().prototype.pad=function(e,t){return this.throwIfDisposed(),OP(this,e,t)};var rB=qR({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=HR(e,"x","maxPool"),u=s,l=!1;3===s.rank&&(l=!0,u=SO(s,[1,s.shape[0],s.shape[1],s.shape[2]])),IC(xO(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var c,f=uO(u.shape,t,i,a,r),d=[f.dilationHeight,f.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([f.filterHeight,f.filterWidth],d):[[0,0],[0,0]];var h=1===d[0]&&1===d[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),l=t.map((function(e,t){return[0,o[t]]}));return[u,l]}([f.inHeight,f.inWidth],d,c),v=Pf(p,2),g=v[0],m=v[1],y=h?r:"valid",b=h?u:UL(u,d,g),x=("avg"===n?function(){return _O(b,t,i,y,o)}:function(){return hP(b,t,i,y,o)})(),k=h?x:_j(x,d,m);return l?SO(k,[k.shape[1],k.shape[2],k.shape[3]]):k}});gR().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),rB(this,e,t,n,r,a,i)},gR().prototype.pow=function(e){return this.throwIfDisposed(),vD(this,e)},gR().prototype.prelu=function(e){return this.throwIfDisposed(),PP(this,e)};var aB=qR({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=HR(e,"x","prod");"bool"===r.dtype&&(r=aM(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return DR.runKernel(mI,a,i)}});gR().prototype.prod=function(e,t){return this.throwIfDisposed(),aB(this,e,t)};var iB=qR({reciprocal_:function(e){var t={x:HR(e,"x","reciprocal")};return DR.runKernel(xI,t)}});gR().prototype.reciprocal=function(){return this.throwIfDisposed(),iB(this)},gR().prototype.relu=function(){return this.throwIfDisposed(),BP(this)},gR().prototype.relu6=function(){return this.throwIfDisposed(),bF(this)},gR().prototype.reshapeAs=function(e){return this.throwIfDisposed(),SO(this,e.shape)},gR().prototype.reshape=function(e){return this.throwIfDisposed(),SO(this,e)},gR().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),aD(this,e,t,n)},gR().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),iD(this,e,t,n)},gR().prototype.reverse=function(e){return this.throwIfDisposed(),WP(this,e)},gR().prototype.rfft=function(){return this.throwIfDisposed(),vF(this)},gR().prototype.round=function(){return this.throwIfDisposed(),uD(this)},gR().prototype.rsqrt=function(){return this.throwIfDisposed(),vz(this)},gR().prototype.selu=function(){return this.throwIfDisposed(),UP(this)},gR().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),VP(this,e,t,n,r,a,i)},gR().prototype.sigmoid=function(){return this.throwIfDisposed(),HP(this)};var oB=qR({sign_:function(e){var t={x:HR(e,"x","sign")};return DR.runKernel(zI,t)}});gR().prototype.sign=function(){return this.throwIfDisposed(),oB(this)},gR().prototype.sin=function(){return this.throwIfDisposed(),ez(this)},gR().prototype.sinh=function(){return this.throwIfDisposed(),nz(this)},gR().prototype.slice=function(e,t){return this.throwIfDisposed(),GP(this,e,t)},gR().prototype.softmax=function(e){return this.throwIfDisposed(),$P(this,e)},gR().prototype.softplus=function(){return this.throwIfDisposed(),ZP(this)},gR().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),UL(this,e,t)},gR().prototype.split=function(e,t){return this.throwIfDisposed(),QP(this,e,t)},gR().prototype.sqrt=function(){return this.throwIfDisposed(),JP(this)},gR().prototype.square=function(){return this.throwIfDisposed(),CP(this)},gR().prototype.squaredDifference=function(e){return this.throwIfDisposed(),SD(this,e)},gR().prototype.squeeze=function(e){return this.throwIfDisposed(),eF(this,e)},gR().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof vR?[this,e]:[this].concat(pd(e));return tF(n,t)},gR().prototype.step=function(e){return this.throwIfDisposed(),xF(this,e)};var sB=qR({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=HR(e,"x","stridedSlice","string_or_numeric"),c={x:l},f={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return DR.runKernel(JI,c,f)}});gR().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),sB(this,e,t,n,r,a,i,o,s)},gR().prototype.sub=function(e){return this.throwIfDisposed(),uP(this,e)},gR().prototype.sum=function(e,t){return this.throwIfDisposed(),lP(this,e,t)};var uB=qR({tan_:function(e){var t={x:HR(e,"x","tan","float32")};return DR.runKernel(aT,t)}});gR().prototype.tan=function(){return this.throwIfDisposed(),uB(this)},gR().prototype.tanh=function(){return this.throwIfDisposed(),nF(this)},gR().prototype.tile=function(e){return this.throwIfDisposed(),$O(this,e)},gR().prototype.toBool=function(){return this.throwIfDisposed(),aM(this,"bool")},gR().prototype.toFloat=function(){return this.throwIfDisposed(),aM(this,"float32")},gR().prototype.toInt=function(){return this.throwIfDisposed(),aM(this,"int32")};var lB=qR({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=HR(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=DR.runKernel(sT,i,o),u=Pf(s,2),l=u[0],c=u[1];return{values:l,indices:c}}});gR().prototype.topk=function(e,t){return this.throwIfDisposed(),lB(this,e,t)},gR().prototype.transpose=function(e){return this.throwIfDisposed(),dF(this,e)};var cB=qR({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=HR(e,"x","unique","string_or_numeric");IC(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=DR.runKernel(cT,r,a),o=Pf(i,2),s=o[0],u=o[1];return{values:s,indices:u}}});function fB(e,t,n){return fB=rR()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&px(a,n.prototype),a},fB.apply(null,arguments)}function dB(e){var t="function"===typeof Map?new Map:void 0;return dB=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return fB(e,arguments,nR(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),px(n,e)},dB(e)}gR().prototype.unique=function(e){return this.throwIfDisposed(),cB(this,e)},gR().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),mz(this,e,t)},gR().prototype.unstack=function(e){return this.throwIfDisposed(),iF(this,e)},gR().prototype.where=function(e,t){return this.throwIfDisposed(),uF(e,this,t)},gR().prototype.zerosLike=function(){return this.throwIfDisposed(),lF(this)};var hB=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this,e),Object.setPrototypeOf(aR(r),n.prototype),r}return yC(n)}(dB(Error)),pB=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this,e),Object.setPrototypeOf(aR(r),n.prototype),r}return yC(n)}(dB(Error)),vB=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this,e),Object.setPrototypeOf(aR(r),n.prototype),r}return yC(n)}(dB(Error)),gB=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this,e),Object.setPrototypeOf(aR(r),n.prototype),r}return yC(n)}(dB(Error)),mB=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this,e),Object.setPrototypeOf(aR(r),n.prototype),r}return yC(n)}(dB(Error)),yB=(Error,function(){function e(t){gC(this,e),this.maxEntries=t||100,this.cache=new Map}return yC(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function bB(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function xB(e,t){if(!e)throw new mB(t)}function kB(e,t){var n,r=0,a=bC(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(bfe){a.e(bfe)}finally{a.f()}return r}function wB(e){return 1===e.length?e[0]:e}function SB(e){return Array.isArray(e)?e:[e]}function _B(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function CB(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var EB={};function AB(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function IB(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return IB(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?IB(a):e[r]=a.value)}}function TB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in EB)i=EB[o];else if(null==(i=t[o]))throw new vB("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new vB("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var u,l,c=s.className;if(c in n){var f=Pf(n[c],2);u=f[0],l=f[1]}else if(c in EB){var d=Pf(EB.className,2);u=d[0],l=d[1]}else if(c in t){var h=Pf(t[c],2);u=h[0],l=h[1]}if(null==u)throw new vB("Unknown ".concat(r,": ").concat(c,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){for(var p={},v=0,g=Object.keys(EB);v<g.length;v++){var m=g[v];p[m]=EB[m]}for(var y=0,b=Object.keys(n);y<b.length;y++){var x=b[y];p[x]=n[x]}var k=s.config;k.customObjects=p;for(var w=Object.assign({},EB),S=0,_=Object.keys(n);S<_.length;S++){var C=_[S];EB[C]=n[C]}IB(s.config);var E=l(u,s.config,n,a);return EB=Object.assign({},w),E}for(var A=Object.assign({},EB),I=0,T=Object.keys(n);I<T.length;I++){var R=T[I];EB[R]=n[R]}var N=new u(s.config);return EB=Object.assign({},A),N}function RB(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function NB(e){if(null==e)return e;var t,n=[],r=bC(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(bfe){r.e(bfe)}finally{r.f()}return n}function MB(e){if(null==e)throw new vB("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function OB(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new vB("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function PB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return xB(n>=0),xB(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function FB(e,t){Array.isArray(e)?(IC(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return FB(e,"element ".concat(n+1," of ").concat(t))}))):IC(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(DB(e),".")}))}function DB(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return DB(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function LB(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var zB=0;function jB(){return zB++}var BB={};function WB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in BB||(BB[e]=0),BB[e]+=1,e+BB[e].toString()}var UB=["channelsFirst","channelsLast"],VB=["nearest","bilinear"],HB=["valid","same","causal"],GB=["max","avg"],qB=["sum","mul","concat","ave"],XB=new Map;function YB(e){OB(UB,"DataFormat",e)}function KB(e){OB(HB,"PaddingMode",e)}function $B(e){OB(GB,"PoolMode",e)}var ZB=[];function QB(e,t){ZB.push(e);try{var n=t();return ZB.pop(),n}catch(r){throw ZB.pop(),r}}function JB(e){if(!rW(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===ZB.length?"":ZB.join("/")+"/")+e}function eW(e){if(!rW(e))throw new Error("Not a valid tensor name: '"+e+"'");XB.has(e)||XB.set(e,0);var t=XB.get(e);if(XB.set(e,XB.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return XB.set(n,1),n}return e}var tW,nW=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function rW(e){return!!e.match(nW)}function aW(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function iW(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function oW(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function sW(e,t){if(t<e)throw new vB("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function uW(){return null==tW&&(tW=DR.backend.epsilon()),tW}function lW(e,t){return aM(e,t)}function cW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),SO(e,n)}function fW(e){var t=[aW(e.shape)];return SO(e,t)}function dW(e,t,n){return KM((function(){switch(e.rank){case 1:return qP(e,t,n);case 2:return XP(e,[t,0],[n,e.shape[1]]);case 3:return YP(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return KP(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return GP(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return GP(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new vB("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function hW(e,t,n){return KM((function(){switch(e.rank){case 1:return qP(e,t,n);case 2:return XP(e,[0,t],[e.shape[0],n]);case 3:return YP(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return KP(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new vB("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function pW(e,t,n,r){return KM((function(){switch(e.rank){case 1:return qP(e,t,n);case 2:switch(r){case 1:return dW(e,t,n);case 2:return hW(e,t,n);default:throw new vB("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return dW(e,t,n);case 2:return YP(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return hW(e,t,n);default:throw new vB("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return dW(e,t,n);case 2:return KP(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return KP(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return hW(e,t,n);default:throw new vB("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new vB("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function vW(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),NO(e,n)}function gW(e,t){switch(e.rank){case 1:return MO([e,t]);case 2:return OO([e,t],0);case 3:return PO([e,t],0);case 4:return FO([e,t],0);default:throw new vB("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function mW(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new vB("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return $O(e,t)}function yW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return zP(e,t,n,r,a)}function bW(e,t,n,r){if(e.rank<2||t.rank<2)throw new gB("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new gB("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return IF({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wW(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=SO(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),l=[].concat(pd(o),[s]),c=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=SO(dF(t,c),[u,-1]);var f=[].concat(pd(a),pd(l));return SO(IF({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?wW(e.rank,r,"channelsLast"):null,activation:n}),f)}function xW(e,t,n){return KM((function(){return t=Array.isArray(t)?rF(t,"int32"):aM(t,"int32"),eP(e,t,n)}))}function kW(e){return sP(e,e)}function wW(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new vB("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?SO(t,[1,r[0],1,1,1]):SO(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?SO(t,[1,1,1,1,r[0]]):SO(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?SO(t,[1,r[0],1,1]):SO(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?SO(t,[1,1,1,r[0]]):SO(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?SO(t,[1,r[0],1]):SO(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?SO(t,[1,1,r[0]]):SO(t,[1].concat(r))}else if(e<3)return t;throw new vB("Unsupported input rank by biasAdd: ".concat(t.rank))}function SW(e,t,n){return KM((function(){return null==n&&(n="channelsLast"),YB(n),rO(e,wW(e.rank,t,n))}))}function _W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new gB("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return qO(e)}function CW(e,t,n,r){return KM((function(){return hF(e,t,n,r)}))}function EW(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var AW=["fanIn","fanOut","fanAvg"],IW=["normal","uniform","truncatedNormal"];var TW=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(HM),RW=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e,t){return RP(e,t)}}]),n}(TW);RW.className="Zeros",qM(RW);var NW=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e,t){return NP(e,t)}}]),n}(TW);NW.className="Ones",qM(NW);var MW=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),r=t.call(this),"object"!==typeof e)throw new vB("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new vB("config must have value set but got ".concat(e));return r.value=e.value,r}return yC(n,[{key:"apply",value:function(e,t){var n=this;return KM((function(){return sP(eO(n.value),NP(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(TW);MW.className="Constant",qM(MW);var OW=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return yC(n,[{key:"apply",value:function(e,t){return jP(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(TW);OW.className="RandomUniform",qM(OW);var PW=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return yC(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gB("randomNormal does not support dType ".concat(t,"."));return yW(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(TW);PW.className="RandomNormal",qM(PW);var FW=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return yC(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gB("truncatedNormal does not support dType ".concat(t,"."));return aF(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(TW);FW.className="TruncatedNormal",qM(FW);var DW=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return yC(n,[{key:"apply",value:function(e,t){var n=this;return KM((function(){if(2!==e.length||e[0]!==e[1])throw new vB("Identity matrix initializer can only be used for 2D square matrices.");return sP(n.gain,ZO(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(TW);DW.className="Identity",qM(DW);var LW=function(e){tR(n,e);var t=oR(n);function n(e){var r,a;if(gC(this,n),r=t.call(this),e.scale<0)throw new vB("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,OB(AW,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){OB(IW,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return yC(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(YB(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=aW(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=aW(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=aW(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new gB("".concat(this.getClassName()," does not support dType ").concat(t,"."));return aF(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return jP(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(TW);LW.className="VarianceScaling",qM(LW);var zW=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return yC(n,[{key:"getClassName",value:function(){return LW.className}}]),n}(LW);zW.className="GlorotUniform",qM(zW);var jW=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return yC(n,[{key:"getClassName",value:function(){return LW.className}}]),n}(LW);jW.className="GlorotNormal",qM(jW);var BW=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return yC(n,[{key:"getClassName",value:function(){return LW.className}}]),n}(LW);BW.className="HeNormal",qM(BW);var WW=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return yC(n,[{key:"getClassName",value:function(){return LW.className}}]),n}(LW);WW.className="HeUniform",qM(WW);var UW=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return yC(n,[{key:"getClassName",value:function(){return LW.className}}]),n}(LW);UW.className="LeCunNormal",qM(UW);var VW=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return yC(n,[{key:"getClassName",value:function(){return LW.className}}]),n}(LW);VW.className="LeCunNormal",qM(VW);var HW=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new gB("Random seed is not implemented for Orthogonal Initializer yet.");return r}return yC(n,[{key:"apply",value:function(e,t){var n=this;return KM((function(){if(e.length<2)throw new gB("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than 2000 (".concat(e[0]*e[1],") elements: ")+"Slowness may result.");var t=yW(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=ID.gramSchmidt(t);return e[0]>e[1]&&(r=dF(r)),sP(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(TW);HW.className="Orthogonal",qM(HW);var GW={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function qW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TB(e,GM.getMap().classNameMap,t,"initializer")}function XW(e){return AB(e)}function YW(e){if("string"===typeof e){var t=e in GW?GW[e]:e;if("GlorotNormal"===t)return new jW;if("GlorotUniform"===t)return new zW;if("HeNormal"===t)return new BW;if("HeUniform"===t)return new WW;if("LeCunNormal"===t)return new UW;if("LeCunUniform"===t)return new VW;var n={};return n.className=t,n.config={},qW(n)}return e instanceof TW?e:qW(e)}function KW(e){return Array.isArray(e)&&Array.isArray(e[0])}function $W(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function ZW(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new vB("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function QW(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new vB("Expected exactly 1 Shape; got ".concat(e.length))}return e}function JW(e){var t,n=0,r=bC(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(bfe){r.e(bfe)}finally{r.f()}return n}var eU="Variable",tU=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eU,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;gC(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=jB(),r=null==r?eU:r,this.originalName=JB(r),this.name=eW(this.originalName),this.trainable_=a,this.constraint=i,this.val=oF(t,this.trainable_,this.name,this.dtype)}return yC(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function nU(e){return e.map((function(e){return e.read()}))}function rU(e){e.forEach((function(e){e[0].write(e[1])}))}var aU=yC((function e(t){gC(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),iU=yC((function e(t,n,r,a,i,o,s){gC(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=jB(),null!=o&&(this.originalName=JB(o),this.name=eW(this.originalName)),this.rank=n.length})),oU=0,sU=function(){function e(t,n){gC(this,e),this.callArgs=n,this.id=oU++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=bC(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(bfe){a.e(bfe)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return yC(e,[{key:"getConfig",value:function(){var e,t=[],n=bC(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(bfe){n.e(bfe)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),uU=0,lU=function(e){tR(n,e);var t=oR(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};gC(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=uU++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=_B(i)+"_"+WB(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return yC(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new pB("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new vB("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return wB(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return wB(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new hB("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new hB("Layer ".concat(this.name)+" is not connected, no input to return.");return wB(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new hB("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new hB("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return wB(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=SB(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=SB(this.inputSpec);if(e.length!==t.length)throw new vB("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new vB("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new vB("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new vB("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new vB("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),l=a.axes[s],c=u>=0?o[u]:o[o.length+u];if(null!=l&&-1===[l,null].indexOf(c))throw new vB("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(l," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var f=0;f<a.shape.length;++f){var d=a.shape[f],h=r.shape[f];if(null!=d&&null!=h&&d!==h)throw new vB("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=SB(e),i=!0,o=bC(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof iU)){i=!1;break}}}catch(bfe){o.e(bfe)}finally{o.f()}var s,u=!0,l=bC(a);try{for(l.s();!(s=l.n()).done;){if(s.value instanceof iU){u=!1;break}}}catch(bfe){l.e(bfe)}finally{l.f()}if(i===u)throw new vB("Arguments to apply() must be all SymbolicTensors or all Tensors");return QB(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=bC(SB(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(bfe){o.e(bfe)}finally{o.f()}n.build(wB(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var l,c=n.call(e,t),f=[],d=bC(SB(c));try{for(d.s();!(l=d.n()).done;){var h=l.value;-1!==a.indexOf(h)&&(h=h.clone()),f.push(h)}}catch(bfe){d.e(bfe)}finally{d.f()}if(c=wB(f),null!=n.activityRegularizer)throw new gB("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}var p,v=function(e){e=SB(e);var t,n=[],r=bC(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(bfe){r.e(bfe)}finally{r.f()}return wB(n)}(e),g=n.computeOutputShape(v),m="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?v[0]:v),p=null!=g&&g.length>0&&Array.isArray(g[0])?g.map((function(r,a){return new iU(m,r,n,SB(e),t,n.name,a)})):new iU(m,g,n,SB(e),t,n.name),n.addInboundNode(e,p,null,null,v,g,t),n._refCount++,null!=n.activityRegularizer)throw new gB("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new hB("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=bC(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(bfe){n.e(bfe)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new hB("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new pB("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return JW(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return nU(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;KM((function(){var n=t.weights;if(n.length!==e.length)throw new vB('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=nU(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!OC(o.shape,u.shape))throw new vB("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}rU(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new vB("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():YW("zeros"));var u=r.apply(t,n),l=new tU(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(l.read())})),null==i&&(i=!0),i?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=SB(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,pd(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=SB(e);t=SB(t),n=SB(n),r=SB(r),a=$W(a),i=$W(i);var u,l=[],c=[],f=[],d=bC(s);try{for(d.s();!(u=d.n()).done;){var h=u.value;l.push(h.sourceLayer),c.push(h.nodeIndex),f.push(h.tensorIndex)}}catch(bfe){d.e(bfe)}finally{d.f()}new sU({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:f,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(HM);function cU(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=bC(cU(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(bfe){s.e(bfe)}finally{s.f()}}return a}var fU=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:WB("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new vB("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new vB("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new vB("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new iU(r.dtype,r.batchInputShape,aR(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new sU({outboundLayer:aR(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return yC(n,[{key:"apply",value:function(e,t){throw new vB("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(lU);fU.className="InputLayer",qM(fU);var dU=function(){function e(t){if(gC(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=bC(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(bfe){a.e(bfe)}finally{a.f()}}}return yC(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new vB("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return aM(t,e.dtype)}catch(bfe){throw new vB("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof iU){if(null==this.id2Value[e.id])throw new vB("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new vB("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof iU){if(null==this.id2Value[e.id])throw new vB("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new vB("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&$M(this.id2Mask)}}]),e}(),hU=new yB,pU=new yB;function vU(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),l=[],c=t.names(),f=bC(u);try{for(f.s();!(a=f.n()).done;){var d=a.value;-1!==c.indexOf(d)?l.push(t.getValue(d)):l.push(null)}}catch(bfe){f.e(bfe)}finally{f.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var h,p=u.join(",")+"|"+t.names().sort().join(","),v=hU.get(p);if(null==v){var g=function(e,t){IC(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=mU(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=bC(e);try{for(s.s();!(i=s.n()).done;){var u,l=mU(i.value,t),c=l.sorted,f=l.recipientMap,d=bC(c);try{for(d.s();!(u=d.n()).done;){var h=u.value;o.has(h.name)||(n.push(h),o.add(h.name))}}catch(bfe){d.e(bfe)}finally{d.f()}var p=function(e){null==r[e]&&(r[e]=new Set),f[e].forEach((function(t){return r[e].add(t)}))};for(var v in f)p(v)}}catch(bfe){s.e(bfe)}finally{s.f()}}return{sorted:n,recipientCounts:gU(r)}}(s,t);v=g.sorted,h=g.recipientCounts,hU.put(p,v),pU.put(p,h)}h={},i||Object.assign(h,pU.get(p));for(var m=new dU(t),y=0;y<v.length;++y){if(null!=r){var b=YM().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=v[y],k=x.sourceLayer;if(!(k instanceof fU)){var w,S=[],_=[],C=[],E=!1,A=bC(x.inputs);try{for(A.s();!(w=A.n()).done;){var I=w.value,T=m.getValue(I),R=m.getMask(I);S.push(T),_.push(R),null!=R&&(E=!0),i||(h[I.name]--,0!==h[I.name]||t.hasKey(I)||-1!==u.indexOf(I.name)||T.isDisposed||!0===I.sourceLayer.stateful||C.push(T))}}catch(bfe){A.e(bfe)}finally{A.f()}E&&((n=n||{}).mask=_[0]);var N=SB(k.apply(S,n)),M=null;k.supportsMasking&&(M=k.computeMask(S,_));for(var O=yU(x),P=Array.isArray(O)?O:[O],F=0;F<P.length;++F){m.hasKey(P[F])||m.add(P[F],N[F],Array.isArray(M)?M[0]:M);var D=u.indexOf(P[F].name);-1!==D&&(l[D]=N[F])}i||$M(C)}}return m.disposeMasks(),o?l:l[0]}function gU(e){var t={};for(var n in e)t[n]=e[n].size;return t}function mU(e,t){var n,r=new Set,a=[],i={},o=bC(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(bfe){o.e(bfe)}finally{o.f()}var u=[],l=[];for(u.push(e);u.length>0;){var c=u[u.length-1];if(r.has(c.name))u.pop();else{var f=l[l.length-1]===u.length-1;if(0===c.inputs.length||f)u.pop(),a.push(c),r.add(c.name),f&&l.pop();else{l.push(u.length-1);var d,h=bC(c.inputs);try{for(h.s();!(d=h.n()).done;){var p=d.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(c.name),r.has(p.name)||u.push(p)}}catch(bfe){h.e(bfe)}finally{h.f()}}}}return{sorted:a,recipientMap:i}}function yU(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=bC(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(bfe){i.e(bfe)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function bU(e,t){return KM((function(){return JP(lP(sP(e,e),t,!0))}))}fE().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=hU&&hU.setMaxEntries(e),null!=pU&&pU.setMaxEntries(e)}));var xU=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"getConfig",value:function(){return{}}}]),n}(HM),kU=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return yC(n,[{key:"apply",value:function(e){var t=this;return KM((function(){var n=bU(e,t.axis),r=RO(n,0,t.maxValue);return sP(e,GO(r,rO(uW(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(xU);kU.className="MaxNorm",qM(kU);var wU=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return yC(n,[{key:"apply",value:function(e){var t=this;return KM((function(){return GO(e,rO(uW(),bU(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(xU);wU.className="UnitNorm",qM(wU);var SU=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return BP(e)}}]),n}(xU);SU.className="NonNeg",qM(SU);var _U=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return yC(n,[{key:"apply",value:function(e){var t=this;return KM((function(){var n=bU(e,t.axis),r=rO(sP(t.rate,RO(n,t.minValue,t.maxValue)),sP(1-t.rate,n));return sP(e,GO(r,rO(uW(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(xU);_U.className="MinMaxNorm",qM(_U);var CU,EU={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function AU(e){return AB(e)}function IU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TB(e,GM.getMap().classNameMap,t,"constraint")}function TU(e){return null==e?null:"string"===typeof e?IU({className:e in EU?EU[e]:e,config:{}}):e instanceof xU?e:IU(e)}function RU(e){return NU.apply(this,arguments)}function NU(){return NU=vC(hC().mark((function e(t){var n,r,a,i,o,s,u,l;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,l=0;l<u.length;++l)t[r[l]]=u[l][0];$M(a);case 12:case"end":return e.stop()}}),e)}))),NU.apply(this,arguments)}function MU(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(CU||(CU={}));var OU=function(){function e(){gC(this,e),this.validationData=null}return yC(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),PU=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;gC(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return yC(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=bC(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(bfe){n.e(bfe)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=bC(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(bfe){n.e(bfe)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=vC(hC().mark((function e(t,n){var r,a,i;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=bC(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=vC(hC().mark((function e(t,n){var r,a,i;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=bC(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=vC(hC().mark((function e(t,n){var r,a,i;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=bC(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=vC(hC().mark((function e(t,n){var r,a,i;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=bC(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=vC(hC().mark((function e(t){var n,r,a;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=bC(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=vC(hC().mark((function e(t){var n,r,a;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=bC(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),FU=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.call(this)}return yC(n,[{key:"onEpochBegin",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=vC(hC().mark((function e(t,n){var r,a,i,o=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=KM((function(){return rO(o.totals[e],sP(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=vC(hC().mark((function e(t,n){var r,a,i,o=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=bC(this.params.metrics),e.prev=2,i=function(){var e=a.value;if(null==o.totals[e])return"continue";"number"===typeof o.totals[e]?n[e]=o.totals[e]/o.seen:KM((function(){var t=sP(GO(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),ZM(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==i()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(OU),DU=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"onTrainBegin",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=vC(hC().mark((function e(t,n){var r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=vC(hC().mark((function e(){var t,n,r,a,i,o,s,u,l;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(u=e.sent,l=0;l<u.length;++l)this.history[n[l]][r[l]].dispose(),this.history[n[l]][r[l]]=u[l][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OU),LU=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;if(gC(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||jD,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return XC(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():YT();return function(){var i=null!=n?n():YT();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(a.maybeWait.bind(aR(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return yC(n,[{key:"maybeWait",value:function(){var e=vC(hC().mark((function e(t,n,r){var a;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,RU(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,RU(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=vC(hC().mark((function e(t,n){var r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,RU(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,RU(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=vC(hC().mark((function e(t,n){var r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,RU(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):XC(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,RU(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,RU(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(OU);function zU(e,t){return null==e&&(e={}),e instanceof OU?[e]:Array.isArray(e)&&e[0]instanceof OU?e:SB(e).map((function(e){return new LU(e,t)}))}var jU=function(){function e(){gC(this,e)}return yC(e,null,[{key:"registerCallbackConstructor",value:function(t,n){IC(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new vB("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,pd(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function BU(e,t,n,r,a,i,o,s,u){var l=new DU,c=[new FU].concat(pd(jU.createCallbacks(t)));null!=e&&c.push.apply(c,pd(e)),c.push(l);var f=new PU(c);return f.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:f,history:l}}function WU(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nR(e)););return e}function UU(){return UU="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=WU(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},UU.apply(this,arguments)}function VU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return TB(e,GM.getMap().classNameMap,t,"layer",n)}function HU(e,t){return KM((function(){"float32"!==e.dtype&&(e=aM(e,"float32"));var n=lP(kW(e),t,!0),r=QO(n.shape,uW()),a=JP(vP(n,r));return GO(e,a)}))}function GU(e,t){return KM((function(){return gP(kW(uP(t,e)),-1)}))}function qU(e,t){return KM((function(){return gP(nO(uP(t,e)),-1)}))}function XU(e,t){return KM((function(){var n=uP(e,t),r=RO(nO(e),uW(),Number.MAX_VALUE),a=nO(GO(n,r));return sP(100,gP(a,-1))}))}function YU(e,t){return KM((function(){var n=RO(t,uW(),Number.MAX_VALUE),r=aP(rO(1,n)),a=RO(e,uW(),Number.MAX_VALUE),i=aP(rO(1,a));return gP(kW(uP(r,i)),-1)}))}function KU(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return KM((function(){if(n)t=$P(t);else{var r=lP(t,t.shape.length-1,!0);t=GO(t,r)}return t=RO(t,uW(),1-uW()),AP(lP(sP(aM(e,"float32"),aP(t)),t.shape.length-1))}))}function $U(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return KM((function(){var r=aM(JO(fW(e)),"int32"),a=(t=RO(t,uW(),1-uW())).shape;return KU(SO(TP(r,a[a.length-1]),a),t,n)}))}function ZU(e,t){return KM((function(){var n;return n=RO(t,uW(),1-uW()),n=aP(GO(n,uP(1,n))),gP(function(e,t){if(!OC(e.shape,t.shape))throw new vB("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return KM((function(){var n=BP(t),r=AP(nO(t));return rO(uP(n,sP(t,e)),iP(YO(r)))}))}(e,n),-1)}))}function QU(e,t){return KM((function(){var n=RO(e,uW(),1),r=RO(t,uW(),1);return lP(sP(e,aP(GO(n,r))),-1)}))}function JU(e,t){return KM((function(){var n=HU(e,-1),r=HU(t,-1),a=sP(n,r);return AP(lP(a,-1))}))}jU.constructors={};var eV={meanSquaredError:GU,meanAbsoluteError:qU,meanAbsolutePercentageError:XU,meanSquaredLogarithmicError:YU,squaredHinge:function(e,t){return KM((function(){var n=vP(0,uP(1,sP(e,t)));return gP(kW(n),-1)}))},hinge:function(e,t){return KM((function(){var n=vP(0,uP(1,sP(e,t)));return gP(n,-1)}))},categoricalHinge:function(e,t){return KM((function(){var n=lP(sP(e,t),-1),r=oP(sP(uP(1,e),t),-1);return vP(0,rO(1,uP(r,n)))}))},logcosh:function(e,t){return KM((function(){var n=Math.log(2),r=uP(t,e),a=uP(rO(r,ZP(sP(-2,r))),n);return gP(a,-1)}))},categoricalCrossentropy:KU,sparseCategoricalCrossentropy:$U,binaryCrossentropy:ZU,kullbackLeiblerDivergence:QU,poisson:function(e,t){return KM((function(){var n=aP(rO(uW(),t));return gP(uP(t,sP(e,n)),-1)}))},cosineProximity:JU};function tV(e){if("string"===typeof e){if(e in eV)return eV[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new vB(t)}return e}function nV(e,t){return KM((function(){var n=sP(.5,MP(t)),r=lW(tP(t,n),e.dtype);return gP(XO(e,r),-1)}))}function rV(e,t){return KM((function(){return lW(XO(oO(e,-1),oO(t,-1)),"float32")}))}function aV(e,t){return KM((function(){return aM(lP(fP(XO(e,1),XO(t,1))),"float32")}))}function iV(e,t){return ZU(e,t)}function oV(e,t){return e.rank===t.rank&&(e=eF(e,[e.rank-1])),(t=oO(t,-1)).dtype!==e.dtype&&(t=aM(t,e.dtype)),aM(XO(e,t),"float32")}var sV=KU,uV=$U,lV={binaryAccuracy:nV,categoricalAccuracy:rV,precision:function(e,t){return KM((function(){var n=aV(e,t),r=function(e,t){return KM((function(){return aM(lP(fP(XO(e,0),XO(t,1))),"float32")}))}(e,t),a=rO(n,r);return aM(uF(tP(a,0),GO(n,a),0),"float32")}))},categoricalCrossentropy:sV,sparseCategoricalCrossentropy:uV,mse:GU,MSE:GU,mae:qU,MAE:qU,mape:XU,MAPE:XU,cosine:JU};function cV(e){if("string"===typeof e&&e in lV)return lV[e];if("string"!==typeof e&&null!=e)return e;throw new vB("Unknown metric ".concat(e))}function fV(e){if(xB(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(eV);n<r.length;n++){var a=r[n];if(eV[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(lV);i<o.length;i++){var s=o[i];if(lV[s]===e){t=s;break}}return void 0!==t?t:e.name}var dV=1048576;function hV(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!pV(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>dV&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(dV,"."))}}function pV(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!pV(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=bC(e);try{for(i.s();!(a=i.n()).done;){if(!pV(a.value))return!1}}catch(bfe){i.e(bfe)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function vV(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=mV(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,pd(e.nodesByDepth[s]))}a("_".repeat(t)),yV(o,n,a),a("=".repeat(t));for(var l=e.layers,c=0;c<l.length;++c)i?bV(l[c],n,a):xV(l[c],n,r,a),a((c===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var f=gV(e),d=JW(e.nonTrainableWeights);a("Total params: ".concat(f+d)),a("Trainable params: ".concat(f)),a("Non-trainable params: ".concat(d)),a("_".repeat(t))}function gV(e){return null!=e.collectedTrainableWeights?JW(e.collectedTrainableWeights):JW(e.trainableWeights)}function mV(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,pd(s))}if(t){var u,l=bC(e.layers);try{for(l.s();!(u=l.n()).done;){var c,f=u.value,d=!1,h=bC(f.inboundNodes);try{for(h.s();!(c=h.n()).done;){var p=c.value;if(-1!==r.indexOf(p)){if(d){t=!1;break}d=!0}}}catch(bfe){h.e(bfe)}finally{h.f()}if(!t)break}}catch(bfe){l.e(bfe)}finally{l.f()}}return t}function yV(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function bV(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(bfe){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(bfe){r="multiple"}var i=e.name,o=e.getClassName();yV(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function xV(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(bfe){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(bfe){a="multiple"}var o,s=[],u=bC(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(l)))for(var c=0;c<l.inboundLayers.length;++c){var f=l.inboundLayers[c].name,d=l.nodeIndices[c],h=l.tensorIndices[c];s.push("".concat(f,"[").concat(d,"][").concat(h,"]"))}}}catch(bfe){u.e(bfe)}finally{u.f()}var p=e.name,v=e.getClassName(),g=0===s.length?"":s[0];yV(["".concat(p," (").concat(v,")"),i,a,e.countParams().toString(),g],t,r);for(var m=1;m<s.length;++m)yV(["","","","",s[m]],t,r)}function kV(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function wV(e,t){if(null===e)return null;if("string"===typeof e)return CB(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];kV(t,a,i)?n.push(i):n.push(wV(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l];if("name"===l&&"string"===typeof c)o[l]=c;else{var f=CB(l);o[f]=wV(c,f)}}return o}function SV(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return _B(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];kV(t,a,i)?n.push(i):n.push(SV(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l],f=_B(l);o[f]="name"!==l&&"className"!==l||"string"!==typeof c?SV(c,l):c}return o}var _V="3.19.0",CV=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=WB(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],NB(r.inputs).length!==r.inputs.length)throw new vB("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));NB(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=bC(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,l=s.nodeIndex,c=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(l),r.outputLayersTensorIndices.push(c)}}catch(bfe){o.e(bfe)}finally{o.f()}var f,d=bC(r.inputs);try{for(d.s();!(f=d.n()).done;){var h=f.value,p=h.sourceLayer,v=h.nodeIndex,g=h.tensorIndex;xB(0===v,"input layer has >1 nodes"),xB(0===g,"input layer has >1 tensors"),r.inputLayers.push(p),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(g)}}catch(bfe){d.e(bfe)}finally{d.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var m=0;m<r.inputLayers.length;m++){var y=r.inputLayers[m];if(!(y instanceof fU))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(m," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=bC(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var k=b.value;r.outputNames.push(k.name)}}catch(bfe){x.e(bfe)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var w,S={},_={},C={},E={},A={},I=[],T=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var l=o.inboundNodes[s];if(-1!==i.indexOf(l))throw new pB("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(l)){r.containerNodes.add(n.nodeKey(o,s)),o.id in A||(A[o.id]=Object.keys(A).length),-1===i.indexOf(l)&&i.push(l);for(var c=l.inboundLayers.length,f=0;f<c;f++){e(l.inputTensors[f],a,i,l.inboundLayers[f],l.nodeIndices[f],l.tensorIndices[f])}for(a.push(l);i.indexOf(l)>=0;)i.splice(i.indexOf(l),1);I.push(l)}},R=[],N=[],M=bC(r.outputs);try{for(M.s();!(w=M.n()).done;){T(w.value,R,N)}}catch(bfe){M.e(bfe)}finally{M.f()}var O,P=bC(I.slice().reverse());try{for(P.s();!(O=P.n()).done;){var F=O.value;_[F.id]=F,F.id in S||(S[F.id]=0);var D=S[F.id],L=null==C[F.outboundLayer.id]?0:C[F.outboundLayer.id];D=Math.max(D,L),C[F.outboundLayer.id]=D,E[F.outboundLayer.id]=F.outboundLayer,S[F.id]=D;for(var z=0;z<F.inboundLayers.length;z++){var j=F.inboundLayers[z],B=F.nodeIndices[z],W=j.inboundNodes[B],U=null==S[W.id]?0:S[W.id];S[W.id]=Math.max(D+1,U),_[W.id]=W}}}catch(bfe){P.e(bfe)}finally{P.f()}var V={};for(var H in S){var G=S[H];G in V||(V[G]=[]),V[G].push(_[H])}var q={};for(var X in C){var Y=C[X];Y in q||(q[Y]=[]),q[Y].push(E[X])}var K=Object.keys(q).map((function(e){return parseInt(e,10)})).sort(RB);r.layers=[];var $,Z=bC(K);try{for(Z.s();!($=Z.n()).done;){var Q=q[$.value];Q.sort((function(e,t){var n=A[e.id],r=A[t.id];return n<r?-1:n>r?1:0}));var J,ee=bC(Q);try{for(ee.s();!(J=ee.n()).done;){var te=J.value;te instanceof n&&r.internalContainerRefs.push(te),r.layers.push(te)}}catch(bfe){ee.e(bfe)}finally{ee.f()}}}catch(bfe){Z.e(bfe)}finally{Z.f()}r.layersByDepth=q,K=Object.keys(V).map((function(e){return parseInt(e,10)})).sort(RB);var ne,re=r.inputs.slice(),ae=[],ie=bC(K);try{for(ie.s();!(ne=ie.n()).done;){var oe,se=bC(V[ne.value]);try{for(se.s();!(oe=se.n()).done;){var ue=oe.value,le=ue.outboundLayer;if(null!=le){var ce,fe=bC(ue.inputTensors);try{for(fe.s();!(ce=fe.n()).done;){var de=ce.value;if(-1===re.indexOf(de))throw new pB("Graph disconnected: cannot obtain value for tensor ".concat(de)+' at layer "'.concat(le.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ae))}}catch(bfe){fe.e(bfe)}finally{fe.f()}var he,pe=bC(ue.outputTensors);try{for(pe.s();!(he=pe.n()).done;){var ve=he.value;re.push(ve)}}catch(bfe){pe.e(bfe)}finally{pe.f()}ae.push(le.name)}}}catch(bfe){se.e(bfe)}finally{se.f()}}}catch(bfe){ie.e(bfe)}finally{ie.f()}r.nodesByDepth=V;var ge,me=r.layers.map((function(e){return e.name})),ye=bC(me);try{var be=function(){var e=ge.value,t=me.filter((function(t){return t===e})).length;if(1!==t)throw new pB('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(me))};for(ye.s();!(ge=ye.n()).done;)be()}catch(bfe){ye.e(bfe)}finally{ye.f()}return r.outboundNodes=[],r.inboundNodes=[],new sU({outboundLayer:aR(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return yC(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=bC(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(bfe){n.e(bfe)}finally{n.f()}var a,i=bC(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(bfe){i.e(bfe)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new vB("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=bC(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(bfe){n.e(bfe)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=bC(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,pd(r.nonTrainableWeights))}}catch(bfe){n.e(bfe)}finally{n.f()}if(!this.trainable){var a,i=[],o=bC(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,pd(s.trainableWeights))}}catch(bfe){o.e(bfe)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=bC(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=bC(s.weights);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(null!=r[l.originalName])throw new vB("Duplicate weight name: ".concat(l.originalName));r[l.originalName]=l,a++}}catch(bfe){u.e(bfe)}finally{u.f()}}}catch(bfe){i.e(bfe)}finally{i.f()}var c=[];for(var f in e){var d=f;if(null==r[f]){var h=f.split("/"),p=h.slice(0,-2).concat([h[h.length-1]]);d=p.join("/")}if(null!=r[d])c.push([r[d],e[f]]);else if(n)throw new vB("Provided weight data has no target variable: ".concat(f));delete r[d]}if(n){var v=[];for(var g in r)v.push(g);if(v.length>0)throw new vB("".concat(v.length," of ").concat(a," weights are not set: ")+"".concat(v))}rU(c)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(_V),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=SV(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return KM((function(){e=SB(e);for(var r=new dU,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return vU(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return KM((function(){var r;return e=SB(e),r=null==t?bB(null,e.length):SB(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=$W(e);if(t.length!==this.inputLayers.length)throw new vB("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(RB);if(o.length>1){var s,u=bC(o);try{for(u.s();!(s=u.n()).done;){var l,c=s.value,f=bC(this.nodesByDepth[c]);try{for(f.s();!(l=f.n()).done;){var d=l.value,h=d.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(h.id)){for(var p=[],v=0;v<d.inboundLayers.length;v++){var g=d.inboundLayers[v],m=d.nodeIndices[v],y=d.tensorIndices[v],b=n["".concat(g.name,"_").concat(m,"_").concat(y)];p.push(b)}for(var x=$W(h.computeOutputShape(wB(p))),k=h.inboundNodes.indexOf(d),w=0;w<x.length;w++){n["".concat(h.name,"_").concat(k,"_").concat(w)]=x[w]}}}}catch(bfe){f.e(bfe)}finally{f.f()}}}catch(bfe){u.e(bfe)}finally{u.f()}}for(var S=[],_=[],C=0;C<this.outputLayers.length;C++){var E=this.outputLayers[C],A=this.outputLayersNodeIndices[C],I=this.outputLayersTensorIndices[C],T="".concat(E.name,"_").concat(A,"_").concat(I);_.push(T)}for(var R=0;R<_.length;R++){var N=_[R];xB(N in n),S.push(n[N])}return wB(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=bB(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(RB),l=bC(u);try{for(l.s();!(s=l.n()).done;){var c,f=s.value,d=bC(this.nodesByDepth[f]);try{for(d.s();!(c=d.n()).done;){var h,p=c.value,v=p.outboundLayer,g=p.inputTensors,m=p.outputTensors,y=new Array,b=bC(g);try{for(b.s();!(h=b.n()).done;){var x=h.value;x.id in n&&y.push(n[x.id])}}catch(bfe){b.e(bfe)}finally{b.f()}if(y.length===g.length){var k={},w=void 0,S=void 0,_=void 0,C=void 0;if(null!=p.callArgs&&(k=p.callArgs),1===y.length){var E=Pf(y[0],2),A=E[0],I=E[1];null==k.mask&&(k.mask=I),_=SB(v.call(A,k)),C=SB(v.computeMask(A,I)),w=[A],S=[I]}else w=y.map((function(e){return e[0]})),S=y.map((function(e){return e[1]})),null==k.mask&&(k.mask=S),_=SB(v.call(w,k)),C=SB(v.computeMask(w,S));if(v.activityRegularizer)throw new gB("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var T=0;T<m.length;++T){var R=m[T],N=_[T],M=C[T];n[R.id]=[N,M]}}}}catch(bfe){d.e(bfe)}finally{d.f()}}}catch(bfe){l.e(bfe)}finally{l.f()}var O,P=[],F=[],D=[],L=bC(this.outputs);try{for(L.s();!(O=L.n()).done;){var z=O.value;xB(z.id in n,"Could not compute output ".concat(z.name," : ").concat(z.id));var j=Pf(n[z.id],2),B=j[0],W=j[1];D.push(B.shape),P.push(B),F.push(W)}}catch(bfe){L.e(bfe)}finally{L.f()}return[P,F,D]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=bC(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(bfe){i.e(bfe)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new vB("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new vB("Provide either a layer name or layer index");var n,r=bC(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(bfe){r.e(bfe)}finally{r.f()}throw new vB("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return KM((function(){var t,r=[],a=bC(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,pd(i.calculateLosses()))}}catch(bfe){a.e(bfe)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=bC(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),l=[],c=0;c<o.inboundNodes.length;c++){var f=o.inboundNodes[c],d=n.nodeKey(o,c),h={};if(this.containerNodes.has(d)){if(f.callArgs)try{JSON.stringify(f.callArgs),h=f.callArgs}catch(bfe){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(f.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),h={}}if(f.inboundLayers.length>0){for(var p=[],v=0;v<f.inboundLayers.length;v++){var g=f.inboundLayers[v],m=f.nodeIndices[v],y=f.tensorIndices[v],b=r[n.nodeKey(g,m)];null==b&&(b=0),p.push([g.name,b,y,h])}l.push(p)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=l,a.push(x)}}catch(bfe){i.e(bfe)}finally{i.f()}t.layers=a;for(var k=[],w=0;w<this.inputLayers.length;w++){var S=this.inputLayers[w],_=this.inputLayersNodeIndices[w],C=n.nodeKey(S,_);if(this.containerNodes.has(C)){var E=r[C];null!==E&&void 0!==E||(E=0);var A=this.inputLayersTensorIndices[w];k.push([S.name,E,A])}}t.inputLayers=k;for(var I=[],T=0;T<this.outputLayers.length;T++){var R=this.outputLayers[T],N=this.outputLayersNodeIndices[T],M=n.nodeKey(R,N);if(this.containerNodes.has(M)){var O=r[M];null!==O&&void 0!==O||(O=0);var P=this.outputLayersTensorIndices[T];I.push([R.name,O,P])}}return t.outputLayers=I,t}},{key:"stateful",get:function(){if(this._stateful)throw new vB("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=bC(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(bfe){t.e(bfe)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;KM((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=bC(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u[0],c=u[1],f=u[2];if(n=null==u[3]?{}:u[3],!(l in r))return void i(e,t);var d=r[l];if(d.inboundNodes.length<=c)return void i(e,t);var h=d.inboundNodes[c];o.push(h.outputTensors[f])}}catch(bfe){s.e(bfe)}finally{s.f()}o.length>0&&e.apply(wB(o),n)}function s(e){var a=e.name,o=VU(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new vB("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,l=t.name,c=t.layers,f=bC(c);try{for(f.s();!(u=f.n()).done;){var d=u.value;s(d)}}catch(bfe){f.e(bfe)}finally{f.f()}for(;!MB(a);){var h,p=bC(c);try{for(p.s();!(h=p.n()).done;){var v=h.value,g=r[v.name];if(g.name in a){var m=a[g.name];delete a[g.name];var y,b=bC(m);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(g,x)}}catch(bfe){b.e(bfe)}finally{b.f()}}}}catch(bfe){p.e(bfe)}finally{p.f()}}var k,w=[],S=[],_=t.inputLayers,C=bC(_);try{for(C.s();!(k=C.n()).done;){var E=k.value,A=E[0],I=E[1],T=E[2];xB(A in r);var R=r[A],N=R.inboundNodes[I].outputTensors;w.push(N[T])}}catch(bfe){C.e(bfe)}finally{C.f()}var M,O=t.outputLayers,P=bC(O);try{for(P.s();!(M=P.n()).done;){var F=M.value,D=F[0],L=F[1],z=F[2];xB(D in r);var j=r[D],B=j.inboundNodes[L].outputTensors;S.push(B[z])}}catch(bfe){P.e(bfe)}finally{P.f()}return new e({inputs:w,outputs:S,name:l})}}]),n}(lU);function EV(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function AV(e,t){return EV(e,t,"classWeight")}function IV(e,t,n,r){return TV.apply(this,arguments)}function TV(){return(TV=vC(hC().mark((function e(t,n,r,a){var i,o,s;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=KM((function(){if(1===t.shape.length)return iM(t);if(2===t.shape.length){if(t.shape[1]>1){return oO(t,1)}if(1===t.shape[1])return SO(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),$M(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",rF(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RV(e,t){return sP(e,t)}function NV(e,t){var n,r,a=t;n=a.xs,r=a.ys,IC(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=MV("input",e.inputNames,n),o=MV("output",e.outputNames,r),s=i[0].shape[0];IC(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),IC(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){IC(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},l=0;l<i.length;l++)u(l);for(var c=function(t){IC(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},f=0;f<o.length;f++)c(f);return{xs:i,ys:o}}function MV(e,t,n){if(n instanceof vR)return[n];if(Array.isArray(n))return IC(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=bC(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new vB("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(bfe){i.e(bfe)}finally{i.f()}return a}function OV(e){if(3===e.length)throw new gB("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function PV(e,t,n){return FV.apply(this,arguments)}function FV(){return FV=vC(hC().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p,v,g,m,y,b,x,k,w,S,_,C,E,A,I,T,R,N,M,O,P,F,D;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,IC(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),IC(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),IC(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),IC(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),IC(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(LV(r.validationData)?IC(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=OV(r.validationData),o=u.xs,s=u.ys)),l=t.makeTrainFunction(),c=t.getDedupedMetricsNames(),f=i?c.slice().concat(c.map((function(e){return"val_"+e}))):c.slice(),d=zU(r.callbacks,r.yieldEvery),h=null==r.verbose?1:r.verbose,p=BU(d,h,r.epochs,null,null,DV(n,r),null,i,f),v=p.callbackList,g=p.history,v.setModel(t),t.history=g,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,m=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(m<r.epochs)){e.next=98;break}return b={},e.next=31,v.onEpochBegin(m);case 31:if(x=0,k=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(w=e.sent,!a||!w.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==w.value){e.next=73;break}return S=NV(t,w.value),_=S.xs,C=S.ys,(E={}).batch=k,E.size=_[0].shape[0],e.next=51,v.onBatchBegin(k,E);case 51:if(A=[],null==r.classWeight){e.next=64;break}I=AV(r.classWeight,t.outputNames),T=0;case 55:if(!(T<I.length)){e.next=64;break}return e.t0=A,e.next=59,IV(C[T],null,I[T]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++T,e.next=55;break;case 64:for(R=_.concat(C).concat(A),N=l(R),$M(R),M=0;M<c.length;++M)O=c[M],P=N[M],E[O]=P,ZM(P);return e.next=70,v.onBatchEnd(k,E);case 70:MU(E),k++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:w.done)){e.next=87;break}if(!i){e.next=86;break}if(F=void 0,!LV(r.validationData)){e.next=84;break}return e.t2=SB,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,F=(0,e.t2)(e.t3),e.next=85;break;case 84:F=SB(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(D=0;D<t.metricsNames.length;++D)b["val_".concat(t.metricsNames[D])]=F[D];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(m,b);case 93:if(m++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),FV.apply(this,arguments)}function DV(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function LV(e){return"function"===typeof e.iterator}function zV(e){return"function"===typeof e.next}function jV(e,t,n){return BV.apply(this,arguments)}function BV(){return BV=vC(hC().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new gB("Verbose mode is not implemented yet.");case 6:if(IC(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!zV(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,l=0,c=hC().mark((function e(){var n;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=KM((function(){return n.value&&function(){var e=NV(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),c=KM((function(){return i(s)}));if($M(s),0===l)for(var f=0;f<c.length;++f)o.push(eO(0));for(var d=s[0].shape[0],h=function(e){var t=c[e],n=o[e];o[e]=KM((function(){return rO(o[e],sP(d,t))})),l>0&&$M(n)},p=0;p<c.length;++p)h(p);$M(c),u+=d,++l}(),o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(l<r.batches)){e.next=25;break}return e.delegateYield(c(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(f=0;f<o.length;++f)d=o[f],o[f]=GO(o[f],u),$M(d);return e.abrupt("return",wB(o));case 27:case"end":return e.stop()}}),e)}))),BV.apply(this,arguments)}function WV(e){IC(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function UV(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return dW(e,t,n-t)})):dW(e,t,n-t)}function VV(e,t){return KM((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return VV(e,t)})):xW(e,"int32"===t.dtype?t:aM(t,"int32"))}))}function HV(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function GV(e,t,n,r,a,i,o,s,u,l,c,f,d,h,p){return qV.apply(this,arguments)}function qV(){return qV=vC(hC().mark((function e(t,n,r,a,i,o,s,u,l,c,f,d,h,p,v){var g,m,y,b,x,k,w,S;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==f&&(f=!0),null==h&&(h=0),g=!1,null!=l&&null!=c&&(g=!0),null==v){e.next=10;break}if(g=!0,null!=p){e.next=10;break}throw new vB("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(m=t.checkNumSamples(r,i,p,"steps_per_epoch"))&&(y=sW(0,m)),null==s&&(s=1),b=BU(u,s,o,h,m,p,i,g,d),x=b.callbackList,k=b.history,x.setModel(t),t.history=k,e.next=18,x.onTrainBegin();case 18:t.stopTraining_=!1,w=hC().mark((function e(o){var s;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(o);case 2:if(s={},null==p){e.next=7;break}throw new gB("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(hC().mark((function e(){var o,u,d,h;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==f){e.next=4;break}throw new gB("batch shuffling is not implemneted yet");case 4:f&&SC(y);case 5:o=rF(y),u=HV(m,i),d=hC().mark((function e(f){var d;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={},e.next=3,x.onBatchBegin(f,d);case 3:return KM((function(){var e=u[f][0],h=u[f][1],p=dW(o,e,h-e);d.batch=f,d.size=h-e;for(var v=VV(r,p),m=n(v),y=0;y<a.length;++y){var b=a[y],x=m[y];d[b]=x,ZM(x)}if(f===u.length-1&&g)for(var k=t.testLoop(l,c,i),w=0;w<a.length;++w){var S=a[w],_=k[w];ZM(_),s["val_"+S]=_}})),e.next=6,x.onBatchEnd(f,d);case 6:if(MU(d),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),h=0;case 9:if(!(h<u.length)){e.next=17;break}return e.delegateYield(d(h),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++h,e.next=9;break;case 17:o.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,x.onEpochEnd(o,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),S=h;case 21:if(!(S<o)){e.next=29;break}return e.delegateYield(w(S),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++S,e.next=21;break;case 29:return e.next=31,x.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),qV.apply(this,arguments)}function XV(e,t,n){return YV.apply(this,arguments)}function YV(){return YV=vC(hC().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d,h,p,v,g,m,y,b,x,k,w,S,_,C,E,A,I,T,R=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=R.length>3&&void 0!==R[3]?R[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,WV(p=null==a.batchSize?32:a.batchSize),v=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,v,p);case 10:if(g=e.sent,i=g[0],o=g[1],h=g[2],m=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(m=!0,2!==a.validationData.length){e.next=22;break}l=a.validationData[0],c=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new gB("validationData including sample weights is not supported yet.");case 26:throw new vB("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(a.validationData," is invalid."));case 27:return b=!0,e.next=30,t.standardizeUserData(l,c,null,null,b,p);case 30:x=e.sent,f=x[0],d=x[1],y=f.concat(d),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(m=!0,k=Math.floor(i[0].shape[0]*(1-a.validationSplit)),w=i[0].shape[0],f=UV(i,k,w),s=i,i=UV(i,0,k),d=UV(o,k,w),u=o,o=UV(o,0,k),y=f.concat(d)):null!=a.validationSteps&&(m=!0);case 37:return S=i.concat(o).concat(h),t.checkTrainableWeightsConsistency(),_=t.makeTrainFunction(),C=t.getDedupedMetricsNames(),m?(t.makeTestFunction(),E=t.testFunction,A=C.slice().concat(C.map((function(e){return"val_"+e})))):(E=null,y=[],A=C.slice()),I=zU(a.callbacks,a.yieldEvery),e.next=45,GV(t,_,S,C,p,a.epochs,a.verbose,I,E,y,a.shuffle,A,a.initialEpoch,null,null);case 45:return T=e.sent,e.abrupt("return",T);case 47:return e.prev=47,t.isTraining=!1,$V(i,n),$V(o,r),$V(s,n),$V(u,r),$V(f,l),$V(d,c),null!=h&&$M(h),e.finish(47);case 57:case"end":return e.stop()}}),e,null,[[4,,47,57]])}))),YV.apply(this,arguments)}function KV(e){var t=[];e instanceof vR&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(cW(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function $V(e,t){if(null!=e){var n=[];if(t instanceof vR)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof vR)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function ZV(e){return Array.isArray(e)}function QV(e){return!function(e){return e instanceof vR}(e)&&!ZV(e)}function JV(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(ZV(e)&&e.length>0)o=!0;else if(QV(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new vB("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(QV(e)){r=[];var u,l=bC(t);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(null==e[c])throw new vB('No data provided for "'.concat(c,'". Need data for each key in: ')+"".concat(t));r.push(e[c])}}catch(bfe){l.e(bfe)}finally{l.f()}}else if(ZV(e)){if(e.length!==t.length)throw new vB("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(t.length>1)throw new vB("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=KV(r),null!=n)for(var f=0;f<t.length;++f)if(null!=n[f]){var d=r[f];if(d.shape.length!==n[f].length)throw new vB("Error when checking ".concat(i,": expected ").concat(t[f]," ")+"to have ".concat(n[f].length," dimension(s). but got array with ")+"shape ".concat(d.shape));for(var h=0;h<n[f].length;++h)if(0!==h||a){var p=d.shape[h],v=n[f][h];if(null!=v&&v>=0&&p!==v)throw new vB("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[f].slice(1,n[f].length),"] ")+"(i.e.,tensor shape [*,".concat(n[f].slice(1,n[f].length),"])")+" but the ".concat(i," received an input with ").concat(d.shape[0])+" examples, each with shape [".concat(d.shape.slice(1,d.shape.length),"]")+" (tensor shape [".concat(d.shape,"])"))}}return r}function eH(e,t,n){var r=NB(e.map((function(e){return e.shape[0]})));r.sort();var a=NB(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new vB("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new vB("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!OC(r,a))throw new vB("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function tH(e,t,n){for(var r=[GU,ZU,KU],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===KU&&1===i.shape[i.shape.length-1])throw new vB("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var f=u[c],d=l[c];if(null!=d&&f!==d)throw new vB("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function nH(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new vB("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new vB("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new vB("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var l=s.shape[u],c=n[o][u];if(null!=c&&c!==l)throw new vB("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var rH=function(t){tR(r,t);var n=oR(r);function r(e){var t;return gC(this,r),(t=n.call(this,e)).isTraining=!1,t}return yC(r,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new vB("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");vV(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return LD.adagrad(.01)},Adadelta:function(){return LD.adadelta(1,.95,uW())},Adam:function(){return LD.adam(.001,.9,.999,uW())},Adamax:function(){return LD.adamax(.002,.9,.999,uW(),0)},RMSProp:function(){return LD.rmsprop(.001,.9,0,uW())},SGD:function(){return LD.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new vB("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof tO))throw new vB("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new vB("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return tV(e)}))}else{var a=tV(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new vB('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=bC(this.outputNames);try{for(s.s();!(o=s.n()).done;){var u=o.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(tV(e.loss[u]))}}catch(bfe){s.e(bfe)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var l=0;l<this.outputs.length;++l){var c=this.internalOutputShapes[l],f=this.outputNames[l];this.feedOutputNames.push(f),this.feedOutputShapes.push(c),this.feedLossFns.push(this.lossFunctions[l])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],QB("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var h=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=bC(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(bfe){i.e(bfe)}finally{i.f()}return a}(e.metrics,this.outputNames),p=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};QB("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var r,a,i,o,s=bC(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"===typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var l=t.internalOutputShapes[e];1===l[l.length-1]||t.lossFunctions[e]===ZU?-1!==["accuracy","acc"].indexOf(u)?a=nV:-1!==["crossentropy","ce"].indexOf(u)&&(a=iV):t.lossFunctions[e]===$U?-1!==["accuracy","acc"].indexOf(u)?a=oV:-1!==["crossentropy","ce"].indexOf(u)&&(a=uV):-1!==["accuracy","acc"].indexOf(u)?a=rV:-1!==["crossentropy","ce"].indexOf(u)&&(a=sV);var c=void 0;-1!==["accuracy","acc"].indexOf(u)?c="acc":-1!==["crossentropy","ce"].indexOf(u)&&(c="ce"),i=a,r=""+c}else{var f=cV(u);i=f,r=""+fV(u)}var d=void 0;QB(r,(function(){d=i})),p(e,r,d)}}catch(bfe){s.e(bfe)}finally{s.f()}}(h[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;WV(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,o,r,n.verbose,n.steps);return wB(u)}finally{$V(i[0],e),$V(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",jV(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new vB("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new vB("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new vB("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new dU;if(e instanceof vR&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new vB("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=bC(this.inputs);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=e[l.name];if(null==c)throw new vB("No value is provided for the model's input ".concat(l.name));i.add(l,c)}}catch(bfe){u.e(bfe)}finally{u.f()}}var f=vU(a,i);return n?f:f[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=bB(null,e.length),r=e.length,a=bC(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(-1!==l&&(n[u]=o[l],r--),0===r)break}if(0===r)break}}catch(bfe){a.e(bfe)}finally{a.f()}if(r>0){var c=[];throw n.forEach((function(t,n){null==t&&c.push(e[n])})),new vB("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(c)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return KM((function(){var a=t.checkNumSamples(e);if(r)throw new gB("Verbose predictLoop() is not implemented yet.");for(var i=HV(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){KM((function(){var r=i[n][0],a=i[n][1],o=UV(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var l=new dU(s);return vU(t.outputs,l)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return wB(o.map((function(e){return NO(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=KV(e);nH(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return WV(r),this.predictLoop(n,r)}finally{$V(n,e)}}},{key:"predictOnBatch",value:function(e){nH(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new pB("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===$U?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(eH(e=JV(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=JV(t,this.feedOutputNames,r,!1,"target")),tH(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new vB("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=vC(hC().mark((function e(t,n,r,a){var i,o,s,u,l,c,f,d,h,p=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(p.length>4&&void 0!==p[4])||p[4],o=p.length>5?p[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),u=Pf(s,2),l=u[0],c=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(f=null,null==a){e.next=19;break}d=AV(a,this.outputNames),f=[],h=0;case 10:if(!(h<d.length)){e.next=19;break}return e.t0=f,e.next=14,IV(c[h],null,d[h]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++h,e.next=10;break;case 19:return e.abrupt("return",[l,c,f]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return KM((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new gB("Verbose mode is not implemented yet.");if(null!=i)throw new gB("steps mode in testLoop() is not implemented yet");for(var u=HV(o,n),l=rF(sW(0,o)),c=0;c<u.length;++c){var f=u[c][0],d=u[c][1],h=dW(l,f,d-f),p=VV(t,h),v=e(p);if(0===c)for(var g=0;g<v.length;++g)s.push(eO(0));for(var m=0;m<v.length;++m){var y=v[m];s[m]=rO(s[m],sP(d-f,y))}}for(var b=0;b<s.length;++b)s[b]=GO(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(kB(e,r)>1){var i=kB(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,l=new dU(t),c=vU(e.outputs,l,{training:!0}),f=0;f<e.lossFunctions.length;++f){var d=(0,e.lossFunctions[f])(a[f],c[f]);null!=i[f]&&(d=RV(d,i[f]));var h=gP(d);n.push(h),u=0===f?d:rO(u,d)}for(var p=0;p<e.metricsTensors.length;++p){var v=void 0;if(e.outputs.length>1&&p<e.outputs.length)v=n[p];else{var g=e.metricsTensors[p][0],m=e.metricsTensors[p][1];v=gP(g(a[m],c[m]))}ZM(v),o.push(v)}return u=gP(u),e.calculateLosses().forEach((function(e){u=rO(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return KM((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new dU(o),l=vU(e.outputs,u),c=0;c<e.lossFunctions.length;++c){var f=e.lossFunctions[c],d=gP(f(i[c],l[c]));n=0===c?d:rO(n,d),r.push(n)}for(var h=0;h<e.metricsTensors.length;++h){var p=e.metricsTensors[h][0],v=e.metricsTensors[h][1],g=gP(p(i[v],l[v]));r.push(g)}return r}))}}},{key:"fit",value:function(){var e=vC(hC().mark((function e(t,n){var r,a=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",XV(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",PV(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=vC(hC().mark((function e(t,n){var r,a,i,o,s,u,l,c,f,d;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),u=[],l=bC(s),e.prev=9,l.s();case 11:if((c=l.n()).done){e.next=19;break}return f=c.value,e.next=15,f.data();case 15:d=e.sent,u.push(d[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),l.e(e.t0);case 24:return e.prev=24,l.f(),e.finish(24);case 27:return $M(s),$V(r[0],t),$V(r[1],n),e.abrupt("return",wB(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=UU(nR(r.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=YM().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-YM().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=_B(this.loss);else if(Array.isArray(this.loss)){var t,n=bC(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(bfe){n.e(bfe)}finally{n.f()}e=this.loss.map((function(e){return _B(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=_B(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[_B(fV(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return _B(fV(e))}));var e={};for(var t in this.metrics)e[t]=_B(fV(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=VU(wV(e.optimizer_config));if("string"===typeof e.loss)t=CB(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return CB(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=CB(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return CB(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=CB(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var t=vC(hC().mark((function t(n,r){var a,i,o,s,u,l,c,f,d;return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=9;break}if(0!==(a=vN(n)).length){t.next=6;break}throw new vB("Cannot find any save handlers for URL '".concat(n,"'"));case 6:if(!(a.length>1)){t.next=8;break}throw new vB("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(n,"'"));case 8:n=a[0];case 9:if(null!=n.save){t.next=11;break}throw new vB("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return t.next=13,ZR(this.getNamedWeights(r));case 13:if(i=t.sent,!1,null,o=this.toJSON(null,false),s={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(_V),convertedBy:null},!(null!=r&&r.includeOptimizer)||null==this.optimizer){t.next=34;break}return s.trainingConfig=this.getTrainingConfig(),l="optimizer",t.t0=e,t.next=25,this.optimizer.getWeights();case 25:return t.t1=t.sent,t.t2=l,t.next=29,t.t0.encodeWeights.call(t.t0,t.t1,t.t2);case 29:c=t.sent,f=c.data,d=c.specs,(u=i.specs).push.apply(u,pd(d)),i.data=iN([i.data,f]);case 34:return null!=this.userDefinedMetadata&&(!0,hV(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=i.data,s.weightSpecs=i.specs,t.abrupt("return",n.save(s));case 38:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){hV(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),r}(CV);rH.className="Model",qM(rH);var aH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n)}(rH);function iH(){return iH=vC(hC().mark((function e(t,n){var r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!==typeof t){e.next=10;break}if(0!==(r=gN(t,n)).length){e.next=7;break}r.push(wM(t,n)),e.next=9;break;case 7:if(!(r.length>1)){e.next=9;break}throw new vB("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat(t,"'"));case 9:t=r[0];case 10:return e.abrupt("return",oH(t,void 0,n));case 11:case"end":return e.stop()}}),e)}))),iH.apply(this,arguments)}function oH(e,t,n){return sH.apply(this,arguments)}function sH(){return sH=vC(hC().mark((function e(t,n,r){var a,i,o,s,u,l,c,f,d;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=3;break}throw new vB("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),o=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&o,u=VU(wV(i),n,s),null!=(l=a.trainingConfig)&&u.loadTrainingConfig(l),null!=a.userDefinedMetadata&&u.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=24;break}if(null!=a.weightSpecs){e.next=17;break}throw new vB("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(c=uH(a.weightData,a.weightSpecs),f=c.modelWeights,d=c.optimizerWeights,u.loadWeights(f,o),!(null!=u.optimizer&&d.length>0)){e.next=22;break}return e.next=22,u.optimizer.setWeights(d);case 22:$M(f),$M(d.map((function(e){return e.tensor})));case 24:return e.abrupt("return",u);case 25:case"end":return e.stop()}}),e)}))),sH.apply(this,arguments)}function uH(e,t){var n=JR(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}aH.className="Functional",qM(aH);var lH=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:WB("sequential_"),null!=e.layers){var a,i=bC(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(bfe){i.e(bfe)}finally{i.f()}}return r}return yC(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new vB("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof rH;if(r){if(1!==(t=e).outputs.length)throw new vB("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new vB("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new vB("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new vB("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new fU({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new vB("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new vB("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=cU(this.outputs[0])}this.inboundNodes=[],new sU({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:bB(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(QW(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new rH({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),UU(nR(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),UU(nR(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new pB("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new pB("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=vC(hC().mark((function e(t,n){var r,a=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new pB("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new pB("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new vB("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new vB("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=bC(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(bfe){n.e(bfe)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new vB("Legacy serialization format not supported yet.");r=t}else IC(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new gB("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=bC(r);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=void 0,f=VU(l,c,a);a&&f.setFastWeightInitDuringBuild(!0),o.add(f)}}catch(bfe){u.e(bfe)}finally{u.f()}return o}}]),n}(rH);function cH(e,t){return null==t&&(t={}),function(e,t){return iH.apply(this,arguments)}(e,t)}lH.className="Sequential",qM(lH);var fH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"getConfig",value:function(){return{}}}]),n}(HM),dH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _W(e,t)}}]),n}(fH);dH.className="elu",qM(dH);var hH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return UP(e)}}]),n}(fH);hH.className="selu",qM(hH);var pH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return BP(e)}}]),n}(fH);pH.className="relu",qM(pH);var vH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return KM((function(){return mP(6,BP(e))}))}}]),n}(fH);vH.className="relu6",qM(vH);var gH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return e}}]),n}(fH);gH.className="linear",qM(gH);var mH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return HP(e)}}]),n}(fH);mH.className="sigmoid",qM(mH);var yH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return function(e){return KM((function(){var t=rO(.5,sP(.2,e));return RO(t,0,1)}))}(e)}}]),n}(fH);yH.className="hardSigmoid",qM(yH);var bH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return ZP(e)}}]),n}(fH);bH.className="softplus",qM(bH);var xH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return function(e){return KM((function(){return GO(e,rO(nO(e),1))}))}(e)}}]),n}(fH);xH.className="softsign",qM(xH);var kH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return nF(e)}}]),n}(fH);kH.className="tanh",qM(kH);var wH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return $P(e,t)}}]),n}(fH);wH.className="softmax",qM(wH);var SH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return cP(e,t)}}]),n}(fH);SH.className="logSoftmax",qM(SH);var _H=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return KM((function(){return sP(HP(sP(e,t)),e)}))}}]),n}(fH);_H.className="swish",qM(_H);var CH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e){return KM((function(){return sP(e,nF(ZP(e)))}))}}]),n}(fH);function EH(e){return e.getClassName()}function AH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TB(e,GM.getMap().classNameMap,t,"activation")}function IH(e){if(null==e){var t={className:"linear",config:{}};return AH(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},AH(n)}return e instanceof fH?e:AH(e)}function TH(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}CH.className="mish",qM(CH);var RH=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n)}(HM),NH=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this),TH(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return yC(n,[{key:"apply",value:function(e){var t=this;return KM((function(){var n=RP([1]);return t.hasL1&&(n=rO(n,lP(sP(t.l1,nO(e))))),t.hasL2&&(n=rO(n,lP(sP(t.l2,kW(e))))),SO(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(RH);NH.className="L1L2",qM(NH);var MH={l1l2:"L1L2"};function OH(e){return AB(e)}function PH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return TB(e,GM.getMap().classNameMap,t,"regularizer")}function FH(e){return null==e?null:"string"===typeof e?PH({className:e in MH?MH[e]:e,config:{}}):e instanceof RH?e:PH(e)}var DH=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return yC(n,[{key:"call",value:function(e,t){e=ZW(e);var n=BP(e);return null!=this.maxValue&&(n=RO(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);DH.className="ReLU",qM(DH);var LH=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return yC(n,[{key:"call",value:function(e,t){var n=ZW(e);return rP(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);LH.className="LeakyReLU",qM(LH);var zH=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=YW(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=FH(e.alphaRegularizer),r.alphaConstraint=TU(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new vB("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return yC(n,[{key:"build",value:function(e){var t=(e=QW(e)).slice(1);if(null!=this.sharedAxes){var n,r=bC(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(bfe){r.e(bfe)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new aU({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=ZW(e),PP(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:XW(this.alphaInitializer),alphaRegularizer:OH(this.alphaRegularizer),alphaConstraint:AU(this.alphaConstraint),sharedAxes:this.sharedAxes},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);zH.className="PReLU",qM(zH);var jH=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new gB("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return yC(n,[{key:"call",value:function(e,t){var n=ZW(e);return qO(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);jH.className="ELU",qM(jH);var BH=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return yC(n,[{key:"call",value:function(e,t){var n=ZW(e);return sP(n,aM(tP(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);BH.className="ThresholdedReLU",qM(BH);var WH=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new wH).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return yC(n,[{key:"call",value:function(e,t){var n=ZW(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);function UH(e,t,n){if("number"===typeof e)return bB(e,t);if(e.length!==t)throw new vB("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new vB("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e;var i}function VH(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function HH(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+oW([n-t,0]);else{if("same"!==r)throw new vB("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function GH(e,t){return KM((function(){return YB(t),"channelsFirst"===t?dF(e,[0,2,3,1]):e}))}function qH(e,t){return KM((function(){return YB(t),"channelsFirst"===t?dF(e,[0,2,3,4,1]):e}))}function XH(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return KM((function(){if(null==i&&(i="channelsLast"),YB(i),3!==e.shape.length)throw new vB("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new vB("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new vB("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=dF(e,[0,2,1])),"causal"===a)throw new gB("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=LO(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=SW(s,n)),s}))}function YH(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return KM((function(){if(null==i&&(i="channelsLast"),YB(i),3!==e.rank&&4!==e.rank)throw new vB("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new vB("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=GH(e,i);if("causal"===a)throw new gB("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=CF({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=dF(u,[0,3,1,2])),u}))}function KH(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return KM((function(){if(null==i&&(i="channelsLast"),YB(i),4!==e.rank&&5!==e.rank)throw new vB("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new vB("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=qH(e,i);if("causal"===a)throw new gB("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=BO(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=SW(s,n)),"channelsFirst"===i&&(s=dF(s,[0,4,1,2,3])),s}))}WH.className="Softmax",qM(WH);var $H=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;if(gC(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,FB(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new gB("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=UH(r.kernelSize,e,"kernelSize"),a.strides=UH(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,KB(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,YB(a.dataFormat),a.activation=IH(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=YW(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=TU(r.biasConstraint),a.biasRegularizer=FH(r.biasRegularizer),a.activityRegularizer=FH(r.activityRegularizer),a.dilationRate=UH(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new vB("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new vB("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new vB("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return yC(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:EH(this.activation),useBias:this.useBias,biasInitializer:XW(this.biasInitializer),biasRegularizer:OH(this.biasRegularizer),activityRegularizer:OH(this.activityRegularizer),biasConstraint:AU(this.biasConstraint)},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(xB("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!PB(e.kernelSize,"number",1,3))throw new vB("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(lU),ZH=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,FB(a.filters,"filters"),a.kernelInitializer=YW(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=TU(r.kernelConstraint),a.kernelRegularizer=FH(r.kernelRegularizer),a}return yC(n,[{key:"build",value:function(e){e=QW(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new vB("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:Gf({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){var t;e=ZW(e);var r=null==n.bias?null:n.bias.read(),a=LB(n.activation.getClassName());if(null!=a&&2===n.rank)t=YH(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=XH(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=YH(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new gB("convolutions greater than 3D are not implemented yet.");t=KH(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=QW(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=VH(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:XW(this.kernelInitializer),kernelRegularizer:OH(this.kernelRegularizer),kernelConstraint:AU(this.kernelConstraint)},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new vB("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}($H),QH=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return yC(n,[{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!PB(e.kernelSize,"number",1,2))throw new vB("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ZH);QH.className="Conv2D",qM(QH);var JH=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return yC(n,[{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new vB("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ZH);JH.className="Conv3D",qM(JH);var eG=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),(r=t.call(this,e)).inputSpec=[new aU({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new vB("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return yC(n,[{key:"build",value:function(e){if(4!==(e=QW(e)).length)throw new vB("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new vB("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new aU({ndim:4,axes:Gf({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){var t=ZW(e);if(4!==t.shape.length)throw new vB("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],l=n.kernelSize[0],c=n.kernelSize[1],f=n.strides[0],d=n.strides[1],h=[o,HH(s,f,l,n.padding),HH(u,d,c,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=dF(t,[0,2,3,1]));var p=jO(t,n.kernel.read(),h,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(p=dF(p,[0,3,1,2])),null!=n.bias&&(p=SW(p,n.bias.read(),n.dataFormat)),null!=n.activation&&(p=n.activation.apply(p)),p}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=QW(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=HH(a[n],s,i,this.padding),a[r]=HH(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(QH);eG.className="Conv2DTranspose",qM(eG);var tG=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),(r=t.call(this,e)).inputSpec=[new aU({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new vB("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return yC(n,[{key:"build",value:function(e){if(5!==(e=QW(e)).length)throw new vB("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new vB("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new aU({ndim:5,axes:Gf({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){var t=ZW(e);if(5!==t.shape.length)throw new vB("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],l=o[r],c=o[a],f=n.kernelSize[0],d=n.kernelSize[1],h=n.kernelSize[2],p=n.strides[0],v=n.strides[1],g=n.strides[2],m=[s,HH(u,p,f,n.padding),HH(l,v,d,n.padding),HH(c,g,h,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=dF(t,[0,2,3,4,1]));var y=UO(t,n.kernel.read(),m,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=dF(y,[0,4,1,2,3])),null!==n.bias&&(y=SW(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=QW(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],l=this.strides[0],c=this.strides[1],f=this.strides[2];return i[t]=this.filters,i[n]=HH(i[n],l,o,this.padding),i[r]=HH(i[r],c,s,this.padding),i[a]=HH(i[a],f,u,this.padding),i}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(JH);tG.className="Conv3DTranspose",qM(tG);var nG=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;if(gC(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new vB("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new vB("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new vB("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=YW(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=FH(r.depthwiseRegularizer),a.depthwiseConstraint=TU(r.depthwiseConstraint),a.pointwiseInitializer=YW(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=FH(r.pointwiseRegularizer),a.pointwiseConstraint=TU(r.pointwiseConstraint),a}return yC(n,[{key:"build",value:function(e){if((e=QW(e)).length<this.rank+2)throw new vB("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new vB("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new aU({ndim:this.rank+2,axes:Gf({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){var t;if(e=ZW(e),1===n.rank)throw new gB("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=dF(e,[0,2,3,1])),t=VP(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=SW(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=dF(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=XW(this.depthwiseInitializer),e.pointwiseInitializer=XW(this.pointwiseInitializer),e.depthwiseRegularizer=OH(this.depthwiseRegularizer),e.pointwiseRegularizer=OH(this.pointwiseRegularizer),e.depthwiseConstraint=AU(this.depthwiseConstraint),e.pointwiseConstraint=AU(this.pointwiseConstraint),e}}]),n}(ZH);nG.className="SeparableConv";var rG=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,2,e)}return yC(n)}(nG);rG.className="SeparableConv2D",qM(rG);var aG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return yC(n,[{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!PB(e.kernelSize,"number",1,1))throw new vB("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ZH);aG.className="Conv1D",qM(aG);var iG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return yC(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return KM((function(){if(e=ZW(e),"channelsLast"===n.dataFormat){var t=pW(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return pW(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=pW(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return pW(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);iG.className="Cropping2D",qM(iG);var oG=function(e){tR(n,e);var t=oR(n);function n(e){var r,a;return gC(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,YB(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,OB(VB,"InterpolationFormat",a),r}return yC(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return KM((function(){var t=ZW(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=dF(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?AD.resizeNearestNeighbor(t,[a,i]):AD.resizeBilinear(t,[a,i]);return dF(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?AD.resizeNearestNeighbor(t,[s,u]):AD.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);oG.className="UpSampling2D",qM(oG);var sG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=YW(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=TU(e.depthwiseConstraint),r.depthwiseRegularizer=FH(e.depthwiseRegularizer),r}return yC(n,[{key:"build",value:function(e){if((e=QW(e)).length<4)throw new vB("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new vB("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return KM((function(){null==a&&(a="channelsLast"),YB(a);var o=GH(e,a);if(4!==e.rank)throw new vB("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new vB("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=VO(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=dF(o,[0,3,1,2])),o}))}(e=ZW(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=SW(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=QW(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=VH(t,this.kernelSize[0],this.padding,this.strides[0]),i=VH(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=XW(this.depthwiseInitializer),e.depthwiseRegularizer=OH(this.depthwiseRegularizer),e.depthwiseConstraint=AU(this.depthwiseRegularizer),e}}]),n}($H);function uG(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new vB("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function lG(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return KM((function(){var u=t.shape.length;if(u<3)throw new vB("Input should be at least 3D, but is ".concat(u,"D."));var l=[1,0].concat(sW(2,u));if(t=dF(t,l),null!=i)throw new gB("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=aM(aM(a,"bool"),"float32")).rank===u-1&&(a=KO(a,-1)),a=dF(a,l)),r&&(t=WP(t,0),null!=a&&(a=WP(a,0)));var c,f,d=[],h=n,p=t.shape[0],v=iF(t);null!=a&&(f=iF(a));for(var g,m=function(t){var n=v[t],r=KM((function(){return e(n,h)}));if(null==a)c=r[0],h=r[1];else{var i=KM((function(){var e=f[t],n=uP(MP(e),e),a=rO(sP(r[0],e),sP(h[0],n)),i=h.map((function(t,a){return rO(sP(r[1][a],e),sP(t,n))}));return{output:a,newStates:i}}));c=i.output,h=i.newStates}s&&d.push(c)},y=0;y<p;++y)m(y);if(s){g=tF(d,1)}return[c,g,h]}))}sG.className="DepthwiseConv2D",qM(sG);var cG=function(e){tR(n,e);var t=oR(n);function n(e){var r,a;if(gC(this,n),r=t.call(this,e),null==e.cell)throw new vB("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new yG({cells:e.cell}):e.cell).stateSize)throw new vB("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new aU({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return yC(n,[{key:"getStates",value:function(){return null==this.states_?sW(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){KW(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=bC(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(bfe){o.e(bfe)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return KM((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new gB("Constants support is not implemented in RNN yet.");KW(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new aU({shape:[t,null].concat(pd(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!OC(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new vB("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new aU({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];KM((function(){if(!t.stateful)throw new hB("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new vB("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return RP([r,e])})):t.states_=[RP([r,t.cell.stateSize])];else if(null==e)$M(t.states_),null!=t.keptStates&&($M(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return RP([r,e])})):t.states_[0]=RP([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new vB("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):$M(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!OC(i.shape,s))throw new vB("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return ZM(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=uG(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,l=bC(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;this.stateSpec.push(new aU({shape:c.shape}))}}catch(bfe){l.e(bfe)}finally{l.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof iU){var f=[e].concat(o),d=this.inputSpec.concat(s),h=this.inputSpec;this.inputSpec=d;var p=UU(nR(n.prototype),"apply",this).call(this,f,t);return this.inputSpec=h,p}return UU(nR(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return KM((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=ZW(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new vB("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=lG((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),l=u[0],c=u[1],f=u[2];n.stateful&&n.resetStates(f,a);var d=n.returnSequences?c:l;return n.returnState?[d].concat(f):d}))}},{key:"getInitialState",value:function(e){var t=this;return KM((function(){var n=RP(e.shape);return n=cW(n=lP(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?mW(n,[1,e]):n})):t.cell.stateSize>1?[mW(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){UU(nR(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign({},r,e,t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=VU(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(lU);cG.className="RNN",qM(cG);var fG=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n)}(lU),dG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,FB(r.units,"units"),r.activation=IH(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=YW(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=YW(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=YW(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=FH(e.kernelRegularizer),r.recurrentRegularizer=FH(e.recurrentRegularizer),r.biasRegularizer=FH(e.biasRegularizer),r.kernelConstraint=TU(e.kernelConstraint),r.recurrentConstraint=TU(e.recurrentConstraint),r.biasConstraint=TU(e.biasConstraint),r.dropout=iW([1,oW([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=iW([1,oW([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return yC(n,[{key:"build",value:function(e){e=QW(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){if(2!==e.length)throw new vB("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=bG({ones:function(){return MP(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=bG({ones:function(){return MP(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=bW(null!=o?sP(e,o):e,n.kernel.read()),null!=n.bias&&(a=SW(a,n.bias.read())),null!=s&&(r=sP(r,s));var u=rO(a,bW(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:EH(this.activation),useBias:this.useBias,kernelInitializer:XW(this.kernelInitializer),recurrentInitializer:XW(this.recurrentInitializer),biasInitializer:XW(this.biasInitializer),kernelRegularizer:OH(this.kernelRegularizer),recurrentRegularizer:OH(this.recurrentRegularizer),biasRegularizer:OH(this.biasRegularizer),activityRegularizer:OH(this.activityRegularizer),kernelConstraint:AU(this.kernelConstraint),recurrentConstraint:AU(this.recurrentConstraint),biasConstraint:AU(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}]),n}(fG);dG.className="SimpleRNNCell",qM(dG);var hG=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),e.cell=new dG(e),t.call(this,e)}return yC(n,[{key:"call",value:function(e,t){var r=this;return KM((function(){null!=r.cell.dropoutMask&&($M(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&($M(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return UU(nR(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(cG);hG.className="SimpleRNN",qM(hG);var pG=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new vB("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,FB(r.units,"units"),r.activation=IH(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=IH(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=YW(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=YW(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=YW(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=FH(e.kernelRegularizer),r.recurrentRegularizer=FH(e.recurrentRegularizer),r.biasRegularizer=FH(e.biasRegularizer),r.kernelConstraint=TU(e.kernelConstraint),r.recurrentConstraint=TU(e.recurrentConstraint),r.biasConstraint=TU(e.biasConstraint),r.dropout=iW([1,oW([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=iW([1,oW([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return yC(n,[{key:"build",value:function(e){var t=(e=QW(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){if(2!==e.length)throw new vB("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=bG({ones:function(){return MP(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=bG({ones:function(){return MP(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,u=n.dropoutMask,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=sP(e,u[0]));var c=bW(e,n.kernel.read());n.useBias&&(c=SW(c,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=sP(a,l[0]));var f=n.recurrentKernel.read(),d=Pf(QP(f,[2*n.units,n.units],f.rank-1),2),h=d[0],p=d[1],v=bW(a,h),g=Pf(QP(c,3,c.rank-1),3),m=g[0],y=g[1],b=g[2],x=Pf(QP(v,2,v.rank-1),2),k=x[0],w=x[1];i=n.recurrentActivation.apply(rO(m,k)),o=n.recurrentActivation.apply(rO(y,w));var S=bW(sP(o,a),p);s=n.activation.apply(rO(b,S));var _=rO(sP(i,a),sP(rO(1,AP(i)),s));return[_,_]}))}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:EH(this.activation),recurrentActivation:EH(this.recurrentActivation),useBias:this.useBias,kernelInitializer:XW(this.kernelInitializer),recurrentInitializer:XW(this.recurrentInitializer),biasInitializer:XW(this.biasInitializer),kernelRegularizer:OH(this.kernelRegularizer),recurrentRegularizer:OH(this.recurrentRegularizer),biasRegularizer:OH(this.biasRegularizer),activityRegularizer:OH(this.activityRegularizer),kernelConstraint:AU(this.kernelConstraint),recurrentConstraint:AU(this.recurrentConstraint),biasConstraint:AU(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}]),n}(fG);pG.className="GRUCell",qM(pG);var vG=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new pG(e),t.call(this,e)}return yC(n,[{key:"call",value:function(e,t){var r=this;return KM((function(){null!=r.cell.dropoutMask&&($M(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&($M(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return UU(nR(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(cG);vG.className="GRU",qM(vG);var gG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,FB(r.units,"units"),r.activation=IH(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=IH(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=YW(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=YW(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=YW(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=FH(e.kernelRegularizer),r.recurrentRegularizer=FH(e.recurrentRegularizer),r.biasRegularizer=FH(e.biasRegularizer),r.kernelConstraint=TU(e.kernelConstraint),r.recurrentConstraint=TU(e.recurrentConstraint),r.biasConstraint=TU(e.biasConstraint),r.dropout=iW([1,oW([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=iW([1,oW([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return yC(n,[{key:"build",value:function(e){var t,n,r=(e=QW(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new NW).apply([i]),o=a.apply([2*i]);return gW(gW(n,r),o)}}]),n}(TW),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new vB("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=bG({ones:function(){return MP(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=bG({ones:function(){return MP(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,u,l,c=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=sP(e,c[0]));var d=bW(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=sP(a,f[0])),d=rO(d,bW(a,n.recurrentKernel.read())),n.useBias&&(d=SW(d,n.bias.read()));var h=Pf(QP(d,4,d.rank-1),4),p=h[0],v=h[1],g=h[2],m=h[3];o=n.recurrentActivation.apply(p),s=n.recurrentActivation.apply(v),u=rO(sP(s,i),sP(o,n.activation.apply(g))),l=n.recurrentActivation.apply(m);var y=sP(l,n.activation.apply(u));return[y,y,u]}))}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:EH(this.activation),recurrentActivation:EH(this.recurrentActivation),useBias:this.useBias,kernelInitializer:XW(this.kernelInitializer),recurrentInitializer:XW(this.recurrentInitializer),biasInitializer:XW(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:OH(this.kernelRegularizer),recurrentRegularizer:OH(this.recurrentRegularizer),biasRegularizer:OH(this.biasRegularizer),activityRegularizer:OH(this.activityRegularizer),kernelConstraint:AU(this.kernelConstraint),recurrentConstraint:AU(this.recurrentConstraint),biasConstraint:AU(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}]),n}(fG);gG.className="LSTMCell",qM(gG);var mG=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new gG(e),t.call(this,e)}return yC(n,[{key:"call",value:function(e,t){var r=this;return KM((function(){null!=r.cell.dropoutMask&&($M(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&($M(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return UU(nR(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(cG);mG.className="LSTM",qM(mG);var yG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).cells=e.cells,r}return yC(n,[{key:"stateSize",get:function(){var e,t=[],n=bC(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,pd(r.stateSize)):t.push(r.stateSize)}}catch(bfe){n.e(bfe)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return KM((function(){var r,a=e.slice(1),i=[],o=bC(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(bfe){o.e(bfe)}finally{o.f()}i.reverse();for(var u,l=[],c=0;c<n.cells.length;++c){var f=n.cells[c];a=i[c],u=0===c?[e[0]].concat(a):[u[0]].concat(a),u=f.call(u,t),l.push(u.slice(1))}a=[];var d,h=bC(l.slice().reverse());try{for(h.s();!(d=h.n()).done;){var p,v=d.value;(p=a).push.apply(p,pd(v))}}catch(bfe){h.e(bfe)}finally{h.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;KW(e)&&(e=e[0]),this.cells.forEach((function(n,r){QB("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},e,t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=bC(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,pd(r.trainableWeights))}}catch(bfe){n.e(bfe)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=bC(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,pd(r.nonTrainableWeights))}}catch(bfe){n.e(bfe)}finally{n.f()}if(!this.trainable){var a,i=[],o=bC(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,pd(s.trainableWeights))}}catch(bfe){o.e(bfe)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=bC(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,pd(r.weights))}}catch(bfe){n.e(bfe)}finally{n.f()}return nU(t)}},{key:"setWeights",value:function(e){var t,n=[],r=bC(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(bfe){r.e(bfe)}finally{r.f()}rU(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=bC(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(VU(o,r))}}catch(bfe){i.e(bfe)}finally{i.f()}return new e({cells:a})}}]),n}(fG);function bG(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):CW(t(),n)},l=function(){return EW(u,t,a)};return!o||o<=1?ZM(l().clone()):Array(o).fill(void 0).map(l).map((function(e){return ZM(e.clone())}))}yG.className="StackedRNNCells",qM(yG);var xG=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},kG=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),e.unroll)throw new gB("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new gB("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new aU({ndim:5})],r}return yC(n,[{key:"call",value:function(e,t){var r=this;return KM((function(){if(null!=r.cell.dropoutMask&&($M(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&($M(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new vB("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return UU(nR(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(pd(t.slice(2)))),this.returnState&&(t=[t].concat(pd(Array(2).fill([e[0]].concat(pd(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return KM((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=RP([a[0]].concat(pd(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];KM((function(){if(!t.stateful)throw new hB("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat(pd(a.slice(2)));if(null==r[0])throw new vB("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return RP(i)})):t.states_=[RP(i)];else if(null==e)$M(t.states_),null!=t.keptStates&&($M(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return RP(i)})):t.states_[0]=RP(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new vB("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):$M(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!OC(s.shape,u))throw new vB("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return ZM(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,l=e[u?3:2],c=e[u?4:3],f=VH(l,a[0],i,o[0],s[0]),d=VH(c,a[1],i,o[1],s[1]);return[].concat(pd(e.slice(0,2)),pd(u?[r,f,d]:[f,d,r]))}}]),n}(cG);kG.className="ConvRNN2D";var wG=function(e){tR(n,e);var t=oR(n);function n(e){var r;gC(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,l=e.dilationRate;return(r=t.call(this,Object.assign({},e,{units:a}))).filters=a,FB(r.filters,"filters"),r.kernelSize=UH(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return FB(e,"kernelSize")})),r.strides=UH(o||1,2,"strides"),r.strides.forEach((function(e){return FB(e,"strides")})),r.padding=s||"valid",KB(r.padding),r.dataFormat=u||"channelsLast",YB(r.dataFormat),r.dilationRate=UH(l||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return FB(e,"dilationRate")})),r}return yC(n,[{key:"build",value:function(e){var t;e=QW(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new vB("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"apply",value:function(e,t){return vW([s.apply([u]),NP([u]),s.apply([2*u])])}}]),n}(TW),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){if(3!==e.length)throw new vB("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=bG({ones:function(){return MP(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?sP(t[n],e):e},l=u(a,s,0),c=u(a,s,1),f=u(a,s,2),d=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=bG({ones:function(){return MP(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var h=n.recurrentDropoutMask,p=u(i,h,0),v=u(i,h,1),g=u(i,h,2),m=u(i,h,3),y=Pf(QP(n.kernel.read(),4,3),4),b=y[0],x=y[1],k=y[2],w=y[3],S=Pf(n.useBias?QP(n.bias.read(),4):[null,null,null,null],4),_=S[0],C=S[1],E=S[2],A=S[3];l=n.inputConv(l,b,_,n.padding),c=n.inputConv(c,x,C,n.padding),f=n.inputConv(f,k,E,n.padding),d=n.inputConv(d,w,A,n.padding);var I=Pf(QP(n.recurrentKernel.read(),4,3),4),T=I[0],R=I[1],N=I[2],M=I[3];p=n.recurrentConv(p,T),v=n.recurrentConv(v,R),g=n.recurrentConv(g,N),m=n.recurrentConv(m,M);var O=n.recurrentActivation.apply(rO(l,p)),P=n.recurrentActivation.apply(rO(c,v)),F=rO(sP(P,o),sP(O,n.activation.apply(rO(f,g)))),D=sP(n.recurrentActivation.apply(rO(d,m)),n.activation.apply(F));return[D,D,F]}))}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t=(e.units,xG(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},t,r)}},{key:"inputConv",value:function(e,t,n,r){var a=DO(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?SW(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return DO(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(gG);wG.className="ConvLSTM2DCell",qM(wG);var SG=function(e){tR(n,e);var t=oR(n);function n(e){gC(this,n);var r=new wG(e);return t.call(this,Object.assign({},e,{cell:r}))}return yC(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(kG);SG.className="ConvLSTM2D",qM(SG);var _G=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return yC(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t);var r=ZW(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return EW((function(){return CW(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return UU(nR(n.prototype),"dispose",this).call(this)}}]),n}(lU);_G.className="Dropout",qM(_G);var CG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return yC(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(_G);CG.className="SpatialDropout1D",qM(CG);var EG=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,FB(r.units,"units"),r.activation=IH(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=YW(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=YW(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=TU(e.kernelConstraint),r.biasConstraint=TU(e.biasConstraint),r.kernelRegularizer=FH(e.kernelRegularizer),r.biasRegularizer=FH(e.biasRegularizer),r.activityRegularizer=FH(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return yC(n,[{key:"build",value:function(e){var t=(e=QW(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:Gf({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=QW(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t);var r,a=ZW(e),i=LB(n.activation.getClassName());return null!=i?r=bW(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=bW(a,n.kernel.read()),null!=n.bias&&(r=SW(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:EH(this.activation),useBias:this.useBias,kernelInitializer:XW(this.kernelInitializer),biasInitializer:XW(this.biasInitializer),kernelRegularizer:OH(this.kernelRegularizer),biasRegularizer:OH(this.biasRegularizer),activityRegularizer:OH(this.activityRegularizer),kernelConstraint:AU(this.kernelConstraint),biasConstraint:AU(this.biasConstraint)},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);EG.className="Dense",qM(EG);var AG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return yC(n,[{key:"computeOutputShape",value:function(e){var t,n=bC((e=QW(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new vB('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(bfe){n.e(bfe)}finally{n.f()}return[e[0],aW(e,1)]}},{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t);var r=ZW(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=dF(r,a)}return function(e){if(e.rank<=1)throw new vB("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],aW(e.shape,1)];return SO(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);AG.className="Flatten",qM(AG);var IG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=IH(e.activation),r}return yC(n,[{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t);var r=ZW(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:EH(this.activation)},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);IG.className="Activation",qM(IG);var TG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return yC(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return KM((function(){return e=ZW(e),t=e,r=n.n,KM((function(){if(2!==t.shape.length)throw new vB("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(t.shape.length," tensor."));return mW(cW(t,1),[1,r,1])}));var t,r}))}},{key:"getConfig",value:function(){var e={n:this.n},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);TG.className="RepeatVector",qM(TG);var RG=function(e){tR(n,e);var t=oR(n);function n(e){var r;gC(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return yC(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new vB("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=aW(e);if(null!==i){if(0===a||u%a!==0)throw new vB(n);r[i]=u/a}else if(u!==a)throw new vB(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t);var r=ZW(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return SO(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);RG.className="Reshape",qM(RG);var NG=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=sW(1,e.dims.length+1);if(!OC(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new aU({ndim:r.dims.length+1})],r}return yC(n,[{key:"computeOutputShape",value:function(e){var t=(e=QW(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return dF(ZW(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);NG.className="Permute",qM(NG);var MG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return yC(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=ZW(e);return iO(IP(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t);var r=ZW(e),a=iO(IP(r,n.maskValue),-1,!0);return sP(r,aM(a,r.dtype))}))}}]),n}(lU);MG.className="Masking",qM(MG);var OG=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(SB(e.inputLength))}return r.inputDim=e.inputDim,FB(r.inputDim,"inputDim"),r.outputDim=e.outputDim,FB(r.outputDim,"outputDim"),r.embeddingsInitializer=YW(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=FH(e.embeddingsRegularizer),r.activityRegularizer=FH(e.activityRegularizer),r.embeddingsConstraint=TU(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return yC(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return KM((function(){return n.maskZero?(e=ZW(e),IP(e,lF(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=QW(e),null==this.inputLength)return[].concat(pd(e),[this.outputDim]);var t=SB(this.inputLength);if(t.length!==e.length-1)throw new vB('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new vB('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(pd(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t);var r=ZW(e);"int32"!==r.dtype&&(r=lW(r,"int32"));var a=xW(n.embeddings.read(),SO(r,[r.size]));return SO(a,QW(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:XW(this.embeddingsInitializer),embeddingsRegularizer:OH(this.embeddingsRegularizer),activityRegularizer:OH(this.activityRegularizer),embeddingsConstraint:AU(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);OG.className="Embedding",qM(OG);var PG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return yC(n,[{key:"mergeFunction",value:function(e){throw new gB}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new vB("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[QW(e)]),e.length<2)throw new vB("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=bC(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(bfe){r.e(bfe)}finally{r.f()}if((n=NB(n)).length>1)throw new vB("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===NB(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=oW(r),o=bC(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,l=0;l<i-u;++l)s=cW(s,1);t.push(s)}}catch(bfe){o.e(bfe)}finally{o.f()}return n.mergeFunction(t)}var c,f=!1,d=bC(e);try{for(d.s();!(c=d.n()).done;){var h=c.value,p=h.rank;if(null==p){var v=h.shape,g=v[0],m=v.slice(1).concat([g]),y=SO(h,[g].concat(aW(v.slice(1))));y=dF(y,[1,0]),y=SO(y,m),t.push(y),f=!0}else if(p>1){var b=sW(1,p).concat([0]);t.push(dF(h,b)),f=!0}else t.push(h)}}catch(bfe){d.e(bfe)}finally{d.f()}var x=n.mergeFunction(t),k=x.rank;if(f)if(null==k){var w=x.shape,S=w[w.length-1],_=[S].concat(w.slice(0,w.length-1));x=SO(dF(SO(x,[-1,S]),[1,0]),_)}else if(k>1){var C=[k-1].concat(sW(0,k-1));x=dF(x,C)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=bC(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(bfe){o.e(bfe)}finally{o.f()}return t=1===(i=NB(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return KM((function(){if(null==t)return null;if(!Array.isArray(t))throw new vB("`mask` should be an Array");if(!Array.isArray(e))throw new vB("`inputs` should be an Array");if(t.length!==e.length)throw new vB("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:KO(e,0)})))[0],r=1;r<t.length-1;++r)n=fP(n,t[r]);return n}))}}]),n}(lU),FG=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"mergeFunction",value:function(e){return KM((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=rO(t,e[n]);return t}))}}]),n}(PG);FG.className="Add",qM(FG);var DG=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"mergeFunction",value:function(e){return KM((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=sP(t,e[n]);return t}))}}]),n}(PG);DG.className="Multiply",qM(DG);var LG=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"mergeFunction",value:function(e){return KM((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=rO(t,e[n]);return sP(1/e.length,t)}))}}]),n}(PG);LG.className="Average",qM(LG);var zG=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"mergeFunction",value:function(e){return KM((function(){for(var t=e[0],n=1;n<e.length;++n)t=vP(t,e[n]);return t}))}}]),n}(PG);zG.className="Maximum",qM(zG);var jG=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"mergeFunction",value:function(e){return KM((function(){for(var t=e[0],n=1;n<e.length;++n)t=mP(t,e[n]);return t}))}}]),n}(PG);jG.className="Minimum",qM(jG);var BG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return yC(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new vB("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=bC(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(bfe){r.e(bfe)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,l=bC(a);try{for(l.s();!(s=l.n()).done;){if(OC(s.value,o)){u=!0;break}}}catch(bfe){l.e(bfe)}finally{l.f()}u||a.push(o)}if(a.length>1)throw new vB("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return KM((function(){return vW(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new vB("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=bC(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(bfe){i.e(bfe)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new vB("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new vB("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new vB("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return KM((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(aM(MP(e[i]),"bool")):t[i].rank<e[i].rank?a.push(KO(t[i],-1)):a.push(t[i]);var o=NO(a,n.axis);return aO(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(PG);function WG(e,t){for(;e<0;)e+=t;return e}BG.className="Concatenate",qM(BG);var UG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return yC(n,[{key:"build",value:function(e){IC(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new gB("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new vB("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new vB("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return WG(t,e[n].shape.length)})):[WG(this.axes,n.shape.length),WG(this.axes,r.shape.length)],this.normalize&&(n=HU(n,t[0]),r=HU(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new gB("batchDot is not implemented for tensors of 4D or higher rank yet");if(IC(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),IC(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new gB("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return KM((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=SO(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var l=[],c=0;c<n;++c)l.push(1);e=SO(e,e.shape.concat(l))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?lP(sP(e,t),i[0]):lP(sP(dF(e,[1,0]),t),i[1]);else{var f=i[0]!==e.shape.length-1,d=i[1]===t.shape.length-1;o=dP(e,t,f,d)}if(n>0){for(var h,p=[],v=h=r>a?r+a-3:r-1;v<h+n;++v)p.push(v);o=eF(o,p)}return 1===o.shape.length&&(o=KO(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[WG(this.axes,e.length),WG(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){IC(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new gB("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(PG);UG.className="Dot",qM(UG);var VG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return yC(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t);var r=ZW(e);return EW((function(){return rO(yW(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(lU);VG.className="GaussianNoise",qM(VG);var HG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return yC(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t);var r=ZW(e);if(n.rate>0&&n.rate<1){return EW((function(){var e=Math.sqrt(n.rate/(1-n.rate));return sP(r,yW(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(lU);HG.className="GaussianDropout",qM(HG);var GG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return yC(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||ZW(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=UU(nR(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return KM((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return EW((function(){var t=ZW(e),a=-1.7580993408473766,i=nP(jP(r),n.rate);i=lW(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=rO(sP(t,i),sP(rO(i,-1),a));return rO(sP(u,o),s)}),(function(){return ZW(e)}),t.training||!1)}return e}))}}]),n}(lU);function qG(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=AO(e,t,n,r,a,o);else if(3===e.rank)i=IO(e,t,n,r,a,o);else{if(4!==e.rank)throw new gB("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=TO(e,t,n,r,a,o)}return i}function XG(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return KM((function(){var i=EP(e,r),o=i.mean,s=i.variance;return[qG(e,o,s,n,t,a),o,s]}))}function YG(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return KM((function(){var i,o=EP(e,r),s=o.mean,u=o.variance,l=[],c=bC(sW(0,e.rank));try{for(c.s();!(i=c.n()).done;){var f=i.value;-1!==r.indexOf(f)?l.push(1):l.push(e.shape[f])}}catch(bfe){c.e(bfe)}finally{c.f()}var d=SO(s,l),h=SO(u,l),p=null==t?null:SO(t,l),v=null==n?null:SO(n,l);return[qG(e,d,h,v,p,a),s,u]}))}GG.className="AlphaDropout",qM(GG);var KG=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=YW(e.betaInitializer||"zeros"),r.gammaInitializer=YW(e.gammaInitializer||"ones"),r.movingMeanInitializer=YW(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=YW(e.movingVarianceInitializer||"ones"),r.betaConstraint=TU(e.betaConstraint),r.gammaConstraint=TU(e.gammaConstraint),r.betaRegularizer=FH(e.betaRegularizer),r.gammaRegularizer=FH(e.gammaRegularizer),r}return yC(n,[{key:"build",value:function(e){e=QW(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new vB("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new aU({ndim:e.length,axes:Gf({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return KM((function(){var r=null!=t.training&&t.training,a=ZW(e),i=a.shape,o=i.length,s=sW(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var l=bB(1,o);l[u]=i[u];var c=s.slice();c.sort();var f=!OC(c,sW(0,o).slice(0,o-1));if(!r)return function(){if(f){var e=SO(n.movingMean.read(),l),t=SO(n.movingVariance.read(),l),r=n.center?SO(n.beta.read(),l):null,i=n.scale?SO(n.gamma.read(),l):null;return qG(a,e,t,r,i,n.epsilon)}return qG(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var d=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return OC(r.slice().sort(),sW(0,e.rank-1))?XG(e,t,n,r,a):YG(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),h=Pf(d,3),p=h[0],v=h[1],g=h[2],m=function(e,t,n){KM((function(){var r=1-n,a=e.read(),i=sP(uP(a,t),r);e.write(uP(a,i))}))};return m(n.movingMean,v,n.momentum),m(n.movingVariance,g,n.momentum),p}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:XW(this.betaInitializer),gammaInitializer:XW(this.gammaInitializer),movingMeanInitializer:XW(this.movingMeanInitializer),movingVarianceInitializer:XW(this.movingVarianceInitializer),betaRegularizer:OH(this.betaRegularizer),gammaRegularizer:OH(this.gammaRegularizer),betaConstraint:AU(this.betaConstraint),gammaConstraint:AU(this.gammaConstraint)},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);KG.className="BatchNormalization",qM(KG);var $G=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=bC(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(bfe){i.e(bfe)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=YW(e.betaInitializer||"zeros"),r.gammaInitializer=YW(e.gammaInitializer||"ones"),r.betaRegularizer=FH(e.betaRegularizer),r.gammaRegularizer=FH(e.gammaRegularizer),r.supportsMasking=!0,r}return yC(n,[{key:"build",value:function(e){var t=(e=QW(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=bC(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(bfe){a.e(bfe)}finally{a.f()}if(this.axis.length!==NB(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=ZW(e),a=r.shape,i=a.length;return KM((function(){var e,t=EP(r,n.axis,!0),o=t.mean,s=t.variance,u=bB(1,i),l=bC(n.axis);try{for(l.s();!(e=l.n()).done;){var c=e.value;u[c]=a[c]}}catch(bfe){l.e(bfe)}finally{l.f()}for(var f=function(e){return null!=e&&e.shape.length!==i?SO(e,u):e},d=n.scale?f(n.gamma.read()):null,h=n.center?f(n.beta.read()):null,p=[],v=[],g=0;g<i;++g)-1!==n.axis.indexOf(g)?(p.push(a[g]),v.push(1)):(p.push(1),v.push(a[g]));return o=$O(o,p),s=$O(s,p),null!=d&&(d=$O(d,v)),null!=h&&(h=$O(h,v)),qG(r,o,s,h,d,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:XW(this.betaInitializer),gammaInitializer:XW(this.gammaInitializer),betaRegularizer:OH(this.betaRegularizer),gammaRegularizer:OH(this.gammaRegularizer)},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);$G.className="LayerNormalization",qM($G);var ZG=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new vB("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new vB("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new vB("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new aU({ndim:4})],r}return yC(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=QW(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return KM((function(){return t=ZW(e),r=n.padding,a=n.dataFormat,KM((function(){if(4!==t.rank)throw new vB("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(t.rank,"-D tensor."));if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new vB("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new vB("Unknown data format: ".concat(a,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],OP(t,e)}));var t,r,a}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU);function QG(e,t,n,r,a,i){return KM((function(){var o;YB(a),$B(i),KB(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=GH(e,a);var s="same"===r?"same":"valid";return o="max"===i?hP(e,t,n,s):_O(e,t,n,s),"channelsFirst"===a&&(o=dF(o,[0,3,1,2])),o}))}function JG(e,t,n,r,a,i){return KM((function(){var o;YB(a),$B(i),KB(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=qH(e,a);var s="same"===r?"same":"valid";return o="max"===i?pP(e,t,n,s):CO(e,t,n,s),"channelsFirst"===a&&(o=dF(o,[0,4,1,2,3])),o}))}ZG.className="ZeroPadding2D",qM(ZG);var eq=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new vB("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(FB(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new vB("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return FB(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,KB(r.padding),r.inputSpec=[new aU({ndim:3})],r}return yC(n,[{key:"computeOutputShape",value:function(e){var t=VH((e=QW(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return KM((function(){n.invokeCallHook(e,t),e=cW(ZW(e),2);var r=n.poolingFunction(ZW(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return eF(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU),tq=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return YB(a),KB(r),QG(e,t,n,r,a,"max")}}]),n}(eq);tq.className="MaxPooling1D",qM(tq);var nq=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return YB(a),KB(r),QG(e,t,n,r,a,"avg")}}]),n}(eq);nq.className="AveragePooling1D",qM(nq);var rq=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new vB("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return FB(r.poolSize,"poolSize"),FB(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,YB(r.dataFormat),KB(r.padding),r.inputSpec=[new aU({ndim:4})],r}return yC(n,[{key:"computeOutputShape",value:function(e){e=QW(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=VH(t,this.poolSize[0],this.padding,this.strides[0]),n=VH(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return KM((function(){return n.invokeCallHook(e,t),n.poolingFunction(ZW(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU),aq=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return YB(a),KB(r),QG(e,t,n,r,a,"max")}}]),n}(rq);aq.className="MaxPooling2D",qM(aq);var iq=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return YB(a),KB(r),QG(e,t,n,r,a,"avg")}}]),n}(rq);iq.className="AveragePooling2D",qM(iq);var oq=function(e){tR(n,e);var t=oR(n);function n(e){var r;if(gC(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new vB("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return FB(r.poolSize,"poolSize"),FB(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,YB(r.dataFormat),KB(r.padding),r.inputSpec=[new aU({ndim:5})],r}return yC(n,[{key:"computeOutputShape",value:function(e){e=QW(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=VH(t,this.poolSize[0],this.padding,this.strides[0]),n=VH(n,this.poolSize[1],this.padding,this.strides[1]),r=VH(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return KM((function(){return n.invokeCallHook(e,t),n.poolingFunction(ZW(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU),sq=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return YB(a),KB(r),JG(e,t,n,r,a,"max")}}]),n}(oq);sq.className="MaxPooling3D",qM(sq);var uq=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e)}return yC(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return YB(a),KB(r),JG(e,t,n,r,a,"avg")}}]),n}(oq);uq.className="AveragePooling3D",qM(uq);var lq=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).inputSpec=[new aU({ndim:3})],r}return yC(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new gB}}]),n}(lU),cq=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e||{})}return yC(n,[{key:"call",value:function(e,t){return KM((function(){var t=ZW(e);return gP(t,1)}))}}]),n}(lq);cq.className="GlobalAveragePooling1D",qM(cq);var fq=function(e){tR(n,e);var t=oR(n);function n(e){return gC(this,n),t.call(this,e||{})}return yC(n,[{key:"call",value:function(e,t){return KM((function(){var t=ZW(e);return oP(t,1)}))}}]),n}(lq);fq.className="GlobalMaxPooling1D",qM(fq);var dq=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,YB(r.dataFormat),r.inputSpec=[new aU({ndim:4})],r}return yC(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new gB}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(lU),hq=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"call",value:function(e,t){var n=this;return KM((function(){var t=ZW(e);return"channelsLast"===n.dataFormat?gP(t,[1,2]):gP(t,[2,3])}))}}]),n}(dq);hq.className="GlobalAveragePooling2D",qM(hq);var pq=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"call",value:function(e,t){var n=this;return KM((function(){var t=ZW(e);return"channelsLast"===n.dataFormat?oP(t,[1,2]):oP(t,[2,3])}))}}]),n}(dq);pq.className="GlobalMaxPooling2D",qM(pq);var vq=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).layer=e.layer,r}return yC(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){UU(nR(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=VU(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(lU),gq=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return yC(n,[{key:"build",value:function(e){if((e=QW(e)).length<3)throw new vB("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),UU(nR(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=QW(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return KM((function(){return lG((function(e,r){return[ZW(n.layer.call(e,t)),[]]}),e=ZW(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(vq);gq.className="TimeDistributed",qM(gq);var mq=function(e){tR(n,e);var t=oR(n);function n(e){var r;gC(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=VU(i),a.goBackwards=!0!==a.goBackwards;var o,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=VU(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,OB(qB,"BidirectionalMergeMode",o),e.weights)throw new gB("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return yC(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):wB(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=uG(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return UU(nR(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new vB("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,pd(r));var l=r.map((function(e){return new aU({shape:e.shape})}));this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,pd(l))}if(null!=a)throw new gB("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof iU,f=0,d=o;f<d.length;f++){if(d[f]instanceof iU!==c)throw new vB("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(c){var h=[e].concat(o),p=this.inputSpec.concat(s),v=this.inputSpec;this.inputSpec=p;var g=UU(nR(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=v,g}return UU(nR(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return KM((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=WP(a,1)),"concat"===n.mergeMode?o=vW([r,a]):"sum"===n.mergeMode?o=rO(r,a):"ave"===n.mergeMode?o=sP(.5,rO(r,a)):"mul"===n.mergeMode?o=sP(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;QB(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),QB(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){UU(nR(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=UU(nR(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=VU(t.layer);if(delete t.layer,null!=t.numConstants)throw new gB("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(vq);mq.className="Bidirectional",qM(mq);var yq,bq;fE().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(yq||(yq={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(bq||(bq={}));function xq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(_q(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=xq(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function kq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sq;return wq(e,t)}function wq(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(_q(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=wq(e.map((function(e){return e[r]})),t,n);i[r]=a};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function Sq(e){return null===e?null:_q(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function _q(e){var t=!1;fE().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof __webpack_require__(977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof vR)&&!(e instanceof Promise)&&!t)}function Cq(e){return function(e,t){return xq(e,t)}(e,Eq)}function Eq(e){return e instanceof vR?{value:e.clone(),recurse:!1}:_q(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var Aq=function(){function e(t){if(gC(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return yC(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=bC(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(bfe){n.e(bfe)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),Iq=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.call(this,n.INITIAL_CAPACITY)}return yC(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){UU(nR(n.prototype),"isFull",this).call(this)&&this.expand(),UU(nR(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){UU(nR(n.prototype),"isFull",this).call(this)&&this.expand(),UU(nR(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(Aq);function Tq(e){return new Pq(e)}function Rq(e,t){return new Gq(e,t)}Iq.INITIAL_CAPACITY=32;var Nq,Mq=function(){function e(){gC(this,e)}return yC(e,[{key:"toArray",value:function(){var e=vC(hC().mark((function e(){var t,n;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=vC(hC().mark((function e(){var t,n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new Wq(this,e)}},{key:"filter",value:function(e){return new jq(this,e)}},{key:"map",value:function(e){return new Bq(this,e)}},{key:"mapAsync",value:function(e){return new Uq(this,e)}},{key:"serialMapAsync",value:function(e){return new Uq(this,e).serial()}},{key:"flatmap",value:function(e){return new Hq(this,e)}},{key:"forEachAsync",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new zq(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sq,r=this.rowMajorBatch(e,t);return r.map((function(e){return kq(e,n)}))}},{key:"concatenate",value:function(e,t){return new Gq(new Oq([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new Lq(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new Dq(this,e)}},{key:"prefetch",value:function(e){return new qq(this,e)}},{key:"shuffle",value:function(e,t){return new Xq(this,e,t)}},{key:"serial",value:function(){return new Fq(this)}}]),e}(),Oq=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).items=e,r.trav=0,r}return yC(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:Cq(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),Pq=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).nextFn=e,r}return yC(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),Fq=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){var t=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),Dq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){var t=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:$M(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),Lq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),zq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return gC(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){var t=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=vC(hC().mark((function e(){var t,n;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),jq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){var t=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:$M(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),Bq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){var t,n,r,a,i,o,s;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=IR(t.value),r=this.transform(t.value),a=IR(r),i=bC(n);try{for(i.s();!(o=i.n()).done;)AR(s=o.value,a)||s.dispose()}catch(bfe){i.e(bfe)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),Wq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){var t=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),Uq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){var t,n,r,a,i,o,s;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=IR(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=IR(r),i=bC(n);try{for(i.s();!(o=i.n()).done;)AR(s=o.value,a)||s.dispose()}catch(bfe){i.e(bfe)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),Vq=function(e){tR(n,e);var t=oR(n);function n(){var e;return gC(this,n),(e=t.call(this)).outputQueue=new Iq,e.lastRead=Promise.resolve({value:null,done:!1}),e}return yC(n,[{key:"next",value:function(){var e=vC(hC().mark((function e(){var t=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Mq),Hq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=vC(hC().mark((function e(){var t,n,r,a,i,o,s;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=IR(t.value),r=this.transform(t.value),a=IR(r),this.outputQueue.pushAll(r),i=bC(n);try{for(i.s();!(o=i.n()).done;)AR(s=o.value,a)||s.dispose()}catch(bfe){i.e(bfe)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vq),Gq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return yC(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Mq);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(Nq||(Nq={}));var qq=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new Aq(r),a}return yC(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(Mq),Xq=function(e){tR(n,e);var t=oR(n);function n(e,r,a){var i;return gC(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=FP.alea(a||YT().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return yC(n,[{key:"next",value:function(){var e=vC(hC().mark((function e(){var t=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=vC(hC().mark((function e(){var t,n;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(qq),Yq=function(){function e(){gC(this,e),this.size=null}return yC(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return IC(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),Kq(vC(hC().mark((function t(){return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,$q));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,Kq(vC(hC().mark((function t(){return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,Kq(vC(hC().mark((function t(){return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return KM((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return Kq(vC(hC().mark((function n(){return hC().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return KM((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return Kq(vC(hC().mark((function n(){return hC().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return Kq(vC(hC().mark((function n(){return hC().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,Kq(vC(hC().mark((function t(){var r;return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Tq(vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",Rq(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,Kq(vC(hC().mark((function t(){return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=FP.alea(t||YT().toString());return Kq(vC(hC().mark((function t(){var i;return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,Kq(vC(hC().mark((function t(){return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Kq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){tR(a,n);var r=oR(a);function a(){var e;return gC(this,a),(e=r.apply(this,arguments)).size=t,e}return yC(a,[{key:"iterator",value:function(){var t=vC(hC().mark((function t(){return hC().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(Yq))}function $q(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof vR||HC(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof vR?tF(e):KR(e)}(e),recurse:!1}:{value:null,recurse:!0}}Yq.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function Zq(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&IC("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var Qq=_L,Jq=function(e){tR(n,e);var t=oR(n);function n(){var e;return gC(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new xC(aR(e),XM()),e}return yC(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,fE().get("IS_NODE")&&xT("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&qC(n[0])){var a=n.map((function(e){return KT(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?iL(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return $T(e)}));return rM(e.shape,e.dtype,n)}catch(yfe){throw new Error("Failed to decode encoded string bytes into utf-8")}return rM(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return XM().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=YT(),t(),r=YT()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){Zq([e],"where");var t=this.readSync(e.dataId);return Qq(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return UU(nR(n.prototype),"epsilon",this).call(this)}}]),n}(kC);Jq.nextDataId=0;function eX(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(Zq(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,l=u.data.get(s.dataId).values,c=MC(s.shape),f=n||s.dtype,d=UC(f,c),h=0;h<c;++h)d[h]=t(l[h],i);return u.makeTensorInfo(s.shape,f,d)}}function tX(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(Zq(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,l=u.data.get(s.dataId).values,c=n||s.dtype,f=t(l,c,i);return u.makeTensorInfo(s.shape,c,f)}}QM("cpu",(function(){return new Jq}),1);var nX=eX(dA,(function(e){return e>=0?e:Math.exp(e)-1})),rX={kernelName:dA,backendName:"cpu",kernelFunc:nX};function aX(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var iX={kernelName:TA,backendName:"cpu",kernelFunc:aX};function oX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;Zq([a],"leakyRelu");for(var o=MC(a.shape),s=n.data.get(a.dataId).values,u=WC("float32",o),l=0;l<s.length;l++)u[l]=s[l]<0?i*s[l]:s[l];return n.makeTensorInfo(a.shape,"float32",u)}var sX={kernelName:FA,backendName:"cpu",kernelFunc:oX};function uX(e){return function(t,n,r,a,i){var o=OM(t,n),s=o.length,u=ZC(o),l=WC(i,MC(o)),c=t.length,f=n.length,d=ZC(t),h=ZC(n),p=NM(t,o),v=NM(n,o);if(p.length+v.length===0)for(var g=0;g<l.length;++g)l[g]=e(r[g%r.length],a[g%a.length]);else for(var m=function(t){var n=iE(t,s,u),i=n.slice(-c);p.forEach((function(e){return i[e]=0}));var o=aE(i,c,d),g=n.slice(-f);v.forEach((function(e){return g[e]=0}));var m=aE(g,f,h);l[t]=e(r[o],a[m])},y=0;y<l.length;++y)m(y);return[l,o]}}var lX=uX((function(e,t){return e<0?t*e:e}));function cX(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;Zq([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=Pf(lX(r.shape,a.shape,i,o,"float32"),2),u=s[0],l=s[1];return n.makeTensorInfo(l,"float32",u)}var fX={kernelName:gI,backendName:"cpu",kernelFunc:cX},dX=eX(kI,(function(e){return Math.max(0,e)})),hX={kernelName:kI,backendName:"cpu",kernelFunc:dX},pX=eX(AI,(function(e){return Math.min(Math.max(0,e),6)})),vX={kernelName:AI,backendName:"cpu",kernelFunc:pX};function gX(e){return function(t,n,r){for(var a=WC(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}var mX=gX((function(e){return 1/(1+Math.exp(-e))})),yX=eX(jI,(function(e){return 1/(1+Math.exp(-e))})),bX={kernelName:jI,backendName:"cpu",kernelFunc:yX};function xX(e,t,n,r,a){if("linear"===n)return aX({inputs:{x:t},backend:e});if("relu"===n)return dX({inputs:{x:t},backend:e});if("elu"===n)return nX({inputs:{x:t},backend:e});if("relu6"===n)return pX({inputs:{x:t},backend:e});if("prelu"===n)return cX({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return oX({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return yX({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function kX(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var wX={kernelName:WE,backendName:"cpu",kernelFunc:kX};function SX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=SX(e,t,"float32"),a=SX(e,t,"float32");return kX({inputs:{real:r,imag:a},backend:e})}var i=tE(MC(t),n);return e.makeTensorInfo(t,n,i)}function _X(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var CX={kernelName:bI,backendName:"cpu",kernelFunc:_X};function EX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return aX({inputs:{x:a},backend:n});var o=SX(n,a.shape,a.dtype),s=EX({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=kX({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var l=_X({inputs:{input:a},backend:n}),c=EX({inputs:{x:l},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(l),c}if(!VC(a.dtype,i)){var f=aX({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}if("int32"===i){var d=n.data.get(a.dataId).values,h=Int32Array.from(d);return n.makeTensorInfo(a.shape,"int32",h)}if("bool"===i){var p=n.data.get(a.dataId).values,v=XT([0],a.dtype),g=uX((function(e,t){return e!==t?1:0}))(a.shape,[],p,v,"bool"),m=Pf(g,2),y=m[0],b=m[1];return n.makeTensorInfo(b,"bool",y)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var AX={kernelName:zE,backendName:"cpu",kernelFunc:EX};function IX(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;Zq([o,s],e);var l=u.data.get(o.dataId).values,c=u.data.get(s.dataId).values,f="string"===o.dtype?SL(l):l,d="string"===o.dtype?SL(c):c,h=r||o.dtype,p=Pf(t(o.shape,s.shape,f,d,h),2),v=p[0],g=p[1];return u.makeTensorInfo(g,h,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var l=EX({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),f=c.complexTensorInfos.real,d=c.complexTensorInfos.imag,h=u.data.get(f.dataId).values,p=u.data.get(d.dataId).values,v=EX({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),g=u.data.get(v.dataId),m=g.complexTensorInfos.real,y=g.complexTensorInfos.imag,b=u.data.get(m.dataId).values,x=u.data.get(y.dataId).values,k=Pf(n(o.shape,s.shape,h,p,b,x),3),w=k[0],S=k[1],_=k[2],C=u.makeTensorInfo(_,"float32",w),E=u.makeTensorInfo(_,"float32",S),A=kX({inputs:{real:C,imag:E},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(C),u.disposeIntermediateTensorInfo(E),A}var I=u.data.get(o.dataId).values,T=u.data.get(s.dataId).values,R=r||o.dtype,N=Pf(t(o.shape,s.shape,I,T,R),2),M=N[0],O=N[1];return u.makeTensorInfo(O,R,M)}}function TX(e){return function(t,n,r,a,i,o){var s=OM(t,n),u=MC(s),l=s.length,c=ZC(s),f=WC("float32",u),d=WC("float32",u),h=NM(t,s),p=NM(n,s),v=iL(r,a),g=iL(i,o),m=t.length,y=ZC(t),b=n.length,x=ZC(n);if(h.length+p.length===0)for(var k=0;k<f.length;k++){var w=k%v.length,S=k%g.length,_=e(v[2*w],v[2*w+1],g[2*S],g[2*S+1]);f[k]=_.real,d[k]=_.imag}else for(var C=function(t){var n=iE(t,l,c),r=n.slice(-m);h.forEach((function(e){return r[e]=0}));var a=aE(r,m,y),i=n.slice(-b);p.forEach((function(e){return i[e]=0}));var o=aE(i,b,x),s=e(v[2*a],v[2*a+1],g[2*o],g[2*o+1]);f[t]=s.real,d[t]=s.imag},E=0;E<f.length;E++)C(E);return[f,d,s]}}var RX=uX((function(e,t){return e+t})),NX=TX((function(e,t,n,r){return{real:e+n,imag:t+r}})),MX=IX(bE,RX,NX),OX={kernelName:bE,backendName:"cpu",kernelFunc:MX};function PX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=MC(a.shape),s=zC(i,o),u=MC(s);IC(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var l=n.data.get(a.dataId);if(null!=l.complexTensorInfos){var c=l.complexTensorInfos.real,f=l.complexTensorInfos.imag;c.shape=s,f.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var FX={kernelName:wI,backendName:"cpu",kernelFunc:PX};function DX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;Zq([a,i],"matMul");var u=a.shape.length,l=i.shape.length,c=o?a.shape[u-2]:a.shape[u-1],f=s?i.shape[l-1]:i.shape[l-2],d=o?a.shape[u-1]:a.shape[u-2],h=s?i.shape[l-2]:i.shape[l-1],p=a.shape.slice(0,-2),v=i.shape.slice(0,-2),g=MC(p),m=MC(v),y=OM(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,h]);IC(c===f,(function(){return"Error in matMul: inner shapes (".concat(c,") and (")+"".concat(f,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var b=s?[m,h,f]:[m,f,h],x=PX({inputs:{x:a},backend:n,attrs:{shape:o?[g,c,d]:[g,d,c]}}),k=PX({inputs:{x:i},backend:n,attrs:{shape:b}}),w=o?x.shape[1]:x.shape[2],S=o?x.shape[2]:x.shape[1],_=s?k.shape[1]:k.shape[2],C=Math.max(g,m),E=n.data.get(x.dataId).values,A=n.data.get(k.dataId).values,I=ZC(x.shape),T=ZC(k.shape),R=Pf(o?[I[0],1,I[1]]:[I[0],I[1],1],3),N=R[0],M=R[1],O=R[2],P=Pf(s?[1,T[1],T[0]]:[T[1],1,T[0]],3),F=P[0],D=P[1],L=P[2],z=S*_,j=rM([C,S,_],x.dtype),B=j.values,W=n.blockSize,U=0;U<C;U++)for(var V=0;V<S;V+=W)for(var H=0;H<_;H+=W)for(var G=0;G<w;G+=W)for(var q=Math.min(V+W,S),X=Math.min(H+W,_),Y=Math.min(G+W,w),K=V;K<q;K++)for(var $=H;$<X;$++){for(var Z=0,Q=G;Q<Y;Q++){var J=Math.min(U,g-1)*N,ee=Math.min(U,m-1)*L;Z+=E[J+K*M+Q*O]*A[Q*F+$*D+ee]}B[U*z+(K*_+$)]+=Z}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(y,j.dtype,j.values)}var LX={kernelName:PE,backendName:"cpu",kernelFunc:DX};var zX={kernelName:mT,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,l=a.bias,c=a.preluActivationWeights,f=o.transposeA,d=o.transposeB,h=o.activation,p=o.leakyreluAlpha,v=[];t=DX({inputs:{a:s,b:u},attrs:{transposeA:f,transposeB:d},backend:i}),l&&(n=MX({inputs:{a:t,b:l},backend:i}),v.push(t),t=n),h&&(r=xX(i,t,h,c,p),v.push(t),t=r);for(var g=0,m=v;g<m.length;g++){var y=m[g];i.disposeIntermediateTensorInfo(y)}return t}};function jX(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var BX={kernelName:gE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;Zq(t,"abs");var r=new Float32Array(MC(t.shape));return r=jX(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},WX=eX(mE,(function(e){return Math.acos(e)})),UX={kernelName:mE,backendName:"cpu",kernelFunc:WX},VX=eX(yE,(function(e){return Math.acosh(e)})),HX={kernelName:yE,backendName:"cpu",kernelFunc:VX};var GX={kernelName:xE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;Zq(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=rM(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],l=0;l<o.length;l++)o[l]+=u[l];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function qX(e,t,n,r,a){for(var i=t.length,o=MC(t),s=ZC(t),u=ZC(a),l=WC(n,MC(a)),c=0;c<o;++c){for(var f=iE(c,i,s),d=new Array(f.length),h=0;h<d.length;h++)d[h]=f[r[h]];l[aE(d,i,u)]=e[c]}return l}function XX(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;Zq(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var l=qX(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(l,s,a.dtype),shape:s,dtype:a.dtype}}var YX={kernelName:lT,backendName:"cpu",kernelFunc:XX};var KX={kernelName:kE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;Zq(a,"all");var s=jC(i,a.shape),u=s,l=wP(u,a.shape.length),c=a;null!=l&&(c=XX({inputs:{x:a},backend:n,attrs:{perm:l}}),u=_P(u.length,a.shape.length)),kP("all",u,c.shape.length);for(var f=Pf(bP(c.shape,u),2),d=f[0],h=MC(f[1]),p=tE(MC(d),c.dtype),v=n.data.get(c.dataId).values,g=0;g<p.length;++g){for(var m=g*h,y=v[m],b=0;b<h;++b){var x=v[m+b];y=y&&x}p[g]=y}null!=l&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(d,c.dtype,p);if(o){var w=PX({inputs:{x:k},backend:n,attrs:{shape:xP(d,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}};var $X={kernelName:wE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;Zq(a,"any");var s=jC(i,a.shape),u=s,l=wP(u,a.shape.length),c=a;null!=l&&(c=XX({inputs:{x:a},backend:n,attrs:{perm:l}}),u=_P(u.length,a.shape.length)),kP("any",u,c.shape.length);for(var f=Pf(bP(c.shape,u),2),d=f[0],h=MC(f[1]),p=tE(MC(d),c.dtype),v=n.data.get(c.dataId).values,g=0;g<p.length;++g){for(var m=g*h,y=v[m],b=0;b<h;++b){var x=v[m+b];y=y||x}p[g]=y}null!=l&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(d,c.dtype,p);if(o){var w=PX({inputs:{x:k},backend:n,attrs:{shape:xP(d,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}};var ZX={kernelName:SE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;Zq(a,"argMax");var o=jC(i,a.shape),s=wP(o,a.shape.length),u=a,l=[];null!=s&&(u=XX({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=_P(o.length,u.shape.length)),kP("argMax",o=[o[0]],u.shape.length);for(var c=Pf(bP(u.shape,o),2),f=c[0],d=c[1],h=tE(MC(f),"int32"),p=MC(d),v=n.data.get(u.dataId).values,g=0;g<h.length;++g){for(var m=g*p,y=v[m],b=0,x=0;x<p;++x){var k=v[m+x];k>y&&(y=k,b=x)}h[g]=b}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",h)}};var QX={kernelName:_E,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;Zq(a,"argMin");var o=jC(i,a.shape),s=wP(o,a.shape.length),u=a,l=[];null!=s&&(u=XX({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=_P(o.length,u.shape.length)),kP("argMin",o=[o[0]],u.shape.length);for(var c=Pf(bP(u.shape,o),2),f=c[0],d=c[1],h=tE(MC(f),"int32"),p=MC(d),v=n.data.get(u.dataId).values,g=0;g<h.length;++g){for(var m=g*p,y=v[m],b=0,x=0;x<p;++x){var k=v[m+x];k<y&&(y=k,b=x)}h[g]=b}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",h)}},JX=eX(CE,(function(e){return Math.asin(e)})),eY={kernelName:CE,backendName:"cpu",kernelFunc:JX},tY=eX(EE,(function(e){return Math.asinh(e)})),nY={kernelName:EE,backendName:"cpu",kernelFunc:tY},rY=eX(AE,(function(e){return Math.atan(e)})),aY={kernelName:AE,backendName:"cpu",kernelFunc:rY},iY=uX((function(e,t){return Math.atan2(e,t)})),oY=IX(TE,iY),sY={kernelName:TE,backendName:"cpu",kernelFunc:oY},uY=eX(IE,(function(e){return Math.atanh(e)})),lY={kernelName:IE,backendName:"cpu",kernelFunc:uY};function cY(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,f=a.effectiveFilterWidth,d=a.padInfo.top,h=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=rM(a.outShape,n),g=v.values,m=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var k=x*m,w=x*r[0],S=0;S<a.inChannels;++S)for(var _=0;_<a.outHeight;++_)for(var C=_*o-d,E=Math.max(0,C),A=Math.min(a.inHeight,c+C),I=k+_*y,T=0;T<a.outWidth;++T){for(var R=T*s-h,N=Math.max(0,R),M=Math.min(a.inWidth,f+R),O=p,P=0,F=0,D=E;D<A;D+=u){for(var L=w+D*r[1],z=N;z<M;z+=l){var j=e[L+z*r[2]+S];"max"===i&&j>O?O=j:"avg"===i&&(P+=j,F++)}if(isNaN(O))break}g[I+T*b+S]="avg"===i?P/F:O}return v}function fY(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=rM(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,v=rM(t,n,e),g=0;g<r.batchSize;++g)for(var m=0;m<r.inChannels;++m)for(var y=0;y<r.outHeight;++y){for(var b=y*s-h,x=b;x<0;)x+=l;for(var k=Math.min(r.inHeight,f+b),w=0;w<r.outWidth;++w){for(var S=w*u-p,_=S;_<0;)_+=c;for(var C=Math.min(r.inWidth,d+S),E=Number.NEGATIVE_INFINITY,A=-1,I=x;I<k;I+=l)for(var T=I-b,R=_;R<C;R+=c){var N=R-S,M=v.get(g,I,R,m);M>E&&(E=M,A=a?i?((g*r.inHeight+I)*r.inWidth+R)*r.inChannels+m:(I*r.inWidth+R)*r.inChannels+m:T*d+N)}o.set(A,g,y,w,m)}}return o}function dY(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,f=a.dilationWidth,d=a.effectiveFilterDepth,h=a.effectiveFilterHeight,p=a.effectiveFilterWidth,v=a.padInfo.front,g=a.padInfo.top,m=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=rM(a.outShape,n),x=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],_=a.outShape[4],C=0;C<a.batchSize;++C)for(var E=C*k,A=C*r[0],I=0;I<a.inChannels;++I)for(var T=0;T<a.outDepth;++T){for(var R=T*o-v,N=R;N<0;)N+=l;for(var M=Math.min(a.inDepth,d+R),O=E+T*w,P=0;P<a.outHeight;++P){for(var F=P*s-g,D=F;D<0;)D+=c;for(var L=Math.min(a.inHeight,h+F),z=O+P*S,j=0;j<a.outWidth;++j){for(var B=j*u-m,W=B;W<0;)W+=f;for(var U=Math.min(a.inWidth,p+B),V=z+j*_,H=y,G=0,q=0,X=N;X<M;X+=l){for(var Y=A+X*r[1],K=D;K<L;K+=c){for(var $=Y+K*r[2],Z=W;Z<U;Z+=f){var Q=e[$+Z*r[3]+I];if("max"===i&&Q>H?H=Q:"avg"===i&&(G+=Q,q++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}x[V+I]="avg"===i?G/q:H}}}return b}var hY={kernelName:RE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Zq(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;IC(xO(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l,c=uO(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&OC(c.inShape,c.outShape))l=aX({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,d=ZC(a.shape),h=cY(f,a.shape,a.dtype,d,c,"avg");l=n.makeTensorInfo(c.outShape,a.dtype,h.values)}return l}};var pY={kernelName:ME,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;Zq(a,"avgPool3d");var c=lO(a.shape,i,o,1,s,u,l),f=dY(n.data.get(a.dataId).values,a.shape,a.dtype,ZC(a.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}};var vY={kernelName:OE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;Zq([a,i],"avgPool3DGrad");for(var c=lO(i.shape,o,s,1,u,l),f=c.strideDepth,d=c.strideHeight,h=c.strideWidth,p=c.filterDepth,v=c.filterHeight,g=c.filterWidth,m=c.dilationDepth,y=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,k=c.effectiveFilterHeight,w=c.effectiveFilterWidth,S=x-1-c.padInfo.front,_=w-1-c.padInfo.left,C=k-1-c.padInfo.top,E=rM(i.shape,"float32"),A=1/(p*v*g),I=n.bufferSync(a),T=0;T<c.batchSize;++T)for(var R=0;R<c.inChannels;++R)for(var N=0;N<c.inDepth;++N)for(var M=0;M<c.inHeight;++M)for(var O=0;O<c.inWidth;++O){for(var P=N-S,F=M-C,D=O-_,L=0,z=0;z<x;z+=m){var j=(P+z)/f;if(!(j<0||j>=c.outDepth||Math.floor(j)!==j))for(var B=0;B<k;B+=y){var W=(F+B)/d;if(!(W<0||W>=c.outHeight||Math.floor(W)!==W))for(var U=0;U<w;U+=b){var V=(D+U)/h;if(!(V<0||V>=c.outWidth||Math.floor(V)!==V))L+=I.get(T,j,W,V,R)}}}E.set(L*A,T,N,M,O,R)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var gY={kernelName:NE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Zq([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=uO(o.shape,s,u,1,l),f=c.strideHeight,d=c.strideWidth,h=c.filterHeight,p=c.filterWidth,v=c.dilationHeight,g=c.dilationWidth,m=c.effectiveFilterHeight,y=c.effectiveFilterWidth,b=y-1-c.padInfo.left,x=m-1-c.padInfo.top,k=rM(o.shape,"float32"),w=1/(h*p),S=n.data.get(a.dataId).values,_=rM(a.shape,"float32",S),C=0;C<c.batchSize;++C)for(var E=0;E<c.inChannels;++E)for(var A=0;A<c.inHeight;++A)for(var I=0;I<c.inWidth;++I){for(var T=A-x,R=I-b,N=0,M=0;M<m;M+=v){var O=(T+M)/f;if(!(O<0||O>=c.outHeight||Math.floor(O)!==O))for(var P=0;P<y;P+=g){var F=(R+P)/d;if(!(F<0||F>=c.outWidth||Math.floor(F)!==F))N+=_.get(C,O,F,E)}}k.set(N*w,C,A,I,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var mY={kernelName:_A,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;IC(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),IC(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),IC(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),Zq([a,s,u,i,o],"batchNorm");var l=r.varianceEpsilon;null==l&&(l=.001);for(var c=n.data.get(a.dataId).values,f=n.data.get(s.dataId).values,d=n.data.get(u.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(c.length),g=p.length,m=h.length,y=d.length,b=f.length,x=0,k=0,w=0,S=0,_=0;_<c.length;++_)v[_]=p[x++]+(c[_]-f[k++])*h[w++]/Math.sqrt(d[S++]+l),x>=g&&(x=0),k>=b&&(k=0),w>=m&&(w=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,v)}};function yY(e,t,n,r,a){var i=jM(r,t,n),o=MC(n),s=ZC(r);if(i){var u=BM(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var l=rM(r,a,"string"===a?SL(e):e),c=rM(n,a),f=0;f<c.size;++f){var d=c.indexToLoc(f),h=d.map((function(e,n){return e+t[n]}));c.set.apply(c,[l.get.apply(l,pd(h))].concat(pd(d)))}return"string"===a?c.values.map((function(e){return KT(e)})):c.values}function bY(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;Zq(a,"slice");var s=Pf(WM(a,i,o),2),u=s[0],l=s[1];LM(a,u,l);var c=yY(n.data.get(a.dataId).values,u,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}var xY={kernelName:FI,backendName:"cpu",kernelFunc:bY};var kY={kernelName:FE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Zq([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=HD(a.shape,i,s),l=GD(u.length,i.length),c=qD(a.shape,i,s),f=XD(o,i.length),d=YD(c,o,i.length),h=PX({inputs:{x:a},backend:n,attrs:{shape:u}}),p=XX({inputs:{x:h},backend:n,attrs:{perm:l}}),v=PX({inputs:{x:p},backend:n,attrs:{shape:c}}),g=bY({inputs:{x:v},backend:n,attrs:{begin:f,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}};function wY(e,t,n,r,a){for(var i=MC(r),o=tE(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function SY(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=rM([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var l=e.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,s,l):t.size>0?o.set(o.get(s,l)+t.get(s,u),s,l):o.set(o.get(s,l)+1,s,l))}return o}var _Y={kernelName:DE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=wY(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var CY={kernelName:LE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=OM(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},EY=gX((function(e){return Math.ceil(e)})),AY=tX(jE,EY),IY={kernelName:jE,backendName:"cpu",kernelFunc:AY},TY=eX(BE,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),RY={kernelName:BE,backendName:"cpu",kernelFunc:TY},NY={kernelName:UE,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(MC(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,l=0;l<s.length;l++){var c=s[l],f=u[l];r[l]=Math.hypot(c,f)}return n.makeOutput(r,t.shape,"float32")}};function MY(e,t,n,r){var a=UC(n,MC(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=MC(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?SL(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,l=0;l<e.shape[1];++l)a[u+l]=r[i++];o+=e.shape[1]}))}return a}function OY(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var PY={kernelName:NA,backendName:"cpu",kernelFunc:OY};function FY(e){var t=e.inputs,n=e.backend,r=jC(e.attrs.axis,t[0].shape)[0],a=WD(t.map((function(e){return e.shape})),r);if(0===MC(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return MC(e.shape)>0}));if(1===i.length)return aX({inputs:{x:i[0]},backend:n});var o=i.map((function(e){return e.shape}));if(BD(o,r),"complex64"===i[0].dtype){var s=i.map((function(e){return _X({inputs:{input:e},backend:n})})),u=i.map((function(e){return OY({inputs:{input:e},backend:n})})),l=FY({inputs:s,backend:n,attrs:{axis:r}}),c=FY({inputs:u,backend:n,attrs:{axis:r}}),f=kX({inputs:{real:l,imag:c},backend:n});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),f}var d=i.map((function(e){var t=MC(e.shape.slice(r));return PX({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),h=d.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=WD(d.map((function(e){return e.shape})),1);var p=1===d[0].shape[0],v=MY(h,a,t[0].dtype,p),g=WD(i.map((function(e){return e.shape})),r),m=n.makeTensorInfo(g,t[0].dtype,v);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var DY={kernelName:VE,backendName:"cpu",kernelFunc:FY};function LY(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dilations,c=r.dimRoundingMode;Zq([a,i],"conv2d");for(var f=kO(u),d=cO(a.shape,i.shape,o,l,s,c,!1,f),h=d.filterHeight,p=d.filterWidth,v=d.dilationHeight,g=d.dilationWidth,m=d.padInfo.left,y=d.padInfo.top,b="channelsLast"===d.dataFormat,x=new dR(d.outShape,a.dtype),k=ZC(a.shape),w=ZC(i.shape),S=k[0],_=b?k[1]:k[2],C=b?k[2]:1,E=b?1:k[1],A=x.strides[0],I=b?x.strides[1]:x.strides[2],T=b?x.strides[2]:1,R=b?1:x.strides[1],N=n.data.get(a.dataId).values,M=n.data.get(i.dataId).values,O=x.values,P=0;P<d.batchSize;++P)for(var F=P*S,D=P*A,L=0;L<d.outHeight;++L)for(var z=D+L*I,j=L*d.strideHeight-y,B=0;B<h;++B){var W=j+B*v;if(!(W<0||W>=d.inHeight))for(var U=B*w[0],V=F+W*_,H=0;H<d.outWidth;++H)for(var G=z+H*T,q=H*d.strideWidth-m,X=0;X<p;++X){var Y=q+X*g;if(!(Y<0||Y>=d.inWidth))for(var K=V+Y*C,$=U+X*w[1],Z=0;Z<d.inChannels;++Z){for(var Q=N[K+Z*E],J=0;J<d.outChannels;++J)O[G+J*R]+=Q*M[$+J];$+=d.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,O)}var zY={kernelName:HE,backendName:"cpu",kernelFunc:LY};var jY={kernelName:GE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape;Zq([a,i],"conv2dBackpropFilter");for(var f=kO(u),d=cO(a.shape,c,o,1,s,l,!1,f),h=d.strideHeight,p=d.strideWidth,v=d.filterHeight,g=d.filterWidth,m="channelsLast"===d.dataFormat,y=new dR(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,S=new dR(a.shape,a.dtype,k),_=new dR(i.shape,i.dtype,w),C=0;C<v;++C)for(var E=Math.max(0,Math.ceil((x-C)/h)),A=Math.min(d.outHeight,(d.inHeight+x-C)/h),I=0;I<g;++I)for(var T=Math.max(0,Math.ceil((b-I)/p)),R=Math.min(d.outWidth,(d.inWidth+b-I)/p),N=0;N<d.inChannels;++N)for(var M=0;M<d.outChannels;++M){for(var O=0,P=0;P<d.batchSize;++P)for(var F=E;F<A;++F)for(var D=C+F*h-x,L=T;L<R;++L){var z=I+L*p-b;O+=m?S.get(P,D,z,N)*_.get(P,F,L,M):S.get(P,N,D,z)*_.get(P,M,F,L)}y.set(O,C,I,N,M)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var BY={kernelName:qE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode;Zq([a,i],"conv2dBackpropInput");var f=ZC(i.shape),d=ZC(a.shape),h=kO(l),p=cO(o,i.shape,s,1,u,c,!1,h),v=new dR(p.inShape,"float32"),g=v.values,m=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=Pf(f,3),x=b[0],k=b[1],w=b[2],S=p.batchSize,_=p.filterHeight,C=p.filterWidth,E=p.inChannels,A=p.inHeight,I=p.inWidth,T=p.outChannels,R=p.outHeight,N=p.outWidth,M=p.strideHeight,O=p.strideWidth;h=p.dataFormat;for(var P=_-1-p.padInfo.top,F=C-1-p.padInfo.left,D="channelsLast"===h,L=v.strides[0],z=D?v.strides[1]:v.strides[2],j=D?v.strides[2]:1,B=D?1:v.strides[1],W=d[0],U=D?d[1]:d[2],V=D?d[2]:1,H=D?1:d[1],G=0;G<S;++G)for(var q=0;q<E;++q)for(var X=0;X<A;++X)for(var Y=X-P,K=Math.max(0,Math.ceil(Y/M)),$=Math.min(R,(_+Y)/M),Z=0;Z<I;++Z){for(var Q=Z-F,J=Math.max(0,Math.ceil(Q/O)),ee=Math.min(N,(C+Q)/O),te=0,ne=K;ne<$;++ne)for(var re=ne*M-Y,ae=J;ae<ee;++ae)for(var ie=W*G+U*ne+V*ae,oe=x*(_-1-re)+k*(C-1-(ae*O-Q))+w*q,se=0;se<T;++se){te+=m[ie+H*se]*y[oe+se]}g[L*G+z*X+j*Z+B*q]=te}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var WY={kernelName:XE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;Zq([a,i],"conv3d");for(var l=fO(a.shape,i.shape,o,u,s),c=l.filterDepth,f=l.filterHeight,d=l.filterWidth,h=l.dilationDepth,p=l.dilationHeight,v=l.dilationWidth,g=l.padInfo,m=g.front,y=g.left,b=g.top,x=new dR(l.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,S=x.values,_=ZC(a.shape),C=ZC(i.shape),E=0;E<l.batchSize;++E)for(var A=E*_[0],I=E*x.strides[0],T=0;T<l.outDepth;++T)for(var R=I+T*x.strides[1],N=T*l.strideDepth-m,M=0;M<c;++M){var O=N+M*h;if(!(O<0||O>=l.inDepth))for(var P=M*C[0],F=A+O*_[1],D=0;D<l.outHeight;++D)for(var L=R+D*x.strides[2],z=D*l.strideHeight-b,j=0;j<f;++j){var B=z+j*p;if(!(B<0||B>=l.inHeight))for(var W=P+j*C[1],U=F+B*_[2],V=0;V<l.outWidth;++V)for(var H=L+V*l.outChannels,G=V*l.strideWidth-y,q=0;q<d;++q){var X=G+q*v;if(!(X<0||X>=l.inWidth))for(var Y=W+q*C[2],K=U+X*l.inChannels,$=Y,Z=0;Z<l.inChannels;++Z){for(var Q=k[K+Z],J=0;J<l.outChannels;++J)S[H+J]+=Q*w[$+J];$+=l.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var UY={kernelName:YE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;Zq([a,i],"conv3dBackpropFilterV2");for(var l=ZC(a.shape),c=ZC(i.shape),f=fO(a.shape,u,o,1,s),d=f.strideDepth,h=f.strideHeight,p=f.strideWidth,v=f.filterDepth,g=f.filterHeight,m=f.filterWidth,y=new dR(f.filterShape,"float32"),b=y.values,x=Pf(y.strides,4),k=x[0],w=x[1],S=x[2],_=x[3],C=n.data.get(i.dataId).values,E=Pf(c,4),A=E[0],I=E[1],T=E[2],R=E[3],N=n.data.get(a.dataId).values,M=Pf(l,4),O=M[0],P=M[1],F=M[2],D=M[3],L=f.padInfo.front,z=f.padInfo.left,j=f.padInfo.top,B=0;B<v;++B)for(var W=Math.max(0,Math.ceil((L-B)/d)),U=Math.min(f.outDepth,(f.inDepth+L-B)/d),V=B*k,H=0;H<g;++H)for(var G=Math.max(0,Math.ceil((j-H)/h)),q=Math.min(f.outHeight,(f.inHeight+j-H)/h),X=H*w+V,Y=0;Y<m;++Y)for(var K=Math.max(0,Math.ceil((z-Y)/p)),$=Math.min(f.outWidth,(f.inWidth+z-Y)/p),Z=Y*S+X,Q=0;Q<f.inChannels;++Q)for(var J=Q*_+Z,ee=0;ee<f.outChannels;++ee){for(var te=0,ne=0;ne<f.batchSize;++ne)for(var re=ne*O,ae=ne*A,ie=W;ie<U;++ie)for(var oe=(B+ie*d-L)*P+re,se=ie*I+ae,ue=G;ue<q;++ue)for(var le=(H+ue*h-j)*F+oe,ce=ue*T+se,fe=K;fe<$;++fe){var de=fe*R+ce;te+=N[(Y+fe*p-z)*D+le+Q]*C[de+ee]}b[J+ee]=te}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var VY={kernelName:KE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;Zq([a],"conv3dBackpropInputV2");for(var l=ZC(a.shape),c=ZC(i.shape),f=fO(u,i.shape,s,1,o),d=new dR(f.inShape,"float32"),h=d.values,p=Pf(d.strides,4),v=p[0],g=p[1],m=p[2],y=p[3],b=n.data.get(a.dataId).values,x=Pf(l,4),k=x[0],w=x[1],S=x[2],_=x[3],C=n.data.get(i.dataId).values,E=Pf(c,4),A=E[0],I=E[1],T=E[2],R=E[3],N=f.batchSize,M=f.filterDepth,O=f.filterHeight,P=f.filterWidth,F=f.inChannels,D=f.inDepth,L=f.inHeight,z=f.inWidth,j=f.outChannels,B=f.outDepth,W=f.outHeight,U=f.outWidth,V=f.strideDepth,H=f.strideHeight,G=f.strideWidth,q=M-1-f.padInfo.front,X=O-1-f.padInfo.top,Y=P-1-f.padInfo.left,K=0;K<N;++K)for(var $=0;$<F;++$)for(var Z=0;Z<D;++Z)for(var Q=Z-q,J=Math.max(0,Math.ceil(Q/V)),ee=Math.min(B,(M+Q)/V),te=0;te<L;++te)for(var ne=te-X,re=Math.max(0,Math.ceil(ne/H)),ae=Math.min(W,(O+ne)/H),ie=0;ie<z;++ie){for(var oe=ie-Y,se=Math.max(0,Math.ceil(oe/G)),ue=Math.min(U,(P+oe)/G),le=0,ce=J;ce<ee;++ce)for(var fe=ce*V-Q,de=re;de<ae;++de)for(var he=de*H-ne,pe=se;pe<ue;++pe)for(var ve=k*K+w*ce+S*de+_*pe,ge=A*(M-1-fe)+I*(O-1-he)+T*(P-1-(pe*G-oe))+R*$,me=0;me<j;++me){le+=b[ve+me]*C[ge+me]}h[v*K+g*Z+m*te+y*ie+$]=le}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},HY=eX($E,(function(e){return Math.cos(e)})),GY={kernelName:$E,backendName:"cpu",kernelFunc:HY},qY=eX(ZE,(function(e){return Math.cosh(e)})),XY={kernelName:ZE,backendName:"cpu",kernelFunc:qY};var YY={kernelName:eA,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=Pf(a.shape,4),f=c[0],d=c[1],h=c[2],p=c[3],v=i.shape[0],g=Pf(s,2),m=g[0],y=g[1],b=rM([v,m,y,p],"float32"),x=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,S=ZC(a.shape),_=ZC(b.shape),C=0;C<v;C++){var E=4*C,A=x[E],I=x[E+1],T=x[E+2],R=x[E+3],N=k[C];if(!(N>=f))for(var M=m>1?(T-A)*(d-1)/(m-1):0,O=y>1?(R-I)*(h-1)/(y-1):0,P=0;P<m;P++){var F=m>1?A*(d-1)+P*M:.5*(A+T)*(d-1);if(F<0||F>d-1)for(var D=0;D<y;D++)for(var L=0;L<p;L++){var z=L+D*_[2]+P*_[1]+C*_[0];b.values[z]=l}else if("bilinear"===u)for(var j=Math.floor(F),B=Math.ceil(F),W=F-j,U=0;U<y;U++){var V=y>1?I*(h-1)+U*O:.5*(I+R)*(h-1);if(V<0||V>h-1)for(var H=0;H<p;H++){var G=H+U*_[2]+P*_[1]+C*_[0];b.values[G]=l}else for(var q=Math.floor(V),X=Math.ceil(V),Y=V-q,K=0;K<p;K++){var $=K+q*S[2]+j*S[1]+N*S[0],Z=w[$],Q=w[$=K+X*S[2]+j*S[1]+N*S[0]],J=w[$=K+q*S[2]+B*S[1]+N*S[0]],ee=Z+(Q-Z)*Y,te=J+(w[$=K+X*S[2]+B*S[1]+N*S[0]]-J)*Y;$=K+U*_[2]+P*_[1]+C*_[0],b.values[$]=ee+(te-ee)*W}}else for(var ne=0;ne<y;++ne){var re=y>1?I*(h-1)+ne*O:.5*(I+R)*(h-1);if(re<0||re>h-1)for(var ae=0;ae<p;ae++){var ie=ae+ne*_[2]+P*_[1]+C*_[0];b.values[ie]=l}else for(var oe=Math.round(re),se=Math.round(F),ue=0;ue<p;ue++){var le=ue+oe*S[2]+se*S[1]+N*S[0],ce=ue+ne*_[2]+P*_[1]+C*_[0];b.values[ce]=w[le]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var KY={kernelName:QE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;Zq(a,"cumprod");var u=wP([i],a.shape.length),l=a;null!=u&&(l=XX({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=_P(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(c));for(var f=_R(l.dtype,"int32"),d=eE(MC(l.shape),f),h=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},g=0;g<h.length;g+=p)for(var m=0;m<p;m++){var y=v(g,m);if(0===m)d[y]=o?1:h[y];else{var b=v(g,m-1);d[y]=o?h[b]*d[b]:h[y]*d[b]}}var x=n.makeTensorInfo(l.shape,f,d);if(null!=u){var k=XX({inputs:{x:x},backend:n,attrs:{perm:SP(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(l),k}return x}};var $Y={kernelName:JE,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;Zq(a,"cumsum");var u=wP([i],a.shape.length),l=a;null!=u&&(l=XX({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=_P(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(l.shape.length-1," but got axis=").concat(c));for(var f=_R(l.dtype,"int32"),d=tE(MC(l.shape),f),h=n.data.get(l.dataId).values,p=l.shape[l.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},g=0;g<h.length;g+=p)for(var m=0;m<p;m++){var y=v(g,m);if(0===m)d[y]=o?0:h[y];else{var b=v(g,m-1);d[y]=o?h[b]+d[b]:h[y]+d[b]}}var x=n.makeTensorInfo(l.shape,f,d);if(null!=u){var k=XX({inputs:{x:x},backend:n,attrs:{perm:SP(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(l),k}return x}};var ZY={kernelName:tA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=wY(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var l=SY(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(l.shape,i.dtype,l.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var QY={kernelName:nA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;IC("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],f=u*i,d=l*i,h=c/(i*i),p=n.data.get(a.dataId).values,v=new Float32Array(s*f*d*h),g=0,m=0;m<s;++m)for(var y=0;y<f;++y)for(var b=Math.floor(y/i),x=y%i,k=0;k<d;++k)for(var w=Math.floor(k/i),S=(x*i+k%i)*h,_=0;_<h;++_){var C=_+S+c*(w+l*(b+u*m));v[g++]=p[C]}return n.makeTensorInfo([s,f,d,h],a.dtype,v)}};function JY(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode;Zq([a,i],"depthwiseConv2DNative");var c=ZC(a.shape),f=ZC(i.shape),d=u;null==d&&(d=[1,1]),IC(xO(o,d),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(d,"'")}));for(var h=cO(a.shape,i.shape,o,d,s,l,!0),p=h.filterHeight,v=h.filterWidth,g=h.dilationHeight,m=h.dilationWidth,y=h.padInfo,b=y.left,x=y.top,k=h.outChannels/h.inChannels,w=new dR(h.outShape,a.dtype),S=n.data.get(a.dataId).values,_=n.data.get(i.dataId).values,C=w.values,E=0;E<h.batchSize;++E)for(var A=E*c[0],I=E*w.strides[0],T=0;T<h.outHeight;++T)for(var R=I+T*w.strides[1],N=T*h.strideHeight-x,M=0;M<p;++M){var O=N+M*g;if(!(O<0||O>=h.inHeight))for(var P=M*f[0],F=A+O*c[1],D=0;D<h.outWidth;++D)for(var L=R+D*w.strides[2],z=D*h.strideWidth-b,j=0;j<v;++j){var B=z+j*m;if(!(B<0||B>=h.inWidth))for(var W=P+j*f[1],U=F+B*h.inChannels,V=L,H=W,G=0;G<h.inChannels;++G){for(var q=S[U+G],X=0;X<k;++X)C[V+X]+=q*_[H+X];V+=k,H+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var eK={kernelName:rA,backendName:"cpu",kernelFunc:JY};var tK={kernelName:aA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape;Zq([a,i],"depthwiseConv2dNativeBackpropFilter");for(var f=cO(a.shape,c,o,s,u,l,!0),d=f.strideHeight,h=f.strideWidth,p=f.filterHeight,v=f.filterWidth,g=new dR(f.filterShape,"float32"),m=f.padInfo.left,y=f.padInfo.top,b=f.outChannels/f.inChannels,x=n.data.get(a.dataId).values,k=new dR(a.shape,a.dtype,x),w=n.data.get(i.dataId).values,S=new dR(i.shape,i.dtype,w),_=0;_<p;++_)for(var C=Math.max(0,Math.ceil((y-_)/d)),E=Math.min(f.outHeight,(f.inHeight+y-_)/d),A=0;A<v;++A)for(var I=Math.max(0,Math.ceil((m-A)/h)),T=Math.min(f.outWidth,(f.inWidth+m-A)/h),R=0;R<f.outChannels;++R){for(var N=Math.trunc(R/b),M=R%b,O=0,P=0;P<f.batchSize;++P)for(var F=C;F<E;++F)for(var D=_+F*d-y,L=I;L<T;++L){var z=A+L*h-m;O+=k.get(P,D,z,N)*S.get(P,F,L,R)}g.set(O,_,A,N,M)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var nK={kernelName:iA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.inputShape;Zq([a,i],"depthwiseConv2DNativeBackpropInput");for(var f=ZC(a.shape),d=ZC(i.shape),h=cO(c,i.shape,o,s,u,l,!0),p=new dR(h.inShape,"float32"),v=p.values,g=Pf(p.strides,3),m=g[0],y=g[1],b=g[2],x=n.data.get(a.dataId).values,k=Pf(f,3),w=k[0],S=k[1],_=k[2],C=n.data.get(i.dataId).values,E=Pf(d,3),A=E[0],I=E[1],T=E[2],R=h.batchSize,N=h.filterHeight,M=h.filterWidth,O=h.inChannels,P=h.inHeight,F=h.inWidth,D=h.outChannels,L=h.outHeight,z=h.outWidth,j=h.strideHeight,B=h.strideWidth,W=N-1-h.padInfo.top,U=M-1-h.padInfo.left,V=D/O,H=0;H<R;++H)for(var G=0;G<O;++G)for(var q=0;q<P;++q)for(var X=q-W,Y=Math.max(0,Math.ceil(X/j)),K=Math.min(L,(N+X)/j),$=0;$<F;++$){for(var Z=$-U,Q=Math.max(0,Math.ceil(Z/B)),J=Math.min(z,(M+Z)/B),ee=0,te=Y;te<K;++te)for(var ne=te*j-X,re=Q;re<J;++re)for(var ae=w*H+S*te+_*re,ie=A*(N-1-ne)+I*(M-1-(re*B-Z))+T*G,oe=0;oe<V;++oe){ee+=x[ae+(G*V+oe)]*C[ie+oe]}v[m*H+y*q+b*$+G]=ee}return n.makeTensorInfo(p.shape,p.dtype,p.values)}};var rK={kernelName:oA,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=MC(r.shape),i=n.data.get(r.dataId).values,o=rM([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var l=[].concat(pd(r.shape),pd(r.shape));return n.makeTensorInfo(l,o.dtype,o.values)}},aK={kernelName:sA,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=n,c=l.data.get(a.dataId).values,f=a.shape.length,d=l.data.get(i.dataId).values,h=i.shape.length,p=sO(a.shape,i.shape,o,s,"NHWC",u),v=p.batchSize,g=p.inHeight,m=p.inWidth,y=p.inChannels,b=p.outHeight,x=p.outWidth,k=p.padInfo,w=p.strideHeight,S=p.strideWidth,_=p.filterHeight,C=p.filterWidth,E=p.dilationHeight,A=p.dilationWidth,I=p.outShape,T=MC(I),R=I.length,N=UC(a.dtype,T),M=0;M<v;++M)for(var O=0;O<b;++O)for(var P=O*w-k.top,F=0;F<x;++F)for(var D=F*S-k.left,L=0;L<y;++L){for(var z=Number.MIN_SAFE_INTEGER,j=0;j<_;++j){var B=P+j*E;if(B>=0&&B<g)for(var W=0;W<C;++W){var U=D+W*A;if(U>=0&&U<m){var V=aE([M,B,U,L],f,ZC(a.shape)),H=aE([j,W,L],h,ZC(i.shape)),G=c[V]+d[H];G>z&&(z=G)}}}N[aE([M,O,F,L],R,ZC(I))]=z}return{dataId:l.write(XT(N,a.dtype),I,a.dtype),shape:I,dtype:a.dtype}}},iK={kernelName:lA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,f=JC(a.shape,c.data.get(a.dataId).values),d=JC(i.shape,c.data.get(i.dataId).values),h=sO(a.shape,i.shape,s,u,"NHWC",l),p=h.batchSize,v=h.inHeight,g=h.inWidth,m=h.inChannels,y=h.outHeight,b=h.outWidth,x=h.padInfo,k=h.strideHeight,w=h.strideWidth,S=h.filterHeight,_=h.filterWidth,C=h.dilationHeight,E=h.dilationWidth,A=h.outShape;IC(o.rank===A.length,(function(){return"Error in ".concat(lA,", dy ")+"must have the same rank as output ".concat(A.length,", but got ")+"".concat(o.rank)}));for(var I=JC(A,c.data.get(o.dataId).values),T=nE(i.shape,i.dtype),R=0;R<p;++R)for(var N=0;N<y;++N)for(var M=N*k-x.top,O=0;O<b;++O)for(var P=O*w-x.left,F=0;F<m;++F){for(var D=Number.MIN_SAFE_INTEGER,L=0,z=0,j=0;j<S;++j){var B=M+j*C;if(B>=0&&B<v)for(var W=0;W<_;++W){var U=P+W*E;if(U>=0&&U<g){var V=f[R][B][U][F]+d[j][W][F];V>D&&(D=V,L=j,z=W)}}}T[L][z][F]+=I[R][N][O][F]}return{dataId:c.write(XT(T,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},oK={kernelName:uA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,f=JC(a.shape,c.data.get(a.dataId).values),d=JC(i.shape,c.data.get(i.dataId).values),h=sO(a.shape,i.shape,s,u,"NHWC",l),p=h.batchSize,v=h.inHeight,g=h.inWidth,m=h.inChannels,y=h.outHeight,b=h.outWidth,x=h.padInfo,k=h.strideHeight,w=h.strideWidth,S=h.filterHeight,_=h.filterWidth,C=h.dilationHeight,E=h.dilationWidth,A=h.outShape;IC(o.rank===A.length,(function(){return"Error in ".concat(uA,", dy ")+"must have the same rank as output ".concat(A.length,", but got ")+"".concat(o.rank)}));for(var I=JC(A,c.data.get(o.dataId).values),T=nE(a.shape,a.dtype),R=0;R<p;++R)for(var N=0;N<y;++N)for(var M=N*k-x.top,O=0;O<b;++O)for(var P=O*w-x.left,F=0;F<m;++F){for(var D=Number.MIN_SAFE_INTEGER,L=M<0?0:M,z=P<0?0:P,j=0;j<S;++j){var B=M+j*C;if(B>=0&&B<v)for(var W=0;W<_;++W){var U=P+W*E;if(U>=0&&U<g){var V=f[R][B][U][F]+d[j][W][F];V>D&&(D=V,L=B,z=U)}}}T[R][L][z][F]+=I[R][N][O][F]}return{dataId:c.write(XT(T,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},sK=uX((function(e,t){return e*t})),uK=TX((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),lK=IX(iI,sK,uK),cK={kernelName:iI,backendName:"cpu",kernelFunc:lK};function fK(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;Zq(i,"sum");var u=(t="bool"===i.dtype?EX({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):aX({inputs:{x:i},backend:r})).shape.length,l=jC(o,t.shape),c=wP(l,u),f=l,d=t;null!=c&&(d=XX({inputs:{x:t},backend:r,attrs:{perm:c}}),f=_P(f.length,u)),kP("sum",f,d.shape.length);for(var h=Pf(bP(d.shape,f),2),p=h[0],v=h[1],g=SX(r,p,_R(d.dtype,"int32")),m=MC(v),y=r.data.get(g.dataId).values,b=r.data.get(d.dataId).values,x=0;x<y.length;++x){for(var k=x*m,w=0,S=0;S<m;++S)w+=b[k+S];y[x]=w}if(s){var _=g;g=PX({inputs:{x:g},backend:r,attrs:{shape:xP(g.shape,l)}}),r.disposeIntermediateTensorInfo(_)}return r.disposeIntermediateTensorInfo(t),null!=c&&r.disposeIntermediateTensorInfo(d),g}var dK={kernelName:UI,backendName:"cpu",kernelFunc:fK};var hK={kernelName:fA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=fL(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;hL(i.length,s,r);for(var u=pL(o,s),l=u.path,c=u.steps,f=c.length,d=null,h=i.length,p=[],v=0;v<f;++v){var g,m=bC(c[v]);try{for(m.s();!(g=m.n()).done;){var y=g.value,b=dL(h,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;vL(x)?w=r[y]:(w=XX({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(w));for(var S=w.shape.slice(),_=0;_<k.length;++_)S.splice(k[_],0,1);OC(w.shape,S)||(w=PX({inputs:{x:w},backend:n,attrs:{shape:S}}),p.push(w)),null===d?d=w:(d=lK({inputs:{a:w,b:d},backend:n}),p.push(d))}}catch(bfe){m.e(bfe)}finally{m.f()}v<f-1&&(l[v]>=0&&(d=fK({inputs:{x:d},backend:n,attrs:{axis:l[v]-(i.length-h),keepDims:!1}}),p.push(d)),h--)}for(var C=0,E=p;C<E.length;C++){var A=E[C];A!==d&&n.disposeIntermediateTensorInfo(A)}return d}};var pK={kernelName:hA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;Zq([r,a],"eluGrad");for(var i=new Float32Array(MC(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var l=o[u];i[u]=l>=1?s[u]:s[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",i)}},vK=uX((function(e,t){return e===t?1:0})),gK=IX(vA,vK,null,"bool"),mK={kernelName:vA,backendName:"cpu",kernelFunc:gK},yK=eX(pA,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),bK={kernelName:pA,backendName:"cpu",kernelFunc:yK},xK=gX((function(e){return Math.exp(e)})),kK=tX(gA,xK,"float32"),wK={kernelName:gA,backendName:"cpu",kernelFunc:kK};function SK(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(IC(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),PX({inputs:{x:a},backend:n,attrs:{shape:s}})}var _K={kernelName:mA,backendName:"cpu",kernelFunc:SK},CK=gX((function(e){return Math.expm1(e)})),EK=tX(yA,CK),AK={kernelName:yA,backendName:"cpu",kernelFunc:EK},IK=uX((function(e,t){return e/t})),TK=IX(cA,IK),RK={kernelName:cA,backendName:"cpu",kernelFunc:TK},NK=uX((function(e,t){return e-t})),MK=TX((function(e,t,n,r){return{real:e-n,imag:t-r}})),OK=IX(rT,NK,MK),PK={kernelName:rT,backendName:"cpu",kernelFunc:OK};function FK(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,l=[a,i],c=MC(l),f=WC("float32",c),d=WC("float32",c),h=0;h<a;h++){for(var p=bY({inputs:{x:s},backend:n,attrs:{begin:[h,0],size:[1,i]}}),v=bY({inputs:{x:u},backend:n,attrs:{begin:[h,0],size:[1,i]}}),g=kX({inputs:{real:p,imag:v},backend:n}),m=DK(g,t,n),y=iL(m.real,m.imag),b=0;b<i;b++){var x=oL(y,b);f[h*i+b]=x.real,d[h*i+b]=x.imag}n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g)}var k=n.makeTensorInfo(l,"float32",f),w=n.makeTensorInfo(l,"float32",d),S=kX({inputs:{real:k,imag:w},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),S}function DK(e,t,n){var r=MC(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){var s=LK(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(u,"float32",s.real),c=n.makeTensorInfo(u,"float32",s.imag),f=n.makeTensorInfo([],"float32",qT(r,"float32")),d=aX({inputs:{x:f},backend:n}),h=RK.kernelFunc({inputs:{a:l,b:f},backend:n}),p=RK.kernelFunc({inputs:{a:c,b:d},backend:n}),v=n.data.get(h.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:v,imag:g}}return s}var m=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=uL(a*s,t,n),l=oL(e,s);i+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(i/=t,o/=t),sL(r,i,o,a)}return r}(iL(i,o),r,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(m)}function LK(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=iL(e,t),o=n/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),u=s.real,l=s.imag,c=[u.length],f=a.makeTensorInfo(c,"float32",u),d=a.makeTensorInfo(c,"float32",l),h=kX({inputs:{real:f,imag:d},backend:a}),p=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),v=p.real,g=p.imag,m=[v.length],y=a.makeTensorInfo(m,"float32",v),b=a.makeTensorInfo(m,"float32",g),x=kX({inputs:{real:y,imag:b},backend:a}),k=LK(u,l,o,r,a),w=k.real,S=k.imag,_=[w.length],C=a.makeTensorInfo(_,"float32",w),E=a.makeTensorInfo(_,"float32",S),A=kX({inputs:{real:C,imag:E},backend:a}),I=LK(v,g,o,r,a),T=I.real,R=I.imag,N=[T.length],M=a.makeTensorInfo(N,"float32",T),O=a.makeTensorInfo(N,"float32",R),P=kX({inputs:{real:M,imag:O},backend:a}),F=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(n,r),D=[F.real.length],L=a.makeTensorInfo(D,"float32",F.real),z=a.makeTensorInfo(D,"float32",F.imag),j=kX({inputs:{real:L,imag:z},backend:a}),B=lK({inputs:{a:j,b:P},backend:a}),W=MX({inputs:{a:A,b:B},backend:a}),U=OK({inputs:{a:A,b:B},backend:a}),V=_X({inputs:{input:W},backend:a}),H=_X({inputs:{input:U},backend:a}),G=OY({inputs:{input:W},backend:a}),q=OY({inputs:{input:U},backend:a}),X=FY({inputs:[V,H],backend:a,attrs:{axis:0}}),Y=FY({inputs:[G,q],backend:a,attrs:{axis:0}}),K=a.data.get(X.dataId).values,$=a.data.get(Y.dataId).values;return a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(Y),{real:K,imag:$}}var zK={kernelName:bA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=MC(r.shape),i=r.shape[r.shape.length-1],o=PX({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=FK(o,!1,n),u=PX({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function jK(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||YC(a),o=UC(i,MC(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var BK={kernelName:xA,backendName:"cpu",kernelFunc:jK};var WK={kernelName:kA,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=WC(r.dtype,MC(r.shape)),o=Pf(r.shape,4),s=o[0],u=o[1],l=o[2],c=o[3],f=a.data.get(r.dataId).values,d=0;d<s;d++)for(var h=d*l*u*c,p=0;p<u;p++)for(var v=p*(l*c),g=0;g<l;g++)for(var m=g*c,y=0;y<c;y++){var b=Math.round(l-g-1),x=h+v+m+y,k=f[x];if(b>=0&&b<l)k=f[h+v+b*c+y];i[x]=k}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},UK=gX((function(e){return Math.floor(e)})),VK=tX(wA,UK),HK={kernelName:wA,backendName:"cpu",kernelFunc:VK},GK=uX((function(e,t){return Math.floor(e/t)})),qK=IX(SA,GK,null,"int32"),XK={kernelName:SA,backendName:"cpu",kernelFunc:qK};var YK={kernelName:yT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=LY({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(o){var g=v;if("NCHW"===c&&1===o.shape.length&&1!==o.shape[0]){var m=PX({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=MX({inputs:{a:v,b:m},backend:n}),n.disposeIntermediateTensorInfo(m)}else v=MX({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(h){var y=v;if("NCHW"===c&&"prelu"===h&&1===s.shape.length&&1!==s.shape[0]){var b=PX({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=xX(n,v,h,b,p),n.disposeIntermediateTensorInfo(b)}else v=xX(n,v,h,s,p);n.disposeIntermediateTensorInfo(y)}return v}};var KK={kernelName:bT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,f=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=JY({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:f,dimRoundingMode:d}});if(o){var g=v;v=MX({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(h){var m=v;v=xX(n,v,h,s,p),n.disposeIntermediateTensorInfo(m)}return v}};function $K(e,t,n,r,a,i,o,s,u){for(var l=rM([r,i],n),c=0;c<r;c++){for(var f=[],d=0,h=0;h<a;h++){var p=e[c*a+h];d+=p*o[h],f.push(p)}if(d<0||d>=u/i)throw new Error("Invalid indices: ".concat(f," does not index into ").concat(s));for(var v=0;v<i;v++)l.values[c*i+v]=t.get.apply(t,pd(t.indexToLoc(d*i+v)))}return l}var ZK={kernelName:EA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=MC(r.shape),o=a.shape,s=o[o.length-1],u=Pf(KD(r,a),4),l=u[0],c=u[1],f=u[2],d=u[3];if(0===c)return n.makeTensorInfo(l,r.dtype,[]);var h=$K(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,c,s,f,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,h.values)}};function QK(e,t,n){for(var r=rM(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var l=e.locToIndex(i);0<=l&&l<e.values.length&&(r.values[a]=e.values[l])}return r}var JK={kernelName:CA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;Zq([a,i],"gatherV2");for(var u=jC(o,a.shape)[0],l=n.data.get(i.dataId).values,c=a.shape[u],f=function(e){var t=l[e];IC(t<=c-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(c-1,"]")}))},d=0;d<l.length;++d)f(d);var h=s;null==s&&(h=0);var p=MC(i.shape),v=wL(a,i,u,h),g=PX({inputs:{x:a},backend:n,attrs:{shape:[v.batchSize,v.outerSize,v.dimSize,v.sliceSize]}}),m=PX({inputs:{x:i},backend:n,attrs:{shape:[v.batchSize,p/v.batchSize]}}),y=[v.batchSize,v.outerSize,p/v.batchSize,v.sliceSize],b=n.bufferSync(m),x=QK(n.bufferSync(g),b,y);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(v.outputShape,x.dtype,x.values)}},e$=uX((function(e,t){return e>t?1:0})),t$=IX(AA,e$,null,"bool"),n$={kernelName:AA,backendName:"cpu",kernelFunc:t$},r$=uX((function(e,t){return e>=t?1:0})),a$=IX(IA,r$,null,"bool"),i$={kernelName:IA,backendName:"cpu",kernelFunc:a$};var o$={kernelName:RA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=MC(r.shape),i=r.shape[r.shape.length-1],o=PX({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=FK(o,!0,n),u=PX({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},s$=eX(MA,(function(e){return Number.isFinite(e)?1:0}),"bool"),u$={kernelName:MA,backendName:"cpu",kernelFunc:s$},l$=eX(OA,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),c$={kernelName:OA,backendName:"cpu",kernelFunc:l$},f$=eX(PA,(function(e){return Number.isNaN(e)?1:0}),"bool"),d$={kernelName:PA,backendName:"cpu",kernelFunc:f$},h$=uX((function(e,t){return e<t?1:0})),p$=IX(DA,h$,null,"bool"),v$={kernelName:DA,backendName:"cpu",kernelFunc:p$},g$=uX((function(e,t){return e<=t?1:0})),m$=IX(LA,g$,null,"bool"),y$={kernelName:LA,backendName:"cpu",kernelFunc:m$};function b$(e,t,n){var r=(t-e)/(n-1),a=tE(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var x$={kernelName:zA,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=b$(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},k$=gX((function(e){return Math.log(e)})),w$=tX(jA,k$),S$={kernelName:jA,backendName:"cpu",kernelFunc:w$},_$=eX(BA,(function(e){return Math.log1p(e)})),C$={kernelName:BA,backendName:"cpu",kernelFunc:_$},E$=uX((function(e,t){return e&&t})),A$=IX(WA,E$,null,"bool"),I$={kernelName:WA,backendName:"cpu",kernelFunc:A$},T$=eX(UA,(function(e){return e?0:1}),"bool"),R$={kernelName:UA,backendName:"cpu",kernelFunc:T$},N$=uX((function(e,t){return e||t})),M$=IX(VA,N$,null,"bool"),O$={kernelName:VA,backendName:"cpu",kernelFunc:M$};var P$={kernelName:HA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;Zq(a,"LRN");var l=a.shape[3],c=l-1,f=n.data.get(a.dataId).values,d=MC(a.shape),h=new Float32Array(d);function p(e){for(var t=e%l,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,c),a=0;n<=r;n++){var o=f[n];a+=o*o}return a}for(var v=0;v<d;v++){var g=p(v),m=f[v]*Math.pow(o+s*g,-u);h[v]=m}return n.makeTensorInfo(a.shape,a.dtype,h)}};var F$={kernelName:GA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta;Zq(o,"LRNGrad");for(var f=MC(o.shape),d=o.shape[3],h=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,g=new Float32Array(f),m=f,y=0;y<m;y++){for(var b=y%d,x=y-b+Math.max(0,b-s),k=y-b+Math.min(d,b+s+1),w=0,S=x;S<k;S++)w+=Math.pow(p[S],2);w=l*w+u;for(var _=x;_<k;_++){var C=-2*l*c*p[_]*v[y]/w;y===_&&(C+=Math.pow(w,-c)),C*=h[y],g[_]+=C}}return n.makeTensorInfo(o.shape,a.dtype,g)}};function D$(e,t,n,r){for(var a=WC(r,MC(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var l=e[o+u];(Number.isNaN(l)||l>s)&&(s=l)}a[i]=s}return a}function L$(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,l=u.length,c=jC(i,u),f=c,d=wP(f,l),h=s.data.get(a.dataId).values;if(null!=d){for(var p=new Array(l),v=0;v<p.length;v++)p[v]=u[d[v]];h=qX(h,u,a.dtype,d,p),f=_P(f.length,l),u=p}Zq(a,"max"),kP("max",f,l);var g=Pf(bP(u,f),2),m=g[0],y=D$(h,MC(g[1]),m,a.dtype),b=s.write(y,m,a.dtype),x=m;o&&(x=p=xP(m,c));return{dataId:b,shape:x,dtype:a.dtype}}var z$={kernelName:qA,backendName:"cpu",kernelFunc:L$},j$=uX((function(e,t){return Math.max(e,t)})),B$=IX(XA,j$),W$={kernelName:XA,backendName:"cpu",kernelFunc:B$};var U$={kernelName:YA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Zq(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;IC(xO(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l,c=uO(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&OC(c.inShape,c.outShape))l=aX({inputs:{x:a},backend:n});else{var f=n.data.get(a.dataId).values,d=ZC(a.shape),h=cY(f,a.shape,a.dtype,d,c,"max");l=n.makeTensorInfo(c.outShape,a.dtype,h.values)}return l}};var V$={kernelName:$A,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;Zq(a,"maxPool3d");var c=lO(a.shape,i,o,1,s,u,l),f=dY(n.data.get(a.dataId).values,a.shape,a.dtype,ZC(a.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}};var H$={kernelName:ZA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;Zq([a,i],"maxPool3DGrad");for(var c=lO(i.shape,o,s,1,u,l),f=function(e,t){for(var n=rM(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left,v=0;v<t.batchSize;++v)for(var g=0;g<t.inChannels;++g)for(var m=0;m<t.outDepth;++m){for(var y=m*r-d,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,l+y),k=0;k<t.outHeight;++k){for(var w=k*a-h,S=w;S<0;)S+=s;for(var _=Math.min(t.inHeight,c+w),C=0;C<t.outWidth;++C){for(var E=C*i-p,A=E;A<0;)A+=u;for(var I=Math.min(t.inWidth,f+E),T=Number.NEGATIVE_INFINITY,R=-1,N=b;N<x;N+=o)for(var M=N-y,O=S;O<_;O+=s)for(var P=O-w,F=A;F<I;F+=u){var D=F-E,L=e.get(v,N,O,F,g);L>=T&&(T=L,R=M*c*f+P*c+D)}n.set(R,v,m,k,C,g)}}}return n}(n.bufferSync(i),c),d=c.strideDepth,h=c.strideHeight,p=c.strideWidth,v=c.dilationDepth,g=c.dilationHeight,m=c.dilationWidth,y=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,k=y-1-c.padInfo.front,w=x-1-c.padInfo.left,S=b-1-c.padInfo.top,_=rM(i.shape,"float32"),C=n.bufferSync(a),E=0;E<c.batchSize;++E)for(var A=0;A<c.inChannels;++A)for(var I=0;I<c.inDepth;++I)for(var T=0;T<c.inHeight;++T)for(var R=0;R<c.inWidth;++R){for(var N=I-k,M=T-S,O=R-w,P=0,F=0;F<y;F+=v){var D=(N+F)/d;if(!(D<0||D>=c.outDepth||Math.floor(D)!==D))for(var L=0;L<b;L+=g){var z=(M+L)/h;if(!(z<0||z>=c.outHeight||Math.floor(z)!==z))for(var j=0;j<x;j+=m){var B=(O+j)/p;if(!(B<0||B>=c.outWidth||Math.floor(B)!==B)){var W=y*b*x-1-f.get(E,D,z,B,A)===F*b*x+L*x+j?1:0;if(0!==W)P+=C.get(E,D,z,B,A)*W}}}}_.set(P,E,I,T,R,A)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}};var G$={kernelName:KA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Zq([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,f=uO(o.shape,s,u,1,l,c),d=n.data.get(o.dataId).values,h=rM(f.outShape,o.dtype,fY(d,o.shape,o.dtype,f).values),p=f.strideHeight,v=f.strideWidth,g=f.dilationHeight,m=f.dilationWidth,y=f.effectiveFilterHeight,b=f.effectiveFilterWidth,x=b-1-f.padInfo.left,k=y-1-f.padInfo.top,w=rM(o.shape,"float32"),S=n.data.get(a.dataId).values,_=rM(a.shape,"float32",S),C=0;C<f.batchSize;++C)for(var E=0;E<f.inChannels;++E)for(var A=0;A<f.inHeight;++A)for(var I=0;I<f.inWidth;++I){for(var T=A-k,R=I-x,N=0,M=0;M<y;M+=g){var O=(T+M)/p;if(!(O<0||O>=f.outHeight||Math.floor(O)!==O))for(var P=0;P<b;P+=m){var F=(R+P)/v;if(!(F<0||F>=f.outWidth||Math.floor(F)!==F)){var D=y*b-1-h.get(C,O,F,E)===M*b+P?1:0;if(0!==D)N+=_.get(C,O,F,E)*D}}}w.set(N,C,A,I,E)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var q$={kernelName:QA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;Zq(a,"MaxPoolWithArgmax");var c=l.data.get(a.dataId).values,f=uO(a.shape,i,o,[1,1],s),d=function(e,t,n,r,a){var i=cY(e,0,n,ZC(t),a,"max"),o=fY(e,t,n,a,!0,r);return[i.values,o.values]}(c,a.shape,a.dtype,u,f),h=Pf(d,2),p=h[0],v=h[1],g=l.write(p,f.outShape,a.dtype),m=l.write(v,f.outShape,a.dtype);return[{dataId:g,shape:f.outShape,dtype:a.dtype},{dataId:m,shape:f.outShape,dtype:"int32"}]}};var X$={kernelName:JA,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=jC(i,a.shape),u=MC(bP(a.shape,s)[1]),l=[],c=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(c);var f=EX({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(f);var d=TK({inputs:{a:f,b:c},backend:n});l.push(d);var h=fK({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:o}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}};var Y$={kernelName:eI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;Zq(a,"min");var s=jC(i,a.shape),u=s,l=wP(u,a.shape.length),c=a;null!=l&&(c=XX({inputs:{x:a},backend:n,attrs:{perm:l}}),u=_P(u.length,a.shape.length)),kP("min",u,c.shape.length);for(var f=Pf(bP(c.shape,u),2),d=f[0],h=MC(f[1]),p=tE(MC(d),c.dtype),v=n.data.get(c.dataId).values,g=0;g<p.length;++g){for(var m=g*h,y=v[m],b=0;b<h;++b){var x=v[m+b];(Number.isNaN(x)||x<y)&&(y=x)}p[g]=y}null!=l&&n.disposeIntermediateTensorInfo(c);var k=n.makeTensorInfo(d,c.dtype,p);if(o){var w=PX({inputs:{x:k},backend:n,attrs:{shape:xP(d,s)}});return n.disposeIntermediateTensorInfo(k),w}return k}},K$=uX((function(e,t){return Math.min(e,t)})),$$=IX(tI,K$),Z$={kernelName:tI,backendName:"cpu",kernelFunc:$$};var Q$={kernelName:nI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;Zq(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=i.map((function(e,t){return e[0]+a.shape[t]})),c="reflect"===o?0:1,f=n.data.get(a.dataId).values,d=a.shape.length,h=ZC(a.shape),p=MC(s),v=s.length,g=ZC(s),m=WC(a.dtype,p),y=0;y<p;y++){for(var b=iE(y,v,g),x=0;x<v;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-c:b[x]>=l[x]&&(b[x]=2*(l[x]-1)-b[x]+c);b=b.map((function(e,t){return e-u[t]}));var k=aE(b,d,h);m[y]=f[k]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},J$=uX((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),eZ=IX(rI,J$),tZ={kernelName:rI,backendName:"cpu",kernelFunc:eZ};function nZ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var u=jC([s],a.shape),l=L$({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=xP(l.shape,u),f=PX({inputs:{x:l},backend:n,attrs:{shape:c}}),d=OK({inputs:{a:a,b:f},backend:n}),h=kK({inputs:{x:d},backend:n}),p=fK({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),v=PX({inputs:{x:p},backend:n,attrs:{shape:c}}),g=TK({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}var rZ={kernelName:GI,backendName:"cpu",kernelFunc:nZ};var aZ={kernelName:aI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;Zq(a,"multinomial");for(var u=s?a:nZ({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],f=n.data.get(u.dataId).values,d=[l,i],h=tE(MC(d),"int32"),p=0;p<l;++p){var v=p*c,g=new Float32Array(c-1);g[0]=f[v];for(var m=1;m<g.length;++m)g[m]=g[m-1]+f[v+m];for(var y=FP.alea(o.toString()),b=p*i,x=0;x<i;++x){var k=y();h[b+x]=g.length;for(var w=0;w<g.length;w++)if(k<g[w]){h[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(d,"int32",h)}};function iZ(e,t,n){var r=qT(-1,n);return sK([],t,r,e,n)}var oZ={kernelName:oI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;Zq(r,"neg");var a=Pf(iZ(n.data.get(r.dataId).values,r.shape,r.dtype),2),i=a[0],o=a[1];return n.makeTensorInfo(o,r.dtype,i)}},sZ=UF;var uZ={kernelName:uI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;Zq(a,"NonMaxSuppression");var l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,f=sZ(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},lZ=VF;var cZ={kernelName:lI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize;Zq(a,"NonMaxSuppressionPadded");var c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=lZ(c,f,o,s,u,l),h=d.selectedIndices,p=d.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},fZ=HF;var dZ={kernelName:cI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma;Zq(a,"NonMaxSuppressionWithScore");var c=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,d=fZ(c,f,o,s,u,l),h=d.selectedIndices,p=d.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},hZ=uX((function(e,t){return e!==t?1:0})),pZ=IX(sI,hZ,null,"bool"),vZ={kernelName:sI,backendName:"cpu",kernelFunc:pZ};var gZ={kernelName:dI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue;Zq(a,"oneHot");var u=MC(a.shape),l=new Float32Array(u*i);l.fill(s);for(var c=n.data.get(a.dataId).values,f=0;f<u;++f)c[f]>=0&&c[f]<i&&(l[f*i+c[f]]=o);return n.makeTensorInfo([].concat(pd(a.shape),[i]),"int32",l)}};function mZ(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=_X({inputs:{input:r},backend:n}),i=mZ({inputs:{x:a},backend:n}),o=OY({inputs:{input:r},backend:n}),s=mZ({inputs:{x:o},backend:n}),u=kX({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return jK({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var yZ={kernelName:hT,backendName:"cpu",kernelFunc:mZ};var bZ={kernelName:fI,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=_X({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=OY({inputs:{input:a},backend:r}),u=mZ({inputs:{x:s},backend:r}),l=kX({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return jK({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function xZ(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return SK({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){TC(a,e.shape,"All tensors passed to stack must have matching shapes"),IC(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=SK({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=FY({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var kZ={kernelName:hI,backendName:"cpu",kernelFunc:xZ};var wZ={kernelName:pI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;Zq(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=n.data.get(a.dataId).values,c=MC(a.shape),f=a.shape.length,d=ZC(a.shape),h=MC(s),p=s.length,v=ZC(s),g=WC(a.dtype,h);0!==o&&g.fill(o);for(var m=0;m<c;m++){var y=iE(m,f,d).map((function(e,t){return e+u[t]}));g[aE(y,p,v)]=l[m]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},SZ=uX((function(e,t){return Math.pow(e,t)})),_Z=IX(vI,SZ),CZ={kernelName:vI,backendName:"cpu",kernelFunc:_Z};function EZ(e,t,n,r){for(var a=Pf(bP(e,r),2),i=a[0],o=a[1],s=_R(t,"int32"),u=tE(MC(i),s),l=MC(o),c=0;c<u.length;++c){for(var f=c*l,d=1,h=0;h<l;++h)d*=n[f+h];u[c]=d}return{outVals:u,outShape:i,outDtype:s}}var AZ={kernelName:mI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;Zq(a,"prod");var s=a.shape.length,u=jC(i,a.shape),l=wP(u,s),c=u,f=a,d=[];null!=l&&(f=XX({inputs:{x:a},backend:n,attrs:{perm:l}}),d.push(f),c=_P(c.length,s));var h=n.data.get(f.dataId).values,p=EZ(f.shape,f.dtype,h,c),v=p.outVals,g=p.outShape,m=p.outDtype,y=g;return o&&(y=xP(g,u)),d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,m,v)}};function IZ(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return tE(0,r);var a=tE(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}var TZ={kernelName:yI,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=IZ(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},RZ=eX(xI,(function(e){return 1/e})),NZ={kernelName:xI,backendName:"cpu",kernelFunc:RZ};var MZ={kernelName:CI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;Zq(a,"resizeBilinear");for(var u=ZC(a.shape),l=Pf(s,2),c=l[0],f=l[1],d=Pf(a.shape,4),h=d[0],p=d[1],v=d[2],g=d[3],m=n.data.get(a.dataId).values,y=new Float32Array(MC([h,c,f,g])),b=[i&&c>1?p-1:p,i&&f>1?v-1:v],x=[i&&c>1?c-1:c,i&&f>1?f-1:f],k=0,w=b[0]/x[0],S=b[1]/x[1],_=0;_<h;_++)for(var C=0;C<c;C++){var E=void 0;E=o?w*(C+.5)-.5:w*C;for(var A=Math.max(0,Math.floor(E)),I=E-A,T=Math.min(p-1,Math.ceil(E)),R=_*u[0]+A*u[1],N=_*u[0]+T*u[1],M=0;M<f;M++){var O=void 0;O=o?S*(M+.5)-.5:S*M;for(var P=Math.max(0,Math.floor(O)),F=O-P,D=Math.min(v-1,Math.ceil(O)),L=R+P*u[2],z=N+P*u[2],j=R+D*u[2],B=N+D*u[2],W=0;W<g;W++){var U=m[L+W],V=m[z+W],H=U+(m[j+W]-U)*F,G=H+(V+(m[B+W]-V)*F-H)*I;y[k++]=G}}}return n.makeTensorInfo([h,c,f,g],"float32",y)}};var OZ={kernelName:EI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;Zq([i,a],"resizeBilinearGrad");for(var s=ZC(a.shape),u=Pf(a.shape,4),l=u[0],c=u[1],f=u[2],d=u[3],h=Pf(i.shape,3),p=h[1],v=h[2],g=new Float32Array(l*c*f*d),m=[o&&p>1?c-1:c,o&&v>1?f-1:f],y=[o&&p>1?p-1:p,o&&v>1?v-1:v],b=m[0]/y[0],x=m[1]/y[1],k=n.data.get(i.dataId).values,w=0,S=0;S<l;S++)for(var _=S*s[0],C=0;C<p;C++)for(var E=C*b,A=Math.floor(E),I=Math.min(Math.ceil(E),c-1),T=_+A*s[1],R=_+I*s[1],N=E-A,M=1-N,O=0;O<v;O++)for(var P=O*x,F=Math.floor(P),D=Math.min(Math.ceil(P),f-1),L=P-F,z=1-L,j=T+F*s[2],B=T+D*s[2],W=R+F*s[2],U=R+D*s[2],V=M*z,H=M*L,G=N*z,q=N*L,X=0;X<d;X++){var Y=k[w++];g[j+X]+=Y*V,g[B+X]+=Y*H,g[W+X]+=Y*G,g[U+X]+=Y*q}return n.makeTensorInfo([l,f,c,d],"float32",g)}};var PZ={kernelName:SI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;Zq(a,"resizeNearestNeighbor");for(var u=ZC(a.shape),l=Pf(s,2),c=l[0],f=l[1],d=Pf(a.shape,4),h=d[0],p=d[1],v=d[2],g=d[3],m=n.data.get(a.dataId).values,y=new Float32Array(h*c*f*g),b=[i&&c>1?p-1:p,i&&f>1?v-1:v],x=[i&&c>1?c-1:c,i&&f>1?f-1:f],k=b[0]/x[0],w=b[1]/x[1],S=0,_=0;_<h;_++)for(var C=_*u[0],E=0;E<c;E++){var A=o?k*(E+.5):k*E,I=Math.min(p-1,i?Math.round(A):Math.floor(A));o&&(I=Math.max(0,I));for(var T=C+I*u[1],R=0;R<f;R++){var N=o?w*(R+.5):w*R,M=Math.min(v-1,i?Math.round(N):Math.floor(N));o&&(M=Math.max(0,M));for(var O=T+M*u[2],P=0;P<g;P++){var F=m[O+P];y[S++]=F}}}return n.makeTensorInfo([h,c,f,g],a.dtype,y)}};var FZ={kernelName:_I,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;Zq([i,a],"resizeNearestNeighborGrad");for(var s=ZC(a.shape),u=ZC(i.shape),l=Pf(a.shape,4),c=l[0],f=l[1],d=l[2],h=l[3],p=Pf(i.shape,3),v=p[1],g=p[2],m=new Float32Array(c*f*d*h),y=n.data.get(i.dataId).values,b=[o&&v>1?f-1:f,o&&g>1?d-1:d],x=[o&&v>1?v-1:v,o&&g>1?g-1:g],k=b[0]/x[0],w=b[1]/x[1],S=1/k,_=1/w,C=2*Math.ceil(S)+2,E=2*Math.ceil(_)+2,A=0;A<c;A++)for(var I=A*s[0],T=0;T<f;T++)for(var R=I+T*s[1],N=Math.floor(T*S),M=Math.floor(N-C/2),O=0;O<d;O++)for(var P=R+O*s[2],F=Math.floor(O*_),D=Math.floor(F-E/2),L=0;L<h;L++){for(var z=0,j=0;j<C;j++){var B=j+M;if(!(B<0||B>=v)){var W=I+B*u[1],U=B*k;if(T===Math.min(f-1,o?Math.round(U):Math.floor(U)))for(var V=0;V<E;V++){var H=V+D;if(!(H<0||H>=g)){var G=W+H*u[2],q=H*w;O===Math.min(d-1,o?Math.round(q):Math.floor(q))&&(z+=y[G+L])}}}}m[P+L]=z}return n.makeTensorInfo(a.shape,a.dtype,m)}};var DZ={kernelName:II,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;Zq(a,"reverse");var o=a.shape.length,s=jC(i,a.shape);if(0===o)return aX({inputs:{x:a},backend:n});for(var u=new dR(a.shape,a.dtype),l=n.bufferSync(a),c=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[l.get.apply(l,pd(n))].concat(pd(t)))},f=0;f<u.size;f++)c(f);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},LZ={kernelName:gT,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=WC(a.dtype,MC(a.shape)),c=Pf(a.shape,4),f=c[0],d=c[1],h=c[2],p=c[3],v=Pf(VD(s,d,h),2),g=v[0],m=v[1],y=Math.sin(i),b=Math.cos(i),x=u.data.get(a.dataId).values,k=0;k<f;k++)for(var w=k*h*d*p,S=0;S<d;S++)for(var _=S*(h*p),C=0;C<h;C++)for(var E=C*p,A=0;A<p;A++){var I=[f,S,C,A],T=I[2],R=I[1],N=(T-g)*b-(R-m)*y,M=(T-g)*y+(R-m)*b;N=Math.round(N+g),M=Math.round(M+m);var O=o;if("number"!==typeof o&&(O=3===A?255:o[A]),N>=0&&N<h&&M>=0&&M<d)O=x[w+M*(h*p)+N*p+A];l[w+_+E+A]=O}return{dataId:u.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},zZ=eX(TI,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),jZ={kernelName:TI,backendName:"cpu",kernelFunc:zZ},BZ=gX((function(e){return 1/Math.sqrt(e)})),WZ=tX(RI,BZ),UZ={kernelName:RI,backendName:"cpu",kernelFunc:WZ};function VZ(e,t,n,r,a,i,o,s,u,l){var c=[r/a,a],f=e.values,d=t.values;if(0===r)return rM(n,t.dtype);var h=rM(c,t.dtype);"string"===typeof u||"number"===typeof u?h.values.fill(u):"boolean"===typeof u&&h.values.fill(+u);for(var p=0;p<i;p++){for(var v=[],g=0,m=0;m<o;m++){var y=f[p*o+m];v.push(y),g+=y*s[m]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var b=0;b<a;b++)l?h.values[g*a+b]+=d[p*a+b]:h.values[g*a+b]=0===t.rank?d[0]:d[p*a+b]}return h}var HZ={kernelName:NI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=$D(0,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,f=s.strides,d=s.outputSize,h=VZ(n.bufferSync(a),n.bufferSync(i),o,d,c,l,u,f,0,!0);return n.makeTensorInfo(o,h.dtype,h.values)}};function GZ(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function qZ(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var XZ={kernelName:MI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=UC("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),l=s*a,c=0;c<a;++c)o[l+c]="left"===i?GZ(u,t[c+l]):qZ(u,t[c+l]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var YZ={kernelName:OI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;Zq([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=_R(a.dtype,i.dtype),f=tE(MC(a.shape),c),d=0,h=0===o||o>1||1===a.shape.length?1:MC(a.shape.slice(1)),p=0;p<s.length;p++)for(var v=0;v<h;v++)1===s[p]?f[d++]=u[p]:f[d++]=l[p];return n.makeTensorInfo(a.shape,c,f)}},KZ=eX(PI,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),$Z={kernelName:PI,backendName:"cpu",kernelFunc:KZ},ZZ=eX(zI,(function(e){return e<0?-1:e>0?1:0})),QZ={kernelName:zI,backendName:"cpu",kernelFunc:ZZ},JZ=eX(DI,(function(e){return Math.sin(e)})),eQ={kernelName:DI,backendName:"cpu",kernelFunc:JZ},tQ=eX(LI,(function(e){return Math.sinh(e)})),nQ={kernelName:LI,backendName:"cpu",kernelFunc:tQ},rQ=Math.log(1.1920928955078125e-7)+2,aQ=eX(BI,(function(e){var t=e>-rQ,n=e<rQ,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),iQ={kernelName:BI,backendName:"cpu",kernelFunc:aQ};var oQ={kernelName:VI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Zq([a],"spaceToBatchND");var s=MC(i),u=[[0,0]];u.push.apply(u,pd(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=wZ.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=HD(c.shape,i,s,!1),d=GD(f.length,i.length,!1),h=qD(c.shape,i,s,!1),p=PX({inputs:{x:c},backend:n,attrs:{shape:f}}),v=XX({inputs:{x:p},backend:n,attrs:{perm:d}}),g=PX({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),g}};function sQ(e,t,n,r,a,i,o){var s=t[0],u=i[0],l=new Array(u),c=new Array(s),f=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[UC(n,0),[0,f],UC(a,0),l,c]}for(var d=!0,h=0,p=new Array(u).fill(0),v=0;v<s;++v){var g=e[v*f];if(g<0)throw new Error(yL(v,g));if(g>=u)throw new Error(bL(v,g,u));++p[g],d=d&&g>=h,h=g}for(var m=!0,y=0;y<u;++y){var b=0===p[y];l[y]=b,m=m&&!b,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(m&&d){for(var x=e,k=r,w=0;w<s;++w)c[w]=w;return[x,[s,f],k,l,c]}for(var S=p[u-1],_=UC(n,S*f),C=UC(a,S),E=new Array(u).fill(0),A=0;A<s;++A){var I=e[A*f],T=E[I],R=(0===I?0:p[I-1])+T;E[I]++;for(var N=0;N<f;++N)_[R*f+N]=e[A*f+N];C[R]=r[A],c[A]=R}for(var M=0;M<u;++M){if(0===E[M]){var O=0===M?0:p[M-1];_[O*f+0]=M;for(var P=1;P<f;++P)_[O*f+P]=0;C[O]=o}}return[_,[S,f],C,l,c]}var uQ={kernelName:qI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],f=Pf(sQ(s,r.shape,r.dtype,u,a.dtype,l,c),5),d=f[0],h=f[1],p=f[2],v=f[3],g=f[4];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};function lQ(e,t,n,r,a){for(var i,o,s=MC(r),u=t[0],l=a.length,c=[],f=1,d=-1,h=0;h<l;++h){var p=a[h];if(-1===p){if(-1!==d)throw new Error((o=h,"only one output dimension may be -1, not both ".concat(d," and ").concat(o)));d=h,c.push(1)}else{if(p<0)throw new Error((i=p,"size ".concat(h," must be non-negative, not ").concat(i)));f*=p,c.push(p)}}if(-1!==d){if(f<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var v=Math.trunc(s/f);if(f*v!==s)throw new Error(function(e,t){var n=MC(e),r=MC(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,c));c[d]=v}if(MC(c)!==s)throw new Error(function(e,t){var n=MC(e),r=MC(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,c));var g=r.length,m=[];if(g>0){m[g-1]=1;for(var y=g-2;y>=0;--y)m[y]=m[y+1]*r[y+1]}var b=[];if(l>0){b[l-1]=1;for(var x=l-2;x>=0;--x)b[x]=b[x+1]*c[x+1]}for(var k=UC(n,u*l),w=0;w<u;++w){for(var S=0,_=0;_<g;++_)S+=e[w*g+_]*m[_];for(var C=0;C<l;++C)k[w*l+C]=Math.trunc(S/b[C]),S%=b[C]}return[k,[u,l],c]}var cQ={kernelName:XI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),l=Pf(lQ(s,r.shape,r.dtype,o,u),3),c=l[0],f=l[1],d=l[2];return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};function fQ(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],l=u[1],c=s>0?a[s-1]+1:0,f=c;if(f<0)throw new Error("segment ids must be >= 0");var d=t.slice();d[0]=f;var h=d.reduce((function(e,t){return e*t}),1),p=UC(n,h);if(0===s)return f>0&&p.fill(o),[p,d];if(f<=0)throw new Error("segment ids must be >= 0");for(var v=0,g=1,m=0,y=a[v];;){var b=0;if(g<s){if(y===(b=a[g])){++g;continue}if(y>=b)throw new Error("segment ids are not increasing")}if(y<0||y>=f)throw new Error(xL(y,f));y>m&&p.fill(o,m*l,y*l);for(var x=v;x<g;++x){var k=r[x];if(k<0||k>=u[0])throw new Error(kL(x,r[x],u[0]));for(var w=0;w<l;w++)p[y*l+w]+=e[k*l+w]}if(i)for(var S=0;S<l;S++)p[y*l+S]/=g-v;if(v=g,m=y+1,y=b,++g>s)break}return m<f&&p.fill(o,m*l,f*l),[p,d]}var dQ={kernelName:YI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=Pf(fQ(o,r.shape,r.dtype,s,u,!0),2),c=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,c)}};var hQ={kernelName:KI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=Pf(fQ(o,r.shape,r.dtype,s,u),2),c=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,c)}};var pQ={kernelName:$I,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,l=$D(0,i,u),c=l.sliceRank,f=l.numUpdates,d=l.sliceSize,h=l.strides,p=l.outputSize,v=!1,g=r.bufferSync(i);switch(o.dtype){case"bool":t=VZ(g,r.bufferSync(o),u,p,d,f,c,h,Boolean(r.data.get(s.dataId).values[0]),v);break;case"float32":t=VZ(g,r.bufferSync(o),u,p,d,f,c,h,r.data.get(s.dataId).values[0],v);break;case"int32":t=VZ(g,r.bufferSync(o),u,p,d,f,c,h,r.data.get(s.dataId).values[0],v);break;case"string":t=VZ(g,r.bufferSync(o),u,p,d,f,c,h,$T(r.data.get(s.dataId).values[0]),v);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var vQ={kernelName:HI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=jC(r.axis,a.shape)[0],s=mL(a,i,o),u=new Array(a.shape.length).fill(0),l=a.shape.slice();return s.map((function(e){var t=pd(l);t[o]=e;var r=bY({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},gQ=gX((function(e){return Math.sqrt(e)})),mQ=eX(WI,(function(e){return Math.sqrt(e)})),yQ={kernelName:WI,backendName:"cpu",kernelFunc:mQ},bQ={kernelName:QI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;Zq(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},xQ=uX((function(e,t){var n=e-t;return n*n})),kQ=IX(ZI,xQ),wQ={kernelName:ZI,backendName:"cpu",kernelFunc:kQ},SQ=eX(pT,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),_Q={kernelName:pT,backendName:"cpu",kernelFunc:SQ};function CQ(e,t,n,r){for(var a=rM(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(pd(o)))}return a}var EQ={kernelName:JI,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,l=r.endMask,c=r.ellipsisMask,f=r.newAxisMask,d=r.shrinkAxisMask;Zq(a,"stridedSlice");var h,p=UM(a.shape,i,o,s,u,l,c,f,d),v=p.finalShapeSparse,g=p.finalShape,m=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,k=p.end,w=p.strides;if(m)h=PX({inputs:{x:a},backend:n,attrs:{shape:g}});else if(y||b){IC(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=zM(x,k,w),_=bY({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});h=PX({inputs:{x:_},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(_)}else{var C=CQ(v,n.bufferSync(a),w,x);h=n.makeTensorInfo(g,C.dtype,C.values)}return h}},AQ=function(){function e(t,n,r,a,i,o){gC(this,e),this.separator=KT(t),this.nGramWidths=n,this.leftPad=KT(r),this.rightPad=KT(a),this.padWidth=i,this.preserveShort=o}return yC(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),l=Math.max(0,u-s),c=Math.max(0,u-(a-(s+1))),f=i-(l+c),d=t+(l>0?0:s-u),h=0;h+=l*o.leftPad.length;for(var p=0;p<f;++p)h+=e[d+p].length;h+=c*o.rightPad.length,h+=(l+c+f-1)*o.separator.length,n[r+s]=new Uint8Array(h);for(var v=n[r+s],g=0,m=function(e){return e.forEach((function(e){return v[g++]=e}))},y=0;y<l;++y)m(o.leftPad),m(o.separator);for(var b=0;b<f-1;++b)m(e[d+b]),m(o.separator);if(f>0){m(e[d+f-1]);for(var x=0;x<c;++x)m(o.separator),m(o.rightPad)}else{for(var k=0;k<c-1;++k)m(o.rightPad),m(o.separator);m(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,l=UC("int32",a);if(0===r||0===a){for(var c=new Array(r),f=0;f<=u;++f)l[f]=0;return[c,l]}l[0]=0;for(var d=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),l[e]=l[e-1]+a},h=1;h<=u;++h)d(h);for(var p=new Array(l[u]),v=function(r){var a=t[r],i=l[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,p,i,u,o),i+=u})),n.preserveShort&&i===l[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,p,i,1,s)}},g=0;g<u;++g)v(g);return[p,l]}}]),e}();function IQ(e,t,n,r,a,i,o,s){return new AQ(n,r,a,i,o,s).compute(e,t)}var TQ={kernelName:eT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,l=r.preserveShortSequences,c=t.data,f=t.dataSplits,d=Pf(IQ(n.data.get(c.dataId).values,n.data.get(f.dataId).values,a,i,o,s,u,l),2),h=d[0],p=d[1];return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(f.shape,"int32",p)]}};function RQ(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var l=e.subarray(0,u);n&&0===l.length||r.push(l),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var c=0;c<e.length;++c)r.push(e.subarray(c,c+1))}function NQ(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var l=a.length;RQ(e[u],t,n,a);var c=a.length-l;s[u]=c,i+=c,o=Math.max(o,c)}for(var f=UC("int32",2*i),d=new Array(i),h=[r,o],p=0,v=0;v<r;++v)for(var g=0;g<s[v];++g)f[2*p]=v,f[2*p+1]=g,d[p]=a[p],++p;return[f,d,h]}var MQ={kernelName:tT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=Pf(NQ(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),3),s=o[0],u=o[1],l=o[2],c=u.length;return[n.makeTensorInfo([c,2],"int32",s),n.makeTensorInfo([c],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(l))]}};function OQ(e,t){for(var n=UC("int32",e.length),r=0;r<e.length;++r)n[r]=GT(e[r]).modulo(t).getLowBitsUnsigned();return n}var PQ={kernelName:nT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=OQ(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},FQ=eX(aT,(function(e){return Math.tan(e)})),DQ={kernelName:aT,backendName:"cpu",kernelFunc:FQ},LQ=eX(iT,(function(e){return Math.tanh(e)}));function zQ(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=rM(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var l=e.locToIndex(s);a.values[i]=e.values[l]}return a}var jQ={kernelName:oT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;Zq(a,"tile");var o=zQ(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},BQ=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function WQ(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),l=Math.max(n,Math.floor(t-i*s/a+u)),c=Math.min(r,Math.floor(t+(a-i)*s/a+u));WQ(e,t,l,c)}var f=e[t],d=n,h=r;for(EC(e,n,t),BQ(e[r],f)>0&&EC(e,n,r);d<h;){for(EC(e,d,h),d++,h--;BQ(e[d],f)<0;)d+=1;for(;BQ(e[h],f)>0;)h-=1}0===BQ(e[n],f)?EC(e,n,h):EC(e,h+=1,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function UQ(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=WC(n,o*r),l=WC("int32",o*r),c=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(WQ(o,r),o=o.slice(0,r)),a&&o.sort(BQ);for(var c=t*r,f=u.subarray(c,c+r),d=l.subarray(c,c+r),h=0;h<r;h++)f[h]=o[h].value,d[h]=o[h].index},f=0;f<o;f++)c(f);var d=t.slice();return d[d.length-1]=r,[rM(d,n,u),rM(d,"int32",l)]}var VQ={kernelName:sT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;Zq(a,"topk");var s=Pf(UQ(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),2),u=s[0],l=s[1];return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};var HQ={kernelName:uT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,u=n.fillValue,l=n.outputShape,c=Pf(a.shape,4),f=c[0],d=c[1],h=c[2],p=c[3],v=Pf(null!=l?l:[d,h],2),g=v[0],m=v[1],y=[f,g,m,p],b=ZC(a.shape),x=b[0],k=b[1],w=b[2],S=WC(a.dtype,MC(y));S.fill(u);for(var _=r.data.get(a.dataId).values,C=r.data.get(i.dataId).values,E=0;E<f;++E){for(var A=1===i.shape[0]?C:C.subarray(8*E,8*E+8),I=0;I<g;++I)for(var T=0;T<m;++T)for(var R=0;R<p;++R){var N=void 0,M=A[6]*T+A[7]*I+1;if(0!==M){var O=(A[0]*T+A[1]*I+A[2])/M,P=(A[3]*T+A[4]*I+A[5])/M,F=GQ(O,h,s),D=GQ(P,d,s);switch(o){case"nearest":N=XQ(_,d,h,x,k,w,E,D,F,R,u);break;case"bilinear":N=YQ(_,d,h,x,k,w,E,D,F,R,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}S[E*x+I*k+T*w+R]=N}}return r.makeTensorInfo(y,a.dtype,S)}return{dataId:r.write(S,y,a.dtype),shape:a.shape,dtype:a.dtype}}};function GQ(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return _C(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return _C(0,n,t-1)}(e,t);case"nearest":return function(e,t){return _C(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function qQ(e,t,n,r,a,i,o,s,u,l,c){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+l]:c}function XQ(e,t,n,r,a,i,o,s,u,l,c){return qQ(e,t,n,r,a,i,o,Math.round(s),Math.round(u),l,c)}function YQ(e,t,n,r,a,i,o,s,u,l,c){var f=Math.floor(s),d=Math.floor(u),h=f+1,p=d+1;return(h-s)*((p-u)*qQ(e,t,n,r,a,i,o,f,d,l,c)+(u-d)*qQ(e,t,n,r,a,i,o,f,p,l,c))+(s-f)*((p-u)*qQ(e,t,n,r,a,i,o,h,d,l,c)+(u-d)*qQ(e,t,n,r,a,i,o,h,p,l,c))}function KQ(e,t,n,r){for(var a=jC(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},l=new Int32Array(n[a]),c=new dR(i,r,e),f=[],d=1===i[0]&&1===i[2],h=0;h<n[a];h++){var p=void 0;if(d)p=e[h].toString();else{for(var v=[],g=0;g<i[0];g++)for(var m=0;m<i[2];m++)v.push(c.get(g,h,m));p=v.join(",")}if(void 0!==u[p])l[h]=u[p];else{var y=Object.keys(u).length;u[p]=y,l[h]=y,f.push(h)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new dR(b,r);f.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(c.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=b[1],{outputValues:x.values,outputShape:k,indices:l}}var $Q={kernelName:cT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;Zq(i,"unique");var o=KQ(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,l=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};var ZQ={kernelName:fT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),l=0,c=0;c<o;c++)c!==i&&(u[l++]=a.shape[c]);var f=new Array(o).fill(0),d=a.shape.slice();d[i]=1;for(var h=new Array(s),p=0;p<h.length;p++){f[i]=p;var v=bY({inputs:{x:a},backend:n,attrs:{begin:f,size:d}});h[p]=PX({inputs:{x:v},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(v)}return h}};for(var QQ={kernelName:dT,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;Zq(a,"unsortedSegmentSum");for(var s=[],u=[],l=a.shape.length-i.shape.length,c=i,f=0;f<l;++f){var d=SK({inputs:{input:c},backend:n,attrs:{dim:f+1}});c=d,u.push(d)}for(var h=0;h<o;++h){var p=qT(h,"int32"),v=n.makeTensorInfo([],"int32",p),g=gK({inputs:{a:v,b:c},backend:n}),m=EX({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=lK({inputs:{a:m,b:a},backend:n}),b=fK({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(v),u.push(g),u.push(m),u.push(y),u.push(b)}var x=xZ({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},JQ=0,eJ=[zX,BX,UX,HX,OX,GX,KX,$X,ZX,QX,eY,nY,aY,sY,lY,hY,pY,vY,gY,LX,mY,kY,_Y,CY,AX,IY,RY,wX,NY,DY,zY,jY,BY,WY,UY,VY,GY,XY,YY,KY,$Y,ZY,QY,eK,tK,nK,rK,aK,iK,oK,hK,rX,pK,mK,bK,wK,_K,AK,zK,BK,WK,HK,XK,YK,KK,ZK,JK,n$,i$,iX,o$,PY,u$,c$,d$,sX,v$,y$,x$,S$,C$,I$,R$,O$,P$,F$,z$,W$,U$,V$,H$,G$,q$,X$,Y$,Z$,Q$,tZ,aZ,cK,oZ,uZ,cZ,dZ,vZ,gZ,bZ,kZ,wZ,CZ,fX,AZ,TZ,CX,RK,NZ,hX,vX,FX,MZ,OZ,PZ,FZ,DZ,LZ,jZ,UZ,HZ,XZ,YZ,$Z,bX,QZ,eQ,nQ,xY,rZ,iQ,oQ,uQ,cQ,dQ,hQ,pQ,vQ,yQ,bQ,wQ,_Q,EQ,TQ,MQ,PQ,PK,dK,DQ,{kernelName:iT,backendName:"cpu",kernelFunc:LQ},jQ,VQ,HQ,YX,$Q,ZQ,QQ,yZ];JQ<eJ.length;JQ++){ET(eJ[JQ])}var tJ,nJ,rJ,aJ={},iJ={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function oJ(e,t){if(!(e in aJ)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete aJ[e]}),!1),1===e)return n.getContext("webgl",iJ)||n.getContext("experimental-webgl",iJ);return n.getContext("webgl2",iJ)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;aJ[e]=n}var r=aJ[e];return null==r||r.isContextLost()?(delete aJ[e],oJ(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),aJ[e])}function sJ(e,t){return[t,e]}function uJ(e){var t=MC(e);return FC(Math.ceil(t/4))}function lJ(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function cJ(e,t){var n,r,a,i,o,s,u,l,c,f,d=e;return 2===fE().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,i=d.RGBA32F,o=d.RED,u=4,l=1,c=d.HALF_FLOAT,f=d.FLOAT,s=d.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=d.RGBA,o=e.RGBA,u=4,l=4,c=null!=t?t.HALF_FLOAT_OES:null,f=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:f}}function fJ(e,t){var n=t();return fE().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(tJ||(tJ={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(nJ||(nJ={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(rJ||(rJ={}));function dJ(e){return!!(fE().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function hJ(e,t){return EJ(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var pJ,vJ,gJ=/ERROR: [0-9]+:([0-9]+):/g;function mJ(e,t){var n=gJ.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return DC((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var l=o.slice(0,r-1),c=o.slice(r-1,r),f=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(DC(c[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}function yJ(e,t){if(fJ(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function bJ(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(fJ(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),fJ(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),fJ(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function xJ(e,t,n){return EJ(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function kJ(e,t,n){return e.getUniformLocation(t,n)}function wJ(e,t,n,r){fJ(e,(function(){return function(e,t,n){AJ(e,n),fJ(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),fJ(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),fJ(e,(function(){return e.uniform1i(n,r)}))}function SJ(e,t,n){fJ(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),fJ(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function _J(e,t){fJ(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),fJ(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function CJ(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function EJ(e,t,n){var r=fJ(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function AJ(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function IJ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return MC(e.slice(0,e.length-t))}function TJ(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function RJ(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[IJ(e)].concat(pd(TJ(e)))),t}function NJ(e){return e%2===0}function MJ(e,t){if(OC(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(NJ(n)&&NJ(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&NJ(e[0])&&NJ(t[0])}function OJ(e,t){return null!=e.getExtension(t)}function PJ(e){try{if(null!=oJ(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function FJ(e){if(0===e)return!1;var t=oJ(e);if(1!==e){if(OJ(t,"EXT_color_buffer_float"))return DJ(t);var n="EXT_color_buffer_half_float";if(OJ(t,n)){var r=t.getExtension(n);return function(e,t){var n=cJ(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!OJ(t,"OES_texture_float")&&(!!OJ(t,"WEBGL_color_buffer_float")&&DJ(t))}function DJ(e){var t=cJ(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function LJ(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&IC("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var zJ=fE();function jJ(){var e,t,n,r,a,i,o,s,u,l;return 2===fE().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function BJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=ZC(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function WJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=ZC(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function UJ(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function VJ(e){var t=ZC(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}zJ.registerFlag("HAS_WEBGL",(function(){return zJ.getNumber("WEBGL_VERSION")>0})),zJ.registerFlag("WEBGL_VERSION",(function(){return PJ(2)?2:PJ(1)?1:0})),zJ.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),zJ.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===zJ.get("WEBGL_VERSION")})),zJ.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),zJ.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),zJ.registerFlag("WEBGL_PACK",(function(){return zJ.getBool("HAS_WEBGL")})),zJ.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_PACK_CLIP",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_PACK_REDUCE",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_CONV_IM2COL",(function(){return zJ.getBool("WEBGL_PACK")})),zJ.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==pJ){var t=oJ(e);pJ=t.getParameter(t.MAX_TEXTURE_SIZE)}return pJ}(zJ.getNumber("WEBGL_VERSION"))})),zJ.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==vJ){var t=oJ(e);vJ=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,vJ)}(zJ.getNumber("WEBGL_VERSION"))})),zJ.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=zJ.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=oJ(e);return OJ(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:OJ(t,"EXT_disjoint_timer_query")?1:0}(e)})),zJ.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return zJ.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!zR()})),zJ.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=oJ(e);if(1===e){if(!OJ(t,"OES_texture_float"))return!1}else if(!OJ(t,"EXT_color_buffer_float"))return!1;return DJ(t)}(zJ.getNumber("WEBGL_VERSION"))})),zJ.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!zJ.getBool("WEBGL_FORCE_F16_TEXTURES")&&zJ.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),zJ.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return FJ(zJ.getNumber("WEBGL_VERSION"))})),zJ.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=zJ.getNumber("WEBGL_VERSION"))&&null!=oJ(e).fenceSync;var e})),zJ.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return zJ.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),zJ.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),zJ.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return zR()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),zJ.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),zJ.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),zJ.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),zJ.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var HJ="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",GJ=NM;function qJ(e,t,n){var r=[];if(e.forEach((function(e){var t=MC(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(f0(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?YJ(e,r):XJ(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?u0(e,t):l0(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,l=jJ(),c=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),f=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(KJ,"\n    ").concat($J,"\n    ").concat(ZJ,"\n  ")}(l);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(OC(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",l=2;l<e.length-1;l++)o*=e[e.length-l-1],s="\n      int b".concat(l," = index / ").concat(o,";\n      index -= b").concat(l," * ").concat(o,";\n    ")+s,u="b".concat(l,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(OC(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=WJ(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=BJ(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=WJ(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=BJ(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=BJ(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=BJ(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),n.packedInputs&&(f+=QJ),[f,c,i,o,a,s,n.userCode].join("\n")}function XJ(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return e0(e,t);case 1:return t0(e,t);case 2:return n0(e,t);case 3:return r0(e,t);case 4:return a0(e,t);case 5:return i0(e);case 6:return o0(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function YJ(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=jJ();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=jJ();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=jJ();if(null!=i&&OC(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(c,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=d0(e,n.slice(1)),l=["b","row","col"];return"\n        ".concat(YJ(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(h0(l,s),");\n        }\n      ")}var c=jJ();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");var f=o[0],d=o[1],h=Math.ceil(n[2]/2),p=h*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(f,", ").concat(d,", ").concat(p,", ").concat(h,", b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=jJ();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=u[0],c=u[1],f=Math.ceil(i[o-1]/2),d=f*Math.ceil(i[o-2]/2),h="int b, int row, int col",p="b * ".concat(d," + (row / 2) * ").concat(f," + (col / 2)"),v=2;v<o-1;v++)h="int b".concat(v,", ")+h,d*=i[o-v-1],p="b".concat(v," * ").concat(d," + ")+p;return"\n    vec4 ".concat(r,"(").concat(h,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(c,";\n      int texC = index - texR * ").concat(c,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(c,", ").concat(l,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var KJ="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$J="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ZJ="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",QJ="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function JJ(e){return"offset".concat(e)}function e0(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=Pf(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=JJ(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=Pf(e.shapeInfo.texShape,2),l=u[0],c=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(c,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function t0(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(s0(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=JJ(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function n0(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&OC(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=BC(n),l=u.newShape,c=u.keptDims,f=l;if(f.length<n.length){var d=d0(e,f);return"\n      ".concat(XJ(d,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(h0(["row","col"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(s0(e),"\n      }\n    ");var h=i[0],p=i[1],v=JJ(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function r0(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=BC(n),u=s.newShape,l=s.keptDims,c=u;if(c.length<n.length){var f=d0(e,c);return"\n        ".concat(XJ(f,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(h0(["row","col","depth"],l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(s0(e),"\n      }\n    ");var d=e.shapeInfo.texShape,h=d[0],p=d[1],v=e.shapeInfo.flatOffset;if(p===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(h,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(p===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=JJ(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function a0(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=BC(n),l=u.newShape,c=u.keptDims;if(l.length<n.length){var f=d0(e,l);return"\n      ".concat(XJ(f,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(h0(["row","col","depth","depth2"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(s0(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],v=h[1],g="int stride2 = ".concat(r,"Shape[3];"),m="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(m,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==d)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=JJ(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(m,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function i0(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=BC(t),l=u.newShape,c=u.keptDims;if(l.length<t.length){var f=d0(e,l);return"\n      ".concat(XJ(f),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(h0(["row","col","depth","depth2","depth3"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(s0(e),"\n      }\n    ");var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],v=h[1];if(v===s&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==d)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=JJ(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function o0(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=BC(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=d0(e,i);return"\n      ".concat(XJ(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(h0(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],l=t[4]*u,c=t[3]*l,f=t[2]*c,d=t[1]*f;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(d,", ").concat(f,", ").concat(c,", ").concat(l,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(s0(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],g=p[1];if(g===d&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(f,", ").concat(c,", ").concat(l,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===u&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=JJ(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(d," + col * ").concat(f," + depth * ").concat(c," +\n          depth2 * ").concat(l," + depth3 * ").concat(u," + depth4 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function s0(e){var t=e.name,n=MC(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function u0(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=GJ(e.shapeInfo.logicalShape,t.logicalShape),l=c0(s),c=s-o,f=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(f[e+c]," = 0;")})).join("\n");var d="";d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(f[t+c])})).join(", ");var h="return outputValue;",p=1===MC(e.shapeInfo.logicalShape),v=1===MC(t.logicalShape);if(1!==o||p||v){if(p&&!v)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=o-2,m=o-1;u.indexOf(g)>-1&&u.indexOf(m)>-1?h="return vec4(outputValue.x);":u.indexOf(g)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(m)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(d,");\n      ").concat(h,"\n    }\n  ")}function l0(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&OC(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var l,c=c0(u),f=GJ(e.shapeInfo.logicalShape,t.logicalShape),d=u-s,h=["x","y","z","w","u","v"];l=0===s?"":u<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords.".concat(h[e+d]," = 0;")})).join("\n");var p="";return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(h[t+d])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(l,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}function c0(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function f0(e,t,n){var r=BC(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,l=!e&&o>1&&!OC(t,n)&&a.length<o||s;return{useSqueezeShape:l,uniformShape:l?u:t,keptDims:i}}function d0(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function h0(e,t){return t.map((function(t){return e[t]})).join(", ")}function p0(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=qJ(a,o,t),u=function(e,t){var n=EJ(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(fJ(e,(function(){return e.shaderSource(n,t)})),fJ(e,(function(){return e.compileShader(n)})),fE().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw mJ(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),l=e.createProgram(u);return fE().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o},v0(e,t,l))}function v0(e,t,n){var r,a,i,o,s={},u={},l={},c=[],f=null;o=e.getUniformLocation(n,"NAN",!1),1===fE().getNumber("WEBGL_VERSION")&&(f=e.getUniformLocation(n,"INFINITY",!1));for(var d=!1,h=0;h<t.variableNames.length;h++){var p=t.variableNames[h];s[p]=e.getUniformLocation(n,p,d),s["offset".concat(p)]=e.getUniformLocation(n,"offset".concat(p),d),t.enableShapeUniforms&&(u["".concat(p,"Shape")]=e.getUniformLocation(n,"".concat(p,"Shape"),d),l["".concat(p,"TexShape")]=e.getUniformLocation(n,"".concat(p,"TexShape"),d))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",d),i=e.getUniformLocation(n,"outShapeStrides",d),a=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms&&t.customUniforms.forEach((function(t,r){c[r]=e.getUniformLocation(n,t.name,d)})),{uniformLocations:s,customUniformLocations:c,infLoc:f,nanLoc:o,inShapesLocations:u,inTexShapesLocations:l,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function g0(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!OC(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!OC(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function m0(e,t,n,r,a){t.program.enableShapeUniforms||(g0(t.inShapeInfos,n),g0([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===fE().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var l=f0(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(l.length){case 1:e.gl.uniform1iv(s,new Int32Array(l));break;case 2:e.gl.uniform2iv(s,new Int32Array(l));break;case 3:e.gl.uniform3iv(s,new Int32Array(l));break;case 4:e.gl.uniform4iv(s,new Int32Array(l))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(MC(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var c=n.uniformValues;c instanceof Float32Array||(c=new Float32Array(c)),e.gl.uniform1fv(i,c)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=ZC(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function y0(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=f0(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,l=o.keptDims,c="",f="",d="";if(1===u.length&&e.packedInputs){var h=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];c="".concat(h[0]>1,"_").concat(h[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var p=ZC(u);d="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else f="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,g=2===u.length&&OC(t.shape,i),m=1===MC(t.shape),y=NM(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&OC(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(s?l:"","_").concat(u.length,"_").concat(m,"_").concat(y,"_").concat(g,"_").concat(c,"_").concat(f,"_").concat(d,"_").concat(x,"_").concat(a)}else{var k=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(k,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(fE().getNumber("WEBGL_VERSION"))}function b0(e){return fE().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var x0=yC((function e(t){gC(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=tJ.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=jJ();this.outputShape=t,this.enableShapeUniforms=b0(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?WJ(["r","c","d"],t):BJ(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),k0=yC((function e(t){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=tJ.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=jJ();this.outputShape=t,this.enableShapeUniforms=b0(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?WJ(["r","c","d"],t):BJ(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),w0=yC((function e(t){gC(this,e),this.variableNames=["A"],this.outTexUsage=nJ.DOWNLOAD;var n=jJ();this.outputShape=t,this.userCode="\n      ".concat(HJ,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),S0=yC((function e(t){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=nJ.DOWNLOAD;var n=jJ();this.outputShape=t,this.userCode="\n      ".concat(HJ,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),_0=yC((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];gC(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=jJ();this.outputShape=t,this.enableShapeUniforms=b0(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":VJ(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),C0=yC((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];gC(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=jJ();this.outputShape=t,this.enableShapeUniforms=b0(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":VJ(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function E0(e){var t=jJ();return function(e,t){var n=EJ(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(fJ(e,(function(){return e.shaderSource(n,t)})),fJ(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function A0(e){return function(e,t){var n=EJ(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return fJ(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),fJ(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function I0(e){return function(e,t){var n=EJ(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return fJ(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),fJ(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function T0(e,t,n,r,a,i){!function(e,t){var n=fE().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return EJ(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return fJ(e,(function(){return e.bindTexture(s,o)})),fJ(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),fJ(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),fJ(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),fJ(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===fE().getNumber("WEBGL_VERSION")?fJ(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):fJ(e,(function(){return e.texStorage2D(s,1,r,t,n)})),fJ(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function R0(e){return e.internalFormatFloat}function N0(e){return e.internalFormatHalfFloat}function M0(e){return e.downloadTextureFormat}function O0(e){return e.internalFormatPackedFloat}function P0(e){return e.internalFormatPackedHalfFloat}function F0(e,t,n,r,a,i,o,s){var u=e,l=new Float32Array(function(e,t){var n=Pf(lJ(e,t),2);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}var D0=function(){function e(t){gC(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=fE().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){aJ[e]=t}(n,t)):this.gl=oJ(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===fE().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=hJ(this.gl,"OES_texture_float"),OJ(this.gl,i))this.textureHalfFloatExtension=hJ(this.gl,i);else if(fE().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),OJ(this.gl,a))this.colorBufferHalfFloatExtension=hJ(this.gl,a);else if(fE().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",OJ(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!OJ(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=A0(this.gl),this.indexBuffer=I0(this.gl),this.framebuffer=function(e){return EJ(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=cJ(this.gl,this.textureHalfFloatExtension)}return yC(e,[{key:"debug",get:function(){return fE().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;fJ(t,(function(){return t.finish()})),fJ(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),fJ(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),fJ(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),fJ(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),fJ(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Pf(sJ(t,n),2);return T0(e,a[0],a[1],R0(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Pf(sJ(t,n),2);return T0(e,a[0],a[1],N0(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Pf(sJ(t,n),2);return T0(e,a[0],a[1],M0(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){fJ(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===fE().getNumber("WEBGL_VERSION")?fJ(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):fJ(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===fE().getNumber("WEBGL_VERSION")?fJ(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):fJ(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),fJ(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;fJ(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===fE().getNumber("WEBGL_VERSION")?fJ(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):fJ(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),fJ(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Pf(lJ(t,n),2);return T0(e,a[0],a[1],P0(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=Pf(lJ(t,n),2);return T0(e,a[0],a[1],O0(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(_J(this.gl,this.framebuffer),this.outputTexture=null),fJ(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=Pf(sJ(t,n),2),i=a[0],o=a[1],s=new Uint8Array(t*n*4);return fJ(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return F0(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();fJ(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return fJ(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),fJ(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),fJ(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(fE().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return fJ(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=E0(n));var r=function(e){return EJ(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return fJ(n,(function(){return n.attachShader(r,t.vertexShader)})),fJ(n,(function(){return n.attachShader(r,e)})),function(e,t){if(fJ(e,(function(){return e.linkProgram(t)})),!fE().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&yJ(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return fJ(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),bJ(e,t,"clipSpacePos",n,3,20,0)&&bJ(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&fJ(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&yJ(this.gl,this.program),fJ(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?xJ(this.gl,e,t):kJ(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),fJ(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),wJ(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=Pf(lJ(t,n),2),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&yJ(this.gl,this.program),CJ(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),fJ(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),fJ(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=hJ(this.gl,2===fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=vC(hC().mark((function e(t){var n=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LC((function(){return n.disposed||n.isQueryAvailable(t,fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||LC((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),SJ(this.gl,e,this.framebuffer),this.debug&&CJ(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(SJ(this.gl,this.outputTexture,this.framebuffer),this.debug&&CJ(this.gl)):_J(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;SJ(r,e,this.framebuffer),this.debug&&CJ(r),this.outputTexture=e,fJ(r,(function(){return r.viewport(0,0,t,n)})),fJ(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),fJ(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var L0=RX,z0=wY,j0=SY,B0=EY,W0=MY,U0=vK,V0=xK,H0=CK,G0=UK,q0=$K,X0=QK,Y0=e$,K0=r$,$0=h$,Z0=g$,Q0=b$,J0=k$,e1=D$,t1=j$,n1=K$,r1=sK,a1=iZ,i1=hZ,o1=EZ,s1=IZ,u1=BZ,l1=VZ,c1=mX,f1=jX,d1=yY,h1=sQ,p1=lQ,v1=fQ,g1=gQ,m1=CQ,y1=IQ,b1=NQ,x1=OQ,k1=NK,w1=zQ,S1=UQ,_1=qX,C1=KQ;function E1(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function A1(e,t){return 1===t?[e]:E1(e,t)}var I1=function(){function e(t){if(gC(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=b0(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=A1("rc",this.rank),r=c0(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return yC(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),T1=yC((function e(t,n){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=b0(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=UJ(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):BJ(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":VJ(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var R1=function(){function e(t){gC(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return yC(e,[{key:"acquireTexture",value:function(e,t,n){var r=M1(t,n),a=O1(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=N1(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===rJ.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===rJ.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===rJ.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===rJ.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===rJ.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=M1(n,r),i=O1(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=N1(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=fE().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],l=u.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function N1(e,t,n,r,a){var i,o=function(e,t){switch(e){case rJ.PACKED_2X2_FLOAT32:return O0(t);case rJ.PACKED_2X2_FLOAT16:return P0(t);case rJ.UNPACKED_FLOAT32:return R0(t);case rJ.UNPACKED_FLOAT16:return N0(t);case rJ.PACKED_4X1_UNSIGNED_BYTE:return M0(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=Pf(lJ(e[0],e[1]),2);i=s[0]*s[1]}else{var u=Pf(sJ(e[0],e[1]),2);i=u[0]*u[1]}var l=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*l}function M1(e,t){if(e===nJ.UPLOAD)return rJ.PACKED_2X2_FLOAT32;if(e===nJ.RENDER||null==e)return function(e){return fE().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?rJ.PACKED_2X2_FLOAT32:rJ.UNPACKED_FLOAT32:e?rJ.PACKED_2X2_FLOAT16:rJ.UNPACKED_FLOAT16}(t);if(e===nJ.DOWNLOAD||e===nJ.PIXELS)return rJ.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function O1(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var P1=yC((function e(t,n){gC(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=b0(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),F1="if (isnan(x)) return x;",D1="return x;",L1="return abs(x);";var z1="return (x >= 0.0) ? x : (exp(x) - 1.0);",j1=F1+"\n  return (x < 0.0) ? 0.0 : x;\n",B1=F1+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",W1="return x;",U1="return 1.0 / (1.0 + exp(-1.0 * x));",V1="return x;",H1="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",G1="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",q1="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",X1="return 1.0 / (1.0 + exp(-1.0 * x));",Y1=yC((function e(t,n){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=b0(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),K1=yC((function e(t){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=b0(this.outputShape.length);var n=t.length,r=A1("rc",n),a=c0(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),$1=_L,Z1={};var Q1=fE().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var J1=function(e){tR(n,e);var t=oR(n);function n(e){var r,a,i;if(gC(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!fE().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof D0)a=e;else{var o=oJ(fE().getNumber("WEBGL_VERSION"),e);a=new D0(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=oJ(fE().getNumber("WEBGL_VERSION"));a=new D0(s),r.binaryCache=((i=fE().getNumber("WEBGL_VERSION"))in Z1||(Z1[i]={}),Z1[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new R1(r.gpgpu),r.numMBBeforeWarning=null==fE().global.screen?1024:fE().global.screen.height*fE().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new xC(aR(r),XM()),r}return yC(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((fE().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||fE().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:nJ.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(fE().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:nJ.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new Y1(o,W1):new P1(o,W1);var l=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,d,h=null!=this.activeTimers;(h&&(f=YT()),"complex64"===r)?d=iL(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):d=this.getValuesFromTexture(e);return h&&(this.downloadWaitMs+=YT()-f),this.convertAndCacheOnCPU(e,d)}},{key:"read",value:function(){var e=vC(hC().mark((function e(t){var n,r,a,i,o,s,u,l,c,f,d,h,p,v,g,m,y,b,x,k,w,S,_;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,l=r.isPacked,null==o){e.next=11;break}return c=l?new Y1(i,W1):new P1(i,W1),f=this.runWebGLProgram(c,[{dataId:t,shape:i,dtype:s}],s),d=this.read(f.dataId),this.disposeIntermediateTensorInfo(f),e.abrupt("return",d);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!fE().getBool("DEBUG")){e.next=16;break}if(fE().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==fE().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(h=null,"complex64"!==s&&fE().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),g=this.texData.get(p.dataId),h=(v=this.gpgpu).createBufferFromTexture.apply(v,[g.texture.texture].concat(pd(uJ(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:y=e.sent,b=y[0],x=y[1],m=iL(b,x),e.next=32;break;case 31:null==h?m=this.getValuesFromTexture(t):(k=MC(i),m=this.gpgpu.downloadFloat32MatrixFromBuffer(h,k));case 32:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=h&&fJ(w=this.gpgpu.gl,(function(){return w.deleteBuffer(h)})),S=this.convertAndCacheOnCPU(t,m),_=this.pendingRead.get(t),this.pendingRead.delete(t),_.forEach((function(e){return e(S)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&XM().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var l;l=s?new Y1(a,W1):new P1(a,W1);var c=this.runWebGLProgram(l,[{dataId:e,shape:a,dtype:o}],o),f=this.readToGPU(c,t);return this.disposeIntermediateTensorInfo(c),f}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var d=this.decode(e,t.customTexShape),h=XM().makeTensorFromTensorInfo(d),p=this.texData.get(d.dataId);return Object.assign({tensorRef:h},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return $T(e)}));return rM(e.shape,e.dtype,n)}catch(yfe){throw new Error("Failed to decode encoded string bytes into utf-8")}return rM(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!dJ(n)){if(fE().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=MC(n);if(fE().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),l=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat(pd(uJ(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),l}var c=fE().getBool("WEBGL_PACK")&&!0===a,f=c?RJ(n):n,d=c?new S0(f):new w0(f),h=this.runWebGLProgram(d,[{shape:f,dtype:r,dataId:e}],"float32"),p=this.texData.get(h.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(h),v}},{key:"timerAvailable",value:function(){return fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=NC(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=NC(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return vC(hC().mark((function e(){var n;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=AC(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:YT(),endMs:null}}},{key:"endTimer",value:function(e){return fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=YT(),e)}},{key:"getQueryTime",value:function(){var e=vC(hC().mark((function e(t){var n;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(fE().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q1;return fE().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&MC(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){xT("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return $1(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new Y1(e.shape,t),a=this.compileAndRun(r,[e],n);return XM().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=f1(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(fE().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,L1,e.dtype);var n=new P1(e.shape,L1),r=this.compileAndRun(n,[e]);return XM().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&qC(n[0])){var a=n.map((function(e){return KT(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return XM().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new K1(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new I1(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[IJ(e.shape)].concat(pd(TJ(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[IJ(t)].concat(pd(TJ(t))),i=new T1(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&IC(MC(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=RJ(a);o=r?new k0(s):new x0(s);var u=[null!=t?t:uJ(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===tJ.DENSE){var l=null!=o?o:uJ(e.outputShape);u.texShape=l.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===MC(s.shape))return u.values=WC(s.dtype,0),s;var c=[],f=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&MC(t.shape)<=fE().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!MJ(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),c.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var d,h={shape:s.shape,texData:u,isUniform:!1},p=y0(e,f,h),v=this.getAndSaveBinary(p,(function(){return p0(a.gpgpu,e,f,h)})),g=null!=this.activeTimers;g&&(d=this.startTimer()),fE().get("ENGINE_COMPILE_ONLY")||m0(this.gpgpu,v,f,h,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),g&&(d=this.endTimer(d),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(d)}));var m=fE().get("WEBGL_FLUSH_THRESHOLD");if(m>0){var y=YT();y-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!fE().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!fE().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=KM((function(){if(!fE().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=fE().getBool("DEBUG");fE().set("DEBUG",!1);var n=e.abs(eO(1e-8)).dataSync()[0];if(fE().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,l=null!=this.activeTimers;l&&(u=YT());var c=t.texShape;if(null==c&&(c=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=fE().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?CC(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=BC(e);e=r.newShape}var a=MC(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=IJ(e),o=2,s=2;if(e.length){var u=Pf(TJ(e),2);o=u[0],s=u[1]}return FC(a=i*(o/2)*(s/2)).map((function(e){return 2*e}))}return FC(a)}(n,s),t.texShape=c),null!=a){var f,d=RJ(n),h=c[1],p=c[0],v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!v){var g=Pf(lJ(c[0],c[1]),2);h=g[0],p=g[1]}f=s?new C0(d,v):new _0(d,v);var m=v?[p,h]:c,y=this.makeTensorInfo(m,r),b=this.texData.get(y.dataId);b.usage=v?nJ.PIXELS:nJ.UPLOAD,b.texShape=m,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),h,p,a);var x=[[p,h]],k=this.runWebGLProgram(f,[y],r,x,!0),w=this.texData.get(k.dataId);t.texShape=w.texShape,t.isPacked=w.isPacked,t.usage=w.usage,fE().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=w.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(y),l&&(this.uploadWaitMs+=YT()-u)}else{var S=this.acquireTexture(c,o,r,s);t.texture=S}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*GC(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=Pf(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=vC(hC().mark((function e(){var t,n,r,a,i,o,s,u,l=this;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=Pf(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=Pf(u[s],2)[1],n=new Promise((function(t){try{l.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},s=0,u=Object.entries(this.binaryCache);s<u.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=vC(hC().mark((function e(t){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,jD();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw mJ(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=Pf(t[e],2)[1],r=v0(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,u=r.inShapesLocations,l=r.inTexShapesLocations,c=r.outShapeLocation,f=r.outShapeStridesLocation,d=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.inShapesLocations=u,n.inTexShapesLocations=l,n.outShapeLocation=c,n.outShapeStridesLocation=f,n.outTexShapeLocation=d}}}]),n}(kC);J1.nextDataId=0;jR()&&QM("webgl",(function(){return new J1}),2);var e2=yC((function e(t,n,r){gC(this,e),this.variableNames=["A","B"],this.outputShape=OM(n,r),this.enableShapeUniforms=b0(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),t2=yC((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];gC(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=OM(n,r);var i=this.outputShape.length;this.enableShapeUniforms=b0(i);var o="";if(a)if(0===i||1===MC(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=c0(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=A1("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function n2(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var r2={kernelName:TA,backendName:"webgl",kernelFunc:n2};function a2(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=n2({inputs:{x:r},backend:n}),u=n2({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var i2={kernelName:WE,backendName:"webgl",kernelFunc:a2},o2="return (a < 0.) ? b * a : a;",s2="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var u2={kernelName:FA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",qT(i,"float32")),s=fE().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new t2(s2,a.shape,o.shape):new e2(o2,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},l2="return (a < 0.) ? b * a : a;",c2="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var f2={kernelName:gI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=fE().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new t2(c2,r.shape,a.shape):new e2(l2,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function d2(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,l=s,c=a||u.dtype;if(l.shouldExecuteOnCPU([u])&&null!=r){var f=l.texData.get(u.dataId),d=r(f.values,c);return l.makeTensorInfo(u.shape,c,d)}return i=fE().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new Y1(u.shape,n):new P1(u.shape,t),l.runWebGLProgram(i,[u],c)}}function h2(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,l=r.a,c=r.b,f=i;if(o&&"complex64"===l.dtype){var d=f.texData.get(l.dataId),h=f.texData.get(c.dataId),p=[[d.complexTensorInfos.real,h.complexTensorInfos.real],[d.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=Pf(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:l.shape},o={dataId:a.dataId,dtype:a.dtype,shape:c.shape},s=new e2(t,l.shape,c.shape);return f.runWebGLProgram(s,[i,o],_R(r.dtype,a.dtype))})),v=Pf(p,2),g=v[0],m=v[1],y=a2({inputs:{real:g,imag:m},backend:f});return f.disposeIntermediateTensorInfo(g),f.disposeIntermediateTensorInfo(m),y}var b,x=u||_R(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||f.shouldExecuteOnCPU([l,c]))&&null!=s){var k=f.texData.get(l.dataId).values,w=f.texData.get(c.dataId).values,S="string"===l.dtype?SL(k):k,_="string"===l.dtype?SL(w):w,C=Pf(s(l.shape,c.shape,S,_,x),2),E=C[0],A=C[1],I=f.makeTensorInfo(A,x);return f.texData.get(I.dataId).values=E,I}return b=fE().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new t2(n,l.shape,c.shape,a):new e2(t,l.shape,c.shape),f.runWebGLProgram(b,[l,c],x)}}function p2(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?V1:D1;if("relu"===e)return t?G1:j1;if("elu"===e)return t?H1:z1;if("relu6"===e)return t?q1:B1;if("prelu"===e)return t?c2:l2;if("leakyrelu"===e)return t?s2:o2;if("sigmoid"===e)return t?X1:U1;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var v2=yC((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];gC(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=b0(this.outputShape.length);var c=a?t[1]:t[2],f=Math.ceil(c/2),d=a?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",m="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),m="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(f,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(f,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(d,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(v[0],");\n          result += (").concat(p[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(m,"\n\n        setOutput(result);\n      }\n    ")})),g2="return areal * breal - aimag * bimag;",m2="return areal * bimag + aimag * breal;",y2=yC((function e(t,n,r){gC(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=OM(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),b2="return a * b;";function x2(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=_R(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),l=new y2(g2,a.shape,i.shape),c=new y2(m2,a.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],d=r.runWebGLProgram(l,f,"float32"),h=r.runWebGLProgram(c,f,"float32"),p=a2({inputs:{real:d,imag:h},backend:r});return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(h),p}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),g=r.texData.get(i.dataId),m=Pf(r1(a.shape,i.shape,v.values,g.values,o),2),y=m[0],b=m[1],x=r.makeTensorInfo(b,o);return r.texData.get(x.dataId).values=y,x}return t=fE().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new t2(b2,a.shape,i.shape):new e2(b2,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var k2={kernelName:iI,backendName:"webgl",kernelFunc:x2};function w2(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=MC(a.shape),u=zC(i,s),l=MC(u);IC(s===l,(function(){return"The new shape (".concat(u,") has ").concat(l," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var c=o.texData.get(a.dataId);return!c.isPacked||MJ(a.shape,u)||null!==c.texture&&MJ(c.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[IJ(e.shape)].concat(pd(TJ(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[IJ(t)].concat(pd(TJ(t))),o=new T1(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var S2={kernelName:wI,backendName:"webgl",kernelFunc:w2},_2=yC((function e(t,n){gC(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,l="sumValue += dot(values, ones);";if(null!=n){var c=1/n;l="sumValue += dot(values * ".concat(PC(c)?c.toPrecision(2):c,", ones);")}var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),C2=yC((function e(t,n){gC(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var l="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?l="sumValue":"prod"===n?l="prodValue":"all"===n?l="allValue":"any"===n&&(l="anyValue");var c=4*Math.floor(r/4),f=r%4,d="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===n?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===n&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(d,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===f,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(2===f,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(d,"\n        } else if (").concat(3===f,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(d,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}));function E2(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=UD(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],l=u.inSize,c=u.windowSize,f=u.outSize,d=void 0;d="mean"===n?0===o?new _2({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:f},l):new _2({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:f}):new C2({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:f},n),s=i,i=r.runWebGLProgram(d,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var A2=yC((function e(t,n){gC(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=c0(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var I2=yC((function e(t,n){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=c0(this.rank),o=E1("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var l="vec2(".concat(s.slice(-2).join(),")"),c="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),f="getChannel(getA(".concat(s.join(),"), ").concat(l,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(f,";\n      if(").concat(c,") {\n        result[1] = ").concat(f,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(f,";\n        if(").concat(c,") {\n          result[3] = ").concat(f,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function T2(e,t,n){var r=fE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new I2(e.shape,t):new A2(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function R2(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=jC(a,e.shape),s=o,u=wP(s,i),l=null!=u,c=e;l&&(c=T2(e,u,r),s=_P(s.length,i)),kP("sum",s,i);var f=Pf(bP(c.shape,s),2),d=f[0],h=f[1],p=d;n&&(p=xP(d,o));var v=MC(h),g=w2({inputs:{x:c},attrs:{shape:[MC(e.shape)/v,v]},backend:r}),m=E2(g,CR(e.dtype),"sum",r),y=w2({inputs:{x:m},attrs:{shape:p},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(m),l&&r.disposeIntermediateTensorInfo(c),y}(t.x,r.axis,r.keepDims,n)}var N2={kernelName:UI,backendName:"webgl",kernelFunc:R2};function M2(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,l=new Array(u),c=0;c<l.length;c++)l[c]=i.shape[o[c]];if(s.shouldExecuteOnCPU([i])){var f=s.texData.get(i.dataId).values,d=_1(f,i.shape,i.dtype,o,l);t=s.makeTensorInfo(l,i.dtype),s.texData.get(t.dataId).values=d}else t=T2(i,o,s);return t}var O2={kernelName:lT,backendName:"webgl",kernelFunc:M2};function P2(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,f=void 0===c?0:c,d=e.activation,h=void 0===d?null:d,p=t.shape.length,v=n.shape.length,g=r?t.shape[p-2]:t.shape[p-1],m=a?n.shape[v-1]:n.shape[v-2],y=r?t.shape[p-1]:t.shape[p-2],b=a?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=MC(x),S=MC(k),_=OM(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);IC(g===m,(function(){return"Error in matMul: inner shapes (".concat(g,") and (")+"".concat(m,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var C,E=r?[w,g,y]:[w,y,g],A=a?[S,b,m]:[S,m,b],I=w2({inputs:{x:t},backend:i,attrs:{shape:E}}),T=w2({inputs:{x:n},backend:i,attrs:{shape:A}}),R=[I,T],N=Math.max(w,S),M=r?I.shape[1]:I.shape[2],O=null!=s,P=null!=l,F="leakyrelu"===h,D=null!=h?p2(h,!0):null;if((1===y||1===b)&&M>1e3&&!1===(O||P||F||null!=D)){var L=I,z=T;r&&(L=M2({inputs:{x:I},backend:i,attrs:{perm:[0,2,1]}}),R.push(L)),a&&(z=M2({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),R.push(z));var j=1===b,B=L;1!==b&&(B=w2({inputs:{x:L},backend:i,attrs:{shape:[N,M,1]}}),R.push(B));var W=1===b?2:1,U=z;j&&(U=w2({inputs:{x:z},backend:i,attrs:{shape:[N,1,M]}}),R.push(U));var V=x2({inputs:{a:B,b:U},backend:i});C=R2({inputs:{x:V},backend:i,attrs:{axis:W,keepDims:!0}}),R.push(V)}else{var H=_R(t.dtype,n.dtype),G=new v2(E,A,[N,y,b],r,a,O,D,P,F),q=[I,T];if(null!=s&&q.push(s),P&&q.push(l),F){var X=i.makeTensorInfo([],"float32",qT(f,"float32"));q.push(X),R.push(X)}C=i.runWebGLProgram(G,q,H)}var Y=w2({inputs:{x:C},backend:i,attrs:{shape:_}});R.push(C);for(var K=0,$=R;K<$.length;K++){var Z=$[K];i.disposeIntermediateTensorInfo(Z)}return Y}var F2={kernelName:mT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,l=r.transposeB,c=r.activation;return P2({a:a,b:i,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:c})}},D2="return abs(x);";var L2={kernelName:gE,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=f1(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=fE().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Y1(a.shape,D2):new P1(a.shape,D2),r.runWebGLProgram(t,[a],a.dtype)}},z2=d2({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),j2={kernelName:mE,backendName:"webgl",kernelFunc:z2},B2=d2({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),W2={kernelName:yE,backendName:"webgl",kernelFunc:B2},U2="return a + b;",V2=h2({opSnippet:U2,packedOpSnippet:U2,supportsComplex:!0,cpuKernelImpl:L0}),H2={kernelName:bE,backendName:"webgl",kernelFunc:V2},G2=yC((function e(t,n){gC(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),q2=yC((function e(t,n){gC(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var X2={kernelName:xE,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return n2({inputs:{x:a[0]},backend:r});if(a.length>fE().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return _R(e,t)})),l=a.map((function(e){return e.shape})),c=fE().getBool("WEBGL_PACK")?new q2(a[0].shape,l):new G2(a[0].shape,l);return r.runWebGLProgram(c,a,u)}};var Y2={kernelName:kE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=jC(i,a.shape),l=u,c=wP(l,s),f=a;null!=c&&(f=M2({inputs:{x:a},backend:n,attrs:{perm:c}}),l=_P(l.length,s)),kP("all",l,s);var d,h=Pf(bP(f.shape,l),2),p=h[0],v=w2({inputs:{x:f},backend:n,attrs:{shape:[-1,MC(h[1])]}}),g=E2(v,v.dtype,"all",n);return d=w2(o?{inputs:{x:g},backend:n,attrs:{shape:xP(p,u)}}:{inputs:{x:g},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(f),d}};var K2={kernelName:wE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=jC(i,a.shape),l=u,c=wP(l,s),f=a;null!=c&&(f=M2({inputs:{x:a},backend:n,attrs:{perm:c}}),l=_P(l.length,s)),kP("any",l,s);var d,h=Pf(bP(f.shape,l),2),p=h[0],v=w2({inputs:{x:f},backend:n,attrs:{shape:[-1,MC(h[1])]}}),g=E2(v,v.dtype,"any",n);return d=w2(o?{inputs:{x:g},backend:n,attrs:{shape:xP(p,u)}}:{inputs:{x:g},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(f),d}},$2=yC((function e(t,n,r){gC(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),Z2=yC((function e(t,n,r,a){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,IC(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,l=this.outputShape,c=l.length,f=c0(c),d=A1("coords",c);if(1===o){var h=c0(u=c+1);s="\n        ".concat(h," sourceLocR = ").concat(h,"(").concat(d.join(),", 0);\n        ++").concat(d[c-1],";\n        ").concat(h," sourceLocG = ").concat(h,"(").concat(d.join(),", 0);\n        ++").concat(d[c-2],";\n        ").concat(h," sourceLocA = ").concat(h,"(").concat(d.join(),", 0);\n        --").concat(d[c-1],";\n        ").concat(h," sourceLocB = ").concat(h,"(").concat(d.join(),", 0);\n        --").concat(d[c-2],";")}else u=c,s="\n        ".concat(f," sourceLocR = coords;\n        ++").concat(d[c-1],";\n        ").concat(f," sourceLocG = coords;\n        ++").concat(d[c-2],";\n        ").concat(f," sourceLocA = coords;\n        --").concat(d[c-1],";\n        ").concat(f," sourceLocB = coords;\n        --").concat(d[c-2],";");var p=["x","y","z","w","u","v"].slice(0,u),v="."+p[u-1],g=p.map((function(e){return"int "+e})),m=A1("sourceLocR",u-1).concat("inIdx.r"),y=A1("sourceLocG",u-1).concat("inIdx.g"),b=A1("sourceLocB",u-1).concat("inIdx.b"),x=A1("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(m.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),_=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(_,"\n      void main() {\n        ").concat(f," coords = getOutputCoords();\n        bool hasNextCol = ").concat(d[c-1]," < ").concat(l[c-1]-1,";\n        bool hasNextRow = ").concat(d[c-2]," < ").concat(l[c-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function Q2(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=UD(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new $2(s,n,null==r),l=[t];null!=r&&l.push(r);var c=e.runWebGLProgram(u,l,"int32");if(1===c.shape[1])return c;var f=Q2(e,t,n,c);return e.disposeIntermediateTensorInfo(c),f}function J2(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=UD(i),s=new Z2(a,o,n,null==r),u=null==r?[t]:[t,r],l=e.runWebGLProgram(s,u,"int32");if(l.shape.length===t.shape.length){var c=J2(e,t,n,l);return e.disposeIntermediateTensorInfo(l),c}return l}function e3(e,t,n,r){var a=[n];if(kP("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!fE().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=Pf(bP(s.shape,a),2),l=u[0],c=MC(u[1]),f=w2({inputs:{x:s},backend:e,attrs:{shape:[-1,c]}});i.push(f);var d=Q2(e,f,r);i.push(d);var h=w2({inputs:{x:d},backend:e,attrs:{shape:l}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),h}return J2(e,t,r)}var t3={kernelName:SE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=jC(r.axis,a.shape),o=wP(i,a.shape.length),s=a,u=[];null!=o&&(s=M2({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=_P(i.length,s.shape.length)),kP("argMax",[i[0]],s.shape.length);var l=e3(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var n3={kernelName:_E,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=jC(r.axis,a.shape),o=wP(i,a.shape.length),s=a,u=[];null!=o&&(s=M2({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=_P(i.length,s.shape.length)),kP("argMin",[i[0]],s.shape.length);var l=e3(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},r3=d2({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),a3={kernelName:CE,backendName:"webgl",kernelFunc:r3},i3=d2({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),o3={kernelName:EE,backendName:"webgl",kernelFunc:i3},s3=d2({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),u3={kernelName:AE,backendName:"webgl",kernelFunc:s3},l3=h2({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),c3={kernelName:TE,backendName:"webgl",kernelFunc:l3},f3=d2({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),d3={kernelName:IE,backendName:"webgl",kernelFunc:f3},h3=yC((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(gC(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,c=t.dilationWidth,f=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),m="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(v||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?g:m:"wR * ".concat(d," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var w=4*Math.floor(o/4),S=o%4,_="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(_,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(2===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(_,"\n          } else if (").concat(3===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(_,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}})),p3=yC((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(gC(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,l=t.strideWidth,c=t.dilationDepth,f=t.dilationHeight,d=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,g=t.padInfo.front,m=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(f,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(d,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",S="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(S="avgValue / count");var _=4*Math.floor(o/4),C=o%4,E="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(m,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(f,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(_,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(d,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(d,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat(_,";\n            if (").concat(1===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(2===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(3===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(d,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(d,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n          setOutput(").concat(S,");\n        }\n      }\n    ")}}));var v3={kernelName:RE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;LJ(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;IC(xO(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=uO(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&OC(l.inShape,l.outShape))return n2({inputs:{x:a},backend:n});var c=new h3(l,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};var g3={kernelName:ME,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,c=lO(a.shape,i,o,[1,1,1],s,u,l),f=new p3(c,"avg",!1);return n.runWebGLProgram(f,[a],"float32")}},m3=yC((function e(t){gC(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=u-1-t.padInfo.top,f=l-1-t.padInfo.left,d=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(f,");\n      const float avgMultiplier = float(").concat(d,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),y3=yC((function e(t){gC(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,f=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=f-1-t.padInfo.front,v=d-1-t.padInfo.top,g=h-1-t.padInfo.left,m=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(v,", ").concat(g,");\n      const float avgMultiplier = float(").concat(m,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(f,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var b3={kernelName:OE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=lO(i.shape,o,s,[1,1,1],u,l),f=new y3(c);return n.runWebGLProgram(f,[a],i.dtype)}};var x3={kernelName:NE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;LJ([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=uO(o.shape,s,u,1,l),f=new m3(c);return n.runWebGLProgram(f,[a],o.dtype)}};var k3={kernelName:PE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return P2({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},w3=yC((function e(t,n,r,a,i,o){gC(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],OM(t,n),OM(t,r);var s="0.0";null!=a&&(OM(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(OM(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),S3=yC((function e(t,n,r,a,i,o){gC(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],OM(t,n),OM(t,r);var s="vec4(0.0)";null!=a&&(OM(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(OM(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),_3={kernelName:_A,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;IC(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),IC(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),IC(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var c=[a,i,o],f=null;null!=s&&(f=s.shape,c.push(s));var d=null;null!=u&&(d=u.shape,c.push(u));var h=fE().getBool("WEBGL_PACK_NORMALIZATION")?new S3(a.shape,i.shape,o.shape,f,d,l):new w3(a.shape,i.shape,o.shape,f,d,l);return n.runWebGLProgram(h,c,c[0].dtype)}},C3=yC((function e(t){gC(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=c0(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return E3.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(E3[t]," = start[").concat(t,"] + coords.").concat(E3[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),E3=["x","y","z","w","u","v"];var A3=yC((function e(t){gC(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=c0(this.rank),r=A1("coords",this.rank),a=A1("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function I3(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Pf(WM(a,r.begin,r.size),2),o=i[0],s=i[1];if(LM(a,o,s),0===MC(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),l=d1(u.values,o,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,l)}var c=n.texData.get(a.dataId).isPacked,f=jM(a.shape,o,s);if(c||!f){var d=fE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new A3(s):new C3(s),h=[o];return n.runWebGLProgram(d,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=BM(t,ZC(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,o,s,n)}var T3={kernelName:FI,backendName:"webgl",kernelFunc:I3},R3={kernelName:FE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;IC(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=HD(a.shape,i,s),l=GD(u.length,i.length),c=qD(a.shape,i,s),f=XD(o,i.length),d=YD(c,o,i.length),h=[],p=w2({inputs:{x:a},backend:n,attrs:{shape:u}}),v=M2({inputs:{x:p},backend:n,attrs:{perm:l}}),g=w2({inputs:{x:v},backend:n,attrs:{shape:c}}),m=I3({inputs:{x:g},backend:n,attrs:{begin:f,size:d}});return h.push(p),h.push(v),h.push(g),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}};var N3={kernelName:DE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=z0(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}};var M3={kernelName:LE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=OM(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},O3=h2({opSnippet:"return float(a != b);",cpuKernelImpl:i1,dtype:"bool"}),P3={kernelName:sI,backendName:"webgl",kernelFunc:O3};function F3(e){var t=e.inputs,n=e.backend,r=t.input;return n2({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var D3={kernelName:bI,backendName:"webgl",kernelFunc:F3};var L3={kernelName:zE,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return n2({inputs:{x:i},backend:r});var s=RP(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),l=a2({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),l}if("complex64"===i.dtype){var c=F3({inputs:{input:i},backend:r}),f=e({inputs:{x:c},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(c),f}if(!VC(i.dtype,o)){var d=n2({inputs:{x:i},backend:r});return{dataId:d.dataId,shape:d.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new P1(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var h=r.makeTensorInfo([],"bool",WC("bool",1)),p=O3({inputs:{a:i,b:h},backend:r});return r.disposeIntermediateTensorInfo(h),p}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},z3="return ceil(x);",j3=d2({opSnippet:z3,packedOpSnippet:z3,cpuKernelImpl:B0}),B3={kernelName:jE,backendName:"webgl",kernelFunc:j3},W3=yC((function e(t){gC(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),U3=yC((function e(t){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var V3={kernelName:BE,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=fE().getBool("WEBGL_PACK_CLIP")?new U3(i.shape):new W3(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},H3=yC((function e(t){gC(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function G3(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var q3={kernelName:UE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new H3(r.shape),o=[G3(r,a.complexTensorInfos.real),G3(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},X3=yC((function e(t){gC(this,e),this.outputShape=[],this.outputShape=WD(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),Y3=yC((function e(t,n){gC(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=WD(t,n);var r=this.outputShape,a=r.length,i=c0(a),o=A1("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var l=1;l<u.length;l++)u[l]=u[l-1]+t[l][n];for(var c=s[n],f=s.slice(-2),d=s.join(),h="if (".concat(c," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(d,"), vec2(").concat(f.join(),"));\n        }"),p=1;p<u.length;p++){var v=u[p-1];h+="\n        if (".concat(c," < ").concat(u[p],"  && ").concat(c," >= ").concat(u[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(K3(s,c,v),"),\n            vec2(").concat(K3(f,c,v),"));\n        }")}var g=u.length,m=u[u.length-1];h+="\n        return getChannel(\n          getT".concat(g,"(").concat(K3(s,c,m),"),\n          vec2(").concat(K3(f,c,m),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function K3(e,t,n){var r=e.indexOf(t),a=e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e}));return a.join()}function $3(e){var t=e.inputs,n=e.backend,r=t.input;return n2({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var Z3={kernelName:NA,backendName:"webgl",kernelFunc:$3};function Q3(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return F3({inputs:{input:e},backend:n})})),i=e.map((function(e){return $3({inputs:{input:e},backend:n})})),o=Q3(a,t,n),s=Q3(i,t,n),u=a2({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var l=n.shouldExecuteOnCPU(e);if("string"===r&&(l=!0),l){var c=e.map((function(e){var r=MC(e.shape.slice(t));return w2({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),f=c.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),d=WD(c.map((function(e){return e.shape})),1),h=1===c[0].shape[0],p=W0(f,d,r,h),v=WD(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(v,r,p);return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var m=fE().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(e.length>m){for(var y=[],b=0;b<e.length;b+=m){var x=e.slice(b,b+m);y.push(Q3(x,t,n))}for(var k=Q3(y,t,n),w=0,S=y;w<S.length;w++){var _=S[w];n.disposeIntermediateTensorInfo(_)}return k}if(fE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var C=new Y3(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(C,e,r)}var E=function(e,t,n){var r=WD(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return w2({inputs:{x:e},attrs:{shape:[-1,MC(e.shape.slice(t))]},backend:n})})),outShape:r}}(e,t,n),A=E.tensors2D,I=E.outShape,T=new X3(A.map((function(e){return e.shape}))),R=n.runWebGLProgram(T,A,r);A.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var N=w2({inputs:{x:R},attrs:{shape:I},backend:n});return n.disposeIntermediateTensorInfo(R),N}function J3(e){var t=e.inputs,n=e.backend,r=jC(e.attrs.axis,t[0].shape)[0],a=WD(t.map((function(e){return e.shape})),r);if(0===MC(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return MC(e.shape)>0}));if(1===i.length)return n2({inputs:{x:i[0]},backend:n});var o=i.map((function(e){return e.shape}));return BD(o,r),Q3(i,r,n)}var e4={kernelName:VE,backendName:"webgl",kernelFunc:J3},t4=yC((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];gC(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,d=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4,g="channelsLast"===t.dataFormat,m=g?1:2,y=g?2:3,b=g?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(m,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(d,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(f,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),n4=yC((function e(t){gC(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,f=t.filterDepth,d=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(f,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(d,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),r4=yC((function e(t,n){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=b0(this.outputShape.length);for(var r=n.dataFormat,a=jJ(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),l="",c=0;c<=1;c++)for(var f=0;f<=1;f++)l+="\n          blockIndex = rc.z + ".concat(f,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+f,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+f,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function a4(e,t){var n=e.length;return n>=3?[].concat(pd(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function i4(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,f=void 0===c?0:c,d=e.activation,h=void 0===d?null:d,p=n.shape,v=i.texData.get(n.dataId),g=a.inChannels,m=p[0]*p[1]*p[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=l){var k=a4(l.shape,b);null!=k&&(l=w2({inputs:{x:l},backend:i,attrs:{shape:k}}),x.push(l))}if(null!=s){var w=a4(s.shape,b);null!=w&&(s=w2({inputs:{x:s},backend:i,attrs:{shape:w}}),x.push(s))}if(!((1===m||1===y)&&g>1e3)&&v.isPacked&&b&&null!=v.texture&&p[2]%2!==0&&OC(v.shape.slice(-3),p.slice(-3))){var S=p[0]*p[1]*(p[2]+1),_={dataId:n.dataId,shape:[1,S,a.inChannels],dtype:n.dtype},C=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,IC(MJ(v.shape,_.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(_.shape," isn't free")}));var E=w2({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var A=P2({a:_,b:E,backend:i,transposeA:!1,transposeB:false,bias:s,activation:h,preluActivationWeights:l,leakyreluAlpha:f}),I=i.texData.get(A.dataId);IC(I.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=C,I.shape=a.outShape,(t=n2({inputs:{x:A},backend:i})).shape=a.outShape,x.push(A)}else{var T=a.outHeight*a.outWidth,R=w2({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,T,a.inChannels]:[a.batchSize,a.inChannels,T]}}),N=w2({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),M=P2({a:b?R:N,b:b?N:R,transposeA:!b,transposeB:false,backend:i,bias:s,activation:h,preluActivationWeights:l,leakyreluAlpha:f});t=w2({inputs:{x:M},backend:i,attrs:{shape:a.outShape}}),x.push(R),x.push(N),x.push(M)}for(var O=0,P=x;O<P.length;O++){var F=P[O];i.disposeIntermediateTensorInfo(F)}return t}function o4(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,l=e.leakyreluAlpha,c=void 0===l?0:l,f=e.activation,d=void 0===f?null:f,h=r.filterWidth,p=r.filterHeight,v=r.inChannels,g=r.outWidth,m=r.outHeight,y="channelsLast"===r.dataFormat,b=h*p*v,x=m*g,k=[r.batchSize,b,x],w=[];if(null!=u){var S=a4(u.shape,y);null!=S&&(u=w2({inputs:{x:u},backend:a,attrs:{shape:S}}),w.push(u))}if(null!=o){var _=a4(o.shape,y);null!=_&&(o=w2({inputs:{x:o},backend:a,attrs:{shape:_}}),w.push(o))}var C=w2({inputs:{x:n},backend:a,attrs:{shape:[1,b,MC(n.shape)/b]}});w.push(C);var E=new r4(k,r),A=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],I=a.runWebGLProgram(E,[t],"float32",A),T=w2({inputs:{x:I},backend:a,attrs:{shape:k}});w.push(I),w.push(T);var R=null!=o,N=null!=u,M="leakyrelu"===d,O=d?p2(d,!0):null,P=new v2(y?T.shape:C.shape,y?C.shape:T.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,R,O,N,M),F=y?[T,C]:[C,T];if(o&&F.push(o),N&&F.push(u),M){var D=a.makeTensorInfo([],"float32",qT(c,"float32"));F.push(D),w.push(D)}var L=a.runWebGLProgram(P,F,"float32"),z=w2({inputs:{x:L},backend:a,attrs:{shape:r.outShape}});w.push(L);for(var j=0,B=w;j<B.length;j++){var W=B[j];a.disposeIntermediateTensorInfo(W)}return z}var s4={kernelName:HE,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dataFormat,c=a.dilations,f=a.dimRoundingMode,d=kO(l),h=cO(i.shape,o.shape,s,c,u,f,!1,d);if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(fE().getBool("WEBGL_CONV_IM2COL"))t=o4({x:i,filter:o,convInfo:h,backend:r});else{var p=new t4(h);t=r.runWebGLProgram(p,[i,o],"float32")}else t=i4({x:i,filter:o,convInfo:h,backend:r});var v=w2({inputs:{x:t},backend:r,attrs:{shape:h.outShape}});return r.disposeIntermediateTensorInfo(t),v}},u4=yC((function e(t){gC(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),l4=yC((function e(t){gC(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,l=o?1:2,c=o?2:3,f=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(f,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),c4=yC((function e(t){gC(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),f4=yC((function e(t){gC(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,l=r-1-t.padInfo.top,c=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var d4={kernelName:GE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape,f=kO(u),d=cO(a.shape,c,o,1,s,l,!1,f),h=new u4(d);return n.runWebGLProgram(h,[a,i],"float32")}};var h4={kernelName:qE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode,f=kO(l),d=cO(o,i.shape,s,1,u,c,!1,f),h=new l4(d);return n.runWebGLProgram(h,[a,i],"float32")}};var p4={kernelName:XE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=fO(a.shape,i.shape,o,u,s),c=new n4(l);return n.runWebGLProgram(c,[a,i],"float32")}};var v4={kernelName:YE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,l=fO(a.shape,u,o,1,s),c=new c4(l);return n.runWebGLProgram(c,[a,i],"float32")}};var g4,m4={kernelName:KE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=fO(r.inputShape,i.shape,s,1,o),l=new f4(u);return n.runWebGLProgram(l,[a,i],"float32")}},y4=d2({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),b4={kernelName:$E,backendName:"webgl",kernelFunc:y4},x4=d2({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),k4={kernelName:ZE,backendName:"webgl",kernelFunc:x4},w4=yC((function e(t,n,r,a,i){gC(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=Pf(t,4),s=o[0],u=o[1],l=o[2],c=o[3],f=Pf(n,1)[0],d=Pf(r,2),h=d[0],p=d[1];this.outputShape=[f,h,p,c];var v="bilinear"===a?1:0,g="".concat(u-1,".0"),m="".concat(l-1,".0"),y=Pf(h>1?["".concat((u-1)/(h-1)),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],3),b=y[0],x=y[1],k=y[2],w=Pf(p>1?["".concat((l-1)/(p-1)),"(x2-x1) * width_ratio","x1*".concat(m," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(m)],3),S=w[0],_=w[1],C=w[2];this.userCode="\n      const float height_ratio = float(".concat(b,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(x,";\n        float width_scale = ").concat(_,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(C,";\n        if( in_x < 0.0 || in_x > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),S4={kernelName:eA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=new w4(a.shape,i.shape,s,u,l);return n.runWebGLProgram(c,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(g4||(g4={}));var _4=yC((function e(t,n,r,a){gC(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===g4.Prod?"1.0":"0.0",s=r?o:"getX(".concat(C4(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],l="",c="";r?(l=a?"end != ".concat(u-1):"end != 0",c=a?"end + 1":"end - 1"):(l=a?"end + pow2 < ".concat(u):"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(c0(i)," coords = getOutputCoords();\n        int end = ").concat(E4(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(E4(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(C4(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function C4(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function E4(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function A4(e,t,n,r,a,i){var o=t.shape.length,s=wP([r],o),u=t;null!=s&&(u=M2({inputs:{x:t},backend:n,attrs:{perm:s}}));var l=_P(1,o)[0];if(l!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var c=u.shape[l],f=n2({inputs:{x:u},backend:n}),d=0;d<=Math.ceil(Math.log2(c))-1;d++){var h=new _4(e,u.shape,!1,i),p=[[d]],v=f;f=n.runWebGLProgram(h,[f],f.dtype,p),n.disposeIntermediateTensorInfo(v)}if(a){var g=new _4(e,u.shape,a,i),m=f;f=n.runWebGLProgram(g,[f],f.dtype),n.disposeIntermediateTensorInfo(m)}if(null!=s){var y=M2({inputs:{x:f},backend:n,attrs:{perm:SP(s)}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(u),y}return f}var I4={kernelName:QE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return A4(g4.Prod,a,n,i,o,s)}};var T4={kernelName:JE,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return A4(g4.Sum,a,n,i,o,s)}};var R4={kernelName:tA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=z0(u,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}if(2===a.shape.length){var f=n.bufferSync(a),d=n.bufferSync(i),h=j0(f,d,o,s);return n.makeTensorInfo(h.shape,i.dtype,h.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},N4=function(){function e(t,n,r){gC(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return yC(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var M4={kernelName:nA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,l=("NHWC"===o?a.shape[2]:a.shape[3])*i,c=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),f=new N4("NHWC"===o?[s,u,l,c]:[s,c,u,l],i,o);return n.runWebGLProgram(f,[a],a.dtype)}},O4=yC((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];gC(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=b0(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,l="",c="";r&&(l=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),c="result = activation(result);");var f=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(f,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")})),P4=yC((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];gC(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=b0(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,l=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,d=f,h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",p=0;p<f;p++)h+="\n          vec4 xTexelC".concat(2*p,";\n          int xTexelC").concat(2*p,"Ready;\n          vec4 xTexelC").concat(2*p+1,";\n          int xTexelC").concat(2*p+1,"Ready;\n          vec4 xC").concat(p,";");h+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(var v=0;v<f;v++)h+="\n          xTexelC".concat(2*v," = vec4(0.0);\n          xTexelC").concat(2*v,"Ready = 0;\n          xTexelC").concat(2*v+1," = vec4(0.0);\n          xTexelC").concat(2*v+1,"Ready = 0;\n          xC").concat(v," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var g=0;g<(d+1)/2;g++){var m=2*g;if(h+="\n          xC = xCCorner + ".concat(m*l,";\n          "),1===u){if(m<f&&(s%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n              "),h+=1===l&&m>0?"\n                xC".concat(m," = vec4(xTexelC").concat(m-2,".zw, xTexelC").concat(m,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(m," = vec4(previous.zw, xTexelC").concat(m,".xy);\n                  } else {\n                    xC").concat(m," = vec4(0.0, 0.0, xTexelC").concat(m,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                xC").concat(m," = xTexelC").concat(m,";\n                "),m+1<f)){var y=s%2===0?CC(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                    xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(m+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(m+1,"Ready = 1;\n                  }\n                  "),l>1&&(h+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                      xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(m,"Ready = 1;\n                    }\n                    ")),h+="\n                  xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".xy);\n                  ")):h+=1===y?"\n                    xC".concat(m+1," = xTexelC").concat(m,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                      xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(m+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(m+1,"Ready = 1;\n                    }\n\n                    xC").concat(m+1," = xTexelC").concat(m+1,";\n                    ")}}else m<f&&(s%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                  xTexelC").concat(m+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(m+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m+1,"Ready = 1;\n                }\n\n                xC").concat(m," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n              "),m+1<f&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(m+1," = vec4(xTexelC").concat(m+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                  xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(m,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(m,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                  xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(m+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(m+1,"Ready = 1;\n                }\n\n                xC").concat(m," = vec4(\n                  xTexelC").concat(m,".xy, xTexelC").concat(m+1,".xy);\n              "),m+1<f&&(h+="\n                  xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n                "))));m<f&&(h+="\n            wTexel = getW(r, ".concat(m,", d1, q);\n            dotProd += xC").concat(m," * vec4(wTexel.xz, wTexel.xz);\n          "),m+1<f&&(h+="\n              wTexel = getW(r, ".concat(m+1,", d1, q);\n              dotProd += xC").concat(m+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var F4={kernelName:rA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode,c=u;null==c&&(c=[1,1]),IC(xO(o,c),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(c,"'")}));var f,d=cO(a.shape,i.shape,o,c,s,l,!0);f=fE().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new P4(d):new O4(d);var h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[a,i],"float32",h)}},D4=yC((function e(t){gC(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),L4=yC((function e(t){gC(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var z4={kernelName:aA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape,f=cO(a.shape,c,o,s,u,l,!0),d=new D4(f);return n.runWebGLProgram(d,[a,i],"float32")}};var j4={kernelName:iA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=cO(r.inputShape,i.shape,o,s,u,l,!0),f=new L4(c);return n.runWebGLProgram(f,[a,i],"float32")}},B4=yC((function e(t){gC(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var W4={kernelName:oA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(pd(r.shape),pd(r.shape)),i=MC(r.shape),o=w2({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new B4(i),u=n.runWebGLProgram(s,[o],o.dtype),l=w2({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}},U4=yC((function e(t){gC(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,l=t.dilationHeight,c=t.dilationWidth,f=a.top,d=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(f,", ").concat(d,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var V4={kernelName:sA,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dilations,c=sO(i.shape,o.shape,s,u,"NHWC",l),f=new U4(c),d=w2({inputs:{x:t=r.runWebGLProgram(f,[i,o],"float32")},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),d}};var H4={kernelName:fA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=fL(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;hL(i.length,s,r);for(var u=pL(o,s),l=u.path,c=u.steps,f=c.length,d=null,h=i.length,p=[],v=0;v<f;++v){var g,m=bC(c[v]);try{for(m.s();!(g=m.n()).done;){var y=g.value,b=dL(h,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;vL(x)?w=r[y]:(w=M2({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(w));for(var S=w.shape.slice(),_=0;_<k.length;++_)S.splice(k[_],0,1);OC(w.shape,S)||(w=w2({inputs:{x:w},backend:n,attrs:{shape:S}}),p.push(w)),null===d?d=w:(d=x2({inputs:{a:w,b:d},backend:n}),p.push(d))}}catch(bfe){m.e(bfe)}finally{m.f()}v<f-1&&(l[v]>=0&&(d=R2({inputs:{x:d},backend:n,attrs:{axis:l[v]-(i.length-h),keepDims:!1}}),p.push(d)),h--)}for(var C=0,E=p;C<E.length;C++){var A=E[C];A!==d&&n.disposeIntermediateTensorInfo(A)}return d}},G4=d2({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),q4={kernelName:dA,backendName:"webgl",kernelFunc:G4},X4={kernelName:hA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=fE().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new t2("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new e2("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},Y4=h2({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:U0}),K4={kernelName:vA,backendName:"webgl",kernelFunc:Y4},$4=d2({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(JD,";\n  float a1 = ").concat(eL,";\n  float a2 = ").concat(tL,";\n  float a3 = ").concat(nL,";\n  float a4 = ").concat(rL,";\n  float a5 = ").concat(aL,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),Z4={kernelName:pA,backendName:"webgl",kernelFunc:$4},Q4=d2({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:V0,dtype:"float32"}),J4={kernelName:gA,backendName:"webgl",kernelFunc:Q4};function e5(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(IC(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),w2({inputs:{x:i},backend:r,attrs:{shape:s}})}var t5={kernelName:mA,backendName:"webgl",kernelFunc:e5},n5="return exp(x) - 1.0;",r5=d2({opSnippet:n5,packedOpSnippet:n5,cpuKernelImpl:H0}),a5={kernelName:yA,backendName:"webgl",kernelFunc:r5},i5=yC((function e(t,n,r){gC(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function o5(e,t,n){var r=n.texData.get(e.dataId),a=MC(e.shape),i=e.shape[e.shape.length-1],o=w2({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new i5("real",s,t),l=new i5("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],f=n.runWebGLProgram(u,c,"float32"),d=n.runWebGLProgram(l,c,"float32"),h=a2({inputs:{real:f,imag:d},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d);var p=w2({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(h),p}var s5={kernelName:bA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return o5(t.input,!1,n)}},u5=yC((function e(t,n){gC(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function l5(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||YC(a))){var o=UC(i,MC(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new u5(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var c5,f5={kernelName:xA,backendName:"webgl",kernelFunc:l5},d5=yC((function e(t){gC(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),h5={kernelName:kA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new d5(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},p5="return floor(x);",v5=d2({opSnippet:p5,packedOpSnippet:p5,cpuKernelImpl:G0}),g5={kernelName:wA,backendName:"webgl",kernelFunc:v5},m5=h2({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),y5={kernelName:SA,backendName:"webgl",kernelFunc:m5},b5=yC((function e(t){gC(this,e),this.variableNames=["A"];var n=jJ(),r=Pf(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),x5=yC((function e(t){gC(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=jJ(),r=Pf(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),k5={kernelName:vT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=Pf(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),l=u[0],c=u[1],f=[c,l],d=[c,l,i];(s||o)&&(null==c5&&(c5=document.createElement("canvas").getContext("2d")),c5.canvas.width=l,c5.canvas.height=c,c5.drawImage(a,0,0,l,c),a=c5.canvas);var h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=nJ.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);var p=fE().getBool("WEBGL_PACK")?new x5(d):new b5(d),v=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),v}};var w5={kernelName:yT,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,l=a.strides,c=a.pad,f=a.dataFormat,d=a.dilations,h=a.dimRoundingMode,p=a.activation,v=a.leakyreluAlpha,g=kO(f),m=cO(i.shape,o.shape,l,d,c,h,!1,g),y=[];if(1!==m.filterHeight||1!==m.filterWidth||1!==m.dilationHeight||1!==m.dilationWidth||1!==m.strideHeight||1!==m.strideWidth||"SAME"!==m.padInfo.type&&"VALID"!==m.padInfo.type)if(fE().getBool("WEBGL_CONV_IM2COL"))t=o4({x:i,filter:o,convInfo:m,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});else{var b=null!=s,x=null!=u,k="leakyrelu"===p,w=p?p2(p,!1):null,S=new t4(m,b,w,x,k),_=[i,o],C=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=w2({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&_.push(C(s,f)),x&&_.push(C(u,f)),k){var E=r.makeTensorInfo([],"float32",qT(v,"float32"));_.push(E),y.push(E)}t=r.runWebGLProgram(S,_,"float32")}else t=i4({x:i,filter:o,convInfo:m,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});var A=w2({inputs:{x:t},backend:r,attrs:{shape:m.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),A}};var S5={kernelName:bT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dilations,f=r.dimRoundingMode,d=r.activation,h=r.leakyreluAlpha,p=[],v=c;null==v&&(v=[1,1]),IC(xO(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var g,m=cO(a.shape,i.shape,u,v,l,f,!0),y=fE().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,b=d?p2(d,y):null,x=[a,i],k=null!=o,w=null!=s,S="leakyrelu"===d;if(k&&x.push(o),w&&x.push(s),S){var _=n.makeTensorInfo([],"float32",qT(h,"float32"));x.push(_),p.push(_)}g=y?new P4(m,k,b,w,S):new O4(m,k,b,w,S);var C=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],E=n.runWebGLProgram(g,x,"float32",C);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},_5=yC((function e(t,n,r,a){gC(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;var i=c0(n.length),o=c0(r.length),s=this.sliceDim>1?"strides[j]":"strides",u=c0(a.length),l=a.length>1?"paramsShape[j]":"paramsShape";this.userCode="\n        ".concat(i," strides = ").concat(i,"(").concat(this.strides,");\n        ").concat(u," paramsShape = ").concat(u,"(").concat(this.paramsShape,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            out_of_bounds = out_of_bounds || index < 0;\n            out_of_bounds = out_of_bounds || index >= ").concat(l,";\n            flattenIndex += index * ").concat(s,";\n          }\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var C5={kernelName:EA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=MC(r.shape),u=Pf(KD(r,a),4),l=u[0],c=u[1],f=u[2],d=u[3],h=w2({inputs:{x:a},backend:n,attrs:{shape:[c,o]}}),p=w2({inputs:{x:r},backend:n,attrs:{shape:[MC(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),g=n.bufferSync(r),m=q0(v,g,r.dtype,c,o,f,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,m.values)}var y=new _5(o,d,[c,f],r.shape),b=n.runWebGLProgram(y,[p,h],p.dtype),x=w2({inputs:{x:b},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(b),x}},E5=yC((function e(t,n){gC(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=c0(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function A5(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=jC(o,a.shape)[0];fE().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];IC(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var l=wL(a,i,u,s),c=MC(i.shape),f=[],d=w2({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),h=w2({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});f.push(d),f.push(h);var p=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(h),g=n.bufferSync(d),m=X0(g,v,p);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(l.outputShape,m.dtype,m.values)}var y=new E5(d.shape,p),b=n.runWebGLProgram(y,[d,h],d.dtype);f.push(b);var x=w2({inputs:{x:b},backend:n,attrs:{shape:l.outputShape}});return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var I5={kernelName:CA,backendName:"webgl",kernelFunc:A5},T5=h2({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:Y0,dtype:"bool"}),R5={kernelName:AA,backendName:"webgl",kernelFunc:T5},N5=h2({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:K0}),M5={kernelName:IA,backendName:"webgl",kernelFunc:N5};var O5={kernelName:RA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return o5(t.input,!0,n)}},P5=d2({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),F5={kernelName:MA,backendName:"webgl",kernelFunc:P5},D5=d2({opSnippet:"return float(isinf(x));",dtype:"bool"}),L5={kernelName:OA,backendName:"webgl",kernelFunc:D5},z5=d2({opSnippet:"return float(isnan(x));",dtype:"bool"}),j5={kernelName:PA,backendName:"webgl",kernelFunc:z5},B5=h2({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:$0,dtype:"bool"}),W5={kernelName:DA,backendName:"webgl",kernelFunc:B5},U5=h2({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:Z0,dtype:"bool"}),V5={kernelName:LA,backendName:"webgl",kernelFunc:U5};var H5={kernelName:zA,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=Q0(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},G5=d2({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:J0}),q5={kernelName:jA,backendName:"webgl",kernelFunc:G5},X5=d2({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),Y5={kernelName:BA,backendName:"webgl",kernelFunc:X5},K5=h2({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),$5={kernelName:WA,backendName:"webgl",kernelFunc:K5},Z5=d2({opSnippet:"return float(!(x >= 1.0));"}),Q5={kernelName:UA,backendName:"webgl",kernelFunc:Z5},J5=h2({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),e6={kernelName:VA,backendName:"webgl",kernelFunc:J5},t6=yC((function e(t,n,r,a,i){gC(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),n6=yC((function e(t,n,r,a,i){gC(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var l="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),r6={kernelName:HA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,l=fE().getBool("WEBGL_PACK_NORMALIZATION")?new n6(a.shape,i,o,s,u):new t6(a.shape,i,o,s,u);return n.runWebGLProgram(l,[a],a.dtype)}},a6=yC((function e(t,n,r,a,i){gC(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),i6={kernelName:GA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta,f=new a6(a.shape,s,u,l,c);return n.runWebGLProgram(f,[a,i,o],a.dtype)}};function o6(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=jC(i,a.shape),l=u,c=wP(l,s),f=null!=c,d=n.shouldExecuteOnCPU([a]),h=a;if(f){if(d){for(var p=n.texData.get(h.dataId).values,v=new Array(s),g=0;g<v.length;g++)v[g]=a.shape[c[g]];var m=_1(p,a.shape,a.dtype,c,v);h=n.makeTensorInfo(v,a.dtype),n.texData.get(h.dataId).values=m}else h=T2(a,c,n);l=_P(l.length,s)}kP("max",l,s);var y,b=Pf(bP(h.shape,l),2),x=b[0],k=b[1],w=x;if(o&&(w=xP(x,u)),d){p=n.texData.get(h.dataId).values;var S=e1(p,MC(k),w,a.dtype);y=n.makeTensorInfo(w,a.dtype),n.texData.get(y.dataId).values=S}else y=function(e,t,n,r){var a=MC(t),i=w2({inputs:{x:e},attrs:{shape:[MC(e.shape)/a,a]},backend:r}),o=E2(i,e.dtype,"max",r),s=w2({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(h,k,w,n);return f&&n.disposeIntermediateTensorInfo(h),y}var s6={kernelName:qA,backendName:"webgl",kernelFunc:o6},u6=h2({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:t1}),l6={kernelName:XA,backendName:"webgl",kernelFunc:u6};var c6={kernelName:YA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;LJ(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;IC(xO(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=uO(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&OC(l.inShape,l.outShape))return n2({inputs:{x:a},backend:n});var c=new h3(l,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};var f6={kernelName:$A,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=lO(a.shape,i,o,[1,1,1],s,l,u),f=new p3(c,"max",!1);return n.runWebGLProgram(f,[a],a.dtype)}},d6=yC((function e(t){gC(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,l=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),h6=yC((function e(t){gC(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,f=u-1-t.padInfo.front,d=l-1-t.padInfo.top,h=c-1-t.padInfo.left,p=u*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(d,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var p6={kernelName:ZA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=lO(i.shape,o,s,[1,1,1],u,l),f=new p3(c,"max",!0),d=n.runWebGLProgram(f,[i],i.dtype),h=new h6(c),p=n.runWebGLProgram(h,[a,d],i.dtype);return n.disposeIntermediateTensorInfo(d),p}};var v6={kernelName:KA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;LJ([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,f=uO(o.shape,s,u,1,l,c),d=new h3(f,"max",!0),h=n.runWebGLProgram(d,[o],o.dtype),p=new d6(f),v=n.runWebGLProgram(p,[a,h],o.dtype);return n.disposeIntermediateTensorInfo(h),v}};var g6={kernelName:QA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;IC(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var c=[1,1];IC(xO(o,c),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(c,"'")}));var f=uO(a.shape,i,o,c,s),d=function(e,t,n,r){var a=new h3(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new h3(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,f,l),h=Pf(d,2);return[h[0],h[1]]}};var m6={kernelName:JA,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,l=jC(o,a.shape),c=l,f=wP(c,u),d=null!=f,h=s.shouldExecuteOnCPU([a]),p=[],v=a;if(d){if(h){for(var g=s.texData.get(v.dataId).values,m=new Array(u),y=0;y<m.length;y++)m[y]=a.shape[f[y]];var b=_1(g,a.shape,a.dtype,f,m);v=s.makeTensorInfo(m,a.dtype),s.texData.get(v.dataId).values=b}else v=T2(a,f,s);p.push(v),c=_P(c.length,u)}kP("sum",c,u);var x=Pf(bP(v.shape,c),2),k=x[0],w=x[1],S=k;i&&(S=xP(k,l));for(var _=function(e,t,n,r){var a=MC(t),i=w2({inputs:{x:e},attrs:{shape:[MC(e.shape)/a,a]},backend:r}),o=E2(i,"float32","mean",r),s=w2({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,w,S,s),C=0,E=p;C<E.length;C++){y=E[C];s.disposeIntermediateTensorInfo(y)}return _}};var y6={kernelName:eI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=jC(i,a.shape),l=u,c=wP(l,s),f=a;null!=c&&(f=M2({inputs:{x:a},backend:n,attrs:{perm:c}}),l=_P(l.length,a.shape.length)),kP("min",l,s);var d,h=Pf(bP(f.shape,l),2),p=h[0],v=w2({inputs:{x:f},backend:n,attrs:{shape:[-1,MC(h[1])]}}),g=E2(v,v.dtype,"min",n);return d=w2(o?{inputs:{x:g},backend:n,attrs:{shape:xP(p,u)}}:{inputs:{x:g},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(f),d}},b6=h2({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:n1}),x6={kernelName:tI,backendName:"webgl",kernelFunc:b6},k6=yC((function e(t,n,r){gC(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=c0(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),w6=yC((function e(t,n,r){gC(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=c0(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=A1("rc",a),l=A1("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),d="reflect"===r?0:1,h="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(d,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(d,";\n        }\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(d,") +\n                gte * ((end - 1) * 2 - source + ").concat(d,");\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(c,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),S6={kernelName:nI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=fE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new w6(a.shape,i,o):new k6(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},_6=h2({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),C6={kernelName:rI,backendName:"webgl",kernelFunc:_6},E6=yC((function e(t,n,r){gC(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),A6=h2({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),I6={kernelName:cA,backendName:"webgl",kernelFunc:A6},T6="return a - b;",R6=h2({opSnippet:T6,packedOpSnippet:T6,supportsComplex:!0,cpuKernelImpl:k1}),N6={kernelName:rT,backendName:"webgl",kernelFunc:R6};function M6(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=jC([r.dim],a.shape),o=o6({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=xP(o.shape,i),u=w2({inputs:{x:o},backend:n,attrs:{shape:s}}),l=R6({inputs:{a:a,b:u},backend:n}),c=Q4({inputs:{x:l},backend:n}),f=R2({inputs:{x:c},backend:n,attrs:{axis:i,keepDims:!1}}),d=w2({inputs:{x:f},backend:n,attrs:{shape:s}}),h=A6({inputs:{a:c,b:d},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(d),h}var O6={kernelName:GI,backendName:"webgl",kernelFunc:M6};var P6={kernelName:aI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:M6({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],f=new E6(l,c,i),d=[[o]],h=n.runWebGLProgram(f,[u],"int32",d);return s||n.disposeIntermediateTensorInfo(u),h}};var F6={kernelName:oI,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=Pf(a1(i.values,a.shape,a.dtype),2),s=o[0],u=o[1];return r.makeTensorInfo(u,a.dtype,s)}return t=fE().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new Y1(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new P1(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},D6=UF;var L6={kernelName:uI,backendName:"webgl",kernelFunc:function(e){xT("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=n.readSync(a.dataId),c=n.readSync(i.dataId),f=D6(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([f.length],"int32",new Int32Array(f))}},z6=VF;var j6={kernelName:lI,backendName:"webgl",kernelFunc:function(e){xT("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize,c=n.readSync(a.dataId),f=n.readSync(i.dataId),d=z6(c,f,o,s,u,l),h=d.selectedIndices,p=d.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},B6=HF;var W6={kernelName:cI,backendName:"webgl",kernelFunc:function(e){xT("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,c=n.readSync(a.dataId),f=n.readSync(i.dataId),d=B6(c,f,o,s,u,l),h=d.selectedIndices,p=d.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},U6=yC((function e(t,n,r,a){gC(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),V6={kernelName:dI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=MC(a.shape),l=new U6(u,i,o,s),c=w2({inputs:{x:a},backend:n,attrs:{shape:[u]}}),f=n.runWebGLProgram(l,[c],a.dtype);n.disposeIntermediateTensorInfo(c);var d=w2({inputs:{x:f},backend:n,attrs:{shape:[].concat(pd(a.shape),[i])}});return n.disposeIntermediateTensorInfo(f),d}};function H6(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=F3({inputs:{input:r},backend:n}),i=H6({inputs:{x:a},backend:n}),o=$3({inputs:{input:r},backend:n}),s=H6({inputs:{x:o},backend:n}),u=a2({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return l5({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var G6={kernelName:hT,backendName:"webgl",kernelFunc:H6};var q6={kernelName:fI,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=F3({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=$3({inputs:{input:a},backend:r}),u=H6({inputs:{x:s},backend:r}),l=a2({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return l5({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var X6={kernelName:hI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return e5({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){TC(a,e.shape,"All tensors passed to stack must have matching shapes"),IC(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=e5({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=J3({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},Y6=yC((function e(t,n,r){gC(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=c0(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),K6=yC((function e(t,n,r){gC(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=c0(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=A1("rc",a),l=A1("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),f=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),d=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(c,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(c,") {")],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,g=1===a?2:4;v<g;v++)p+="\n        ".concat(d[v],"\n        if (").concat(h,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(l.join(),"), ").concat(f,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),$6=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===MC(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return l5({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=fE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new K6(a.shape,i,o):new Y6(a.shape,i,o),l=[[o]];return n.runWebGLProgram(u,[a],a.dtype,l)},Z6={kernelName:pI,backendName:"webgl",kernelFunc:$6},Q6=h2({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),J6={kernelName:vI,backendName:"webgl",kernelFunc:Q6};var e8={kernelName:mI,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,l=[],c=jC(o,i.shape),f=c,d=wP(f,u),h=i;if(null!=d&&(h=M2({inputs:{x:i},backend:r,attrs:{perm:d}}),f=_P(f.length,u),l.push(h)),kP("prod",f,u),r.shouldExecuteOnCPU([h])){var p=r.texData.get(h.dataId).values,v=o1(h.shape,h.dtype,p,f),g=v.outVals,m=v.outShape,y=v.outDtype;t=r.makeTensorInfo(m,y,g)}else{var b=Pf(bP(h.shape,f),2),x=b[0],k=MC(b[1]),w=w2({inputs:{x:h},backend:r,attrs:{shape:[-1,k]}}),S=E2(w,CR(i.dtype),"prod",r);t=w2({inputs:{x:S},backend:r,attrs:{shape:x}}),l.push(w),l.push(S)}if(s){l.push(t);var _=xP(t.shape,c);t=w2({inputs:{x:t},backend:r,attrs:{shape:_}})}return l.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},t8=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=s1(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},n8={kernelName:yI,backendName:"webgl",kernelFunc:t8},r8=d2({opSnippet:"return 1.0 / x;"}),a8={kernelName:xI,backendName:"webgl",kernelFunc:r8},i8=d2({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),o8={kernelName:kI,backendName:"webgl",kernelFunc:i8},s8=d2({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),u8={kernelName:AI,backendName:"webgl",kernelFunc:s8},l8=yC((function e(t,n,r,a,i){gC(this,e),this.variableNames=["A"],this.outputShape=[];var o=Pf(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var f,d=[a&&n>1?u-1:u,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/h[0],",\n          ").concat(d[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),c8=yC((function e(t,n,r,a,i){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=Pf(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var f,d=[a&&n>1?u-1:u,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(d[0]/h[0],",\n          ").concat(d[1]/h[1],",\n          ").concat(d[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var f8={kernelName:CI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=Pf(r.size,2),u=s[0],l=s[1],c=fE().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new c8(a.shape,u,l,i,o):new l8(a.shape,u,l,i,o);return n.runWebGLProgram(c,[a],"float32")}},d8=yC((function e(t,n,r){gC(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Pf(n,3),i=a[1],o=a[2],s=Pf(t,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],f=[r&&u>1?u-1:u,r&&l>1?l-1:l],d=c[0]/f[0],h=c[1]/f[1],p=1/d,v=1/h,g=2*Math.ceil(p)+2,m=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(m,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var h8={kernelName:EI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new d8(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},p8=yC((function e(t,n,r,a,i){gC(this,e),this.variableNames=["A"],this.outputShape=[];var o=Pf(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var f,d=[a&&n>1?u-1:u,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(d[0]/h[0],",\n          ").concat(d[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),v8=yC((function e(t,n,r,a,i){gC(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=Pf(t,4),s=o[0],u=o[1],l=o[2],c=o[3];this.outputShape=[s,n,r,c];var f,d=[a&&n>1?u-1:u,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";f=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(d[0]/h[0],",\n          ").concat(d[1]/h[1],",\n          ").concat(d[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(c-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var g8={kernelName:SI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=Pf(r.size,2),u=s[0],l=s[1],c=fE().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new v8(a.shape,u,l,i,o):new p8(a.shape,u,l,i,o);return n.runWebGLProgram(c,[a],a.dtype)}},m8=yC((function e(t,n,r){gC(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=Pf(n,3),i=a[1],o=a[2],s=Pf(t,3),u=s[1],l=s[2],c=[r&&u>1?i-1:i,r&&l>1?o-1:o],f=[r&&u>1?u-1:u,r&&l>1?l-1:l],d=c[0]/f[0],h=c[1]/f[1],p=1/d,v=1/h,g=2*Math.ceil(p)+2,m=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(d,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(m,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(c[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(c[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var y8={kernelName:_I,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new m8(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},b8=yC((function e(t,n){gC(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=c0(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),x8=yC((function e(t,n){gC(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=A1("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=c0(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var k8={kernelName:II,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=jC(i,a.shape);if(0===o)return n2({inputs:{x:a},backend:n});var u=fE().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new x8(a.shape,s):new b8(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},w8=yC((function e(t,n){gC(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),S8={kernelName:gT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=new w8(a.shape,o),c=Pf(VD(s,a.shape[1],a.shape[2]),2),f=[[c[0],c[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(l,[a],a.dtype,f)}},_8=d2({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),C8={kernelName:TI,backendName:"webgl",kernelFunc:_8},E8=d2({opSnippet:"return inversesqrt(x);",cpuKernelImpl:u1}),A8={kernelName:RI,backendName:"webgl",kernelFunc:E8},I8=yC((function e(t,n,r,a,i,o){gC(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=c0(i.length),u=c0(o.length),l="";1===r?l="i":2===r&&(l="i, j");var c="getIndices(".concat(l,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var d="getUpdates(".concat(f,")"),h=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(c,");\n              flattenedIndex += index * ").concat(h,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var T8={kernelName:NI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=$D(0,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,f=s.strides,d=s.outputSize,h=[d/c,c];if(0===d)return n.makeTensorInfo(o,a.dtype);var p=w2({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),v=w2({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),m=new I8(l,u,p.shape.length,v.shape.length,f,h),y=n.runWebGLProgram(m,[v,p,g],v.dtype),b=w2({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},R8=yC((function e(t,n,r,a){gC(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===fE().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var N8={kernelName:MI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new R8(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},M8=yC((function e(t,n,r){var a,i;if(gC(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],l=0;l<n.length;l++)u.push("".concat(o[l])),l<t&&s.push("".concat(o[l]));a=s.join(),i=u.join()}var c=c0(r);this.userCode="\n      void main() {\n        ".concat(c," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var O8={kernelName:OI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new M8(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],_R(a.dtype,i.dtype))}},P8=d2({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(ZD,";\n  float scale = ").concat(QD,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),F8={kernelName:PI,backendName:"webgl",kernelFunc:P8},D8=d2({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:c1}),L8={kernelName:jI,backendName:"webgl",kernelFunc:D8},z8=d2({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),j8={kernelName:zI,backendName:"webgl",kernelFunc:z8},B8=d2({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),W8={kernelName:DI,backendName:"webgl",kernelFunc:B8},U8=d2({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),V8={kernelName:LI,backendName:"webgl",kernelFunc:U8},H8=d2({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),G8={kernelName:BI,backendName:"webgl",kernelFunc:H8},q8={kernelName:VI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;IC(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,pd(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=[],f=$6({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=HD(f.shape,i,s,!1),h=GD(d.length,i.length,!1),p=qD(f.shape,i,s,!1),v=w2({inputs:{x:f},backend:n,attrs:{shape:d}}),g=M2({inputs:{x:v},backend:n,attrs:{perm:h}}),m=w2({inputs:{x:g},backend:n,attrs:{shape:p}});return c.push(f),c.push(v),c.push(g),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}};var X8={kernelName:qI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],f=Pf(h1(s,r.shape,r.dtype,u,a.dtype,l,c),5),d=f[0],h=f[1],p=f[2],v=f[3],g=f[4];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],a.dtype,p),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var Y8={kernelName:XI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),l=Pf(p1(s,r.shape,r.dtype,o,u),3),c=l[0],f=l[1],d=l[2];return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}};var K8={kernelName:YI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=Pf(v1(o,r.shape,r.dtype,s,u,!0),2),c=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,c)}};var $8={kernelName:KI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=Pf(v1(o,r.shape,r.dtype,s,u),2),c=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,c)}};var Z8={kernelName:$I,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=$D(0,a,s),l=u.sliceRank,c=u.numUpdates,f=u.sliceSize,d=u.strides,h=u.outputSize;if("string"===i.dtype){var p=n.bufferSync(a),v=n.bufferSync(i),g=$T(n.readSync(o.dataId)[0]),m=l1(p,v,s,h,f,c,l,d,g,false);return n.makeTensorInfo(s,m.dtype,m.values)}var y=new I8(c,l,a.shape.length,i.shape.length,d,[h,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=w2({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var Q8={kernelName:HI,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=jC(r.axis,a.shape)[0],s=mL(a,i,o),u=a.shape.length,l=new Array(u).fill(0),c=a.shape.slice();return s.map((function(e){var t=pd(c);t[o]=e;var r=I3({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[o]+=e,r}))}},J8="return sqrt(x);",e7=d2({opSnippet:J8,packedOpSnippet:J8,cpuKernelImpl:g1}),t7={kernelName:WI,backendName:"webgl",kernelFunc:e7},n7={kernelName:QI,backendName:"webgl",kernelFunc:d2({opSnippet:"return x * x;"})},r7="return (a - b) * (a - b);",a7=h2({opSnippet:r7,packedOpSnippet:r7}),i7={kernelName:ZI,backendName:"webgl",kernelFunc:a7};var o7={kernelName:pT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=F1+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new P1(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},s7=yC((function e(t,n,r){gC(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=c0(r.length),o=c0(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var u7={kernelName:JI,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,l=a.beginMask,c=a.endMask,f=a.ellipsisMask,d=a.newAxisMask,h=a.shrinkAxisMask,p=UM(i.shape,o,s,u,l,c,f,d,h),v=p.finalShapeSparse,g=p.finalShape,m=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,k=p.end,w=p.strides;if(m)t=w2({inputs:{x:i},backend:r,attrs:{shape:g}});else if(y||b){IC(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=zM(x,k,w),_=I3({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=w2({inputs:{x:_},backend:r,attrs:{shape:g}}),r.disposeIntermediateTensorInfo(_)}else{if(r.shouldExecuteOnCPU([i])){var C=r.readSync(i.dataId),E=rM(i.shape,i.dtype,C),A=m1(v,E,w,x);t=r.makeTensorInfo(g,i.dtype,A.values)}else{var I=new s7(x,w,v);t=r.runWebGLProgram(I,[i],i.dtype)}}var T=w2({inputs:{x:t},backend:r,attrs:{shape:g}});return r.disposeIntermediateTensorInfo(t),T}};var l7={kernelName:eT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,l=r.preserveShortSequences,c=t.data,f=t.dataSplits,d=n.readSync(c.dataId),h=n.readSync(f.dataId),p=Pf(y1(d,h,a,i,o,s,u,l),2),v=p[0],g=p[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(f.shape,"int32",g)]}};var c7={kernelName:tT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=Pf(b1(o,s,r),3),l=u[0],c=u[1],f=u[2],d=c.length;return[n.makeTensorInfo([d,2],"int32",l),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var f7={kernelName:nT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=x1(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},d7=d2({opSnippet:"return tan(x);"}),h7={kernelName:aT,backendName:"webgl",kernelFunc:d7},p7=d2({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),v7={kernelName:iT,backendName:"webgl",kernelFunc:p7},g7=yC((function e(t,n){gC(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=c0(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function m7(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return $T(e)})):o,u=rM(a.shape,a.dtype,s),l=w1(u,i);return n.makeTensorInfo(l.shape,l.dtype,l.values)}var c=new g7(a.shape,i);return n.runWebGLProgram(c,[a],a.dtype)}var y7={kernelName:oT,backendName:"webgl",kernelFunc:m7},b7=yC((function e(t){gC(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),x7=yC((function e(t){gC(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function k7(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function w7(e){for(var t=1;t<e;)t*=2;return t}var S7={kernelName:sT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=fE().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=fE().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>u){var f=n.readSync(a.dataId),d=Pf(S1(f,l,a.dtype,i,o),2),h=d[0],p=d[1];return[n.makeTensorInfo(h.shape,h.dtype,h.values),n.makeTensorInfo(p.shape,p.dtype,p.values)]}if(0===i)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===c)return[a,l5({attrs:{shape:l,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),g=null!==v&&v.isPacked,m=g?n.unpackTensor(a):a,y=MC(l)/c,b=w2({inputs:{x:m},attrs:{shape:[y,c]},backend:n});g&&k7(n,m);for(var x=w7(i),k=w7(c),w=null,S=function(){return null===w?[b,b]:[b,w]},_=function(e,t,r){var a=S(),i=new b7(r),o=[[c],[null===w?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=w;w=n.runWebGLProgram(i,a,"int32",o),k7(n,s)},C=1;C<x;C*=2)for(var E=2*C,A=C;A>=1;A/=2)_(E,A,[y,k]);for(var I=k;I>x;I/=2){var T=S(),R=new x7([y,I/2]),N=[[c],[null===w?1:0],[x]],M=w;w=n.runWebGLProgram(R,T,"int32",N),k7(n,M);for(var O=x/2,P=2*O,F=O;F>=1;F/=2)_(P,F,w.shape)}var D=w;w=I3({inputs:{x:w},backend:n,attrs:{begin:0,size:[y,i]}}),k7(n,D);var L=A5({inputs:{x:b,indices:w},backend:n,attrs:{axis:1,batchDims:1}});k7(n,b);var z=l.slice(0,-1);z.push(i),D=w,w=w2({inputs:{x:w},attrs:{shape:z},backend:n}),k7(n,D);var j=L;return L=w2({inputs:{x:L},attrs:{shape:z},backend:n}),k7(n,j),[L,w]}},_7=yC((function e(t,n,r,a,i,o){gC(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var C7={kernelName:uT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,l=r.outputShape,c=Pf(a.shape,4),f=c[0],d=c[1],h=c[2],p=c[3],v=Pf(null!=l?l:[d,h],2),g=v[0],m=v[1],y=new _7(d,h,o,s,u,[f,g,m,p]);return n.runWebGLProgram(y,[a,i],"float32")}};var E7={kernelName:cT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;LJ(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=C1(o,a,i.shape,i.dtype),u=s.outputValues,l=s.outputShape,c=s.indices;return[r.makeTensorInfo(l,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}};var A7={kernelName:fT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],l=new Array(s-1),c=0,f=0;f<s;f++)f!==i&&(l[c++]=o.shape[f]);var d=[],h=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(u),g=0;g<v.length;g++){h[i]=g;var m=I3({inputs:{x:o},backend:n,attrs:{begin:h,size:p}}),y=w2({inputs:{x:m},backend:n,attrs:{shape:l}});v[g]=y,d.push(m)}return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},I7=yC((function e(t,n){gC(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),l=r%4,c="\n        sumValue += dot(values, segFilter);\n    ",f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(d,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var T7={kernelName:dT,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],l=0,c=wP([l],s),f=a;null!=c&&(f=M2({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(f),l=_P(1,s)[0]);var d=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(f.shape,l,o),h=MC([f.shape[l]]),p=w2({inputs:{x:f},backend:n,attrs:{shape:[-1,h]}});u.push(p);var v=function e(t,r,a,i,o){var s=t.shape[0],l=t.shape[1],c=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=$C(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=$C(e,n+1);return n}(l,o),f=new I7({windowSize:c,inSize:l,batchSize:s,numSegments:o},r),d=n.compileAndRun(f,[t,a],i);if(u.push(d),d.shape[1]===o)return d;var h=t8({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=m7({inputs:{x:h},backend:n,attrs:{reps:[l/c]}});return u.push(h),u.push(p),e(d,r,p,i,o)}(p,"unsortedSegmentSum",i,CR(a.dtype),o),g=w2({inputs:{x:v},backend:n,attrs:{shape:d}}),m=g;if(null!=c){u.push(g);var y=SP(c);m=M2({inputs:{x:m},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},R7=0,N7=[F2,L2,j2,W2,H2,X2,Y2,K2,t3,n3,a3,o3,u3,c3,d3,v3,g3,b3,x3,k3,_3,R3,N3,M3,L3,B3,V3,i2,q3,e4,s4,d4,h4,p4,v4,m4,b4,k4,S4,I4,T4,R4,M4,F4,z4,j4,W4,V4,H4,q4,X4,K4,Z4,J4,t5,a5,s5,f5,h5,g5,y5,k5,w5,S5,C5,I5,R5,M5,r2,O5,Z3,F5,L5,j5,u2,W5,V5,H5,q5,Y5,$5,Q5,e6,r6,i6,s6,l6,c6,f6,p6,v6,g6,m6,y6,x6,S6,C6,P6,k2,F6,L6,j6,W6,P3,V6,q6,X6,Z6,J6,f2,e8,n8,D3,I6,a8,o8,u8,S2,f8,h8,g8,y8,k8,S8,C8,A8,T8,N8,O8,F8,L8,j8,W8,V8,T3,O6,G8,q8,X8,Y8,K8,$8,Z8,Q8,t7,n7,i7,o7,u7,l7,c7,f7,N6,N2,h7,v7,y7,S7,C7,O2,E7,A7,T7,G6];R7<N7.length;R7++){ET(N7[R7])}var M7=window.location.origin,O7=function(){function e(){gC(this,e),this.labels=[]}return yC(e,[{key:"load",value:function(){var e=vC(hC().mark((function e(){var t;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cH(M7+"/quote/quotemodel/model.json");case 2:return this.model=e.sent,e.next=5,fetch(M7+"/quote/labels",{method:"GET",credentials:"include",cache:"no-cache",headers:new Headers({"content-type":"application/json"})});case 5:return t=e.sent,e.next=8,t.json();case 8:return t=e.sent,this.labels=t,e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"set_labels",value:function(e){this.labels=e}},{key:"dict_to_row",value:function(e){for(var t=this.labels.length,n=new Array(t),r=0;r<t;++r)n[r]=0;for(var a in e){if(this.labels.indexOf(a)>=0)n[this.labels.indexOf(a)]+=e[a],n[t-2]+=1,n[t-1]+=e[a]}return n}},{key:"find_active",value:function(e){var t=[];for(var n in e)this.labels.indexOf(n)>=0&&t.push(n);return t}},{key:"is_active",value:function(e){return this.labels.indexOf(e)>=0}},{key:"getlables",value:function(){return this.labels}},{key:"classify",value:function(){var e=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.dict_to_row(t),t=SO(t,[-1,this.labels.length]),n=this.model.predict(t),e.next=5,n.array();case 5:return r=(r=e.sent)[0],e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reccomend",value:function(){var e=vC(hC().mark((function e(t){var n,r;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={items:t},e.next=3,fetch(M7+"/quote/api/recommend",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),P7=new O7;P7.load();var F7=P7;var D7=function(){var e=Pf(t.useState(""),2),n=e[0],r=e[1],a=Pf(t.useState(),2),i=a[0],o=a[1],s=Pf(t.useState(0),2),u=s[0],l=s[1],c=Pf(t.useState(0),2),f=c[0],d=c[1],h=Pf(t.useState(0),2),p=h[0],v=h[1],g=Pf(t.useState(void 0),2),m=g[0],y=g[1],b=Pf(t.useState([]),2),x=b[0],k=b[1],w=function(e){var t,r={},a=0,i=n.split("\n"),s=[];i.forEach((function(e){var t=e.split("\t");4===t.length&&("3001"===t[2]&&(a+=parseFloat(t[0])),4!==t[2].length&&(s.push({productName:t[3],productNumber:t[2],quantity:t[0],unit:t[1],used:F7.is_active(t[2])}),r[t[2]]=t[0]))})),F7.classify(r).then((function(e){l(e)})),F7.reccomend(Object.keys(r)).then((function(e){e.json().then((function(e){k(e)}))})),d(a),o(s),v(u-(t=a)),y(Math.abs((t-u)/u*100))};return(0,Fb.jsxs)(Ob,{direction:"column",backgroundColor:"gray.50",padding:10,paddingTop:3,minHeight:"100vh",overflowY:"auto",overflowX:"auto",children:[(0,Fb.jsx)(fC,{title:"TIME ESTIMATION",section:"Demo"}),(0,Fb.jsxs)(Ob,{justify:"space-between",pt:8,children:[(0,Fb.jsxs)(Ob,{borderWidth:2,bg:"white",shadow:"md",h:"70vh",w:"60%",p:10,pt:5,direction:"column",rounded:"xl",minWidth:"550px",align:"stretch",overflowY:"auto",overflowX:"auto",children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"15",children:" Input"}),(0,Fb.jsx)(z_,{borderColor:"gray.300",variant:"outline",backgroundColor:"gray.50",height:"10vh",placeholder:"Paste text here...",onChange:function(e){var t=e.target.value;r(t),w()}}),(0,Fb.jsx)(hb,{rounded:"lg",backgroundColor:"white",borderColor:"gray.300",mt:"5",p:2,borderWidth:1,maxHeight:"45vh",overflowY:"auto",overflowX:"auto",children:(0,Fb.jsxs)(X_,{size:"sm",variant:"striped",overflowY:"auto",overflowX:"auto",children:[(0,Fb.jsx)(Y_,{children:(0,Fb.jsxs)(Z_,{children:[(0,Fb.jsx)($_,{children:"Product name"}),(0,Fb.jsx)($_,{children:"Product number"}),(0,Fb.jsx)($_,{children:"Quantity"}),(0,Fb.jsx)($_,{children:"Unit"})]})}),(0,Fb.jsx)(K_,{children:null===i||void 0===i?void 0:i.map((function(e){return(0,Fb.jsxs)(Z_,{style:{color:e.used?"blue":"black"},children:[(0,Fb.jsx)(Q_,{children:e.productName}),(0,Fb.jsx)(Q_,{children:e.productNumber}),(0,Fb.jsx)(Q_,{children:e.quantity}),(0,Fb.jsx)(Q_,{children:e.unit})]},Math.random())}))})]})})]}),(0,Fb.jsxs)(bb,{borderWidth:2,bg:"white",shadow:"md",h:"70vh",w:"35%",paddingTop:10,p:5,direction:"column",rounded:"xl",minWidth:"400px",justify:"space-between",children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"15",children:" Result"}),(0,Fb.jsxs)(bb,{direction:"row",paddingTop:10,children:[(0,Fb.jsxs)(Cb,{direction:"column",spacing:8,w:"100%",align:"left",children:[(0,Fb.jsxs)(bb,{direction:"row",align:"center",children:[(0,Fb.jsx)(ql,{as:b_,color:"gray.500",boxSize:"10",mr:4}),(0,Fb.jsx)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",children:" Calculated  "}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"20",children:[" ",f,"h "]})]}),(0,Fb.jsxs)(Eb,{alignItems:"center",children:[(0,Fb.jsx)(ql,{as:k_,color:"gray.500",boxSize:"9",mr:4}),(0,Fb.jsx)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",children:"Guessed "}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"20",children:[" ",u,"h"]})]})]})," "]}),(0,Fb.jsx)(mb,{mt:5,borderWidth:1}),(0,Fb.jsxs)(bb,{direction:"row",align:"center",mt:5,children:[(0,Fb.jsx)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",ml:2,children:" Difference"}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"20",children:[p.toFixed(1),"h"]})]}),(0,Fb.jsx)(bb,{align:"center",justify:"center",mt:5,children:(0,Fb.jsx)(uC,{value:m,color:"blue.400",size:"150px",children:m?(0,Fb.jsxs)(lC,{fontSize:20,children:[m.toFixed(1),"% "]}):(0,Fb.jsx)(Fb.Fragment,{})})}),(0,Fb.jsx)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",textAlign:"center",children:"Percentage Error"})]}),(0,Fb.jsxs)(bb,{borderWidth:2,bg:"white",shadow:"md",h:"70vh",w:"35%",paddingTop:10,p:5,direction:"column",rounded:"xl",minWidth:"400px",justify:"space-between",children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"15",children:" Reccomended Items"}),(0,Fb.jsxs)(X_,{size:"sm",variant:"striped",overflowY:"auto",overflowX:"auto",children:[(0,Fb.jsx)(Y_,{children:(0,Fb.jsxs)(Z_,{children:[(0,Fb.jsx)($_,{children:"Product name"}),(0,Fb.jsx)($_,{children:"Product number"})]})}),(0,Fb.jsx)(K_,{children:Object.keys(x).map((function(e){return(0,Fb.jsxs)(Z_,{children:[(0,Fb.jsx)(Q_,{children:x[e]}),(0,Fb.jsx)(Q_,{children:e})]},Math.random())}))})]})]})]})]})};function L7(){return L7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L7.apply(this,arguments)}function z7(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var j7=["children","placeholder","className"],B7=["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize"],W7=["children"],U7=Wa((function(e,n){var r=e.children,a=e.placeholder,i=e.className,o=z7(e,j7);return t.createElement(qa.select,L7({},o,{ref:n,className:vt("chakra-select",i)}),a&&t.createElement("option",{value:""},a),r)}));var V7=Wa((function(e,n){var r=Ga("Select",e),a=Ma(e),i=a.rootProps,o=a.placeholder,s=a.icon,u=a.color,l=a.height,c=a.h,f=a.minH,d=a.minHeight,h=a.iconColor,p=a.iconSize,v=function(e,t){var n={},r={};return Object.keys(e).forEach((function(a){t.includes(a)?n[a]=e[a]:r[a]=e[a]})),[n,r]}(z7(a,B7),aa),g=v[0],m=M_(v[1]),y={width:"100%",height:"fit-content",position:"relative",color:u},b=Fe()({paddingEnd:"2rem"},r.field,{_focus:{zIndex:"unset"}});return t.createElement(qa.div,L7({className:"chakra-select__wrapper",__css:y},g,i),t.createElement(U7,L7({ref:n,height:null!=c?c:l,minH:null!=f?f:d,placeholder:o},m,{__css:b}),e.children),t.createElement(q7,L7({"data-disabled":ht(m.disabled)},(h||u)&&{color:h||u},{__css:r.icon},p&&{fontSize:p}),s))}));var H7=function(e){return t.createElement("svg",L7({viewBox:"0 0 24 24"},e),t.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))},G7=qa("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),q7=function(e){var n=e.children,r=void 0===n?t.createElement(H7,null):n,a=z7(e,W7),i=t.cloneElement(r,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return t.createElement(G7,L7({},a,{className:"chakra-select__icon-wrapper"}),t.isValidElement(r)?i:null)};function X7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X7(Object(n),!0).forEach((function(t){Gf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K7="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function $7(e,t,n){var r=n||function(e){return Array.prototype.slice.call(e)},a=!1,i=[];return function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];i=r(o),a||(a=!0,K7.call(window,(function(){a=!1,e.apply(t,i)})))}}var Z7=function(e){return"start"===e?"left":"end"===e?"right":"center"},Q7=function(e,t,n){return"start"===e?t:"end"===e?n:(t+n)/2};function J7(){}var e9=function(){var e=0;return function(){return e++}}();function t9(e){return null===e||"undefined"===typeof e}function n9(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function r9(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}var a9=function(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)};function i9(e,t){return a9(e)?e:t}function o9(e,t){return"undefined"===typeof e?t:e}var s9=function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e};function u9(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function l9(e,t,n,r){var a,i,o;if(n9(e))if(i=e.length,r)for(a=i-1;a>=0;a--)t.call(n,e[a],a);else for(a=0;a<i;a++)t.call(n,e[a],a);else if(r9(e))for(i=(o=Object.keys(e)).length,a=0;a<i;a++)t.call(n,e[o[a]],o[a])}function c9(e,t){var n,r,a,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(a=e[n],i=t[n],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function f9(e){if(n9(e))return e.map(f9);if(r9(e)){for(var t=Object.create(null),n=Object.keys(e),r=n.length,a=0;a<r;++a)t[n[a]]=f9(e[n[a]]);return t}return e}function d9(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function h9(e,t,n,r){if(d9(e)){var a=t[e],i=n[e];r9(a)&&r9(i)?p9(a,i,r):t[e]=f9(i)}}function p9(e,t,n){var r=n9(t)?t:[t],a=r.length;if(!r9(e))return e;for(var i=(n=n||{}).merger||h9,o=0;o<a;++o)if(r9(t=r[o]))for(var s=Object.keys(t),u=0,l=s.length;u<l;++u)i(s[u],e,t,n);return e}function v9(e,t){return p9(e,t,{merger:g9})}function g9(e,t,n){if(d9(e)){var r=t[e],a=n[e];r9(r)&&r9(a)?v9(r,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=f9(a))}}function m9(e,t){var n=e.indexOf(".",t);return-1===n?e.length:n}function y9(e,t){if(""===t)return e;for(var n=0,r=m9(t,n);e&&r>n;)e=e[t.slice(n,r)],r=m9(t,n=r+1);return e}function b9(e){return e.charAt(0).toUpperCase()+e.slice(1)}var x9=function(e){return"undefined"!==typeof e},k9=function(e){return"function"===typeof e},w9=function(e,t){if(e.size!==t.size)return!1;var n,r=bC(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!t.has(a))return!1}}catch(bfe){r.e(bfe)}finally{r.f()}return!0};var S9=Math.PI,_9=2*S9,C9=_9+S9,E9=Number.POSITIVE_INFINITY,A9=S9/180,I9=S9/2,T9=S9/4,R9=2*S9/3,N9=Math.log10,M9=Math.sign;function O9(e){var t=Math.round(e);e=F9(e,t,e/1e3)?t:e;var n=Math.pow(10,Math.floor(N9(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function P9(e){return!isNaN(parseFloat(e))&&isFinite(e)}function F9(e,t,n){return Math.abs(e-t)<n}function D9(e,t,n){var r,a,i;for(r=0,a=e.length;r<a;r++)i=e[r][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function L9(e){return e*(S9/180)}function z9(e){return e*(180/S9)}function j9(e){if(a9(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}}function B9(e,t){var n=t.x-e.x,r=t.y-e.y,a=Math.sqrt(n*n+r*r),i=Math.atan2(r,n);return i<-.5*S9&&(i+=_9),{angle:i,distance:a}}function W9(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function U9(e,t){return(e-t+C9)%_9-S9}function V9(e){return(e%_9+_9)%_9}function H9(e,t,n,r){var a=V9(e),i=V9(t),o=V9(n),s=V9(i-a),u=V9(o-a),l=V9(a-i),c=V9(a-o);return a===i||a===o||r&&i===o||s>u&&l<c}function G9(e,t,n){return Math.max(t,Math.min(n,e))}function q9(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}var X9=function(e){return 0===e||1===e},Y9=function(e,t,n){return-Math.pow(2,10*(e-=1))*Math.sin((e-t)*_9/n)},K9=function(e,t,n){return Math.pow(2,-10*e)*Math.sin((e-t)*_9/n)+1},$9={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*I9)},easeOutSine:function(e){return Math.sin(e*I9)},easeInOutSine:function(e){return-.5*(Math.cos(S9*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return X9(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1)))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){return X9(e)?e:Y9(e,.075,.3)},easeOutElastic:function(e){return X9(e)?e:K9(e,.075,.3)},easeInOutElastic:function(e){var t=.1125;return X9(e)?e:e<.5?.5*Y9(2*e,t,.45):.5+.5*K9(2*e-1,t,.45)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-$9.easeOutBounce(1-e)},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*$9.easeInBounce(2*e):.5*$9.easeOutBounce(2*e-1)+.5}};function Z9(e){return e+.5|0}var Q9=function(e,t,n){return Math.max(Math.min(e,n),t)};function J9(e){return Q9(Z9(2.55*e),0,255)}function eee(e){return Q9(Z9(255*e),0,255)}function tee(e){return Q9(Z9(e/2.55)/100,0,1)}function nee(e){return Q9(Z9(100*e),0,100)}var ree={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},aee=pd("0123456789ABCDEF"),iee=function(e){return aee[15&e]},oee=function(e){return aee[(240&e)>>4]+aee[15&e]},see=function(e){return(240&e)>>4===(15&e)};function uee(e){var t=function(e){return see(e.r)&&see(e.g)&&see(e.b)&&see(e.a)}(e)?iee:oee;return e?"#"+t(e.r)+t(e.g)+t(e.b)+function(e,t){return e<255?t(e):""}(e.a,t):void 0}var lee=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function cee(e,t,n){var r=t*Math.min(n,1-n),a=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function fee(e,t,n){var r=function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(a,4-a,1),0)};return[r(5),r(3),r(1)]}function dee(e,t,n){var r,a=cee(e,1,.5);for(t+n>1&&(t*=r=1/(t+n),n*=r),r=0;r<3;r++)a[r]*=1-t-n,a[r]+=t;return a}function hee(e){var t,n,r,a=e.r/255,i=e.g/255,o=e.b/255,s=Math.max(a,i,o),u=Math.min(a,i,o),l=(s+u)/2;return s!==u&&(r=s-u,n=l>.5?r/(2-s-u):r/(s+u),t=function(e,t,n,r,a){return e===a?(t-n)/r+(t<n?6:0):t===a?(n-e)/r+2:(e-t)/r+4}(a,i,o,r,s),t=60*t+.5),[0|t,n||0,l]}function pee(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(eee)}function vee(e,t,n){return pee(cee,e,t,n)}function gee(e){return(e%360+360)%360}function mee(e){var t,n=lee.exec(e),r=255;if(n){n[5]!==t&&(r=n[6]?J9(+n[5]):eee(+n[5]));var a=gee(+n[2]),i=+n[3]/100,o=+n[4]/100;return t="hwb"===n[1]?function(e,t,n){return pee(dee,e,t,n)}(a,i,o):"hsv"===n[1]?function(e,t,n){return pee(fee,e,t,n)}(a,i,o):vee(a,i,o),{r:t[0],g:t[1],b:t[2],a:r}}}var yee,bee={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},xee={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kee(e){yee||(yee=function(){var e,t,n,r,a,i={},o=Object.keys(xee),s=Object.keys(bee);for(e=0;e<o.length;e++){for(r=a=o[e],t=0;t<s.length;t++)n=s[t],a=a.replace(n,bee[n]);n=parseInt(xee[r],16),i[a]=[n>>16&255,n>>8&255,255&n]}return i}(),yee.transparent=[0,0,0,0]);var t=yee[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}var wee=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var See=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},_ee=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function Cee(e,t,n){if(e){var r=hee(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=vee(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function Eee(e,t){return e?Object.assign(t||{},e):e}function Aee(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=eee(e[3]))):(t=Eee(e,{r:0,g:0,b:0,a:1})).a=eee(t.a),t}function Iee(e){return"r"===e.charAt(0)?function(e){var t,n,r,a=wee.exec(e),i=255;if(a){if(a[7]!==t){var o=+a[7];i=a[8]?J9(o):Q9(255*o,0,255)}return t=+a[1],n=+a[3],r=+a[5],{r:t=255&(a[2]?J9(t):Q9(t,0,255)),g:n=255&(a[4]?J9(n):Q9(n,0,255)),b:r=255&(a[6]?J9(r):Q9(r,0,255)),a:i}}}(e):mee(e)}var Tee=function(){function e(t){if(gC(this,e),t instanceof e)return t;var n,r=typeof t;"object"===r?n=Aee(t):"string"===r&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*ree[e[1]],g:255&17*ree[e[2]],b:255&17*ree[e[3]],a:5===n?17*ree[e[4]]:255}:7!==n&&9!==n||(t={r:ree[e[1]]<<4|ree[e[2]],g:ree[e[3]]<<4|ree[e[4]],b:ree[e[5]]<<4|ree[e[6]],a:9===n?ree[e[7]]<<4|ree[e[8]]:255})),t}(t)||kee(t)||Iee(t)),this._rgb=n,this._valid=!!n}return yC(e,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var e=Eee(this._rgb);return e&&(e.a=tee(e.a)),e},set:function(e){this._rgb=Aee(e)}},{key:"rgbString",value:function(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(tee(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}},{key:"hexString",value:function(){return this._valid?uee(this._rgb):void 0}},{key:"hslString",value:function(){return this._valid?function(e){if(e){var t=hee(e),n=t[0],r=nee(t[1]),a=nee(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(a,"%, ").concat(tee(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(a,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(e,t){if(e){var n,r=this.rgb,a=e.rgb,i=t===n?.5:t,o=2*i-1,s=r.a-a.a,u=((o*s===-1?o:(o+s)/(1+o*s))+1)/2;n=1-u,r.r=255&u*r.r+n*a.r+.5,r.g=255&u*r.g+n*a.g+.5,r.b=255&u*r.b+n*a.b+.5,r.a=i*r.a+(1-i)*a.a,this.rgb=r}return this}},{key:"interpolate",value:function(e,t){return e&&(this._rgb=function(e,t,n){var r=_ee(tee(e.r)),a=_ee(tee(e.g)),i=_ee(tee(e.b));return{r:eee(See(r+n*(_ee(tee(t.r))-r))),g:eee(See(a+n*(_ee(tee(t.g))-a))),b:eee(See(i+n*(_ee(tee(t.b))-i))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}},{key:"clone",value:function(){return new e(this.rgb)}},{key:"alpha",value:function(e){return this._rgb.a=eee(e),this}},{key:"clearer",value:function(e){return this._rgb.a*=1-e,this}},{key:"greyscale",value:function(){var e=this._rgb,t=Z9(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}},{key:"opaquer",value:function(e){return this._rgb.a*=1+e,this}},{key:"negate",value:function(){var e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}},{key:"lighten",value:function(e){return Cee(this._rgb,2,e),this}},{key:"darken",value:function(e){return Cee(this._rgb,2,-e),this}},{key:"saturate",value:function(e){return Cee(this._rgb,1,e),this}},{key:"desaturate",value:function(e){return Cee(this._rgb,1,-e),this}},{key:"rotate",value:function(e){return function(e,t){var n=hee(e);n[0]=gee(n[0]+t),n=vee(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}]),e}();function Ree(e){return new Tee(e)}function Nee(e){if(e&&"object"===typeof e){var t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Mee(e){return Nee(e)?e:Ree(e)}function Oee(e){return Nee(e)?e:Ree(e).saturate(.5).darken(.1).hexString()}var Pee=Object.create(null),Fee=Object.create(null);function Dee(e,t){if(!t)return e;for(var n=t.split("."),r=0,a=n.length;r<a;++r){var i=n[r];e=e[i]||(e[i]=Object.create(null))}return e}function Lee(e,t,n){return"string"===typeof t?p9(Dee(e,t),n):p9(Dee(e,""),t)}var zee=function(){function e(t){gC(this,e),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(e){return e.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(e,t){return Oee(t.backgroundColor)},this.hoverBorderColor=function(e,t){return Oee(t.borderColor)},this.hoverColor=function(e,t){return Oee(t.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}return yC(e,[{key:"set",value:function(e,t){return Lee(this,e,t)}},{key:"get",value:function(e){return Dee(this,e)}},{key:"describe",value:function(e,t){return Lee(Fee,e,t)}},{key:"override",value:function(e,t){return Lee(Pee,e,t)}},{key:"route",value:function(e,t,n,r){var a,i=Dee(this,e),o=Dee(this,n),s="_"+t;Object.defineProperties(i,(Gf(a={},s,{value:i[t],writable:!0}),Gf(a,t,{enumerable:!0,get:function(){var e=this[s],t=o[r];return r9(e)?Object.assign({},t,e):o9(e,t)},set:function(e){this[s]=e}}),a))}}]),e}(),jee=new zee({_scriptable:function(e){return!e.startsWith("on")},_indexable:function(e){return"events"!==e},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Bee(e,t,n,r,a){var i=t[a];return i||(i=t[a]=e.measureText(a).width,n.push(a)),i>r&&(r=i),r}function Wee(e,t,n,r){var a=(r=r||{}).data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},i=r.garbageCollect=[],r.font=t),e.save(),e.font=t;var o,s,u,l,c,f=0,d=n.length;for(o=0;o<d;o++)if(void 0!==(l=n[o])&&null!==l&&!0!==n9(l))f=Bee(e,a,i,f,l);else if(n9(l))for(s=0,u=l.length;s<u;s++)void 0===(c=l[s])||null===c||n9(c)||(f=Bee(e,a,i,f,c));e.restore();var h=i.length/2;if(h>n.length){for(o=0;o<h;o++)delete a[i[o]];i.splice(0,h)}return f}function Uee(e,t,n){var r=e.currentDevicePixelRatio,a=0!==n?Math.max(n/2,.5):0;return Math.round((t-a)*r)/r+a}function Vee(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Hee(e,t,n,r){var a,i,o,s,u,l=t.pointStyle,c=t.rotation,f=t.radius,d=(c||0)*A9;if(l&&"object"===typeof l&&("[object HTMLImageElement]"===(a=l.toString())||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(d),e.drawImage(l,-l.width/2,-l.height/2,l.width,l.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),l){default:e.arc(n,r,f,0,_9),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(d)*f,r-Math.cos(d)*f),d+=R9,e.lineTo(n+Math.sin(d)*f,r-Math.cos(d)*f),d+=R9,e.lineTo(n+Math.sin(d)*f,r-Math.cos(d)*f),e.closePath();break;case"rectRounded":s=f-(u=.516*f),i=Math.cos(d+T9)*s,o=Math.sin(d+T9)*s,e.arc(n-i,r-o,u,d-S9,d-I9),e.arc(n+o,r-i,u,d-I9,d),e.arc(n+i,r+o,u,d,d+I9),e.arc(n-o,r+i,u,d+I9,d+S9),e.closePath();break;case"rect":if(!c){s=Math.SQRT1_2*f,e.rect(n-s,r-s,2*s,2*s);break}d+=T9;case"rectRot":i=Math.cos(d)*f,o=Math.sin(d)*f,e.moveTo(n-i,r-o),e.lineTo(n+o,r-i),e.lineTo(n+i,r+o),e.lineTo(n-o,r+i),e.closePath();break;case"crossRot":d+=T9;case"cross":i=Math.cos(d)*f,o=Math.sin(d)*f,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o),e.moveTo(n+o,r-i),e.lineTo(n-o,r+i);break;case"star":i=Math.cos(d)*f,o=Math.sin(d)*f,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o),e.moveTo(n+o,r-i),e.lineTo(n-o,r+i),d+=T9,i=Math.cos(d)*f,o=Math.sin(d)*f,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o),e.moveTo(n+o,r-i),e.lineTo(n-o,r+i);break;case"line":i=Math.cos(d)*f,o=Math.sin(d)*f,e.moveTo(n-i,r-o),e.lineTo(n+i,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(d)*f,r+Math.sin(d)*f)}e.fill(),t.borderWidth>0&&e.stroke()}}function Gee(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function qee(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Xee(e){e.restore()}function Yee(e,t,n,r,a){if(!t)return e.lineTo(n.x,n.y);if("middle"===a){var i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===a!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Kee(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function $ee(e,t,n,r,a){var i,o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=n9(t)?t:[t],l=s.strokeWidth>0&&""!==s.strokeColor;for(e.save(),e.font=a.string,Zee(e,s),i=0;i<u.length;++i)o=u[i],l&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),t9(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(o,n,r,s.maxWidth)),e.fillText(o,n,r,s.maxWidth),Qee(e,n,r,o,s),r+=a.lineHeight;e.restore()}function Zee(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),t9(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Qee(e,t,n,r,a){if(a.strikethrough||a.underline){var i=e.measureText(r),o=t-i.actualBoundingBoxLeft,s=t+i.actualBoundingBoxRight,u=n-i.actualBoundingBoxAscent,l=n+i.actualBoundingBoxDescent,c=a.strikethrough?(u+l)/2:l;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,c),e.lineTo(s,c),e.stroke()}}function Jee(e,t){var n=t.x,r=t.y,a=t.w,i=t.h,o=t.radius;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,-I9,S9,!0),e.lineTo(n,r+i-o.bottomLeft),e.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,S9,I9,!0),e.lineTo(n+a-o.bottomRight,r+i),e.arc(n+a-o.bottomRight,r+i-o.bottomRight,o.bottomRight,I9,0,!0),e.lineTo(n+a,r+o.topRight),e.arc(n+a-o.topRight,r+o.topRight,o.topRight,0,-I9,!0),e.lineTo(n+o.topLeft,r)}var ete=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),tte=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function nte(e,t){var n=(""+e).match(ete);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}function rte(e,t){var n,r={},a=r9(t),i=a?Object.keys(t):t,o=r9(e)?a?function(n){return o9(e[n],e[t[n]])}:function(t){return e[t]}:function(){return e},s=bC(i);try{for(s.s();!(n=s.n()).done;){var u=n.value;r[u]=+o(u)||0}}catch(bfe){s.e(bfe)}finally{s.f()}return r}function ate(e){return rte(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ite(e){return rte(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ote(e){var t=ate(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ste(e,t){e=e||{},t=t||jee.font;var n=o9(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));var r=o9(e.style,t.style);r&&!(""+r).match(tte)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");var a={family:o9(e.family,t.family),lineHeight:nte(o9(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:o9(e.weight,t.weight),string:""};return a.string=function(e){return!e||t9(e.size)||t9(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function ute(e,t,n,r){var a,i,o,s=!0;for(a=0,i=e.length;a<i;++a)if(void 0!==(o=e[a])&&(void 0!==t&&"function"===typeof o&&(o=o(t),s=!1),void 0!==n&&n9(o)&&(o=o[n%o.length],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}function lte(e,t){return Object.assign(Object.create(e),t)}function cte(e,t,n){n=n||function(n){return e[n]<t};for(var r,a=e.length-1,i=0;a-i>1;)n(r=i+a>>1)?i=r:a=r;return{lo:i,hi:a}}var fte=function(e,t,n){return cte(e,n,(function(r){return e[r][t]<n}))},dte=function(e,t,n){return cte(e,n,(function(r){return e[r][t]>=n}))};var hte=["push","pop","shift","splice","unshift"];function pte(e,t){var n=e._chartjs;if(n){var r=n.listeners,a=r.indexOf(t);-1!==a&&r.splice(a,1),r.length>0||(hte.forEach((function(t){delete e[t]})),delete e._chartjs)}}function vte(e){var t,n,r=new Set;for(t=0,n=e.length;t<n;++t)r.add(e[t]);return r.size===n?e:Array.from(r)}function gte(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return e[0]};x9(a)||(a=Ite("_fallback",e));var o=(Gf(t={},Symbol.toStringTag,"Object"),Gf(t,"_cacheable",!0),Gf(t,"_scopes",e),Gf(t,"_rootScopes",r),Gf(t,"_fallback",a),Gf(t,"_getTarget",i),Gf(t,"override",(function(t){return gte([t].concat(pd(e)),n,r,a)})),t);return new Proxy(o,{deleteProperty:function(t,n){return delete t[n],delete t._keys,delete e[0][n],!0},get:function(t,r){return kte(t,r,(function(){return Ate(r,n,e,t)}))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e[0])},has:function(e,t){return Tte(e).includes(t)},ownKeys:function(e){return Tte(e)},set:function(e,t,n){var r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function mte(e,t,n,r){var a={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:yte(e,r),setContext:function(t){return mte(e,t,n,r)},override:function(a){return mte(e.override(a),t,n,r)}};return new Proxy(a,{deleteProperty:function(t,n){return delete t[n],delete e[n],!0},get:function(e,t,n){return kte(e,t,(function(){return function(e,t,n){var r=e._proxy,a=e._context,i=e._subProxy,o=e._descriptors,s=r[t];k9(s)&&o.isScriptable(t)&&(s=function(e,t,n,r){var a=n._proxy,i=n._context,o=n._subProxy,s=n._stack;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e),t=t(i,o||r),s.delete(e),xte(e,t)&&(t=Cte(a._scopes,a,e,t));return t}(t,s,e,n));n9(s)&&s.length&&(s=function(e,t,n,r){var a=n._proxy,i=n._context,o=n._subProxy,s=n._descriptors;if(x9(i.index)&&r(e))t=t[i.index%t.length];else if(r9(t[0])){var u=t,l=a._scopes.filter((function(e){return e!==u}));t=[];var c,f=bC(u);try{for(f.s();!(c=f.n()).done;){var d=Cte(l,a,e,c.value);t.push(mte(d,i,o&&o[e],s))}}catch(bfe){f.e(bfe)}finally{f.f()}}return t}(t,s,e,o.isIndexable));xte(t,s)&&(s=mte(s,a,i&&i[t],o));return s}(e,t,n)}))},getOwnPropertyDescriptor:function(t,n){return t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e)},has:function(t,n){return Reflect.has(e,n)},ownKeys:function(){return Reflect.ownKeys(e)},set:function(t,n,r){return e[n]=r,delete t[n],!0}})}function yte(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=e._scriptable,r=void 0===n?t.scriptable:n,a=e._indexable,i=void 0===a?t.indexable:a,o=e._allKeys,s=void 0===o?t.allKeys:o;return{allKeys:s,scriptable:r,indexable:i,isScriptable:k9(r)?r:function(){return r},isIndexable:k9(i)?i:function(){return i}}}var bte=function(e,t){return e?e+b9(t):t},xte=function(e,t){return r9(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object)};function kte(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];var r=n();return e[t]=r,r}function wte(e,t,n){return k9(e)?e(t,n):e}var Ste=function(e,t){return!0===e?t:"string"===typeof e?y9(t,e):void 0};function _te(e,t,n,r,a){var i,o=bC(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=Ste(n,s);if(u){e.add(u);var l=wte(u._fallback,n,a);if(x9(l)&&l!==n&&l!==r)return l}else if(!1===u&&x9(r)&&n!==r)return null}}catch(bfe){o.e(bfe)}finally{o.f()}return!1}function Cte(e,t,n,r){var a=t._rootScopes,i=wte(t._fallback,n,r),o=[].concat(pd(e),pd(a)),s=new Set;s.add(r);var u=Ete(s,o,n,i||n,r);return null!==u&&((!x9(i)||i===n||null!==(u=Ete(s,o,i,u,r)))&&gte(Array.from(s),[""],a,i,(function(){return function(e,t,n){var r=e._getTarget();t in r||(r[t]={});var a=r[t];if(n9(a)&&r9(n))return n;return a}(t,n,r)})))}function Ete(e,t,n,r,a){for(;n;)n=_te(e,t,n,r,a);return n}function Ate(e,t,n,r){var a,i,o=bC(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(a=Ite(bte(s,e),n),x9(a))return xte(e,a)?Cte(n,r,e,a):a}}catch(bfe){o.e(bfe)}finally{o.f()}}function Ite(e,t){var n,r=bC(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a){var i=a[e];if(x9(i))return i}}}catch(bfe){r.e(bfe)}finally{r.f()}}function Tte(e){var t=e._keys;return t||(t=e._keys=function(e){var t,n=new Set,r=bC(e);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o=bC(Object.keys(i).filter((function(e){return!e.startsWith("_")})));try{for(o.s();!(a=o.n()).done;){var s=a.value;n.add(s)}}catch(bfe){o.e(bfe)}finally{o.f()}}}catch(bfe){r.e(bfe)}finally{r.f()}return Array.from(n)}(e._scopes)),t}function Rte(e,t,n,r){var a,i,o,s,u=e.iScale,l=this._parsing.key,c=void 0===l?"r":l,f=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],f[a]={r:u.parse(y9(s,c),o)};return f}var Nte=Number.EPSILON||1e-14,Mte=function(e,t){return t<e.length&&!e[t].skip&&e[t]},Ote=function(e){return"x"===e?"y":"x"};function Pte(e,t,n,r){var a=e.skip?t:e,i=t,o=n.skip?t:n,s=W9(i,a),u=W9(o,i),l=s/(s+u),c=u/(s+u),f=r*(l=isNaN(l)?0:l),d=r*(c=isNaN(c)?0:c);return{previous:{x:i.x-f*(o.x-a.x),y:i.y-f*(o.y-a.y)},next:{x:i.x+d*(o.x-a.x),y:i.y+d*(o.y-a.y)}}}function Fte(e,t,n){for(var r,a,i,o,s,u=e.length,l=Mte(e,0),c=0;c<u-1;++c)s=l,l=Mte(e,c+1),s&&l&&(F9(t[c],0,Nte)?n[c]=n[c+1]=0:(r=n[c]/t[c],a=n[c+1]/t[c],(o=Math.pow(r,2)+Math.pow(a,2))<=9||(i=3/Math.sqrt(o),n[c]=r*i*t[c],n[c+1]=a*i*t[c])))}function Dte(e,t){for(var n,r,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",o=Ote(i),s=e.length,u=Mte(e,0),l=0;l<s;++l)if(r=a,a=u,u=Mte(e,l+1),a){var c=a[i],f=a[o];r&&(n=(c-r[i])/3,a["cp1".concat(i)]=c-n,a["cp1".concat(o)]=f-n*t[l]),u&&(n=(u[i]-c)/3,a["cp2".concat(i)]=c+n,a["cp2".concat(o)]=f+n*t[l])}}function Lte(e,t,n){return Math.max(Math.min(e,n),t)}function zte(e,t,n,r,a){var i,o,s,u;if(t.spanGaps&&(e=e.filter((function(e){return!e.skip}))),"monotone"===t.cubicInterpolationMode)!function(e){var t,n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=Ote(a),o=e.length,s=Array(o).fill(0),u=Array(o),l=Mte(e,0);for(t=0;t<o;++t)if(n=r,r=l,l=Mte(e,t+1),r){if(l){var c=l[a]-r[a];s[t]=0!==c?(l[i]-r[i])/c:0}u[t]=n?l?M9(s[t-1])!==M9(s[t])?0:(s[t-1]+s[t])/2:s[t-1]:s[t]}Fte(e,s,u),Dte(e,u,a)}(e,a);else{var l=r?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)u=Pte(l,s=e[i],e[Math.min(i+1,o-(r?0:1))%o],t.tension),s.cp1x=u.previous.x,s.cp1y=u.previous.y,s.cp2x=u.next.x,s.cp2y=u.next.y,l=s}t.capBezierPoints&&function(e,t){var n,r,a,i,o,s=Gee(e[0],t);for(n=0,r=e.length;n<r;++n)o=i,i=s,s=n<r-1&&Gee(e[n+1],t),i&&(a=e[n],o&&(a.cp1x=Lte(a.cp1x,t.left,t.right),a.cp1y=Lte(a.cp1y,t.top,t.bottom)),s&&(a.cp2x=Lte(a.cp2x,t.left,t.right),a.cp2y=Lte(a.cp2y,t.top,t.bottom)))}(e,n)}function jte(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Bte(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Wte(e,t,n){var r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}var Ute=function(e){return window.getComputedStyle(e,null)};var Vte=["top","right","bottom","left"];function Hte(e,t,n){var r={};n=n?"-"+n:"";for(var a=0;a<4;a++){var i=Vte[a];r[i]=parseFloat(e[t+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Gte(e,t){if("native"in e)return e;var n=t.canvas,r=t.currentDevicePixelRatio,a=Ute(n),i="border-box"===a.boxSizing,o=Hte(a,"padding"),s=Hte(a,"border","width"),u=function(e,t){var n,r,a=e.touches,i=a&&a.length?a[0]:e,o=i.offsetX,s=i.offsetY,u=!1;if(function(e,t,n){return(e>0||t>0)&&(!n||!n.shadowRoot)}(o,s,e.target))n=o,r=s;else{var l=t.getBoundingClientRect();n=i.clientX-l.left,r=i.clientY-l.top,u=!0}return{x:n,y:r,box:u}}(e,n),l=u.x,c=u.y,f=u.box,d=o.left+(f&&s.left),h=o.top+(f&&s.top),p=t.width,v=t.height;return i&&(p-=o.width+s.width,v-=o.height+s.height),{x:Math.round((l-d)/p*n.width/r),y:Math.round((c-h)/v*n.height/r)}}var qte=function(e){return Math.round(10*e)/10};function Xte(e,t,n,r){var a=Ute(e),i=Hte(a,"margin"),o=Wte(a.maxWidth,e,"clientWidth")||E9,s=Wte(a.maxHeight,e,"clientHeight")||E9,u=function(e,t,n){var r,a;if(void 0===t||void 0===n){var i=Bte(e);if(i){var o=i.getBoundingClientRect(),s=Ute(i),u=Hte(s,"border","width"),l=Hte(s,"padding");t=o.width-l.width-u.width,n=o.height-l.height-u.height,r=Wte(s.maxWidth,i,"clientWidth"),a=Wte(s.maxHeight,i,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||E9,maxHeight:a||E9}}(e,t,n),l=u.width,c=u.height;if("content-box"===a.boxSizing){var f=Hte(a,"border","width"),d=Hte(a,"padding");l-=d.width+f.width,c-=d.height+f.height}return l=Math.max(0,l-i.width),c=Math.max(0,r?Math.floor(l/r):c-i.height),l=qte(Math.min(l,o,u.maxWidth)),c=qte(Math.min(c,s,u.maxHeight)),l&&!c&&(c=qte(l/2)),{width:l,height:c}}function Yte(e,t,n){var r=t||1,a=Math.floor(e.height*r),i=Math.floor(e.width*r);e.height=a/r,e.width=i/r;var o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==a||o.width!==i)&&(e.currentDevicePixelRatio=r,o.height=a,o.width=i,e.ctx.setTransform(r,0,0,r,0,0),!0)}var Kte=function(){var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){}return e}();function $te(e,t){var n=function(e,t){return Ute(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Zte(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Qte(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Jte(e,t,n,r){var a={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=Zte(e,a,n),s=Zte(a,i,n),u=Zte(i,t,n),l=Zte(o,s,n),c=Zte(s,u,n);return Zte(l,c,n)}var ene=new Map;function tne(e,t,n){return function(e,t){t=t||{};var n=e+JSON.stringify(t),r=ene.get(n);return r||(r=new Intl.NumberFormat(e,t),ene.set(n,r)),r}(t,n).format(e)}function nne(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}}function rne(e,t){var n,r;"ltr"!==t&&"rtl"!==t||(r=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function ane(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function ine(e){return"angle"===e?{between:H9,compare:U9,normalize:V9}:{between:q9,compare:function(e,t){return e-t},normalize:function(e){return e}}}function one(e){var t=e.start,n=e.end,r=e.count;return{start:t%r,end:n%r,loop:e.loop&&(n-t+1)%r===0,style:e.style}}function sne(e,t,n){if(!n)return[e];for(var r,a,i,o=n.property,s=n.start,u=n.end,l=t.length,c=ine(o),f=c.compare,d=c.between,h=c.normalize,p=function(e,t,n){var r,a,i=n.property,o=n.start,s=n.end,u=ine(i),l=u.between,c=u.normalize,f=t.length,d=e.start,h=e.end,p=e.loop;if(p){for(d+=f,h+=f,r=0,a=f;r<a&&l(c(t[d%f][i]),o,s);++r)d--,h--;d%=f,h%=f}return h<d&&(h+=f),{start:d,end:h,loop:p,style:e.style}}(e,t,n),v=p.start,g=p.end,m=p.loop,y=p.style,b=[],x=!1,k=null,w=function(){return x||d(s,i,r)&&0!==f(s,i)},S=function(){return!x||0===f(u,r)||d(u,i,r)},_=v,C=v;_<=g;++_)(a=t[_%l]).skip||(r=h(a[o]))!==i&&(x=d(r,s,u),null===k&&w()&&(k=0===f(r,s)?_:C),null!==k&&S()&&(b.push(one({start:k,end:_,loop:m,count:l,style:y})),k=null),C=_,i=r);return null!==k&&b.push(one({start:k,end:g,loop:m,count:l,style:y})),b}function une(e,t){for(var n=[],r=e.segments,a=0;a<r.length;a++){var i=sne(r[a],e.points,t);i.length&&n.push.apply(n,pd(i))}return n}function lne(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){var a=e._chart.getContext(),i=cne(e.options),o=e._datasetIndex,s=e.options.spanGaps,u=n.length,l=[],c=i,f=t[0].start,d=f;function h(e,t,r,a){var i=s?-1:1;if(e!==t){for(e+=u;n[e%u].skip;)e-=i;for(;n[t%u].skip;)t+=i;e%u!==t%u&&(l.push({start:e%u,end:t%u,loop:r,style:a}),c=a,f=t%u)}}var p,v=bC(t);try{for(v.s();!(p=v.n()).done;){var g=p.value;f=s?f:g.start;var m=n[f%u],y=void 0;for(d=f+1;d<=g.end;d++){var b=n[d%u];fne(y=cne(r.setContext(lte(a,{type:"segment",p0:m,p1:b,p0DataIndex:(d-1)%u,p1DataIndex:d%u,datasetIndex:o}))),c)&&h(f,d-1,g.loop,c),m=b,c=y}f<d-1&&h(f,d-1,g.loop,c)}}catch(bfe){v.e(bfe)}finally{v.f()}return l}(e,t,n,r):t}function cne(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function fne(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var dne=function(){function e(){gC(this,e),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}return yC(e,[{key:"_notify",value:function(e,t,n,r){var a=t.listeners[r],i=t.duration;a.forEach((function(r){return r({chart:e,initial:t.initial,numSteps:i,currentStep:Math.min(n-t.start,i)})}))}},{key:"_refresh",value:function(){var e=this;this._request||(this._running=!0,this._request=K7.call(window,(function(){e._update(),e._request=null,e._running&&e._refresh()})))}},{key:"_update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach((function(r,a){if(r.running&&r.items.length){for(var i,o=r.items,s=o.length-1,u=!1;s>=0;--s)(i=o[s])._active?(i._total>r.duration&&(r.duration=i._total),i.tick(t),u=!0):(o[s]=o[o.length-1],o.pop());u&&(a.draw(),e._notify(a,r,t,"progress")),o.length||(r.running=!1,e._notify(a,r,t,"complete"),r.initial=!1),n+=o.length}})),this._lastDate=t,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(e){var t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}},{key:"listen",value:function(e,t,n){this._getAnims(e).listeners[t].push(n)}},{key:"add",value:function(e,t){var n;t&&t.length&&(n=this._getAnims(e).items).push.apply(n,pd(t))}},{key:"has",value:function(e){return this._getAnims(e).items.length>0}},{key:"start",value:function(e){var t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((function(e,t){return Math.max(e,t._duration)}),0),this._refresh())}},{key:"running",value:function(e){if(!this._running)return!1;var t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}},{key:"stop",value:function(e){var t=this._charts.get(e);if(t&&t.items.length){for(var n=t.items,r=n.length-1;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}}},{key:"remove",value:function(e){return this._charts.delete(e)}}]),e}(),hne=new dne,pne="transparent",vne={boolean:function(e,t,n){return n>.5?t:e},color:function(e,t,n){var r=Mee(e||pne),a=r.valid&&Mee(t||pne);return a&&a.valid?a.mix(r,n).hexString():t},number:function(e,t,n){return e+(t-e)*n}},gne=function(){function e(t,n,r,a){gC(this,e);var i=n[r];a=ute([t.to,a,i,t.from]);var o=ute([t.from,i,a]);this._active=!0,this._fn=t.fn||vne[t.type||typeof o],this._easing=$9[t.easing]||$9.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=a,this._promises=void 0}return yC(e,[{key:"active",value:function(){return this._active}},{key:"update",value:function(e,t,n){if(this._active){this._notify(!1);var r=this._target[this._prop],a=n-this._start,i=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=ute([e.to,t,r,e.from]),this._from=ute([e.from,r,t])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(e){var t,n=e-this._start,r=this._duration,a=this._prop,i=this._from,o=this._loop,s=this._to;if(this._active=i!==s&&(o||n<r),!this._active)return this._target[a]=s,void this._notify(!0);n<0?this._target[a]=i:(t=n/r%2,t=o&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[a]=this._fn(i,s,t))}},{key:"wait",value:function(){var e=this._promises||(this._promises=[]);return new Promise((function(t,n){e.push({res:t,rej:n})}))}},{key:"_notify",value:function(e){for(var t=e?"res":"rej",n=this._promises||[],r=0;r<n.length;r++)n[r][t]()}}]),e}();jee.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var mne=Object.keys(jee.animation);jee.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(e){return"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}}),jee.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),jee.describe("animations",{_fallback:"animation"}),jee.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(e){return 0|e}}}}});var yne=function(){function e(t,n){gC(this,e),this._chart=t,this._properties=new Map,this.configure(n)}return yC(e,[{key:"configure",value:function(e){if(r9(e)){var t=this._properties;Object.getOwnPropertyNames(e).forEach((function(n){var r=e[n];if(r9(r)){var a,i={},o=bC(mne);try{for(o.s();!(a=o.n()).done;){var s=a.value;i[s]=r[s]}}catch(bfe){o.e(bfe)}finally{o.f()}(n9(r.properties)&&r.properties||[n]).forEach((function(e){e!==n&&t.has(e)||t.set(e,i)}))}}))}}},{key:"_animateOptions",value:function(e,t){var n=t.options,r=function(e,t){if(!t)return;var n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];var a=this._createAnimations(r,n);return n.$shared&&function(e,t){for(var n=[],r=Object.keys(t),a=0;a<r.length;a++){var i=e[r[a]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(e.options.$animations,n).then((function(){e.options=n}),(function(){})),a}},{key:"_createAnimations",value:function(e,t){var n,r=this._properties,a=[],i=e.$animations||(e.$animations={}),o=Object.keys(t),s=Date.now();for(n=o.length-1;n>=0;--n){var u=o[n];if("$"!==u.charAt(0))if("options"!==u){var l=t[u],c=i[u],f=r.get(u);if(c){if(f&&c.active()){c.update(f,l,s);continue}c.cancel()}f&&f.duration?(i[u]=c=new gne(f,e,u,l),a.push(c)):e[u]=l}else a.push.apply(a,pd(this._animateOptions(e,t)))}return a}},{key:"update",value:function(e,t){if(0!==this._properties.size){var n=this._createAnimations(e,t);return n.length?(hne.add(this._chart,n),!0):void 0}Object.assign(e,t)}}]),e}();function bne(e,t){var n=e&&e.options||{},r=n.reverse,a=void 0===n.min?t:0,i=void 0===n.max?t:0;return{start:r?i:a,end:r?a:i}}function xne(e,t){var n,r,a=[],i=e._getSortedDatasetMetas(t);for(n=0,r=i.length;n<r;++n)a.push(i[n].index);return a}function kne(e,t,n){var r,a,i,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=e.keys,l="single"===s.mode;if(null!==t){for(r=0,a=u.length;r<a;++r){if((i=+u[r])===n){if(s.all)continue;break}o=e.values[i],a9(o)&&(l||0===t||M9(t)===M9(o))&&(t+=o)}return t}}function wne(e,t){var n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Sne(e,t,n){var r=e[t]||(e[t]={});return r[n]||(r[n]={})}function _ne(e,t,n,r){var a,i=bC(t.getMatchingVisibleMetas(r).reverse());try{for(i.s();!(a=i.n()).done;){var o=a.value,s=e[o.index];if(n&&s>0||!n&&s<0)return o.index}}catch(bfe){i.e(bfe)}finally{i.f()}return null}function Cne(e,t){for(var n,r=e.chart,a=e._cachedMeta,i=r._stacks||(r._stacks={}),o=a.iScale,s=a.vScale,u=a.index,l=o.axis,c=s.axis,f=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(o,s,a),d=t.length,h=0;h<d;++h){var p=t[h],v=p[l],g=p[c];(n=(p._stacks||(p._stacks={}))[c]=Sne(i,f,v))[u]=g,n._top=_ne(n,s,!0,a.type),n._bottom=_ne(n,s,!1,a.type)}}function Ene(e,t){var n=e.scales;return Object.keys(n).filter((function(e){return n[e].axis===t})).shift()}function Ane(e,t){var n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){var a,i=bC(t=t||e._parsed);try{for(i.s();!(a=i.n()).done;){var o=a.value._stacks;if(!o||void 0===o[r]||void 0===o[r][n])return;delete o[r][n]}}catch(bfe){i.e(bfe)}finally{i.f()}}}var Ine=function(e){return"reset"===e||"none"===e},Tne=function(e,t){return t?e:Object.assign({},e)},Rne=function(){function e(t,n){gC(this,e),this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}return yC(e,[{key:"initialize",value:function(){var e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=wne(e.vScale,e),this.addElements()}},{key:"updateIndex",value:function(e){this.index!==e&&Ane(this._cachedMeta),this.index=e}},{key:"linkScales",value:function(){var e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=function(e,t,n,r){return"x"===e?t:"r"===e?r:n},a=t.xAxisID=o9(n.xAxisID,Ene(e,"x")),i=t.yAxisID=o9(n.yAxisID,Ene(e,"y")),o=t.rAxisID=o9(n.rAxisID,Ene(e,"r")),s=t.indexAxis,u=t.iAxisID=r(s,a,i,o),l=t.vAxisID=r(s,i,a,o);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(l)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(e){return this.chart.scales[e]}},{key:"_getOtherScale",value:function(e){var t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var e=this._cachedMeta;this._data&&pte(this._data,this),e._stacked&&Ane(e)}},{key:"_dataCheck",value:function(){var e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(r9(t))this._data=function(e){var t,n,r,a=Object.keys(e),i=new Array(a.length);for(t=0,n=a.length;t<n;++t)r=a[t],i[t]={x:r,y:e[r]};return i}(t);else if(n!==t){if(n){pte(n,this);var r=this._cachedMeta;Ane(r),r._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),hte.forEach((function(t){var n="_onData"+b9(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];var o=r.apply(this,a);return e._chartjs.listeners.forEach((function(e){"function"===typeof e[n]&&e[n].apply(e,a)})),o}})})))}(t,this),this._syncList=[],this._data=t}}},{key:"addElements",value:function(){var e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(e){var t=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();var a=t._stacked;t._stacked=wne(t.vScale,t),t.stack!==n.stack&&(r=!0,Ane(t),t.stack=n.stack),this._resyncElements(e),(r||a!==t._stacked)&&Cne(this,t._parsed)}},{key:"configure",value:function(){var e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(e,t){var n,r,a,i=this._cachedMeta,o=this._data,s=i.iScale,u=i._stacked,l=s.axis,c=0===e&&t===o.length||i._sorted,f=e>0&&i._parsed[e-1];if(!1===this._parsing)i._parsed=o,i._sorted=!0,a=o;else{a=n9(o[e])?this.parseArrayData(i,o,e,t):r9(o[e])?this.parseObjectData(i,o,e,t):this.parsePrimitiveData(i,o,e,t);for(n=0;n<t;++n)i._parsed[n+e]=r=a[n],c&&((null===r[l]||f&&r[l]<f[l])&&(c=!1),f=r);i._sorted=c}u&&Cne(this,a)}},{key:"parsePrimitiveData",value:function(e,t,n,r){var a,i,o,s=e.iScale,u=e.vScale,l=s.axis,c=u.axis,f=s.getLabels(),d=s===u,h=new Array(r);for(a=0,i=r;a<i;++a){var p;o=a+n,h[a]=(Gf(p={},l,d||s.parse(f[o],o)),Gf(p,c,u.parse(t[o],o)),p)}return h}},{key:"parseArrayData",value:function(e,t,n,r){var a,i,o,s,u=e.xScale,l=e.yScale,c=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],c[a]={x:u.parse(s[0],o),y:l.parse(s[1],o)};return c}},{key:"parseObjectData",value:function(e,t,n,r){var a,i,o,s,u=e.xScale,l=e.yScale,c=this._parsing,f=c.xAxisKey,d=void 0===f?"x":f,h=c.yAxisKey,p=void 0===h?"y":h,v=new Array(r);for(a=0,i=r;a<i;++a)s=t[o=a+n],v[a]={x:u.parse(y9(s,d),o),y:l.parse(y9(s,p),o)};return v}},{key:"getParsed",value:function(e){return this._cachedMeta._parsed[e]}},{key:"getDataElement",value:function(e){return this._cachedMeta.data[e]}},{key:"applyStack",value:function(e,t,n){var r=this.chart,a=this._cachedMeta,i=t[e.axis];return kne({keys:xne(r,!0),values:t._stacks[e.axis]},i,a.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(e,t,n,r){var a=n[t.axis],i=null===a?NaN:a,o=r&&n._stacks[t.axis];r&&o&&(r.values=o,i=kne(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,i),e.max=Math.max(e.max,i)}},{key:"getMinMax",value:function(e,t){var n,r,a=this._cachedMeta,i=a._parsed,o=a._sorted&&e===a.iScale,s=i.length,u=this._getOtherScale(e),l=function(e,t,n){return e&&!t.hidden&&t._stacked&&{keys:xne(n,!0),values:null}}(t,a,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},f=function(e){var t=e.getUserBounds(),n=t.min,r=t.max,a=t.minDefined,i=t.maxDefined;return{min:a?n:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}(u),d=f.min,h=f.max;function p(){var t=(r=i[n])[u.axis];return!a9(r[e.axis])||d>t||h<t}for(n=0;n<s&&(p()||(this.updateRangeFromParsed(c,e,r,l),!o));++n);if(o)for(n=s-1;n>=0;--n)if(!p()){this.updateRangeFromParsed(c,e,r,l);break}return c}},{key:"getAllParsedValues",value:function(e){var t,n,r,a=this._cachedMeta._parsed,i=[];for(t=0,n=a.length;t<n;++t)r=a[t][e.axis],a9(r)&&i.push(r);return i}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}},{key:"_update",value:function(e){var t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){var t,n,r,a;return r9(e)?(t=e.top,n=e.right,r=e.bottom,a=e.left):t=n=r=a=e,{top:t,right:n,bottom:r,left:a,disabled:!1===e}}(o9(this.options.clip,function(e,t,n){if(!1===n)return!1;var r=bne(e,n),a=bne(t,n);return{top:a.end,right:r.end,bottom:a.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}},{key:"update",value:function(e){}},{key:"draw",value:function(){var e,t=this._ctx,n=this.chart,r=this._cachedMeta,a=r.data||[],i=n.chartArea,o=[],s=this._drawStart||0,u=this._drawCount||a.length-s,l=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(t,i,s,u),e=s;e<s+u;++e){var c=a[e];c.hidden||(c.active&&l?o.push(c):c.draw(t,i))}for(e=0;e<o.length;++e)o[e].draw(t,i)}},{key:"getStyle",value:function(e,t){var n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}},{key:"getContext",value:function(e,t,n){var r,a=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){var i=this._cachedMeta.data[e];r=i.$context||(i.$context=function(e,t,n){return lte(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,i)),r.parsed=this.getParsed(e),r.raw=a.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return lte(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}},{key:"resolveDatasetElementOptions",value:function(e){return this._resolveElementOptions(this.datasetElementType.id,e)}},{key:"resolveDataElementOptions",value:function(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}},{key:"_resolveElementOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0,a="active"===n,i=this._cachedDataOpts,o=e+"-"+n,s=i[o],u=this.enableOptionSharing&&x9(r);if(s)return Tne(s,u);var l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),f=a?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(jee.elements[e]),p=function(){return t.getContext(r,a)},v=l.resolveNamedOptions(d,h,p,f);return v.$shared&&(v.$shared=u,i[o]=Object.freeze(Tne(v,u))),v}},{key:"_resolveAnimations",value:function(e,t,n){var r,a=this.chart,i=this._cachedDataOpts,o="animation-".concat(t),s=i[o];if(s)return s;if(!1!==a.options.animation){var u=this.chart.config,l=u.datasetAnimationScopeKeys(this._type,t),c=u.getOptionScopes(this.getDataset(),l);r=u.createResolver(c,this.getContext(e,n,t))}var f=new yne(a,r&&r.animations);return r&&r._cacheable&&(i[o]=Object.freeze(f)),f}},{key:"getSharedOptions",value:function(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}},{key:"includeOptions",value:function(e,t){return!t||Ine(e)||this.chart._animationsDisabled}},{key:"updateElement",value:function(e,t,n,r){Ine(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}},{key:"updateSharedOptions",value:function(e,t,n){e&&!Ine(t)&&this._resolveAnimations(void 0,t).update(e,n)}},{key:"_setStyle",value:function(e,t,n,r){e.active=r;var a=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}},{key:"removeHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!1)}},{key:"setHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}},{key:"_resyncElements",value:function(e){var t,n=this._data,r=this._cachedMeta.data,a=bC(this._syncList);try{for(a.s();!(t=a.n()).done;){var i=Pf(t.value,3),o=i[0],s=i[1],u=i[2];this[o](s,u)}}catch(bfe){a.e(bfe)}finally{a.f()}this._syncList=[];var l=r.length,c=n.length,f=Math.min(c,l);f&&this.parse(0,f),c>l?this._insertElements(l,c-l,e):c<l&&this._removeElements(c,l-c)}},{key:"_insertElements",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this._cachedMeta,i=a.data,o=e+t,s=function(e){for(e.length+=t,n=e.length-1;n>=o;n--)e[n]=e[n-t]};for(s(i),n=e;n<o;++n)i[n]=new this.dataElementType;this._parsing&&s(a._parsed),this.parse(e,t),r&&this.updateElements(i,e,t,"reset")}},{key:"updateElements",value:function(e,t,n,r){}},{key:"_removeElements",value:function(e,t){var n=this._cachedMeta;if(this._parsing){var r=n._parsed.splice(e,t);n._stacked&&Ane(n,r)}n.data.splice(e,t)}},{key:"_sync",value:function(e){if(this._parsing)this._syncList.push(e);else{var t=Pf(e,3),n=t[0],r=t[1],a=t[2];this[n](r,a)}this.chart._dataChanges.push([this.index].concat(pd(e)))}},{key:"_onDataPush",value:function(){var e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(e,t){t&&this._sync(["_removeElements",e,t]);var n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}]),e}();function Nne(e){var t,n,r,a,i=e.iScale,o=function(e,t){if(!e._cache.$bar){for(var n=e.getMatchingVisibleMetas(t),r=[],a=0,i=n.length;a<i;a++)r=r.concat(n[a].controller.getAllParsedValues(e));e._cache.$bar=vte(r.sort((function(e,t){return e-t})))}return e._cache.$bar}(i,e.type),s=i._length,u=function(){32767!==r&&-32768!==r&&(x9(a)&&(s=Math.min(s,Math.abs(r-a)||s)),a=r)};for(t=0,n=o.length;t<n;++t)r=i.getPixelForValue(o[t]),u();for(a=void 0,t=0,n=i.ticks.length;t<n;++t)r=i.getPixelForTick(t),u();return s}function Mne(e,t,n,r){return n9(e)?function(e,t,n,r){var a=n.parse(e[0],r),i=n.parse(e[1],r),o=Math.min(a,i),s=Math.max(a,i),u=o,l=s;Math.abs(o)>Math.abs(s)&&(u=s,l=o),t[n.axis]=l,t._custom={barStart:u,barEnd:l,start:a,end:i,min:o,max:s}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function One(e,t,n,r){var a,i,o,s,u=e.iScale,l=e.vScale,c=u.getLabels(),f=u===l,d=[];for(a=n,i=n+r;a<i;++a)s=t[a],(o={})[u.axis]=f||u.parse(c[a],a),d.push(Mne(s,o,l,a));return d}function Pne(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Fne(e,t,n,r){var a=t.borderSkipped,i={};if(a){var o=function(e){var t,n,r,a,i;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(a="end",i="start"):(a="start",i="end"),{start:n,end:r,reverse:t,top:a,bottom:i}}(e),s=o.start,u=o.end,l=o.reverse,c=o.top,f=o.bottom;"middle"===a&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?a=c:(n._bottom||0)===r?a=f:(i[Dne(f,s,u,l)]=!0,a=c)),i[Dne(a,s,u,l)]=!0,e.borderSkipped=i}else e.borderSkipped=i}function Dne(e,t,n,r){var a,i,o;return r?(o=n,e=Lne(e=(a=e)===(i=t)?o:a===o?i:a,n,t)):e=Lne(e,t,n),e}function Lne(e,t,n){return"start"===e?t:"end"===e?n:e}function zne(e,t,n){var r=t.inflateAmount;e.inflateAmount="auto"===r?1===n?.33:0:r}Rne.defaults={},Rne.prototype.datasetElementType=null,Rne.prototype.dataElementType=null;var jne=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"parsePrimitiveData",value:function(e,t,n,r){return One(e,t,n,r)}},{key:"parseArrayData",value:function(e,t,n,r){return One(e,t,n,r)}},{key:"parseObjectData",value:function(e,t,n,r){var a,i,o,s,u=e.iScale,l=e.vScale,c=this._parsing,f=c.xAxisKey,d=void 0===f?"x":f,h=c.yAxisKey,p=void 0===h?"y":h,v="x"===u.axis?d:p,g="x"===l.axis?d:p,m=[];for(a=n,i=n+r;a<i;++a)s=t[a],(o={})[u.axis]=u.parse(y9(s,v),a),m.push(Mne(y9(s,g),o,l,a));return m}},{key:"updateRangeFromParsed",value:function(e,t,r,a){UU(nR(n.prototype),"updateRangeFromParsed",this).call(this,e,t,r,a);var i=r._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e),i=a._custom,o=Pne(i)?"["+i.start+", "+i.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:o}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,UU(nR(n.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(e){var t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}},{key:"updateElements",value:function(e,t,n,r){var a="reset"===r,i=this.index,o=this._cachedMeta.vScale,s=o.getBasePixel(),u=o.isHorizontal(),l=this._getRuler(),c=this.resolveDataElementOptions(t,r),f=this.getSharedOptions(c),d=this.includeOptions(r,f);this.updateSharedOptions(f,r,c);for(var h=t;h<t+n;h++){var p=this.getParsed(h),v=a||t9(p[o.axis])?{base:s,head:s}:this._calculateBarValuePixels(h),g=this._calculateBarIndexPixels(h,l),m=(p._stacks||{})[o.axis],y={horizontal:u,base:v.base,enableBorderRadius:!m||Pne(p._custom)||i===m._top||i===m._bottom,x:u?v.head:g.center,y:u?g.center:v.head,height:u?g.size:Math.abs(v.size),width:u?Math.abs(v.size):g.size};d&&(y.options=f||this.resolveDataElementOptions(h,e[h].active?"active":r));var b=y.options||e[h].options;Fne(y,b,m,i),zne(y,b,l.ratio),this.updateElement(e[h],h,y,r)}}},{key:"_getStacks",value:function(e,t){var n,r,a=this._cachedMeta.iScale,i=a.getMatchingVisibleMetas(this._type),o=a.options.stacked,s=i.length,u=[];for(n=0;n<s;++n)if((r=i[n]).controller.options.grouped){if("undefined"!==typeof t){var l=r.controller.getParsed(t)[r.controller._cachedMeta.vScale.axis];if(t9(l)||isNaN(l))continue}if((!1===o||-1===u.indexOf(r.stack)||void 0===o&&void 0===r.stack)&&u.push(r.stack),r.index===e)break}return u.length||u.push(void 0),u}},{key:"_getStackCount",value:function(e){return this._getStacks(void 0,e).length}},{key:"_getStackIndex",value:function(e,t,n){var r=this._getStacks(e,n),a=void 0!==t?r.indexOf(t):-1;return-1===a?r.length-1:a}},{key:"_getRuler",value:function(){var e,t,n=this.options,r=this._cachedMeta,a=r.iScale,i=[];for(e=0,t=r.data.length;e<t;++e)i.push(a.getPixelForValue(this.getParsed(e)[a.axis],e));var o=n.barThickness;return{min:o||Nne(r),pixels:i,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:n.grouped,ratio:o?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(e){var t,n,r=this._cachedMeta,a=r.vScale,i=r._stacked,o=this.options,s=o.base,u=o.minBarLength,l=s||0,c=this.getParsed(e),f=c._custom,d=Pne(f),h=c[a.axis],p=0,v=i?this.applyStack(a,c,i):h;v!==h&&(p=v-h,v=h),d&&(h=f.barStart,v=f.barEnd-f.barStart,0!==h&&M9(h)!==M9(f.barEnd)&&(p=0),p+=h);var g=t9(s)||d?p:s,m=a.getPixelForValue(g);if(n=(t=this.chart.getDataVisibility(e)?a.getPixelForValue(p+v):m)-m,Math.abs(n)<u){n=function(e,t,n){return 0!==e?M9(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(n,a,l)*u,h===l&&(m-=n/2);var y=a.getPixelForDecimal(0),b=a.getPixelForDecimal(1),x=Math.min(y,b),k=Math.max(y,b);t=(m=Math.max(Math.min(m,k),x))+n}if(m===a.getPixelForValue(l)){var w=M9(n)*a.getLineWidthForValue(l)/2;m+=w,n-=w}return{size:n,base:m,head:t,center:t+n/2}}},{key:"_calculateBarIndexPixels",value:function(e,t){var n,r,a=t.scale,i=this.options,o=i.skipNull,s=o9(i.maxBarThickness,1/0);if(t.grouped){var u=o?this._getStackCount(e):t.stackCount,l="flex"===i.barThickness?function(e,t,n,r){var a=t.pixels,i=a[e],o=e>0?a[e-1]:null,s=e<a.length-1?a[e+1]:null,u=n.categoryPercentage;null===o&&(o=i-(null===s?t.end-t.start:s-i)),null===s&&(s=i+i-o);var l=i-(i-Math.min(o,s))/2*u;return{chunk:Math.abs(s-o)/2*u/r,ratio:n.barPercentage,start:l}}(e,t,i,u):function(e,t,n,r){var a,i,o=n.barThickness;return t9(o)?(a=t.min*n.categoryPercentage,i=n.barPercentage):(a=o*r,i=1),{chunk:a/r,ratio:i,start:t.pixels[e]-a/2}}(e,t,i,u),c=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);n=l.start+l.chunk*c+l.chunk/2,r=Math.min(s,l.chunk*l.ratio)}else n=a.getPixelForValue(this.getParsed(e)[a.axis],e),r=Math.min(s,t.min*t.ratio);return{base:n-r/2,head:n+r/2,center:n,size:r}}},{key:"draw",value:function(){for(var e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length,a=0;a<r;++a)null!==this.getParsed(a)[t.axis]&&n[a].draw(this._ctx)}}]),n}(Rne);jne.id="bar",jne.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},jne.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};var Bne=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,UU(nR(n.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(e,t,r,a){for(var i=UU(nR(n.prototype),"parsePrimitiveData",this).call(this,e,t,r,a),o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+r).radius;return i}},{key:"parseArrayData",value:function(e,t,r,a){for(var i=UU(nR(n.prototype),"parseArrayData",this).call(this,e,t,r,a),o=0;o<i.length;o++){var s=t[r+o];i[o]._custom=o9(s[2],this.resolveDataElementOptions(o+r).radius)}return i}},{key:"parseObjectData",value:function(e,t,r,a){for(var i=UU(nR(n.prototype),"parseObjectData",this).call(this,e,t,r,a),o=0;o<i.length;o++){var s=t[r+o];i[o]._custom=o9(s&&s.r&&+s.r,this.resolveDataElementOptions(o+r).radius)}return i}},{key:"getMaxOverflow",value:function(){for(var e=this._cachedMeta.data,t=0,n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.xScale,r=t.yScale,a=this.getParsed(e),i=n.getLabelForValue(a.x),o=r.getLabelForValue(a.y),s=a._custom;return{label:t.label,value:"("+i+", "+o+(s?", "+s:"")+")"}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this._cachedMeta,o=i.iScale,s=i.vScale,u=this.resolveDataElementOptions(t,r),l=this.getSharedOptions(u),c=this.includeOptions(r,l),f=o.axis,d=s.axis,h=t;h<t+n;h++){var p=e[h],v=!a&&this.getParsed(h),g={},m=g[f]=a?o.getPixelForDecimal(.5):o.getPixelForValue(v[f]),y=g[d]=a?s.getBasePixel():s.getPixelForValue(v[d]);g.skip=isNaN(m)||isNaN(y),c&&(g.options=this.resolveDataElementOptions(h,p.active?"active":r),a&&(g.options.radius=0)),this.updateElement(p,h,g,r)}this.updateSharedOptions(l,r,u)}},{key:"resolveDataElementOptions",value:function(e,t){var r=this.getParsed(e),a=UU(nR(n.prototype),"resolveDataElementOptions",this).call(this,e,t);a.$shared&&(a=Object.assign({},a,{$shared:!1}));var i=a.radius;return"active"!==t&&(a.radius=0),a.radius+=o9(r&&r._custom,i),a}}]),n}(Rne);Bne.id="bubble",Bne.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Bne.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:function(){return""}}}}};var Wne=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this,e,r)).enableOptionSharing=!0,a.innerRadius=void 0,a.outerRadius=void 0,a.offsetX=void 0,a.offsetY=void 0,a}return yC(n,[{key:"linkScales",value:function(){}},{key:"parse",value:function(e,t){var n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{var a,i,o=function(e){return+n[e]};if(r9(n[e])){var s=this._parsing.key,u=void 0===s?"value":s;o=function(e){return+y9(n[e],u)}}for(a=e,i=e+t;a<i;++a)r._parsed[a]=o(a)}}},{key:"_getRotation",value:function(){return L9(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return L9(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var e=_9,t=-_9,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){var r=this.chart.getDatasetMeta(n).controller,a=r._getRotation(),i=r._getCircumference();e=Math.min(e,a),t=Math.max(t,a+i)}return{rotation:e,circumference:t-e}}},{key:"update",value:function(e){var t,n,r=this.chart.chartArea,a=this._cachedMeta,i=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(r.width,r.height)-o)/2,0),u=Math.min((t=this.options.cutout,n=s,"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:t/n),1),l=this._getRingWeight(this.index),c=this._getRotationExtents(),f=c.circumference,d=function(e,t,n){var r=1,a=1,i=0,o=0;if(t<_9){var s=e,u=s+t,l=Math.cos(s),c=Math.sin(s),f=Math.cos(u),d=Math.sin(u),h=function(e,t,r){return H9(e,s,u,!0)?1:Math.max(t,t*n,r,r*n)},p=function(e,t,r){return H9(e,s,u,!0)?-1:Math.min(t,t*n,r,r*n)},v=h(0,l,f),g=h(I9,c,d),m=p(S9,l,f),y=p(S9+I9,c,d);r=(v-m)/2,a=(g-y)/2,i=-(v+m)/2,o=-(g+y)/2}return{ratioX:r,ratioY:a,offsetX:i,offsetY:o}}(c.rotation,f,u),h=d.ratioX,p=d.ratioY,v=d.offsetX,g=d.offsetY,m=(r.width-o)/h,y=(r.height-o)/p,b=Math.max(Math.min(m,y)/2,0),x=s9(this.options.radius,b),k=(x-Math.max(x*u,0))/this._getVisibleDatasetWeightTotal();this.offsetX=v*x,this.offsetY=g*x,a.total=this.calculateTotal(),this.outerRadius=x-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*l,0),this.updateElements(i,0,i.length,e)}},{key:"_circumference",value:function(e,t){var n=this.options,r=this._cachedMeta,a=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/_9)}},{key:"updateElements",value:function(e,t,n,r){var a,i="reset"===r,o=this.chart,s=o.chartArea,u=o.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,f=i&&u.animateScale,d=f?0:this.innerRadius,h=f?0:this.outerRadius,p=this.resolveDataElementOptions(t,r),v=this.getSharedOptions(p),g=this.includeOptions(r,v),m=this._getRotation();for(a=0;a<t;++a)m+=this._circumference(a,i);for(a=t;a<t+n;++a){var y=this._circumference(a,i),b=e[a],x={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+y,circumference:y,outerRadius:h,innerRadius:d};g&&(x.options=v||this.resolveDataElementOptions(a,b.active?"active":r)),m+=y,this.updateElement(b,a,x,r)}this.updateSharedOptions(v,r,p)}},{key:"calculateTotal",value:function(){var e,t=this._cachedMeta,n=t.data,r=0;for(e=0;e<n.length;e++){var a=t._parsed[e];null===a||isNaN(a)||!this.chart.getDataVisibility(e)||n[e].hidden||(r+=Math.abs(a))}return r}},{key:"calculateCircumference",value:function(e){var t=this._cachedMeta.total;return t>0&&!isNaN(e)?_9*(Math.abs(e)/t):0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=tne(t._parsed[e],n.options.locale);return{label:r[e]||"",value:a}}},{key:"getMaxBorderWidth",value:function(e){var t,n,r,a,i,o=0,s=this.chart;if(!e)for(t=0,n=s.data.datasets.length;t<n;++t)if(s.isDatasetVisible(t)){e=(r=s.getDatasetMeta(t)).data,a=r.controller;break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)"inner"!==(i=a.resolveDataElementOptions(t)).borderAlign&&(o=Math.max(o,i.borderWidth||0,i.hoverBorderWidth||0));return o}},{key:"getMaxOffset",value:function(e){for(var t=0,n=0,r=e.length;n<r;++n){var a=this.resolveDataElementOptions(n);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}},{key:"_getRingWeightOffset",value:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}},{key:"_getRingWeight",value:function(e){return Math.max(o9(this.chart.data.datasets[e].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}]),n}(Rne);Wne.id="doughnut",Wne.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Wne.descriptors={_scriptable:function(e){return"spacing"!==e},_indexable:function(e){return"spacing"!==e}},Wne.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,r){var a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){var t=e.label,n=": "+e.formattedValue;return n9(t)?(t=t.slice())[0]+=n:t+=n,t}}}}};var Une=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,UU(nR(n.prototype),"initialize",this).call(this)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data,a=void 0===r?[]:r,i=t._dataset,o=this.chart._animationsDisabled,s=function(e,t,n){var r=t.length,a=0,i=r;if(e._sorted){var o=e.iScale,s=e._parsed,u=o.axis,l=o.getUserBounds(),c=l.min,f=l.max,d=l.minDefined,h=l.maxDefined;d&&(a=G9(Math.min(fte(s,o.axis,c).lo,n?r:fte(t,u,o.getPixelForValue(c)).lo),0,r-1)),i=h?G9(Math.max(fte(s,o.axis,f).hi+1,n?0:fte(t,u,o.getPixelForValue(f)).hi+1),a,r)-a:r-a}return{start:a,count:i}}(t,a,o),u=s.start,l=s.count;this._drawStart=u,this._drawCount=l,function(e){var t=e.xScale,n=e.yScale,r=e._scaleRanges,a={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=a,!0;var i=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,a),i}(t)&&(u=0,l=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;var c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},e),this.updateElements(a,u,l,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a="reset"===r,i=this._cachedMeta,o=i.iScale,s=i.vScale,u=i._stacked,l=i._dataset,c=this.resolveDataElementOptions(t,r),f=this.getSharedOptions(c),d=this.includeOptions(r,f),h=o.axis,p=s.axis,v=this.options,g=v.spanGaps,m=v.segment,y=P9(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||a||"none"===r,x=t>0&&this.getParsed(t-1),k=t;k<t+n;++k){var w=e[k],S=this.getParsed(k),_=b?w:{},C=t9(S[p]),E=_[h]=o.getPixelForValue(S[h],k),A=_[p]=a||C?s.getBasePixel():s.getPixelForValue(u?this.applyStack(s,S,u):S[p],k);_.skip=isNaN(E)||isNaN(A)||C,_.stop=k>0&&Math.abs(S[h]-x[h])>y,m&&(_.parsed=S,_.raw=l.data[k]),d&&(_.options=f||this.resolveDataElementOptions(k,w.active?"active":r)),b||this.updateElement(w,k,_,r),x=S}this.updateSharedOptions(f,r,c)}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;var a=r[0].size(this.resolveDataElementOptions(0)),i=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,a,i)/2}},{key:"draw",value:function(){var e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),UU(nR(n.prototype),"draw",this).call(this)}}]),n}(Rne);Une.id="line",Une.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Une.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};var Vne=function(e){tR(n,e);var t=oR(n);function n(e,r){var a;return gC(this,n),(a=t.call(this,e,r)).innerRadius=void 0,a.outerRadius=void 0,a}return yC(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=tne(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:a}}},{key:"parseObjectData",value:function(e,t,n,r){return Rte.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}},{key:"getMinMax",value:function(){var e=this,t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((function(t,r){var a=e.getParsed(r).r;!isNaN(a)&&e.chart.getDataVisibility(r)&&(a<n.min&&(n.min=a),a>n.max&&(n.max=a))})),n}},{key:"_updateRadius",value:function(){var e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(r/2,0),i=(a-Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=a-i*this.index,this.innerRadius=this.outerRadius-i}},{key:"updateElements",value:function(e,t,n,r){var a,i="reset"===r,o=this.chart,s=o.options.animation,u=this._cachedMeta.rScale,l=u.xCenter,c=u.yCenter,f=u.getIndexAngle(0)-.5*S9,d=f,h=360/this.countVisibleElements();for(a=0;a<t;++a)d+=this._computeAngle(a,r,h);for(a=t;a<t+n;a++){var p=e[a],v=d,g=d+this._computeAngle(a,r,h),m=o.getDataVisibility(a)?u.getDistanceFromCenterForValue(this.getParsed(a).r):0;d=g,i&&(s.animateScale&&(m=0),s.animateRotate&&(v=g=f));var y={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:v,endAngle:g,options:this.resolveDataElementOptions(a,p.active?"active":r)};this.updateElement(p,a,y,r)}}},{key:"countVisibleElements",value:function(){var e=this,t=this._cachedMeta,n=0;return t.data.forEach((function(t,r){!isNaN(e.getParsed(r).r)&&e.chart.getDataVisibility(r)&&n++})),n}},{key:"_computeAngle",value:function(e,t,n){return this.chart.getDataVisibility(e)?L9(this.resolveDataElementOptions(e,t).angle||n):0}}]),n}(Rne);Vne.id="polarArea",Vne.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Vne.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels.pointStyle;return t.labels.map((function(t,r){var a=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};var Hne=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n)}(Wne);Hne.id="pie",Hne.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};var Gne=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}},{key:"parseObjectData",value:function(e,t,n,r){return Rte.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data||[],a=t.iScale.getLabels();if(n.points=r,"resize"!==e){var i=this.resolveDatasetElementOptions(e);this.options.showLine||(i.borderWidth=0);var o={_loop:!0,_fullLoop:a.length===r.length,options:i};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var a=this._cachedMeta.rScale,i="reset"===r,o=t;o<t+n;o++){var s=e[o],u=this.resolveDataElementOptions(o,s.active?"active":r),l=a.getPointPositionForValue(o,this.getParsed(o).r),c=i?a.xCenter:l.x,f=i?a.yCenter:l.y,d={x:c,y:f,angle:l.angle,skip:isNaN(c)||isNaN(f),options:u};this.updateElement(s,o,d,r)}}}]),n}(Rne);Gne.id="radar",Gne.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Gne.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};var qne=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n)}(Une);qne.id="scatter",qne.defaults={showLine:!1,fill:!1},qne.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:function(){return""},label:function(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function Xne(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Yne=function(){function e(t){gC(this,e),this.options=t||{}}return yC(e,[{key:"formats",value:function(){return Xne()}},{key:"parse",value:function(e,t){return Xne()}},{key:"format",value:function(e,t){return Xne()}},{key:"add",value:function(e,t,n){return Xne()}},{key:"diff",value:function(e,t,n){return Xne()}},{key:"startOf",value:function(e,t,n){return Xne()}},{key:"endOf",value:function(e,t){return Xne()}}]),e}();Yne.override=function(e){Object.assign(Yne.prototype,e)};var Kne={_date:Yne};function $ne(e,t,n,r){var a=e.controller,i=e.data,o=e._sorted,s=a._cachedMeta.iScale;if(s&&t===s.axis&&"r"!==t&&o&&i.length){var u=s._reversePixels?dte:fte;if(!r)return u(i,t,n);if(a._sharedOptions){var l=i[0],c="function"===typeof l.getRange&&l.getRange(t);if(c){var f=u(i,t,n-c),d=u(i,t,n+c);return{lo:f.lo,hi:d.hi}}}}return{lo:0,hi:i.length-1}}function Zne(e,t,n,r,a){for(var i=e.getSortedVisibleDatasetMetas(),o=n[t],s=0,u=i.length;s<u;++s)for(var l=i[s],c=l.index,f=l.data,d=$ne(i[s],t,o,a),h=d.lo,p=d.hi,v=h;v<=p;++v){var g=f[v];g.skip||r(g,c,v)}}function Qne(e,t,n,r,a){var i=[];if(!a&&!e.isPointInArea(t))return i;return Zne(e,n,t,(function(n,o,s){(a||Gee(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&i.push({element:n,datasetIndex:o,index:s})}),!0),i}function Jne(e,t,n,r,a,i){var o=[],s=function(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var a=t?Math.abs(e.x-r.x):0,i=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(i,2))}}(n),u=Number.POSITIVE_INFINITY;return Zne(e,n,t,(function(n,l,c){var f=n.inRange(t.x,t.y,a);if(!r||f){var d=n.getCenterPoint(a);if(!!i||e.isPointInArea(d)||f){var h=s(t,d);h<u?(o=[{element:n,datasetIndex:l,index:c}],u=h):h===u&&o.push({element:n,datasetIndex:l,index:c})}}})),o}function ere(e,t,n,r,a,i){return i||e.isPointInArea(t)?"r"!==n||r?Jne(e,t,n,r,a,i):function(e,t,n,r){var a=[];return Zne(e,n,t,(function(e,n,i){var o=e.getProps(["startAngle","endAngle"],r),s=o.startAngle,u=o.endAngle;H9(B9(e,{x:t.x,y:t.y}).angle,s,u)&&a.push({element:e,datasetIndex:n,index:i})})),a}(e,t,n,a):[]}function tre(e,t,n,r,a){var i=[],o="x"===n?"inXRange":"inYRange",s=!1;return Zne(e,n,t,(function(e,r,u){e[o](t[n],a)&&(i.push({element:e,datasetIndex:r,index:u}),s=s||e.inRange(t.x,t.y,a))})),r&&!s?[]:i}var nre={evaluateInteractionItems:Zne,modes:{index:function(e,t,n,r){var a=Gte(t,e),i=n.axis||"x",o=n.includeInvisible||!1,s=n.intersect?Qne(e,a,i,r,o):ere(e,a,i,!1,r,o),u=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach((function(e){var t=s[0].index,n=e.data[t];n&&!n.skip&&u.push({element:n,datasetIndex:e.index,index:t})})),u):[]},dataset:function(e,t,n,r){var a=Gte(t,e),i=n.axis||"xy",o=n.includeInvisible||!1,s=n.intersect?Qne(e,a,i,r,o):ere(e,a,i,!1,r,o);if(s.length>0){var u=s[0].datasetIndex,l=e.getDatasetMeta(u).data;s=[];for(var c=0;c<l.length;++c)s.push({element:l[c],datasetIndex:u,index:c})}return s},point:function(e,t,n,r){return Qne(e,Gte(t,e),n.axis||"xy",r,n.includeInvisible||!1)},nearest:function(e,t,n,r){var a=Gte(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return ere(e,a,i,n.intersect,r,o)},x:function(e,t,n,r){return tre(e,Gte(t,e),"x",n.intersect,r)},y:function(e,t,n,r){return tre(e,Gte(t,e),"y",n.intersect,r)}}},rre=["left","top","right","bottom"];function are(e,t){return e.filter((function(e){return e.pos===t}))}function ire(e,t){return e.filter((function(e){return-1===rre.indexOf(e.pos)&&e.box.axis===t}))}function ore(e,t){return e.sort((function(e,n){var r=t?n:e,a=t?e:n;return r.weight===a.weight?r.index-a.index:r.weight-a.weight}))}function sre(e,t){var n,r,a,i=function(e){var t,n={},r=bC(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.stack,o=a.pos,s=a.stackWeight;if(i&&rre.includes(o)){var u=n[i]||(n[i]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=s}}}catch(bfe){r.e(bfe)}finally{r.f()}return n}(e),o=t.vBoxMaxWidth,s=t.hBoxMaxHeight;for(n=0,r=e.length;n<r;++n){var u=(a=e[n]).box.fullSize,l=i[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*o:u&&t.availableWidth,a.height=s):(a.width=o,a.height=c?c*s:u&&t.availableHeight)}return i}function ure(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function lre(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function cre(e,t,n,r){var a=n.pos,i=n.box,o=e.maxPadding;if(!r9(a)){n.size&&(e[a]-=n.size);var s=r[n.stack]||{size:0,count:1};s.size=Math.max(s.size,n.horizontal?i.height:i.width),n.size=s.size/s.count,e[a]+=n.size}i.getPadding&&lre(o,i.getPadding());var u=Math.max(0,t.outerWidth-ure(o,e,"left","right")),l=Math.max(0,t.outerHeight-ure(o,e,"top","bottom")),c=u!==e.w,f=l!==e.h;return e.w=u,e.h=l,n.horizontal?{same:c,other:f}:{same:f,other:c}}function fre(e,t){var n=t.maxPadding;function r(e){var r={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function dre(e,t,n,r){var a,i,o,s,u,l,c=[];for(a=0,i=e.length,u=0;a<i;++a){(s=(o=e[a]).box).update(o.width||t.w,o.height||t.h,fre(o.horizontal,t));var f=cre(t,n,o,r),d=f.same,h=f.other;u|=d&&c.length,l=l||h,s.fullSize||c.push(o)}return u&&dre(c,t,n,r)||l}function hre(e,t,n,r,a){e.top=n,e.left=t,e.right=t+r,e.bottom=n+a,e.width=r,e.height=a}function pre(e,t,n,r){var a,i=n.padding,o=t.x,s=t.y,u=bC(e);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=l.box,f=r[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/f.weight||1;if(l.horizontal){var h=t.w*d,p=f.size||c.height;x9(f.start)&&(s=f.start),c.fullSize?hre(c,i.left,s,n.outerWidth-i.right-i.left,p):hre(c,t.left+f.placed,s,h,p),f.start=s,f.placed+=h,s=c.bottom}else{var v=t.h*d,g=f.size||c.width;x9(f.start)&&(o=f.start),c.fullSize?hre(c,o,i.top,g,n.outerHeight-i.bottom-i.top):hre(c,o,t.top+f.placed,g,v),f.start=o,f.placed+=v,o=c.right}}}catch(bfe){u.e(bfe)}finally{u.f()}t.x=o,t.y=s}jee.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var vre=function(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(e){t.draw(e)}}]},e.boxes.push(t)},gre=function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},mre=function(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},yre=function(e,t,n,r){if(e){var a=ote(e.options.layout.padding),i=Math.max(t-a.width,0),o=Math.max(n-a.height,0),s=function(e){var t=function(e){var t,n,r,a,i,o,s=[];for(t=0,n=(e||[]).length;t<n;++t){var u=r=e[t];a=u.position;var l=u.options;i=l.stack;var c=l.stackWeight;o=void 0===c?1:c,s.push({index:t,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:i&&a+i,stackWeight:o})}return s}(e),n=ore(t.filter((function(e){return e.box.fullSize})),!0),r=ore(are(t,"left"),!0),a=ore(are(t,"right")),i=ore(are(t,"top"),!0),o=ore(are(t,"bottom")),s=ire(t,"x"),u=ire(t,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:a.concat(u).concat(o).concat(s),chartArea:are(t,"chartArea"),vertical:r.concat(a).concat(u),horizontal:i.concat(o).concat(s)}}(e.boxes),u=s.vertical,l=s.horizontal;l9(e.boxes,(function(e){"function"===typeof e.beforeLayout&&e.beforeLayout()}));var c=u.reduce((function(e,t){return t.box.options&&!1===t.box.options.display?e:e+1}),0)||1,f=Object.freeze({outerWidth:t,outerHeight:n,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/c,hBoxMaxHeight:o/2}),d=Object.assign({},a);lre(d,ote(r));var h=Object.assign({maxPadding:d,w:i,h:o,x:a.left,y:a.top},a),p=sre(u.concat(l),f);dre(s.fullSize,h,f,p),dre(u,h,f,p),dre(l,h,f,p)&&dre(u,h,f,p),function(e){var t=e.maxPadding;function n(n){var r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(h),pre(s.leftAndTop,h,f,p),h.x+=h.w,h.y+=h.h,pre(s.rightAndBottom,h,f,p),e.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},l9(s.chartArea,(function(t){var n=t.box;Object.assign(n,e.chartArea),n.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})}))}},bre=function(){function e(){gC(this,e)}return yC(e,[{key:"acquireContext",value:function(e,t){}},{key:"releaseContext",value:function(e){return!1}},{key:"addEventListener",value:function(e,t,n){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}},{key:"isAttached",value:function(e){return!0}},{key:"updateConfig",value:function(e){}}]),e}(),xre=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"acquireContext",value:function(e){return e&&e.getContext&&e.getContext("2d")||null}},{key:"updateConfig",value:function(e){e.options.animation=!1}}]),n}(bre),kre={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},wre=function(e){return null===e||""===e};var Sre=!!Kte&&{passive:!0};function _re(e,t,n){e.canvas.removeEventListener(t,n,Sre)}function Cre(e,t){var n,r=bC(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a===t||a.contains(t))return!0}}catch(bfe){r.e(bfe)}finally{r.f()}}function Ere(e,t,n){var r=e.canvas,a=new MutationObserver((function(e){var t,a=!1,i=bC(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a=(a=a||Cre(o.addedNodes,r))&&!Cre(o.removedNodes,r)}}catch(bfe){i.e(bfe)}finally{i.f()}a&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}function Are(e,t,n){var r=e.canvas,a=new MutationObserver((function(e){var t,a=!1,i=bC(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;a=(a=a||Cre(o.removedNodes,r))&&!Cre(o.addedNodes,r)}}catch(bfe){i.e(bfe)}finally{i.f()}a&&n()}));return a.observe(document,{childList:!0,subtree:!0}),a}var Ire=new Map,Tre=0;function Rre(){var e=window.devicePixelRatio;e!==Tre&&(Tre=e,Ire.forEach((function(t,n){n.currentDevicePixelRatio!==e&&t()})))}function Nre(e,t,n){var r=e.canvas,a=r&&Bte(r);if(a){var i=$7((function(e,t){var r=a.clientWidth;n(e,t),r<a.clientWidth&&n()}),window),o=new ResizeObserver((function(e){var t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||i(n,r)}));return o.observe(a),function(e,t){Ire.size||window.addEventListener("resize",Rre),Ire.set(e,t)}(e,i),o}}function Mre(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Ire.delete(e),Ire.size||window.removeEventListener("resize",Rre)}(e)}function Ore(e,t,n){var r=e.canvas,a=$7((function(t){null!==e.ctx&&n(function(e,t){var n=kre[e.type]||e.type,r=Gte(e,t),a=r.x,i=r.y;return{type:n,chart:t,native:e,x:void 0!==a?a:null,y:void 0!==i?i:null}}(t,e))}),e,(function(e){var t=e[0];return[t,t.offsetX,t.offsetY]}));return function(e,t,n){e.addEventListener(t,n,Sre)}(r,t,a),a}var Pre=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"acquireContext",value:function(e,t){var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){var n=e.style,r=e.getAttribute("height"),a=e.getAttribute("width");if(e.$chartjs={initial:{height:r,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",wre(a)){var i=$te(e,"width");void 0!==i&&(e.width=i)}if(wre(r))if(""===e.style.height)e.height=e.width/(t||2);else{var o=$te(e,"height");void 0!==o&&(e.height=o)}}(e,t),n):null}},{key:"releaseContext",value:function(e){var t=e.canvas;if(!t.$chartjs)return!1;var n=t.$chartjs.initial;["height","width"].forEach((function(e){var r=n[e];t9(r)?t.removeAttribute(e):t.setAttribute(e,r)}));var r=n.style||{};return Object.keys(r).forEach((function(e){t.style[e]=r[e]})),t.width=t.width,delete t.$chartjs,!0}},{key:"addEventListener",value:function(e,t,n){this.removeEventListener(e,t);var r=e.$proxies||(e.$proxies={}),a={attach:Ere,detach:Are,resize:Nre}[t]||Ore;r[t]=a(e,t,n)}},{key:"removeEventListener",value:function(e,t){var n=e.$proxies||(e.$proxies={}),r=n[t];r&&(({attach:Mre,detach:Mre,resize:Mre}[t]||_re)(e,t,r),n[t]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(e,t,n,r){return Xte(e,t,n,r)}},{key:"isAttached",value:function(e){var t=Bte(e);return!(!t||!t.isConnected)}}]),n}(bre);var Fre=function(){function e(){gC(this,e),this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}return yC(e,[{key:"tooltipPosition",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"hasValue",value:function(){return P9(this.x)&&P9(this.y)}},{key:"getProps",value:function(e,t){var n=this,r=this.$animations;if(!t||!r)return this;var a={};return e.forEach((function(e){a[e]=r[e]&&r[e].active()?r[e]._to:n[e]})),a}}]),e}();Fre.defaults={},Fre.defaultRoutes=void 0;var Dre={values:function(e){return n9(e)?e:""+e},numeric:function(e,t,n){if(0===e)return"0";var r,a=this.chart.options.locale,i=e;if(n.length>1){var o=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(o<1e-4||o>1e15)&&(r="scientific"),i=function(e,t){var n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}var s=N9(Math.abs(i)),u=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(l,this.options.ticks.format),tne(e,a,l)},logarithmic:function(e,t,n){if(0===e)return"0";var r=e/Math.pow(10,Math.floor(N9(e)));return 1===r||2===r||5===r?Dre.numeric.call(this,e,t,n):""}};var Lre={formatters:Dre};function zre(e,t){var n=e.options.ticks,r=n.maxTicksLimit||function(e){var t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),a=e._maxLength/n;return Math.floor(Math.min(r,a))}(e),a=n.major.enabled?function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t].major&&r.push(t);return r}(t):[],i=a.length,o=a[0],s=a[i-1],u=[];if(i>r)return function(e,t,n,r){var a,i=0,o=n[0];for(r=Math.ceil(r),a=0;a<e.length;a++)a===o&&(t.push(e[a]),o=n[++i*r])}(t,u,a,i/r),u;var l=function(e,t,n){var r=function(e){var t,n,r=e.length;if(r<2)return!1;for(n=e[0],t=1;t<r;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),a=t.length/n;if(!r)return Math.max(a,1);for(var i=function(e){var t,n=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t===0&&(n.push(t),n.push(e/t));return r===(0|r)&&n.push(r),n.sort((function(e,t){return e-t})).pop(),n}(r),o=0,s=i.length-1;o<s;o++){var u=i[o];if(u>a)return u}return Math.max(a,1)}(a,t,r);if(i>0){var c,f,d=i>1?Math.round((s-o)/(i-1)):null;for(jre(t,u,l,t9(d)?0:o-d,o),c=0,f=i-1;c<f;c++)jre(t,u,l,a[c],a[c+1]);return jre(t,u,l,s,t9(d)?t.length:s+d),u}return jre(t,u,l),u}function jre(e,t,n,r,a){var i,o,s,u=o9(r,0),l=Math.min(o9(a,e.length),e.length),c=0;for(n=Math.ceil(n),a&&(n=(i=a-r)/Math.floor(i/n)),s=u;s<0;)c++,s=Math.round(u+c*n);for(o=Math.max(u,0);o<l;o++)o===s&&(t.push(e[o]),c++,s=Math.round(u+c*n))}jee.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(e,t){return t.lineWidth},tickColor:function(e,t){return t.color},offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Lre.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),jee.route("scale.ticks","color","","color"),jee.route("scale.grid","color","","borderColor"),jee.route("scale.grid","borderColor","","borderColor"),jee.route("scale.title","color","","color"),jee.describe("scale",{_fallback:!1,_scriptable:function(e){return!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e},_indexable:function(e){return"borderDash"!==e&&"tickBorderDash"!==e}}),jee.describe("scales",{_fallback:"scale"}),jee.describe("scale.ticks",{_scriptable:function(e){return"backdropPadding"!==e&&"callback"!==e},_indexable:function(e){return"backdropPadding"!==e}});var Bre=function(e,t,n){return"top"===t||"left"===t?e[t]+n:e[t]-n};function Wre(e,t){for(var n=[],r=e.length/t,a=e.length,i=0;i<a;i+=r)n.push(e[Math.floor(i)]);return n}function Ure(e,t,n){var r,a=e.ticks.length,i=Math.min(t,a-1),o=e._startPixel,s=e._endPixel,u=1e-6,l=e.getPixelForTick(i);if(!(n&&(r=1===a?Math.max(l-o,s-l):0===t?(e.getPixelForTick(1)-l)/2:(l-e.getPixelForTick(i-1))/2,(l+=i<t?r:-r)<o-u||l>s+u)))return l}function Vre(e){return e.drawTicks?e.tickLength:0}function Hre(e,t){if(!e.display)return 0;var n=ste(e.font,t),r=ote(e.padding);return(n9(e.text)?e.text.length:1)*n.lineHeight+r.height}function Gre(e,t,n){var r=Z7(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=function(e){return"left"===e?"right":"right"===e?"left":e}(r)),r}var qre=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).id=e.id,r.type=e.type,r.options=void 0,r.ctx=e.ctx,r.chart=e.chart,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r._margins={left:0,right:0,top:0,bottom:0},r.maxWidth=void 0,r.maxHeight=void 0,r.paddingTop=void 0,r.paddingBottom=void 0,r.paddingLeft=void 0,r.paddingRight=void 0,r.axis=void 0,r.labelRotation=void 0,r.min=void 0,r.max=void 0,r._range=void 0,r.ticks=[],r._gridLineItems=null,r._labelItems=null,r._labelSizes=null,r._length=0,r._maxLength=0,r._longestTextCache={},r._startPixel=void 0,r._endPixel=void 0,r._reversePixels=!1,r._userMax=void 0,r._userMin=void 0,r._suggestedMax=void 0,r._suggestedMin=void 0,r._ticksLength=0,r._borderValue=0,r._cache={},r._dataLimitsCached=!1,r.$context=void 0,r}return yC(n,[{key:"init",value:function(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}},{key:"parse",value:function(e,t){return e}},{key:"getUserBounds",value:function(){var e=this._userMin,t=this._userMax,n=this._suggestedMin,r=this._suggestedMax;return e=i9(e,Number.POSITIVE_INFINITY),t=i9(t,Number.NEGATIVE_INFINITY),n=i9(n,Number.POSITIVE_INFINITY),r=i9(r,Number.NEGATIVE_INFINITY),{min:i9(e,n),max:i9(t,r),minDefined:a9(e),maxDefined:a9(t)}}},{key:"getMinMax",value:function(e){var t,n=this.getUserBounds(),r=n.min,a=n.max,i=n.minDefined,o=n.maxDefined;if(i&&o)return{min:r,max:a};for(var s=this.getMatchingVisibleMetas(),u=0,l=s.length;u<l;++u)t=s[u].controller.getMinMax(this,e),i||(r=Math.min(r,t.min)),o||(a=Math.max(a,t.max));return{min:i9(r=o&&r>a?a:r,i9(a=i&&r>a?r:a,r)),max:i9(a,i9(r,a))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){u9(this.options.beforeUpdate,[this])}},{key:"update",value:function(e,t,n){var r=this.options,a=r.beginAtZero,i=r.grace,o=r.ticks,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){var r=e.min,a=e.max,i=s9(t,(a-r)/2),o=function(e,t){return n&&0===e?0:e+t};return{min:o(r,-Math.abs(i)),max:o(a,i)}}(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var u=s<this.ticks.length;this._convertTicksToLabels(u?Wre(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=zre(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){u9(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){u9(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){u9(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(e){this.chart.notifyPlugins(e,this.getContext()),u9(this.options[e],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){u9(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(e){var t,n,r,a=this.options.ticks;for(t=0,n=e.length;t<n;t++)(r=e[t]).label=u9(a.callback,[r.value,t,e],this)}},{key:"afterTickToLabelConversion",value:function(){u9(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){u9(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var e,t,n,r=this.options,a=r.ticks,i=this.ticks.length,o=a.minRotation||0,s=a.maxRotation,u=o;if(!this._isVisible()||!a.display||o>=s||i<=1||!this.isHorizontal())this.labelRotation=o;else{var l=this._getLabelSizes(),c=l.widest.width,f=l.highest.height,d=G9(this.chart.width-c,0,this.maxWidth);c+6>(e=r.offset?this.maxWidth/i:d/(i-1))&&(e=d/(i-(r.offset?.5:1)),t=this.maxHeight-Vre(r.grid)-a.padding-Hre(r.title,this.chart.options.font),n=Math.sqrt(c*c+f*f),u=z9(Math.min(Math.asin(G9((l.highest.height+6)/e,-1,1)),Math.asin(G9(t/n,-1,1))-Math.asin(G9(f/n,-1,1)))),u=Math.max(o,Math.min(s,u))),this.labelRotation=u}}},{key:"afterCalculateLabelRotation",value:function(){u9(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){u9(this.options.beforeFit,[this])}},{key:"fit",value:function(){var e={width:0,height:0},t=this.chart,n=this.options,r=n.ticks,a=n.title,i=n.grid,o=this._isVisible(),s=this.isHorizontal();if(o){var u=Hre(a,t.options.font);if(s?(e.width=this.maxWidth,e.height=Vre(i)+u):(e.height=this.maxHeight,e.width=Vre(i)+u),r.display&&this.ticks.length){var l=this._getLabelSizes(),c=l.first,f=l.last,d=l.widest,h=l.highest,p=2*r.padding,v=L9(this.labelRotation),g=Math.cos(v),m=Math.sin(v);if(s){var y=r.mirror?0:m*d.width+g*h.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{var b=r.mirror?0:g*d.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+b+p)}this._calculatePadding(c,f,m,g)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(e,t,n,r){var a=this.options,i=a.ticks,o=i.align,s=i.padding,u=a.position,l=0!==this.labelRotation,c="top"!==u&&"x"===this.axis;if(this.isHorizontal()){var f=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,p=0;l?c?(h=r*e.width,p=n*t.height):(h=n*e.height,p=r*t.width):"start"===o?p=t.width:"end"===o?h=e.width:"inner"!==o&&(h=e.width/2,p=t.width/2),this.paddingLeft=Math.max((h-f+s)*this.width/(this.width-f),0),this.paddingRight=Math.max((p-d+s)*this.width/(this.width-d),0)}else{var v=t.height/2,g=e.height/2;"start"===o?(v=0,g=e.height):"end"===o&&(v=t.height,g=0),this.paddingTop=v+s,this.paddingBottom=g+s}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){u9(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var e=this.options,t=e.axis,n=e.position;return"top"===n||"bottom"===n||"x"===t}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(e){var t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)t9(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var e=this._labelSizes;if(!e){var t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=Wre(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}},{key:"_computeLabelSizes",value:function(e,t){var n,r,a,i,o,s,u,l,c,f,d,h=this.ctx,p=this._longestTextCache,v=[],g=[],m=0,y=0;for(n=0;n<t;++n){if(i=e[n].label,o=this._resolveTickFontOptions(n),h.font=s=o.string,u=p[s]=p[s]||{data:{},gc:[]},l=o.lineHeight,c=f=0,t9(i)||n9(i)){if(n9(i))for(r=0,a=i.length;r<a;++r)t9(d=i[r])||n9(d)||(c=Bee(h,u.data,u.gc,c,d),f+=l)}else c=Bee(h,u.data,u.gc,c,i),f=l;v.push(c),g.push(f),m=Math.max(c,m),y=Math.max(f,y)}!function(e,t){l9(e,(function(e){var n,r=e.gc,a=r.length/2;if(a>t){for(n=0;n<a;++n)delete e.data[r[n]];r.splice(0,a)}}))}(p,t);var b=v.indexOf(m),x=g.indexOf(y),k=function(e){return{width:v[e]||0,height:g[e]||0}};return{first:k(0),last:k(t-1),widest:k(b),highest:k(x),widths:v,heights:g}}},{key:"getLabelForValue",value:function(e){return e}},{key:"getPixelForValue",value:function(e,t){return NaN}},{key:"getValueForPixel",value:function(e){}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getPixelForDecimal",value:function(e){this._reversePixels&&(e=1-e);var t=this._startPixel+e*this._length;return G9(this._alignToPixels?Uee(this.chart,t,0):t,-32768,32767)}},{key:"getDecimalForPixel",value:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var e=this.min,t=this.max;return e<0&&t<0?t:e>0&&t>0?e:0}},{key:"getContext",value:function(e){var t=this.ticks||[];if(e>=0&&e<t.length){var n=t[e];return n.$context||(n.$context=function(e,t,n){return lte(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return lte(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}},{key:"_tickSize",value:function(){var e=this.options.ticks,t=L9(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),i=e.autoSkipPadding||0,o=a?a.widest.width+i:0,s=a?a.highest.height+i:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r}},{key:"_isVisible",value:function(){var e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(e){var t,n,r,a,i,o,s,u,l,c,f,d,h=this.axis,p=this.chart,v=this.options,g=v.grid,m=v.position,y=g.offset,b=this.isHorizontal(),x=this.ticks.length+(y?1:0),k=Vre(g),w=[],S=g.setContext(this.getContext()),_=S.drawBorder?S.borderWidth:0,C=_/2,E=function(e){return Uee(p,e,_)};if("top"===m)t=E(this.bottom),o=this.bottom-k,u=t-C,c=E(e.top)+C,d=e.bottom;else if("bottom"===m)t=E(this.top),c=e.top,d=E(e.bottom)-C,o=t+C,u=this.top+k;else if("left"===m)t=E(this.right),i=this.right-k,s=t-C,l=E(e.left)+C,f=e.right;else if("right"===m)t=E(this.left),l=e.left,f=E(e.right)-C,i=t+C,s=this.left+k;else if("x"===h){if("center"===m)t=E((e.top+e.bottom)/2+.5);else if(r9(m)){var A=Object.keys(m)[0],I=m[A];t=E(this.chart.scales[A].getPixelForValue(I))}c=e.top,d=e.bottom,u=(o=t+C)+k}else if("y"===h){if("center"===m)t=E((e.left+e.right)/2);else if(r9(m)){var T=Object.keys(m)[0],R=m[T];t=E(this.chart.scales[T].getPixelForValue(R))}s=(i=t-C)-k,l=e.left,f=e.right}var N=o9(v.ticks.maxTicksLimit,x),M=Math.max(1,Math.ceil(x/N));for(n=0;n<x;n+=M){var O=g.setContext(this.getContext(n)),P=O.lineWidth,F=O.color,D=g.borderDash||[],L=O.borderDashOffset,z=O.tickWidth,j=O.tickColor,B=O.tickBorderDash||[],W=O.tickBorderDashOffset;void 0!==(r=Ure(this,n,y))&&(a=Uee(p,r,P),b?i=s=l=f=a:o=u=c=d=a,w.push({tx1:i,ty1:o,tx2:s,ty2:u,x1:l,y1:c,x2:f,y2:d,width:P,color:F,borderDash:D,borderDashOffset:L,tickWidth:z,tickColor:j,tickBorderDash:B,tickBorderDashOffset:W}))}return this._ticksLength=x,this._borderValue=t,w}},{key:"_computeLabelItems",value:function(e){var t,n,r,a,i,o,s,u,l,c,f,d=this.axis,h=this.options,p=h.position,v=h.ticks,g=this.isHorizontal(),m=this.ticks,y=v.align,b=v.crossAlign,x=v.padding,k=v.mirror,w=Vre(h.grid),S=w+x,_=k?-x:S,C=-L9(this.labelRotation),E=[],A="middle";if("top"===p)i=this.bottom-_,o=this._getXAxisLabelAlignment();else if("bottom"===p)i=this.top+_,o=this._getXAxisLabelAlignment();else if("left"===p){var I=this._getYAxisLabelAlignment(w);o=I.textAlign,a=I.x}else if("right"===p){var T=this._getYAxisLabelAlignment(w);o=T.textAlign,a=T.x}else if("x"===d){if("center"===p)i=(e.top+e.bottom)/2+S;else if(r9(p)){var R=Object.keys(p)[0],N=p[R];i=this.chart.scales[R].getPixelForValue(N)+S}o=this._getXAxisLabelAlignment()}else if("y"===d){if("center"===p)a=(e.left+e.right)/2-S;else if(r9(p)){var M=Object.keys(p)[0],O=p[M];a=this.chart.scales[M].getPixelForValue(O)}o=this._getYAxisLabelAlignment(w).textAlign}"y"===d&&("start"===y?A="top":"end"===y&&(A="bottom"));var P=this._getLabelSizes();for(t=0,n=m.length;t<n;++t){r=m[t].label;var F=v.setContext(this.getContext(t));s=this.getPixelForTick(t)+v.labelOffset,l=(u=this._resolveTickFontOptions(t)).lineHeight;var D=(c=n9(r)?r.length:1)/2,L=F.color,z=F.textStrokeColor,j=F.textStrokeWidth,B=o;g?(a=s,"inner"===o&&(B=t===n-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),f="top"===p?"near"===b||0!==C?-c*l+l/2:"center"===b?-P.highest.height/2-D*l+l:-P.highest.height+l/2:"near"===b||0!==C?l/2:"center"===b?P.highest.height/2-D*l:P.highest.height-c*l,k&&(f*=-1)):(i=s,f=(1-c)*l/2);var W=void 0;if(F.showLabelBackdrop){var U=ote(F.backdropPadding),V=P.heights[t],H=P.widths[t],G=i+f-U.top,q=a-U.left;switch(A){case"middle":G-=V/2;break;case"bottom":G-=V}switch(o){case"center":q-=H/2;break;case"right":q-=H}W={left:q,top:G,width:H+U.width,height:V+U.height,color:F.backdropColor}}E.push({rotation:C,label:r,font:u,color:L,strokeColor:z,strokeWidth:j,textOffset:f,textAlign:B,textBaseline:A,translation:[a,i],backdrop:W})}return E}},{key:"_getXAxisLabelAlignment",value:function(){var e=this.options,t=e.position,n=e.ticks;if(-L9(this.labelRotation))return"top"===t?"left":"right";var r="center";return"start"===n.align?r="left":"end"===n.align?r="right":"inner"===n.align&&(r="inner"),r}},{key:"_getYAxisLabelAlignment",value:function(e){var t,n,r=this.options,a=r.position,i=r.ticks,o=i.crossAlign,s=i.mirror,u=i.padding,l=e+u,c=this._getLabelSizes().widest.width;return"left"===a?s?(n=this.right+u,"near"===o?t="left":"center"===o?(t="center",n+=c/2):(t="right",n+=c)):(n=this.right-l,"near"===o?t="right":"center"===o?(t="center",n-=c/2):(t="left",n=this.left)):"right"===a?s?(n=this.left+u,"near"===o?t="right":"center"===o?(t="center",n-=c/2):(t="left",n-=c)):(n=this.left+l,"near"===o?t="left":"center"===o?(t="center",n+=c/2):(t="right",n=this.right)):t="right",{textAlign:t,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}}},{key:"drawBackground",value:function(){var e=this.ctx,t=this.options.backgroundColor,n=this.left,r=this.top,a=this.width,i=this.height;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,a,i),e.restore())}},{key:"getLineWidthForValue",value:function(e){var t=this.options.grid;if(!this._isVisible()||!t.display)return 0;var n=this.ticks.findIndex((function(t){return t.value===e}));return n>=0?t.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(e){var t,n,r=this.options.grid,a=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o=function(e,t,n){n.width&&n.color&&(a.save(),a.lineWidth=n.width,a.strokeStyle=n.color,a.setLineDash(n.borderDash||[]),a.lineDashOffset=n.borderDashOffset,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.stroke(),a.restore())};if(r.display)for(t=0,n=i.length;t<n;++t){var s=i[t];r.drawOnChartArea&&o({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),r.drawTicks&&o({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var e=this.chart,t=this.ctx,n=this.options.grid,r=n.setContext(this.getContext()),a=n.drawBorder?r.borderWidth:0;if(a){var i,o,s,u,l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;this.isHorizontal()?(i=Uee(e,this.left,a)-a/2,o=Uee(e,this.right,l)+l/2,s=u=c):(s=Uee(e,this.top,a)-a/2,u=Uee(e,this.bottom,l)+l/2,i=o=c),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(i,s),t.lineTo(o,u),t.stroke(),t.restore()}}},{key:"drawLabels",value:function(e){if(this.options.ticks.display){var t=this.ctx,n=this._computeLabelArea();n&&qee(t,n);var r,a,i=this._labelItems||(this._labelItems=this._computeLabelItems(e));for(r=0,a=i.length;r<a;++r){var o=i[r],s=o.font,u=o.label;o.backdrop&&(t.fillStyle=o.backdrop.color,t.fillRect(o.backdrop.left,o.backdrop.top,o.backdrop.width,o.backdrop.height)),$ee(t,u,0,o.textOffset,s,o)}n&&Xee(t)}}},{key:"drawTitle",value:function(){var e=this.ctx,t=this.options,n=t.position,r=t.title,a=t.reverse;if(r.display){var i=ste(r.font),o=ote(r.padding),s=r.align,u=i.lineHeight/2;"bottom"===n||"center"===n||r9(n)?(u+=o.bottom,n9(r.text)&&(u+=i.lineHeight*(r.text.length-1))):u+=o.top;var l=function(e,t,n,r){var a,i,o,s=e.top,u=e.left,l=e.bottom,c=e.right,f=e.chart,d=f.chartArea,h=f.scales,p=0,v=l-s,g=c-u;if(e.isHorizontal()){if(i=Q7(r,u,c),r9(n)){var m=Object.keys(n)[0],y=n[m];o=h[m].getPixelForValue(y)+v-t}else o="center"===n?(d.bottom+d.top)/2+v-t:Bre(e,n,t);a=c-u}else{if(r9(n)){var b=Object.keys(n)[0],x=n[b];i=h[b].getPixelForValue(x)-g+t}else i="center"===n?(d.left+d.right)/2-g+t:Bre(e,n,t);o=Q7(r,l,s),p="left"===n?-I9:I9}return{titleX:i,titleY:o,maxWidth:a,rotation:p}}(this,u,n,s),c=l.titleX,f=l.titleY,d=l.maxWidth,h=l.rotation;$ee(e,r.text,0,0,i,{color:r.color,maxWidth:d,rotation:h,textAlign:Gre(s,n,a),textBaseline:"middle",translation:[c,f]})}}},{key:"draw",value:function(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}},{key:"_layers",value:function(){var e=this,t=this.options,r=t.ticks&&t.ticks.z||0,a=o9(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===n.prototype.draw?[{z:a,draw:function(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:a+1,draw:function(){e.drawBorder()}},{z:r,draw:function(t){e.drawLabels(t)}}]:[{z:r,draw:function(t){e.draw(t)}}]}},{key:"getMatchingVisibleMetas",value:function(e){var t,n,r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",i=[];for(t=0,n=r.length;t<n;++t){var o=r[t];o[a]!==this.id||e&&o.type!==e||i.push(o)}return i}},{key:"_resolveTickFontOptions",value:function(e){return ste(this.options.ticks.setContext(this.getContext(e)).font)}},{key:"_maxDigits",value:function(){var e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}]),n}(Fre),Xre=function(){function e(t,n,r){gC(this,e),this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}return yC(e,[{key:"isForType",value:function(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}},{key:"register",value:function(e){var t,n=Object.getPrototypeOf(e);(function(e){return"id"in e&&"defaults"in e})(n)&&(t=this.register(n));var r=this.items,a=e.id,i=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,function(e,t,n){var r=p9(Object.create(null),[n?jee.get(n):{},jee.get(t),e.defaults]);jee.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((function(n){var r=n.split("."),a=r.pop(),i=[e].concat(r).join("."),o=t[n].split("."),s=o.pop(),u=o.join(".");jee.route(i,a,u,s)}))}(t,e.defaultRoutes);e.descriptors&&jee.describe(t,e.descriptors)}(e,i,t),this.override&&jee.override(e.id,e.overrides)),i}},{key:"get",value:function(e){return this.items[e]}},{key:"unregister",value:function(e){var t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in jee[r]&&(delete jee[r][n],this.override&&delete Pee[n])}}]),e}();var Yre=function(){function e(){gC(this,e),this.controllers=new Xre(Rne,"datasets",!0),this.elements=new Xre(Fre,"elements"),this.plugins=new Xre(Object,"plugins"),this.scales=new Xre(qre,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}return yC(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}},{key:"addControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}},{key:"addElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}},{key:"addScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}},{key:"getController",value:function(e){return this._get(e,this.controllers,"controller")}},{key:"getElement",value:function(e){return this._get(e,this.elements,"element")}},{key:"getPlugin",value:function(e){return this._get(e,this.plugins,"plugin")}},{key:"getScale",value:function(e){return this._get(e,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}},{key:"removeElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}},{key:"removePlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}},{key:"removeScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}},{key:"_each",value:function(e,t,n){var r=this;pd(t).forEach((function(t){var a=n||r._getRegistryForType(t);n||a.isForType(t)||a===r.plugins&&t.id?r._exec(e,a,t):l9(t,(function(t){var a=n||r._getRegistryForType(t);r._exec(e,a,t)}))}))}},{key:"_exec",value:function(e,t,n){var r=b9(e);u9(n["before"+r],[],n),t[e](n),u9(n["after"+r],[],n)}},{key:"_getRegistryForType",value:function(e){for(var t=0;t<this._typedRegistries.length;t++){var n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}},{key:"_get",value:function(e,t,n){var r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}]),e}(),Kre=new Yre,$re=function(){function e(){gC(this,e),this._init=[]}return yC(e,[{key:"notify",value:function(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));var a=r?this._descriptors(e).filter(r):this._descriptors(e),i=this._notify(a,e,t,n);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),i}},{key:"_notify",value:function(e,t,n,r){r=r||{};var a,i=bC(e);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.plugin;if(!1===u9(s[n],[t,r,o.options],s)&&r.cancelable)return!1}}catch(bfe){i.e(bfe)}finally{i.f()}return!0}},{key:"invalidate",value:function(){t9(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(e){if(this._cache)return this._cache;var t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}},{key:"_createDescriptors",value:function(e,t){var n=e&&e.config,r=o9(n.options&&n.options.plugins,{}),a=function(e){for(var t=[],n=Object.keys(Kre.plugins.items),r=0;r<n.length;r++)t.push(Kre.getPlugin(n[r]));for(var a=e.plugins||[],i=0;i<a.length;i++){var o=a[i];-1===t.indexOf(o)&&t.push(o)}return t}(n);return!1!==r||t?function(e,t,n,r){for(var a=[],i=e.getContext(),o=0;o<t.length;o++){var s=t[o],u=Zre(n[s.id],r);null!==u&&a.push({plugin:s,options:Qre(e.config,s,u,i)})}return a}(e,a,r,t):[]}},{key:"_notifyStateChanges",value:function(e){var t=this._oldCache||[],n=this._cache,r=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.plugin.id===t.plugin.id}))}))};this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}]),e}();function Zre(e,t){return t||!1!==e?!0===e?{}:e:null}function Qre(e,t,n,r){var a=e.pluginScopeKeys(t),i=e.getOptionScopes(n,a);return e.createResolver(i,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Jre(e,t){var n=jee.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function eae(e,t){return"x"===e||"y"===e?e:t.axis||function(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}(t.position)||e.charAt(0).toLowerCase()}function tae(e){var t=e.options||(e.options={});t.plugins=o9(t.plugins,{}),t.scales=function(e,t){var n=Pee[e.type]||{scales:{}},r=t.scales||{},a=Jre(e.type,t),i=Object.create(null),o=Object.create(null);return Object.keys(r).forEach((function(e){var t=r[e];if(!r9(t))return console.error("Invalid scale configuration for scale: ".concat(e));if(t._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));var s=eae(e,t),u=function(e,t){return e===t?"_index_":"_value_"}(s,a),l=n.scales||{};i[s]=i[s]||e,o[e]=v9(Object.create(null),[{axis:s},t,l[s],l[u]])})),e.data.datasets.forEach((function(n){var a=n.type||e.type,s=n.indexAxis||Jre(a,t),u=(Pee[a]||{}).scales||{};Object.keys(u).forEach((function(e){var t=function(e,t){var n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,s),a=n[t+"AxisID"]||i[t]||t;o[a]=o[a]||Object.create(null),v9(o[a],[{axis:t},r[a],u[e]])}))})),Object.keys(o).forEach((function(e){var t=o[e];v9(t,[jee.scales[t.type],jee.scale])})),o}(e,t)}function nae(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}var rae=new Map,aae=new Set;function iae(e,t){var n=rae.get(e);return n||(n=t(),rae.set(e,n),aae.add(n)),n}var oae=function(e,t,n){var r=y9(t,n);void 0!==r&&e.add(r)},sae=function(){function e(t){gC(this,e),this._config=function(e){return(e=e||{}).data=nae(e.data),tae(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}return yC(e,[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(e){this._config.type=e}},{key:"data",get:function(){return this._config.data},set:function(e){this._config.data=nae(e)}},{key:"options",get:function(){return this._config.options},set:function(e){this._config.options=e}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var e=this._config;this.clearCache(),tae(e)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(e){return iae(e,(function(){return[["datasets.".concat(e),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(e,t){return iae("".concat(e,".transition.").concat(t),(function(){return[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]}))}},{key:"datasetElementScopeKeys",value:function(e,t){return iae("".concat(e,"-").concat(t),(function(){return[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]}))}},{key:"pluginScopeKeys",value:function(e){var t=e.id,n=this.type;return iae("".concat(n,"-plugin-").concat(t),(function(){return[["plugins.".concat(t)].concat(pd(e.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(e,t){var n=this._scopeCache,r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}},{key:"getOptionScopes",value:function(e,t,n){var r=this.options,a=this.type,i=this._cachedScopes(e,n),o=i.get(t);if(o)return o;var s=new Set;t.forEach((function(t){e&&(s.add(e),t.forEach((function(t){return oae(s,e,t)}))),t.forEach((function(e){return oae(s,r,e)})),t.forEach((function(e){return oae(s,Pee[a]||{},e)})),t.forEach((function(e){return oae(s,jee,e)})),t.forEach((function(e){return oae(s,Fee,e)}))}));var u=Array.from(s);return 0===u.length&&u.push(Object.create(null)),aae.has(t)&&i.set(t,u),u}},{key:"chartOptionScopes",value:function(){var e=this.options,t=this.type;return[e,Pee[t]||{},jee.datasets[t]||{},{type:t},jee,Fee]}},{key:"resolveNamedOptions",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],a={$shared:!0},i=uae(this._resolverCache,e,r),o=i.resolver,s=i.subPrefixes,u=o;if(cae(o,t)){a.$shared=!1,n=k9(n)?n():n;var l=this.createResolver(e,n,s);u=mte(o,n,l)}var c,f=bC(t);try{for(f.s();!(c=f.n()).done;){var d=c.value;a[d]=u[d]}}catch(bfe){f.e(bfe)}finally{f.f()}return a}},{key:"createResolver",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0,a=uae(this._resolverCache,e,n),i=a.resolver;return r9(t)?mte(i,t,void 0,r):i}}]),e}();function uae(e,t,n){var r=e.get(t);r||(r=new Map,e.set(t,r));var a=n.join(),i=r.get(a);i||(i={resolver:gte(t,n),subPrefixes:n.filter((function(e){return!e.toLowerCase().includes("hover")}))},r.set(a,i));return i}var lae=function(e){return r9(e)&&Object.getOwnPropertyNames(e).reduce((function(t,n){return t||k9(e[n])}),!1)};function cae(e,t){var n,r=yte(e),a=r.isScriptable,i=r.isIndexable,o=bC(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=a(s),l=i(s),c=(l||u)&&e[s];if(u&&(k9(c)||lae(c))||l&&n9(c))return!0}}catch(bfe){o.e(bfe)}finally{o.f()}return!1}var fae=["top","bottom","left","right","chartArea"];function dae(e,t){return"top"===e||"bottom"===e||-1===fae.indexOf(e)&&"x"===t}function hae(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function pae(e){var t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),u9(n&&n.onComplete,[e],t)}function vae(e){var t=e.chart,n=t.options.animation;u9(n&&n.onProgress,[e],t)}function gae(e){return jte()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var mae={},yae=function(e){var t=gae(e);return Object.values(mae).filter((function(e){return e.canvas===t})).pop()};function bae(e,t,n){for(var r=0,a=Object.keys(e);r<a.length;r++){var i=a[r],o=+i;if(o>=t){var s=e[i];delete e[i],(n>0||o>t)&&(e[o+n]=s)}}}var xae=function(){function e(t,n){var r=this;gC(this,e);var a=this.config=new sae(n),i=gae(t),o=yae(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas can be reused.");var s=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||function(e){return!jte()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?xre:Pre}(i)),this.platform.updateConfig(a);var u=this.platform.acquireContext(i,s.aspectRatio),l=u&&u.canvas,c=l&&l.height,f=l&&l.width;this.id=e9(),this.ctx=u,this.canvas=l,this.width=f,this.height=c,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $re,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){var n;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t?(clearTimeout(n),n=setTimeout(e,t,a)):e.apply(this,a),t}}((function(e){return r.update(e)}),s.resizeDelay||0),this._dataChanges=[],mae[this.id]=this,u&&l?(hne.listen(this,"complete",pae),hne.listen(this,"progress",vae),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}return yC(e,[{key:"aspectRatio",get:function(){var e=this.options,t=e.aspectRatio,n=e.maintainAspectRatio,r=this.width,a=this.height,i=this._aspectRatio;return t9(t)?n&&i?i:a?r/a:null:t}},{key:"data",get:function(){return this.config.data},set:function(e){this.config.data=e}},{key:"options",get:function(){return this._options},set:function(e){this.config.options=e}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Yte(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return Vee(this.canvas,this.ctx),this}},{key:"stop",value:function(){return hne.stop(this),this}},{key:"resize",value:function(e,t){hne.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}},{key:"_resize",value:function(e,t){var n=this.options,r=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(r,e,t,a),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,Yte(this,o,!0)&&(this.notifyPlugins("resize",{size:i}),u9(n.onResize,[this,i],this),this.attached&&this._doResize(s)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){l9(this.options.scales||{},(function(e,t){e.id=t}))}},{key:"buildOrUpdateScales",value:function(){var e=this,t=this.options,n=t.scales,r=this.scales,a=Object.keys(r).reduce((function(e,t){return e[t]=!1,e}),{}),i=[];n&&(i=i.concat(Object.keys(n).map((function(e){var t=n[e],r=eae(e,t),a="r"===r,i="x"===r;return{options:t,dposition:a?"chartArea":i?"bottom":"left",dtype:a?"radialLinear":i?"category":"linear"}})))),l9(i,(function(n){var i=n.options,o=i.id,s=eae(o,i),u=o9(i.type,n.dtype);void 0!==i.position&&dae(i.position,s)===dae(n.dposition)||(i.position=n.dposition),a[o]=!0;var l=null;o in r&&r[o].type===u?l=r[o]:(l=new(Kre.getScale(u))({id:o,type:u,ctx:e.ctx,chart:e}),r[l.id]=l);l.init(i,t)})),l9(a,(function(e,t){e||delete r[t]})),l9(r,(function(t){mre(e,t,t.options),vre(e,t)}))}},{key:"_updateMetasets",value:function(){var e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((function(e,t){return e.index-t.index})),n>t){for(var r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(hae("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var e=this,t=this._metasets,n=this.data.datasets;t.length>n.length&&delete this._stacks,t.forEach((function(t,r){0===n.filter((function(e){return e===t._dataset})).length&&e._destroyDatasetMeta(r)}))}},{key:"buildOrUpdateControllers",value:function(){var e,t,n=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=r.length;e<t;e++){var a=r[e],i=this.getDatasetMeta(e),o=a.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(e),i=this.getDatasetMeta(e)),i.type=o,i.indexAxis=a.indexAxis||Jre(o,this.options),i.order=a.order||0,i.index=e,i.label=""+a.label,i.visible=this.isDatasetVisible(e),i.controller)i.controller.updateIndex(e),i.controller.linkScales();else{var s=Kre.getController(o),u=jee.datasets[o],l=u.datasetElementType,c=u.dataElementType;Object.assign(s.prototype,{dataElementType:Kre.getElement(c),datasetElementType:l&&Kre.getElement(l)}),i.controller=new s(this,e),n.push(i.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var e=this;l9(this.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(e){var t=this.config;t.update();var n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})){var a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var i=0,o=0,s=this.data.datasets.length;o<s;o++){var u=this.getDatasetMeta(o).controller,l=!r&&-1===a.indexOf(u);u.buildOrUpdateElements(l),i=Math.max(+u.getMaxOverflow(),i)}i=this._minPadding=n.layout.autoPadding?i:0,this._updateLayout(i),r||l9(a,(function(e){e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(hae("z","_idx"));var c=this._active,f=this._lastEvent;f?this._eventHandler(f,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}}},{key:"_updateScales",value:function(){var e=this;l9(this.scales,(function(t){gre(e,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);w9(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var e,t=this._hiddenIndices,n=bC(this._getUniformDataChanges()||[]);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.method,i=r.start,o=r.count;bae(t,i,"_removeElements"===a?-o:o)}}catch(bfe){n.e(bfe)}finally{n.f()}}},{key:"_getUniformDataChanges",value:function(){var e=this._dataChanges;if(e&&e.length){this._dataChanges=[];for(var t=this.data.datasets.length,n=function(t){return new Set(e.filter((function(e){return e[0]===t})).map((function(e,t){return t+","+e.splice(1).join(",")})))},r=n(0),a=1;a<t;a++)if(!w9(r,n(a)))return;return Array.from(r).map((function(e){return e.split(",")})).map((function(e){return{method:e[1],start:+e[2],count:+e[3]}}))}}},{key:"_updateLayout",value:function(e){var t=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){yre(this,this.width,this.height,e);var n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],l9(this.boxes,(function(e){var n;r&&"chartArea"===e.position||(e.configure&&e.configure(),(n=t._layers).push.apply(n,pd(e._layers())))}),this),this._layers.forEach((function(e,t){e._idx=t})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(var t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(var r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,k9(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}},{key:"_updateDataset",value:function(e,t){var n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(hne.has(this)?this.attached&&!hne.running(this)&&hne.start(this):(this.draw(),pae({chart:this})))}},{key:"draw",value:function(){var e;if(this._resizeBeforeDraw){var t=this._resizeBeforeDraw,n=t.width,r=t.height;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var a=this._layers;for(e=0;e<a.length&&a[e].z<=0;++e)a[e].draw(this.chartArea);for(this._drawDatasets();e<a.length;++e)a[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(e){var t,n,r=this._sortedMetasets,a=[];for(t=0,n=r.length;t<n;++t){var i=r[t];e&&!i.visible||a.push(i)}return a}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var e=this.getSortedVisibleDatasetMetas(),t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(e){var t=this.ctx,n=e._clip,r=!n.disabled,a=this.chartArea,i={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",i)&&(r&&qee(t,{left:!1===n.left?0:a.left-n.left,right:!1===n.right?this.width:a.right+n.right,top:!1===n.top?0:a.top-n.top,bottom:!1===n.bottom?this.height:a.bottom+n.bottom}),e.controller.draw(),r&&Xee(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}},{key:"isPointInArea",value:function(e){return Gee(e,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(e,t,n,r){var a=nre.modes[t];return"function"===typeof a?a(this,e,n,r):[]}},{key:"getDatasetMeta",value:function(e){var t=this.data.datasets[e],n=this._metasets,r=n.filter((function(e){return e&&e._dataset===t})).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=lte(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(e){var t=this.data.datasets[e];if(!t)return!1;var n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}},{key:"setDatasetVisibility",value:function(e,t){this.getDatasetMeta(e).hidden=!t}},{key:"toggleDataVisibility",value:function(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}},{key:"getDataVisibility",value:function(e){return!this._hiddenIndices[e]}},{key:"_updateVisibility",value:function(e,t,n){var r=n?"show":"hide",a=this.getDatasetMeta(e),i=a.controller._resolveAnimations(void 0,r);x9(t)?(a.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),i.update(a,{visible:n}),this.update((function(t){return t.datasetIndex===e?r:void 0})))}},{key:"hide",value:function(e,t){this._updateVisibility(e,t,!1)}},{key:"show",value:function(e,t){this._updateVisibility(e,t,!0)}},{key:"_destroyDatasetMeta",value:function(e){var t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}},{key:"_stop",value:function(){var e,t;for(this.stop(),hne.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var e=this.canvas,t=this.ctx;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Vee(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete mae[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var e;return(e=this.canvas).toDataURL.apply(e,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var e=this,t=this._listeners,n=this.platform,r=function(t,n,r){t.offsetX=n,t.offsetY=r,e._eventHandler(t)};l9(this.options.events,(function(a){return function(r,a){n.addEventListener(e,r,a),t[r]=a}(a,r)}))}},{key:"bindResponsiveEvents",value:function(){var e=this;this._responsiveListeners||(this._responsiveListeners={});var t,n=this._responsiveListeners,r=this.platform,a=function(t,a){r.addEventListener(e,t,a),n[t]=a},i=function(t,a){n[t]&&(r.removeEventListener(e,t,a),delete n[t])},o=function(t,n){e.canvas&&e.resize(t,n)},s=function n(){i("attach",n),e.attached=!0,e.resize(),a("resize",o),a("detach",t)};t=function(){e.attached=!1,i("resize",o),e._stop(),e._resize(0,0),a("attach",s)},r.isAttached(this.canvas)?s():t()}},{key:"unbindEvents",value:function(){var e=this;l9(this._listeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._listeners={},l9(this._responsiveListeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(e,t,n){var r,a,i,o=n?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),a=0,i=e.length;a<i;++a){var s=(r=e[a])&&this.getDatasetMeta(r.datasetIndex).controller;s&&s[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e){var t=this,n=this._active||[],r=e.map((function(e){var n=e.datasetIndex,r=e.index,a=t.getDatasetMeta(n);if(!a)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:a.data[r],index:r}}));!c9(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}},{key:"notifyPlugins",value:function(e,t,n){return this._plugins.notify(this,e,t,n)}},{key:"_updateHoverStyles",value:function(e,t,n){var r=this.options.hover,a=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.datasetIndex===t.datasetIndex&&e.index===t.index}))}))},i=a(t,e),o=n?e:a(e,t);i.length&&this.updateHoverStyle(i,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}},{key:"_eventHandler",value:function(e,t){var n=this,r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=function(t){return(t.options.events||n.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",r,a)){var i=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,a),(i||r.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,t,n){var r=this._active,a=void 0===r?[]:r,i=this.options,o=t,s=this._getActiveElements(e,a,n,o),u=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,u);n&&(this._lastEvent=null,u9(i.onHover,[e,s,this],this),u&&u9(i.onClick,[e,s,this],this));var c=!c9(s,a);return(c||t)&&(this._active=s,this._updateHoverStyles(s,a,t)),this._lastEvent=l,c}},{key:"_getActiveElements",value:function(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;var a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}}]),e}(),kae=function(){return l9(xae.instances,(function(e){return e._plugins.invalidate()}))},wae=!0;function Sae(e,t,n){var r=t.startAngle,a=t.pixelMargin,i=t.x,o=t.y,s=t.outerRadius,u=t.innerRadius,l=a/s;e.beginPath(),e.arc(i,o,s,r-l,n+l),u>a?(l=a/u,e.arc(i,o,u,n+l,r-l,!0)):e.arc(i,o,a,n+I9,r-I9),e.closePath(),e.clip()}function _ae(e,t,n,r){var a=rte(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),i=(n-t)/2,o=Math.min(i,r*t/2),s=function(e){var t=(n-Math.min(i,e))*r/2;return G9(e,0,Math.min(i,t))};return{outerStart:s(a.outerStart),outerEnd:s(a.outerEnd),innerStart:G9(a.innerStart,0,o),innerEnd:G9(a.innerEnd,0,o)}}function Cae(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Eae(e,t,n,r,a){var i=t.x,o=t.y,s=t.startAngle,u=t.pixelMargin,l=t.innerRadius,c=Math.max(t.outerRadius+r+n-u,0),f=l>0?l+r+n+u:0,d=0,h=a-s;if(r){var p=((l>0?l-r:0)+(c>0?c-r:0))/2;d=(h-(0!==p?h*p/(p+r):h))/2}var v=(h-Math.max(.001,h*c-n/S9)/c)/2,g=s+v+d,m=a-v-d,y=_ae(t,f,c,m-g),b=y.outerStart,x=y.outerEnd,k=y.innerStart,w=y.innerEnd,S=c-b,_=c-x,C=g+b/S,E=m-x/_,A=f+k,I=f+w,T=g+k/A,R=m-w/I;if(e.beginPath(),e.arc(i,o,c,C,E),x>0){var N=Cae(_,E,i,o);e.arc(N.x,N.y,x,E,m+I9)}var M=Cae(I,m,i,o);if(e.lineTo(M.x,M.y),w>0){var O=Cae(I,R,i,o);e.arc(O.x,O.y,w,m+I9,R+Math.PI)}if(e.arc(i,o,f,m-w/f,g+k/f,!0),k>0){var P=Cae(A,T,i,o);e.arc(P.x,P.y,k,T+Math.PI,g-I9)}var F=Cae(S,g,i,o);if(e.lineTo(F.x,F.y),b>0){var D=Cae(S,C,i,o);e.arc(D.x,D.y,b,g-I9,C)}e.closePath()}function Aae(e,t,n,r,a){var i=t.options,o=i.borderWidth,s=i.borderJoinStyle,u="inner"===i.borderAlign;o&&(u?(e.lineWidth=2*o,e.lineJoin=s||"round"):(e.lineWidth=o,e.lineJoin=s||"bevel"),t.fullCircles&&function(e,t,n){var r,a=t.x,i=t.y,o=t.startAngle,s=t.pixelMargin,u=t.fullCircles,l=Math.max(t.outerRadius-s,0),c=t.innerRadius+s;for(n&&Sae(e,t,o+_9),e.beginPath(),e.arc(a,i,c,o+_9,o,!0),r=0;r<u;++r)e.stroke();for(e.beginPath(),e.arc(a,i,l,o,o+_9),r=0;r<u;++r)e.stroke()}(e,t,u),u&&Sae(e,t,a),Eae(e,t,n,r,a),e.stroke())}Object.defineProperties(xae,{defaults:{enumerable:wae,value:jee},instances:{enumerable:wae,value:mae},overrides:{enumerable:wae,value:Pee},registry:{enumerable:wae,value:Kre},version:{enumerable:wae,value:"3.8.0"},getChart:{enumerable:wae,value:yae},register:{enumerable:wae,value:function(){Kre.add.apply(Kre,arguments),kae()}},unregister:{enumerable:wae,value:function(){Kre.remove.apply(Kre,arguments),kae()}}});var Iae=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).options=void 0,r.circumference=void 0,r.startAngle=void 0,r.endAngle=void 0,r.innerRadius=void 0,r.outerRadius=void 0,r.pixelMargin=0,r.fullCircles=0,e&&Object.assign(aR(r),e),r}return yC(n,[{key:"inRange",value:function(e,t,n){var r=B9(this.getProps(["x","y"],n),{x:e,y:t}),a=r.angle,i=r.distance,o=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),s=o.startAngle,u=o.endAngle,l=o.innerRadius,c=o.outerRadius,f=o.circumference,d=this.options.spacing/2,h=o9(f,u-s)>=_9||H9(a,s,u),p=q9(i,l+d,c+d);return h&&p}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),n=t.x,r=t.y,a=t.startAngle,i=t.endAngle,o=t.innerRadius,s=t.outerRadius,u=this.options,l=u.offset,c=(a+i)/2,f=(o+s+u.spacing+l)/2;return{x:n+Math.cos(c)*f,y:r+Math.sin(c)*f}}},{key:"tooltipPosition",value:function(e){return this.getCenterPoint(e)}},{key:"draw",value:function(e){var t=this.options,n=this.circumference,r=(t.offset||0)/2,a=(t.spacing||0)/2;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>_9?Math.floor(n/_9):0,!(0===n||this.innerRadius<0||this.outerRadius<0)){e.save();var i=0;if(r){i=r/2;var o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i),this.circumference>=S9&&(i=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;var s=function(e,t,n,r){var a=t.fullCircles,i=t.startAngle,o=t.circumference,s=t.endAngle;if(a){Eae(e,t,n,r,i+_9);for(var u=0;u<a;++u)e.fill();isNaN(o)||(s=i+o%_9,o%_9===0&&(s+=_9))}return Eae(e,t,n,r,s),e.fill(),s}(e,this,i,a);Aae(e,this,i,a,s),e.restore()}}}]),n}(Fre);function Tae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=o9(n.borderCapStyle,t.borderCapStyle),e.setLineDash(o9(n.borderDash,t.borderDash)),e.lineDashOffset=o9(n.borderDashOffset,t.borderDashOffset),e.lineJoin=o9(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=o9(n.borderWidth,t.borderWidth),e.strokeStyle=o9(n.borderColor,t.borderColor)}function Rae(e,t,n){e.lineTo(n.x,n.y)}function Nae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.length,a=n.start,i=void 0===a?0:a,o=n.end,s=void 0===o?r-1:o,u=t.start,l=t.end,c=Math.max(i,u),f=Math.min(s,l),d=i<u&&s<u||i>l&&s>l;return{count:r,start:c,loop:t.loop,ilen:f<c&&!d?r+f-c:f-c}}function Mae(e,t,n,r){var a,i,o,s=t.points,u=t.options,l=Nae(s,n,r),c=l.count,f=l.start,d=l.loop,h=l.ilen,p=function(e){return e.stepped?Yee:e.tension||"monotone"===e.cubicInterpolationMode?Kee:Rae}(u),v=r||{},g=v.move,m=void 0===g||g,y=v.reverse;for(a=0;a<=h;++a)(i=s[(f+(y?h-a:a))%c]).skip||(m?(e.moveTo(i.x,i.y),m=!1):p(e,o,i,y,u.stepped),o=i);return d&&p(e,o,i=s[(f+(y?h:0))%c],y,u.stepped),!!d}function Oae(e,t,n,r){var a,i,o,s,u,l,c=t.points,f=Nae(c,n,r),d=f.count,h=f.start,p=f.ilen,v=r||{},g=v.move,m=void 0===g||g,y=v.reverse,b=0,x=0,k=function(e){return(h+(y?p-e:e))%d},w=function(){s!==u&&(e.lineTo(b,u),e.lineTo(b,s),e.lineTo(b,l))};for(m&&(i=c[k(0)],e.moveTo(i.x,i.y)),a=0;a<=p;++a)if(!(i=c[k(a)]).skip){var S=i.x,_=i.y,C=0|S;C===o?(_<s?s=_:_>u&&(u=_),b=(x*b+S)/++x):(w(),e.lineTo(S,_),o=C,x=0,s=u=_),l=_}w()}function Pae(e){var t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Oae:Mae}Iae.id="arc",Iae.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Iae.defaultRoutes={backgroundColor:"backgroundColor"};var Fae="function"===typeof Path2D;function Dae(e,t,n,r){Fae&&!t.options.segment?function(e,t,n,r){var a=t._path;a||(a=t._path=new Path2D,t.path(a,n,r)&&a.closePath()),Tae(e,t.options),e.stroke(a)}(e,t,n,r):function(e,t,n,r){var a,i=t.segments,o=t.options,s=Pae(t),u=bC(i);try{for(u.s();!(a=u.n()).done;){var l=a.value;Tae(e,o,l.style),e.beginPath(),s(e,t,l,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}}catch(bfe){u.e(bfe)}finally{u.f()}}(e,t,n,r)}var Lae=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).animated=!0,r.options=void 0,r._chart=void 0,r._loop=void 0,r._fullLoop=void 0,r._path=void 0,r._points=void 0,r._segments=void 0,r._decimated=!1,r._pointsUpdated=!1,r._datasetIndex=void 0,e&&Object.assign(aR(r),e),r}return yC(n,[{key:"updateControlPoints",value:function(e,t){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var r=n.spanGaps?this._loop:this._fullLoop;zte(this._points,n,e,r,t),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(e,t){var n=e.points,r=e.options.spanGaps,a=n.length;if(!a)return[];var i=!!e._loop,o=function(e,t,n,r){var a=0,i=t-1;if(n&&!r)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,n&&(i+=a);i>a&&e[i%t].skip;)i--;return{start:a,end:i%=t}}(n,a,i,r),s=o.start,u=o.end;return lne(e,!0===r?[{start:s,end:u,loop:i}]:function(e,t,n,r){var a,i=e.length,o=[],s=t,u=e[t];for(a=t+1;a<=n;++a){var l=e[a%i];l.skip||l.stop?u.skip||(r=!1,o.push({start:t%i,end:(a-1)%i,loop:r}),t=s=l.stop?a:null):(s=a,u.skip&&(t=a)),u=l}return null!==s&&o.push({start:t%i,end:s%i,loop:r}),o}(n,s,u<s?u+a:u,!!e._fullLoop&&0===s&&u===a-1),n,t)}(this,this.options.segment))}},{key:"first",value:function(){var e=this.segments,t=this.points;return e.length&&t[e[0].start]}},{key:"last",value:function(){var e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}},{key:"interpolate",value:function(e,t){var n=this.options,r=e[t],a=this.points,i=une(this,{property:t,start:r,end:r});if(i.length){var o,s,u=[],l=function(e){return e.stepped?Qte:e.tension||"monotone"===e.cubicInterpolationMode?Jte:Zte}(n);for(o=0,s=i.length;o<s;++o){var c=i[o],f=c.start,d=c.end,h=a[f],p=a[d];if(h!==p){var v=l(h,p,Math.abs((r-h[t])/(p[t]-h[t])),n.stepped);v[t]=e[t],u.push(v)}else u.push(h)}return 1===u.length?u[0]:u}}},{key:"pathSegment",value:function(e,t,n){return Pae(this)(e,this,t,n)}},{key:"path",value:function(e,t,n){var r=this.segments,a=Pae(this),i=this._loop;t=t||0,n=n||this.points.length-t;var o,s=bC(r);try{for(s.s();!(o=s.n()).done;){i&=a(e,this,o.value,{start:t,end:t+n-1})}}catch(bfe){s.e(bfe)}finally{s.f()}return!!i}},{key:"draw",value:function(e,t,n,r){var a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),Dae(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}]),n}(Fre);function zae(e,t,n,r){var a=e.options,i=e.getProps([n],r)[n];return Math.abs(t-i)<a.radius+a.hitRadius}Lae.id="line",Lae.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Lae.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Lae.descriptors={_scriptable:!0,_indexable:function(e){return"borderDash"!==e&&"fill"!==e}};var jae=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).options=void 0,r.parsed=void 0,r.skip=void 0,r.stop=void 0,e&&Object.assign(aR(r),e),r}return yC(n,[{key:"inRange",value:function(e,t,n){var r=this.options,a=this.getProps(["x","y"],n),i=a.x,o=a.y;return Math.pow(e-i,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}},{key:"inXRange",value:function(e,t){return zae(this,e,"x",t)}},{key:"inYRange",value:function(e,t){return zae(this,e,"y",t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"size",value:function(e){var t=(e=e||this.options||{}).radius||0;return 2*((t=Math.max(t,t&&e.hoverRadius||0))+(t&&e.borderWidth||0))}},{key:"draw",value:function(e,t){var n=this.options;this.skip||n.radius<.1||!Gee(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Hee(e,n,this.x,this.y))}},{key:"getRange",value:function(){var e=this.options||{};return e.radius+e.hitRadius}}]),n}(Fre);function Bae(e,t){var n,r,a,i,o,s=e.getProps(["x","y","base","width","height"],t),u=s.x,l=s.y,c=s.base,f=s.width,d=s.height;return e.horizontal?(o=d/2,n=Math.min(u,c),r=Math.max(u,c),a=l-o,i=l+o):(n=u-(o=f/2),r=u+o,a=Math.min(l,c),i=Math.max(l,c)),{left:n,top:a,right:r,bottom:i}}function Wae(e,t,n,r){return e?0:G9(t,n,r)}function Uae(e){var t=Bae(e),n=t.right-t.left,r=t.bottom-t.top,a=function(e,t,n){var r=e.options.borderWidth,a=e.borderSkipped,i=ate(r);return{t:Wae(a.top,i.top,0,n),r:Wae(a.right,i.right,0,t),b:Wae(a.bottom,i.bottom,0,n),l:Wae(a.left,i.left,0,t)}}(e,n/2,r/2),i=function(e,t,n){var r=e.getProps(["enableBorderRadius"]).enableBorderRadius,a=e.options.borderRadius,i=ite(a),o=Math.min(t,n),s=e.borderSkipped,u=r||r9(a);return{topLeft:Wae(!u||s.top||s.left,i.topLeft,0,o),topRight:Wae(!u||s.top||s.right,i.topRight,0,o),bottomLeft:Wae(!u||s.bottom||s.left,i.bottomLeft,0,o),bottomRight:Wae(!u||s.bottom||s.right,i.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:i},inner:{x:t.left+a.l,y:t.top+a.t,w:n-a.l-a.r,h:r-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function Vae(e,t,n,r){var a=null===t,i=null===n,o=e&&!(a&&i)&&Bae(e,r);return o&&(a||q9(t,o.left,o.right))&&(i||q9(n,o.top,o.bottom))}function Hae(e,t){e.rect(t.x,t.y,t.w,t.h)}function Gae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.x!==n.x?-t:0,a=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-a;return{x:e.x+r,y:e.y+a,w:e.w+i,h:e.h+o,radius:e.radius}}jae.id="point",jae.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},jae.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var qae=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).options=void 0,r.horizontal=void 0,r.base=void 0,r.width=void 0,r.height=void 0,r.inflateAmount=void 0,e&&Object.assign(aR(r),e),r}return yC(n,[{key:"draw",value:function(e){var t,n=this.inflateAmount,r=this.options,a=r.borderColor,i=r.backgroundColor,o=Uae(this),s=o.inner,u=o.outer,l=(t=u.radius).topLeft||t.topRight||t.bottomLeft||t.bottomRight?Jee:Hae;e.save(),u.w===s.w&&u.h===s.h||(e.beginPath(),l(e,Gae(u,n,s)),e.clip(),l(e,Gae(s,-n,u)),e.fillStyle=a,e.fill("evenodd")),e.beginPath(),l(e,Gae(s,n)),e.fillStyle=i,e.fill(),e.restore()}},{key:"inRange",value:function(e,t,n){return Vae(this,e,t,n)}},{key:"inXRange",value:function(e,t){return Vae(this,e,null,t)}},{key:"inYRange",value:function(e,t){return Vae(this,null,e,t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","base","horizontal"],e),n=t.x,r=t.y,a=t.base,i=t.horizontal;return{x:i?(n+a)/2:n,y:i?r:(r+a)/2}}},{key:"getRange",value:function(e){return"x"===e?this.width/2:this.height/2}}]),n}(Fre);qae.id="bar",qae.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},qae.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Xae=function(e,t){var n=e.boxHeight,r=void 0===n?t:n,a=e.boxWidth,i=void 0===a?t:a;return e.usePointStyle&&(r=Math.min(r,t),i=Math.min(i,t)),{boxWidth:i,boxHeight:r,itemHeight:Math.max(t,r)}},Yae=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this))._added=!1,r.legendHitBoxes=[],r._hoveredItem=null,r.doughnutMode=!1,r.chart=e.chart,r.options=e.options,r.ctx=e.ctx,r.legendItems=void 0,r.columnSizes=void 0,r.lineWidths=void 0,r.maxHeight=void 0,r.maxWidth=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.height=void 0,r.width=void 0,r._margins=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return yC(n,[{key:"update",value:function(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var e=this,t=this.options.labels||{},n=u9(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter((function(n){return t.filter(n,e.chart.data)}))),t.sort&&(n=n.sort((function(n,r){return t.sort(n,r,e.chart.data)}))),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var e=this.options,t=this.ctx;if(e.display){var n,r,a=e.labels,i=ste(a.font),o=i.size,s=this._computeTitleHeight(),u=Xae(a,o),l=u.boxWidth,c=u.itemHeight;t.font=i.string,this.isHorizontal()?(n=this.maxWidth,r=this._fitRows(s,o,l,c)+10):(r=this.maxHeight,n=this._fitCols(s,o,l,c)+10),this.width=Math.min(n,e.maxWidth||this.maxWidth),this.height=Math.min(r,e.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(e,t,n,r){var a=this.ctx,i=this.maxWidth,o=this.options.labels.padding,s=this.legendHitBoxes=[],u=this.lineWidths=[0],l=r+o,c=e;a.textAlign="left",a.textBaseline="middle";var f=-1,d=-l;return this.legendItems.forEach((function(e,h){var p=n+t/2+a.measureText(e.text).width;(0===h||u[u.length-1]+p+2*o>i)&&(c+=l,u[u.length-(h>0?0:1)]=0,d+=l,f++),s[h]={left:0,top:d,row:f,width:p,height:r},u[u.length-1]+=p+o})),c}},{key:"_fitCols",value:function(e,t,n,r){var a=this.ctx,i=this.maxHeight,o=this.options.labels.padding,s=this.legendHitBoxes=[],u=this.columnSizes=[],l=i-e,c=o,f=0,d=0,h=0,p=0;return this.legendItems.forEach((function(e,i){var v=n+t/2+a.measureText(e.text).width;i>0&&d+r+2*o>l&&(c+=f+o,u.push({width:f,height:d}),h+=f+o,p++,f=d=0),s[i]={left:h,top:d,col:p,width:v,height:r},f=Math.max(f,v),d+=r+o})),c+=f,u.push({width:f,height:d}),c}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var e=this._computeTitleHeight(),t=this.legendHitBoxes,n=this.options,r=n.align,a=n.labels.padding,i=nne(n.rtl,this.left,this.width);if(this.isHorizontal()){var o,s=0,u=Q7(r,this.left+a,this.right-this.lineWidths[s]),l=bC(t);try{for(l.s();!(o=l.n()).done;){var c=o.value;s!==c.row&&(s=c.row,u=Q7(r,this.left+a,this.right-this.lineWidths[s])),c.top+=this.top+e+a,c.left=i.leftForLtr(i.x(u),c.width),u+=c.width+a}}catch(bfe){l.e(bfe)}finally{l.f()}}else{var f,d=0,h=Q7(r,this.top+e+a,this.bottom-this.columnSizes[d].height),p=bC(t);try{for(p.s();!(f=p.n()).done;){var v=f.value;v.col!==d&&(d=v.col,h=Q7(r,this.top+e+a,this.bottom-this.columnSizes[d].height)),v.top=h,v.left+=this.left+a,v.left=i.leftForLtr(i.x(v.left),v.width),h+=v.height+a}}catch(bfe){p.e(bfe)}finally{p.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var e=this.ctx;qee(e,this),this._draw(),Xee(e)}}},{key:"_draw",value:function(){var e,t=this,n=this.options,r=this.columnSizes,a=this.lineWidths,i=this.ctx,o=n.align,s=n.labels,u=jee.color,l=nne(n.rtl,this.left,this.width),c=ste(s.font),f=s.color,d=s.padding,h=c.size,p=h/2;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;var v=Xae(s,h),g=v.boxWidth,m=v.boxHeight,y=v.itemHeight,b=this.isHorizontal(),x=this._computeTitleHeight();e=b?{x:Q7(o,this.left+d,this.right-a[0]),y:this.top+d+x,line:0}:{x:this.left+d,y:Q7(o,this.top+x+d,this.bottom-r[0].height),line:0},rne(this.ctx,n.textDirection);var k=y+d;this.legendItems.forEach((function(v,w){i.strokeStyle=v.fontColor||f,i.fillStyle=v.fontColor||f;var S=i.measureText(v.text).width,_=l.textAlign(v.textAlign||(v.textAlign=s.textAlign)),C=g+p+S,E=e.x,A=e.y;l.setWidth(t.width),b?w>0&&E+C+d>t.right&&(A=e.y+=k,e.line++,E=e.x=Q7(o,t.left+d,t.right-a[e.line])):w>0&&A+k>t.bottom&&(E=e.x=E+r[e.line].width+d,e.line++,A=e.y=Q7(o,t.top+x+d,t.bottom-r[e.line].height)),function(e,t,n){if(!(isNaN(g)||g<=0||isNaN(m)||m<0)){i.save();var r=o9(n.lineWidth,1);if(i.fillStyle=o9(n.fillStyle,u),i.lineCap=o9(n.lineCap,"butt"),i.lineDashOffset=o9(n.lineDashOffset,0),i.lineJoin=o9(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=o9(n.strokeStyle,u),i.setLineDash(o9(n.lineDash,[])),s.usePointStyle){var a={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},o=l.xPlus(e,g/2);Hee(i,a,o,t+p)}else{var c=t+Math.max((h-m)/2,0),f=l.leftForLtr(e,g),d=ite(n.borderRadius);i.beginPath(),Object.values(d).some((function(e){return 0!==e}))?Jee(i,{x:f,y:c,w:g,h:m,radius:d}):i.rect(f,c,g,m),i.fill(),0!==r&&i.stroke()}i.restore()}}(l.x(E),A,v),E=function(e,t,n,r){return e===(r?"left":"right")?n:"center"===e?(t+n)/2:t}(_,E+g+p,b?E+C:t.right,n.rtl),function(e,t,n){$ee(i,n.text,e,t+y/2,c,{strikethrough:n.hidden,textAlign:l.textAlign(n.textAlign)})}(l.x(E),A,v),b?e.x+=C+d:e.y+=k})),ane(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var e=this.options,t=e.title,n=ste(t.font),r=ote(t.padding);if(t.display){var a,i=nne(e.rtl,this.left,this.width),o=this.ctx,s=t.position,u=n.size/2,l=r.top+u,c=this.left,f=this.width;if(this.isHorizontal())f=Math.max.apply(Math,pd(this.lineWidths)),a=this.top+l,c=Q7(e.align,c,this.right-f);else{var d=this.columnSizes.reduce((function(e,t){return Math.max(e,t.height)}),0);a=l+Q7(e.align,this.top,this.bottom-d-e.labels.padding-this._computeTitleHeight())}var h=Q7(s,c,c+f);o.textAlign=i.textAlign(Z7(s)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=n.string,$ee(o,t.text,h,a,n)}}},{key:"_computeTitleHeight",value:function(){var e=this.options.title,t=ste(e.font),n=ote(e.padding);return e.display?t.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(e,t){var n,r,a;if(q9(e,this.left,this.right)&&q9(t,this.top,this.bottom))for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(q9(e,(r=a[n]).left,r.left+r.width)&&q9(t,r.top,r.top+r.height))return this.legendItems[n];return null}},{key:"handleEvent",value:function(e){var t=this.options;if(function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t)){var n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){var r=this._hoveredItem,a=function(e,t){return null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index}(r,n);r&&!a&&u9(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!a&&u9(t.onHover,[e,n,this],this)}else n&&u9(t.onClick,[e,n,this],this)}}}]),n}(Fre);var Kae={id:"legend",_element:Yae,start:function(e,t,n){var r=e.legend=new Yae({ctx:e.ctx,options:n,chart:e});mre(e,r,n),vre(e,r)},stop:function(e){gre(e,e.legend),delete e.legend},beforeUpdate:function(e,t,n){var r=e.legend;mre(e,r,n),r.options=n},afterUpdate:function(e){var t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent:function(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(e,t,n){var r=t.datasetIndex,a=n.chart;a.isDatasetVisible(r)?(a.hide(r),t.hidden=!0):(a.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(e){return e.chart.options.color},boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.legend.options.labels,r=n.usePointStyle,a=n.pointStyle,i=n.textAlign,o=n.color;return e._getSortedDatasetMetas().map((function(e){var n=e.controller.getStyle(r?0:void 0),s=ote(n.borderWidth);return{text:t[e.index].label,fillStyle:n.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(s.width+s.height)/4,strokeStyle:n.borderColor,pointStyle:a||n.pointStyle,rotation:n.rotation,textAlign:i||n.textAlign,borderRadius:0,datasetIndex:e.index}}),this)}},title:{color:function(e){return e.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(e){return!e.startsWith("on")},labels:{_scriptable:function(e){return!["generateLabels","filter","sort"].includes(e)}}}};new WeakMap;var $ae={average:function(e){if(!e.length)return!1;var t,n,r=0,a=0,i=0;for(t=0,n=e.length;t<n;++t){var o=e[t].element;if(o&&o.hasValue()){var s=o.tooltipPosition();r+=s.x,a+=s.y,++i}}return{x:r/i,y:a/i}},nearest:function(e,t){if(!e.length)return!1;var n,r,a,i=t.x,o=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var u=e[n].element;if(u&&u.hasValue()){var l=W9(t,u.getCenterPoint());l<s&&(s=l,a=u)}}if(a){var c=a.tooltipPosition();i=c.x,o=c.y}return{x:i,y:o}}};function Zae(e,t){return t&&(n9(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Qae(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Jae(e,t){var n=t.element,r=t.datasetIndex,a=t.index,i=e.getDatasetMeta(r).controller,o=i.getLabelAndValue(a),s=o.label,u=o.value;return{chart:e,label:s,parsed:i.getParsed(a),raw:e.data.datasets[r].data[a],formattedValue:u,dataset:i.getDataset(),dataIndex:a,datasetIndex:r,element:n}}function eie(e,t){var n=e.chart.ctx,r=e.body,a=e.footer,i=e.title,o=t.boxWidth,s=t.boxHeight,u=ste(t.bodyFont),l=ste(t.titleFont),c=ste(t.footerFont),f=i.length,d=a.length,h=r.length,p=ote(t.padding),v=p.height,g=0,m=r.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);(m+=e.beforeBody.length+e.afterBody.length,f&&(v+=f*l.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),m)&&(v+=h*(t.displayColors?Math.max(s,u.lineHeight):u.lineHeight)+(m-h)*u.lineHeight+(m-1)*t.bodySpacing);d&&(v+=t.footerMarginTop+d*c.lineHeight+(d-1)*t.footerSpacing);var y=0,b=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=l.string,l9(e.title,b),n.font=u.string,l9(e.beforeBody.concat(e.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,l9(r,(function(e){l9(e.before,b),l9(e.lines,b),l9(e.after,b)})),y=0,n.font=c.string,l9(e.footer,b),n.restore(),{width:g+=p.width,height:v}}function tie(e,t,n,r){var a=n.x,i=n.width,o=e.width,s=e.chartArea,u=s.left,l=s.right,c="center";return"center"===r?c=a<=(u+l)/2?"left":"right":a<=i/2?c="left":a>=o-i/2&&(c="right"),function(e,t,n,r){var a=r.x,i=r.width,o=n.caretSize+n.caretPadding;return"left"===e&&a+i+o>t.width||"right"===e&&a-i-o<0||void 0}(c,e,t,n)&&(c="center"),c}function nie(e,t,n){var r=n.yAlign||t.yAlign||function(e,t){var n=t.y,r=t.height;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||tie(e,t,n,r),yAlign:r}}function rie(e,t,n,r){var a=e.caretSize,i=e.caretPadding,o=e.cornerRadius,s=n.xAlign,u=n.yAlign,l=a+i,c=ite(o),f=c.topLeft,d=c.topRight,h=c.bottomLeft,p=c.bottomRight,v=function(e,t){var n=e.x,r=e.width;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,s),g=function(e,t,n){var r=e.y,a=e.height;return"top"===t?r+=n:r-="bottom"===t?a+n:a/2,r}(t,u,l);return"center"===u?"left"===s?v+=l:"right"===s&&(v-=l):"left"===s?v-=Math.max(f,h)+a:"right"===s&&(v+=Math.max(d,p)+a),{x:G9(v,0,r.width-t.width),y:G9(g,0,r.height-t.height)}}function aie(e,t,n){var r=ote(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function iie(e){return Zae([],Qae(e))}function oie(e,t){var n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}var sie=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this)).opacity=0,r._active=[],r._eventPosition=void 0,r._size=void 0,r._cachedAnimations=void 0,r._tooltipItems=[],r.$animations=void 0,r.$context=void 0,r.chart=e.chart||e._chart,r._chart=r.chart,r.options=e.options,r.dataPoints=void 0,r.title=void 0,r.beforeBody=void 0,r.body=void 0,r.afterBody=void 0,r.footer=void 0,r.xAlign=void 0,r.yAlign=void 0,r.x=void 0,r.y=void 0,r.height=void 0,r.width=void 0,r.caretX=void 0,r.caretY=void 0,r.labelColors=void 0,r.labelPointStyles=void 0,r.labelTextColors=void 0,r}return yC(n,[{key:"initialize",value:function(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var e=this._cachedAnimations;if(e)return e;var t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,a=new yne(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}},{key:"getContext",value:function(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,lte(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}},{key:"getTitle",value:function(e,t){var n=t.callbacks,r=n.beforeTitle.apply(this,[e]),a=n.title.apply(this,[e]),i=n.afterTitle.apply(this,[e]),o=[];return o=Zae(o,Qae(r)),o=Zae(o,Qae(a)),o=Zae(o,Qae(i))}},{key:"getBeforeBody",value:function(e,t){return iie(t.callbacks.beforeBody.apply(this,[e]))}},{key:"getBody",value:function(e,t){var n=this,r=t.callbacks,a=[];return l9(e,(function(e){var t={before:[],lines:[],after:[]},i=oie(r,e);Zae(t.before,Qae(i.beforeLabel.call(n,e))),Zae(t.lines,i.label.call(n,e)),Zae(t.after,Qae(i.afterLabel.call(n,e))),a.push(t)})),a}},{key:"getAfterBody",value:function(e,t){return iie(t.callbacks.afterBody.apply(this,[e]))}},{key:"getFooter",value:function(e,t){var n=t.callbacks,r=n.beforeFooter.apply(this,[e]),a=n.footer.apply(this,[e]),i=n.afterFooter.apply(this,[e]),o=[];return o=Zae(o,Qae(r)),o=Zae(o,Qae(a)),o=Zae(o,Qae(i))}},{key:"_createItems",value:function(e){var t,n,r=this,a=this._active,i=this.chart.data,o=[],s=[],u=[],l=[];for(t=0,n=a.length;t<n;++t)l.push(Jae(this.chart,a[t]));return e.filter&&(l=l.filter((function(t,n,r){return e.filter(t,n,r,i)}))),e.itemSort&&(l=l.sort((function(t,n){return e.itemSort(t,n,i)}))),l9(l,(function(t){var n=oie(e.callbacks,t);o.push(n.labelColor.call(r,t)),s.push(n.labelPointStyle.call(r,t)),u.push(n.labelTextColor.call(r,t))})),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=u,this.dataPoints=l,l}},{key:"update",value:function(e,t){var n,r=this.options.setContext(this.getContext()),a=this._active,i=[];if(a.length){var o=$ae[r.position].call(this,a,this._eventPosition);i=this._createItems(r),this.title=this.getTitle(i,r),this.beforeBody=this.getBeforeBody(i,r),this.body=this.getBody(i,r),this.afterBody=this.getAfterBody(i,r),this.footer=this.getFooter(i,r);var s=this._size=eie(this,r),u=Object.assign({},o,s),l=nie(this.chart,r,u),c=rie(r,u,l,this.chart);this.xAlign=l.xAlign,this.yAlign=l.yAlign,n={opacity:1,x:c.x,y:c.y,width:s.width,height:s.height,caretX:o.x,caretY:o.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=i,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}},{key:"drawCaret",value:function(e,t,n,r){var a=this.getCaretPosition(e,n,r);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}},{key:"getCaretPosition",value:function(e,t,n){var r,a,i,o,s,u,l=this.xAlign,c=this.yAlign,f=n.caretSize,d=ite(n.cornerRadius),h=d.topLeft,p=d.topRight,v=d.bottomLeft,g=d.bottomRight,m=e.x,y=e.y,b=t.width,x=t.height;return"center"===c?(s=y+x/2,"left"===l?(a=(r=m)-f,o=s+f,u=s-f):(a=(r=m+b)+f,o=s-f,u=s+f),i=r):(a="left"===l?m+Math.max(h,v)+f:"right"===l?m+b-Math.max(p,g)-f:this.caretX,"top"===c?(s=(o=y)-f,r=a-f,i=a+f):(s=(o=y+x)+f,r=a+f,i=a-f),u=o),{x1:r,x2:a,x3:i,y1:o,y2:s,y3:u}}},{key:"drawTitle",value:function(e,t,n){var r,a,i,o=this.title,s=o.length;if(s){var u=nne(n.rtl,this.x,this.width);for(e.x=aie(this,n.titleAlign,n),t.textAlign=u.textAlign(n.titleAlign),t.textBaseline="middle",r=ste(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=r.string,i=0;i<s;++i)t.fillText(o[i],u.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+a,i+1===s&&(e.y+=n.titleMarginBottom-a)}}},{key:"_drawColorBox",value:function(e,t,n,r,a){var i=this.labelColors[n],o=this.labelPointStyles[n],s=a.boxHeight,u=a.boxWidth,l=a.boxPadding,c=ste(a.bodyFont),f=aie(this,"left",a),d=r.x(f),h=s<c.lineHeight?(c.lineHeight-s)/2:0,p=t.y+h;if(a.usePointStyle){var v={radius:Math.min(u,s)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},g=r.leftForLtr(d,u)+u/2,m=p+s/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Hee(e,v,g,m),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,Hee(e,v,g,m)}else{e.lineWidth=i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;var y=r.leftForLtr(d,u-l),b=r.leftForLtr(r.xPlus(d,1),u-l-2),x=ite(i.borderRadius);Object.values(x).some((function(e){return 0!==e}))?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Jee(e,{x:y,y:p,w:u,h:s,radius:x}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),Jee(e,{x:b,y:p+1,w:u-2,h:s-2,radius:x}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(y,p,u,s),e.strokeRect(y,p,u,s),e.fillStyle=i.backgroundColor,e.fillRect(b,p+1,u-2,s-2))}e.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(e,t,n){var r,a,i,o,s,u,l,c=this.body,f=n.bodySpacing,d=n.bodyAlign,h=n.displayColors,p=n.boxHeight,v=n.boxWidth,g=n.boxPadding,m=ste(n.bodyFont),y=m.lineHeight,b=0,x=nne(n.rtl,this.x,this.width),k=function(n){t.fillText(n,x.x(e.x+b),e.y+y/2),e.y+=y+f},w=x.textAlign(d);for(t.textAlign=d,t.textBaseline="middle",t.font=m.string,e.x=aie(this,w,n),t.fillStyle=n.bodyColor,l9(this.beforeBody,k),b=h&&"right"!==w?"center"===d?v/2+g:v+2+g:0,o=0,u=c.length;o<u;++o){for(r=c[o],a=this.labelTextColors[o],t.fillStyle=a,l9(r.before,k),i=r.lines,h&&i.length&&(this._drawColorBox(t,e,o,x,n),y=Math.max(m.lineHeight,p)),s=0,l=i.length;s<l;++s)k(i[s]),y=m.lineHeight;l9(r.after,k)}b=0,y=m.lineHeight,l9(this.afterBody,k),e.y-=f}},{key:"drawFooter",value:function(e,t,n){var r,a,i=this.footer,o=i.length;if(o){var s=nne(n.rtl,this.x,this.width);for(e.x=aie(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",r=ste(n.footerFont),t.fillStyle=n.footerColor,t.font=r.string,a=0;a<o;++a)t.fillText(i[a],s.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(e,t,n,r){var a=this.xAlign,i=this.yAlign,o=e.x,s=e.y,u=n.width,l=n.height,c=ite(r.cornerRadius),f=c.topLeft,d=c.topRight,h=c.bottomLeft,p=c.bottomRight;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+f,s),"top"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+u-d,s),t.quadraticCurveTo(o+u,s,o+u,s+d),"center"===i&&"right"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+u,s+l-p),t.quadraticCurveTo(o+u,s+l,o+u-p,s+l),"bottom"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+h,s+l),t.quadraticCurveTo(o,s+l,o,s+l-h),"center"===i&&"left"===a&&this.drawCaret(e,t,n,r),t.lineTo(o,s+f),t.quadraticCurveTo(o,s,o+f,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}},{key:"_updateAnimationTarget",value:function(e){var t=this.chart,n=this.$animations,r=n&&n.x,a=n&&n.y;if(r||a){var i=$ae[e.position].call(this,this._active,this._eventPosition);if(!i)return;var o=this._size=eie(this,e),s=Object.assign({},i,this._size),u=nie(t,e,s),l=rie(e,s,u,t);r._to===l.x&&a._to===l.y||(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(e){var t=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(t);var r={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;var i=ote(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,r,t),rne(e,t.textDirection),a.y+=i.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),ane(e,t.textDirection),e.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e,t){var n=this,r=this._active,a=e.map((function(e){var t=e.datasetIndex,r=e.index,a=n.chart.getDatasetMeta(t);if(!a)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:a.data[r],index:r}})),i=!c9(r,a),o=this._positionChanged(a,t);(i||o)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var r=this.options,a=this._active||[],i=this._getActiveElements(e,a,t,n),o=this._positionChanged(i,e),s=t||!c9(i,a)||o;return s&&(this._active=i,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}},{key:"_getActiveElements",value:function(e,t,n,r){var a=this.options;if("mouseout"===e.type)return[];if(!r)return t;var i=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&i.reverse(),i}},{key:"_positionChanged",value:function(e,t){var n=this.caretX,r=this.caretY,a=this.options,i=$ae[a.position].call(this,e,t);return!1!==i&&(n!==i.x||r!==i.y)}}]),n}(Fre);sie.positioners=$ae;var uie={id:"tooltip",_element:sie,positioners:$ae,afterInit:function(e,t,n){n&&(e.tooltip=new sie({chart:e,options:n}))},beforeUpdate:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw:function(e){var t=e.tooltip;if(t&&t._willRender()){var n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",n))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent:function(e,t){if(e.tooltip){var n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(e,t){return t.bodyFont.size},boxWidth:function(e,t){return t.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:J7,title:function(e){if(e.length>0){var t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:J7,beforeBody:J7,beforeLabel:J7,label:function(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;var t=e.dataset.label||"";t&&(t+=": ");var n=e.formattedValue;return t9(n)||(t+=n),t},labelColor:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:J7,afterBody:J7,beforeFooter:J7,footer:J7,afterFooter:J7}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(e){return"filter"!==e&&"itemSort"!==e&&"external"!==e},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function lie(e,t,n,r){var a=e.indexOf(t);return-1===a?function(e,t,n,r){return"string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n}(e,t,n,r):a!==e.lastIndexOf(t)?n:a}var cie=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e))._startValue=void 0,r._valueRange=0,r._addedLabels=[],r}return yC(n,[{key:"init",value:function(e){var t=this._addedLabels;if(t.length){var r,a=this.getLabels(),i=bC(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.index,u=o.label;a[s]===u&&a.splice(s,1)}}catch(bfe){i.e(bfe)}finally{i.f()}this._addedLabels=[]}UU(nR(n.prototype),"init",this).call(this,e)}},{key:"parse",value:function(e,t){if(t9(e))return null;var n=this.getLabels();return function(e,t){return null===e?null:G9(Math.round(e),0,t)}(t=isFinite(t)&&n[t]===e?t:lie(n,e,o9(t,e),this._addedLabels),n.length-1)}},{key:"determineDataLimits",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.getMinMax(!0),a=r.min,i=r.max;"ticks"===this.options.bounds&&(t||(a=0),n||(i=this.getLabels().length-1)),this.min=a,this.max=i}},{key:"buildTicks",value:function(){var e=this.min,t=this.max,n=this.options.offset,r=[],a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(var i=e;i<=t;i++)r.push({value:i});return r}},{key:"getLabelForValue",value:function(e){var t=this.getLabels();return e>=0&&e<t.length?t[e]:e}},{key:"configure",value:function(){UU(nR(n.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getValueForPixel",value:function(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}]),n}(qre);function fie(e,t){var n,r,a,i,o=[],s=e.bounds,u=e.step,l=e.min,c=e.max,f=e.precision,d=e.count,h=e.maxTicks,p=e.maxDigits,v=e.includeBounds,g=u||1,m=h-1,y=t.min,b=t.max,x=!t9(l),k=!t9(c),w=!t9(d),S=(b-y)/(p+1),_=O9((b-y)/m/g)*g;if(_<1e-14&&!x&&!k)return[{value:y},{value:b}];(i=Math.ceil(b/_)-Math.floor(y/_))>m&&(_=O9(i*_/m/g)*g),t9(f)||(n=Math.pow(10,f),_=Math.ceil(_*n)/n),"ticks"===s?(r=Math.floor(y/_)*_,a=Math.ceil(b/_)*_):(r=y,a=b),x&&k&&u&&function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e}((c-l)/u,_/1e3)?(_=(c-l)/(i=Math.round(Math.min((c-l)/_,h))),r=l,a=c):w?_=((a=k?c:a)-(r=x?l:r))/(i=d-1):i=F9(i=(a-r)/_,Math.round(i),_/1e3)?Math.round(i):Math.ceil(i);var C=Math.max(j9(_),j9(r));n=Math.pow(10,t9(f)?C:f),r=Math.round(r*n)/n,a=Math.round(a*n)/n;var E=0;for(x&&(v&&r!==l?(o.push({value:l}),r<l&&E++,F9(Math.round((r+E*_)*n)/n,l,die(l,S,e))&&E++):r<l&&E++);E<i;++E)o.push({value:Math.round((r+E*_)*n)/n});return k&&v&&a!==c?o.length&&F9(o[o.length-1].value,c,die(c,S,e))?o[o.length-1].value=c:o.push({value:c}):k&&a!==c||o.push({value:a}),o}function die(e,t,n){var r=n.horizontal,a=L9(n.minRotation),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}cie.id="category",cie.defaults={ticks:{callback:cie.prototype.getLabelForValue}};var hie=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._endValue=void 0,r._valueRange=0,r}return yC(n,[{key:"parse",value:function(e,t){return t9(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}},{key:"handleTickRangeOptions",value:function(){var e=this.options.beginAtZero,t=this.getUserBounds(),n=t.minDefined,r=t.maxDefined,a=this.min,i=this.max,o=function(e){return a=n?a:e},s=function(e){return i=r?i:e};if(e){var u=M9(a),l=M9(i);u<0&&l<0?s(0):u>0&&l>0&&o(0)}if(a===i){var c=1;(i>=Number.MAX_SAFE_INTEGER||a<=Number.MIN_SAFE_INTEGER)&&(c=Math.abs(.05*i)),s(i+c),e||o(a-c)}this.min=a,this.max=i}},{key:"getTickLimit",value:function(){var e,t=this.options.ticks,n=t.maxTicksLimit,r=t.stepSize;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var e=this.options,t=e.ticks,n=this.getTickLimit(),r=fie({maxTicks:n=Math.max(2,n),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&D9(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}},{key:"configure",value:function(){var e=this.ticks,t=this.min,r=this.max;if(UU(nR(n.prototype),"configure",this).call(this),this.options.offset&&e.length){var a=(r-t)/Math.max(e.length-1,1)/2;t-=a,r+=a}this._startValue=t,this._endValue=r,this._valueRange=r-t}},{key:"getLabelForValue",value:function(e){return tne(e,this.chart.options.locale,this.options.ticks.format)}}]),n}(qre),pie=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=a9(t)?t:0,this.max=a9(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var e=this.isHorizontal(),t=e?this.width:this.height,n=L9(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}},{key:"getPixelForValue",value:function(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}]),n}(hie);function vie(e){return 1===e/Math.pow(10,Math.floor(N9(e)))}pie.id="linear",pie.defaults={ticks:{callback:Lre.formatters.numeric}};var gie=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._valueRange=0,r}return yC(n,[{key:"parse",value:function(e,t){var n=hie.prototype.parse.apply(this,[e,t]);if(0!==n)return a9(n)&&n>0?n:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=a9(t)?Math.max(0,t):null,this.max=a9(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.min,a=this.max,i=function(e){return r=t?r:e},o=function(e){return a=n?a:e},s=function(e,t){return Math.pow(10,Math.floor(N9(e))+t)};r===a&&(r<=0?(i(1),o(10)):(i(s(r,-1)),o(s(a,1)))),r<=0&&i(s(a,-1)),a<=0&&o(s(r,1)),this._zero&&this.min!==this._suggestedMin&&r===s(this.min,0)&&i(s(r,-1)),this.min=r,this.max=a}},{key:"buildTicks",value:function(){var e=this.options,t=function(e,t){var n=Math.floor(N9(t.max)),r=Math.ceil(t.max/Math.pow(10,n)),a=[],i=i9(e.min,Math.pow(10,Math.floor(N9(t.min)))),o=Math.floor(N9(i)),s=Math.floor(i/Math.pow(10,o)),u=o<0?Math.pow(10,Math.abs(o)):1;do{a.push({value:i,major:vie(i)}),10===++s&&(s=1,u=++o>=0?1:u),i=Math.round(s*Math.pow(10,o)*u)/u}while(o<n||o===n&&s<r);var l=i9(e.max,i);return a.push({value:l,major:vie(i)}),a}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&D9(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}},{key:"getLabelForValue",value:function(e){return void 0===e?"0":tne(e,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var e=this.min;UU(nR(n.prototype),"configure",this).call(this),this._startValue=N9(e),this._valueRange=N9(this.max)-N9(e)}},{key:"getPixelForValue",value:function(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(N9(e)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){var t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}]),n}(qre);function mie(e){var t=e.ticks;if(t.display&&e.display){var n=ote(t.backdropPadding);return o9(t.font&&t.font.size,jee.font.size)+n.height}return 0}function yie(e,t,n,r,a){return e===r||e===a?{start:t-n/2,end:t+n/2}:e<r||e>a?{start:t-n,end:t}:{start:t,end:t+n}}function bie(e){for(var t,n,r,a={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},a),o=[],s=[],u=e._pointLabels.length,l=e.options.pointLabels,c=l.centerPointLabels?S9/u:0,f=0;f<u;f++){var d=l.setContext(e.getPointLabelContext(f));s[f]=d.padding;var h=e.getPointPosition(f,e.drawingArea+s[f],c),p=ste(d.font),v=(t=e.ctx,n=p,r=n9(r=e._pointLabels[f])?r:[r],{w:Wee(t,n.string,r),h:r.length*n.lineHeight});o[f]=v;var g=V9(e.getIndexAngle(f)+c),m=Math.round(z9(g));xie(i,a,g,yie(m,h.x,v.w,0,180),yie(m,h.y,v.h,90,270))}e.setCenterPoint(a.l-i.l,i.r-a.r,a.t-i.t,i.b-a.b),e._pointLabelItems=function(e,t,n){for(var r=[],a=e._pointLabels.length,i=e.options,o=mie(i)/2,s=e.drawingArea,u=i.pointLabels.centerPointLabels?S9/a:0,l=0;l<a;l++){var c=e.getPointPosition(l,s+o+n[l],u),f=Math.round(z9(V9(c.angle+I9))),d=t[l],h=Sie(c.y,d.h,f),p=kie(f),v=wie(c.x,d.w,p);r.push({x:c.x,y:h,textAlign:p,left:v,top:h,right:v+d.w,bottom:h+d.h})}return r}(e,o,s)}function xie(e,t,n,r,a){var i=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n)),s=0,u=0;r.start<t.l?(s=(t.l-r.start)/i,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/i,e.r=Math.max(e.r,t.r+s)),a.start<t.t?(u=(t.t-a.start)/o,e.t=Math.min(e.t,t.t-u)):a.end>t.b&&(u=(a.end-t.b)/o,e.b=Math.max(e.b,t.b+u))}function kie(e){return 0===e||180===e?"center":e<180?"left":"right"}function wie(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function Sie(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function _ie(e,t,n,r){var a=e.ctx;if(n)a.arc(e.xCenter,e.yCenter,t,0,_9);else{var i=e.getPointPosition(0,t);a.moveTo(i.x,i.y);for(var o=1;o<r;o++)i=e.getPointPosition(o,t),a.lineTo(i.x,i.y)}}gie.id="logarithmic",gie.defaults={ticks:{callback:Lre.formatters.logarithmic,major:{enabled:!0}}};var Cie=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e)).xCenter=void 0,r.yCenter=void 0,r.drawingArea=void 0,r._pointLabels=[],r._pointLabelItems=[],r}return yC(n,[{key:"setDimensions",value:function(){var e=this._padding=ote(mie(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!1),t=e.min,n=e.max;this.min=a9(t)&&!isNaN(t)?t:0,this.max=a9(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/mie(this.options))}},{key:"generateTickLabels",value:function(e){var t=this;hie.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((function(e,n){var r=u9(t.options.pointLabels.callback,[e,n],t);return r||0===r?r:""})).filter((function(e,n){return t.chart.getDataVisibility(n)}))}},{key:"fit",value:function(){var e=this.options;e.display&&e.pointLabels.display?bie(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}},{key:"getIndexAngle",value:function(e){return V9(e*(_9/(this._pointLabels.length||1))+L9(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(e){if(t9(e))return NaN;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}},{key:"getValueForDistanceFromCenter",value:function(e){if(t9(e))return NaN;var t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}},{key:"getPointLabelContext",value:function(e){var t=this._pointLabels||[];if(e>=0&&e<t.length){var n=t[e];return function(e,t,n){return lte(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}},{key:"getPointPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getIndexAngle(e)-I9+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}},{key:"getPointPositionForValue",value:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}},{key:"getBasePosition",value:function(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(e){var t=this._pointLabelItems[e];return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},{key:"drawBackground",value:function(){var e=this.options,t=e.backgroundColor,n=e.grid.circular;if(t){var r=this.ctx;r.save(),r.beginPath(),_ie(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}},{key:"drawGrid",value:function(){var e,t,n,r=this,a=this.ctx,i=this.options,o=i.angleLines,s=i.grid,u=this._pointLabels.length;if(i.pointLabels.display&&function(e,t){for(var n=e.ctx,r=e.options.pointLabels,a=t-1;a>=0;a--){var i=r.setContext(e.getPointLabelContext(a)),o=ste(i.font),s=e._pointLabelItems[a],u=s.x,l=s.y,c=s.textAlign,f=s.left,d=s.top,h=s.right,p=s.bottom,v=i.backdropColor;if(!t9(v)){var g=ite(i.borderRadius),m=ote(i.backdropPadding);n.fillStyle=v;var y=f-m.left,b=d-m.top,x=h-f+m.width,k=p-d+m.height;Object.values(g).some((function(e){return 0!==e}))?(n.beginPath(),Jee(n,{x:y,y:b,w:x,h:k,radius:g}),n.fill()):n.fillRect(y,b,x,k)}$ee(n,e._pointLabels[a],u,l+o.lineHeight/2,o,{color:i.color,textAlign:c,textBaseline:"middle"})}}(this,u),s.display&&this.ticks.forEach((function(e,n){if(0!==n){t=r.getDistanceFromCenterForValue(e.value);var a=s.setContext(r.getContext(n-1));!function(e,t,n,r){var a=e.ctx,i=t.circular,o=t.color,s=t.lineWidth;!i&&!r||!o||!s||n<0||(a.save(),a.strokeStyle=o,a.lineWidth=s,a.setLineDash(t.borderDash),a.lineDashOffset=t.borderDashOffset,a.beginPath(),_ie(e,n,i,r),a.closePath(),a.stroke(),a.restore())}(r,a,t,u)}})),o.display){for(a.save(),e=u-1;e>=0;e--){var l=o.setContext(this.getPointLabelContext(e)),c=l.color,f=l.lineWidth;f&&c&&(a.lineWidth=f,a.strokeStyle=c,a.setLineDash(l.borderDash),a.lineDashOffset=l.borderDashOffset,t=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),n=this.getPointPosition(e,t),a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(n.x,n.y),a.stroke())}a.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var e=this,t=this.ctx,n=this.options,r=n.ticks;if(r.display){var a,i,o=this.getIndexAngle(0);t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((function(o,s){if(0!==s||n.reverse){var u=r.setContext(e.getContext(s)),l=ste(u.font);if(a=e.getDistanceFromCenterForValue(e.ticks[s].value),u.showLabelBackdrop){t.font=l.string,i=t.measureText(o.label).width,t.fillStyle=u.backdropColor;var c=ote(u.backdropPadding);t.fillRect(-i/2-c.left,-a-l.size/2-c.top,i+c.width,l.size+c.height)}$ee(t,o.label,0,-a,l,{color:u.color})}})),t.restore()}}},{key:"drawTitle",value:function(){}}]),n}(hie);Cie.id="radialLinear",Cie.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Lre.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(e){return e},padding:5,centerPointLabels:!1}},Cie.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Cie.descriptors={angleLines:{_fallback:"grid"}};var Eie={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Aie=Object.keys(Eie);function Iie(e,t){return e-t}function Tie(e,t){if(t9(t))return null;var n=e._adapter,r=e._parseOpts,a=r.parser,i=r.round,o=r.isoWeekday,s=t;return"function"===typeof a&&(s=a(s)),a9(s)||(s="string"===typeof a?n.parse(s,a):n.parse(s)),null===s?null:(i&&(s="week"!==i||!P9(o)&&!0!==o?n.startOf(s,i):n.startOf(s,"isoWeek",o)),+s)}function Rie(e,t,n,r){for(var a=Aie.length,i=Aie.indexOf(e);i<a-1;++i){var o=Eie[Aie[i]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(s*o.size))<=r)return Aie[i]}return Aie[a-1]}function Nie(e,t,n){if(n){if(n.length){var r=cte(n,t),a=r.lo,i=r.hi;e[n[a]>=t?n[a]:n[i]]=!0}}else e[t]=!0}function Mie(e,t,n){var r,a,i=[],o={},s=t.length;for(r=0;r<s;++r)o[a=t[r]]=r,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,r){var a,i,o=e._adapter,s=+o.startOf(t[0].value,r),u=t[t.length-1].value;for(a=s;a<=u;a=+o.add(a,1,r))(i=n[a])>=0&&(t[i].major=!0);return t}(e,i,o,n):i}var Oie=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e))._cache={data:[],labels:[],all:[]},r._unit="day",r._majorUnit=void 0,r._offsets={},r._normalized=!1,r._parseOpts=void 0,r}return yC(n,[{key:"init",value:function(e,t){var r=e.time||(e.time={}),a=this._adapter=new Kne._date(e.adapters.date);v9(r.displayFormats,a.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},UU(nR(n.prototype),"init",this).call(this,e),this._normalized=t.normalized}},{key:"parse",value:function(e,t){return void 0===e?null:Tie(this,e)}},{key:"beforeLayout",value:function(){UU(nR(n.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var e=this.options,t=this._adapter,n=e.time.unit||"day",r=this.getUserBounds(),a=r.min,i=r.max,o=r.minDefined,s=r.maxDefined;function u(e){o||isNaN(e.min)||(a=Math.min(a,e.min)),s||isNaN(e.max)||(i=Math.max(i,e.max))}o&&s||(u(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||u(this.getMinMax(!1))),a=a9(a)&&!isNaN(a)?a:+t.startOf(Date.now(),n),i=a9(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}},{key:"_getLabelBounds",value:function(){var e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}},{key:"buildTicks",value:function(){var e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);var a=this.min,i=function(e,t,n){for(var r=0,a=e.length;r<a&&e[r]<t;)r++;for(;a>r&&e[a-1]>n;)a--;return r>0||a<e.length?e.slice(r,a):e}(r,a,this.max);return this._unit=t.unit||(n.autoSkip?Rie(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,n,r,a){for(var i=Aie.length-1;i>=Aie.indexOf(n);i--){var o=Aie[i];if(Eie[o].common&&e._adapter.diff(a,r,o)>=t-1)return o}return Aie[n?Aie.indexOf(n):0]}(this,i.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(var t=Aie.indexOf(e)+1,n=Aie.length;t<n;++t)if(Eie[Aie[t]].common)return Aie[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&i.reverse(),Mie(this,i,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((function(e){return+e.value})))}},{key:"initOffsets",value:function(e){var t,n,r=0,a=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),a=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);var i=e.length<3?.5:.25;r=G9(r,0,i),a=G9(a,0,i),this._offsets={start:r,end:a,factor:1/(r+1+a)}}},{key:"_generate",value:function(){var e,t,n=this._adapter,r=this.min,a=this.max,i=this.options,o=i.time,s=o.unit||Rie(o.minUnit,r,a,this._getLabelCapacity(r)),u=o9(o.stepSize,1),l="week"===s&&o.isoWeekday,c=P9(l)||!0===l,f={},d=r;if(c&&(d=+n.startOf(d,"isoWeek",l)),d=+n.startOf(d,c?"day":s),n.diff(a,r,s)>1e5*u)throw new Error(r+" and "+a+" are too far apart with stepSize of "+u+" "+s);var h="data"===i.ticks.source&&this.getDataTimestamps();for(e=d,t=0;e<a;e=+n.add(e,u,s),t++)Nie(f,e,h);return e!==a&&"ticks"!==i.bounds&&1!==t||Nie(f,e,h),Object.keys(f).sort((function(e,t){return e-t})).map((function(e){return+e}))}},{key:"getLabelForValue",value:function(e){var t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}},{key:"_tickFormatFunction",value:function(e,t,n,r){var a=this.options,i=a.time.displayFormats,o=this._unit,s=this._majorUnit,u=o&&i[o],l=s&&i[s],c=n[t],f=s&&l&&c&&c.major,d=this._adapter.format(e,r||(f?l:u)),h=a.ticks.callback;return h?u9(h,[d,t,n],this):d}},{key:"generateTickLabels",value:function(e){var t,n,r;for(t=0,n=e.length;t<n;++t)(r=e[t]).label=this._tickFormatFunction(r.value,t,e)}},{key:"getDecimalForValue",value:function(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(e){var t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,r=L9(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(r),i=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*a+o*i,h:n*i+o*a}}},{key:"_getLabelCapacity",value:function(e){var t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,a=this._tickFormatFunction(e,0,Mie(this,[e],this._majorUnit),r),i=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return o>0?o:1}},{key:"getDataTimestamps",value:function(){var e,t,n=this._cache.data||[];if(n.length)return n;var r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var e,t,n=this._cache.labels||[];if(n.length)return n;var r=this.getLabels();for(e=0,t=r.length;e<t;++e)n.push(Tie(this,r[e]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(e){return vte(e.sort(Iie))}}]),n}(qre);function Pie(e,t,n){var r,a,i,o,s=0,u=e.length-1;if(n){if(t>=e[s].pos&&t<=e[u].pos){var l=fte(e,"pos",t);s=l.lo,u=l.hi}var c=e[s];r=c.pos,i=c.time;var f=e[u];a=f.pos,o=f.time}else{if(t>=e[s].time&&t<=e[u].time){var d=fte(e,"time",t);s=d.lo,u=d.hi}var h=e[s];r=h.time,i=h.pos;var p=e[u];a=p.time,o=p.pos}var v=a-r;return v?i+(o-i)*(t-r)/v:i}Oie.id="time",Oie.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};var Fie=function(e){tR(n,e);var t=oR(n);function n(e){var r;return gC(this,n),(r=t.call(this,e))._table=[],r._minPos=void 0,r._tableRange=void 0,r}return yC(n,[{key:"initOffsets",value:function(){var e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Pie(t,this.min),this._tableRange=Pie(t,this.max)-this._minPos,UU(nR(n.prototype),"initOffsets",this).call(this,e)}},{key:"buildLookupTable",value:function(e){var t,n,r,a,i,o=this.min,s=this.max,u=[],l=[];for(t=0,n=e.length;t<n;++t)(a=e[t])>=o&&a<=s&&u.push(a);if(u.length<2)return[{time:o,pos:0},{time:s,pos:1}];for(t=0,n=u.length;t<n;++t)i=u[t+1],r=u[t-1],a=u[t],Math.round((i+r)/2)!==a&&l.push({time:a,pos:t/(n-1)});return l}},{key:"_getTimestampsForTable",value:function(){var e=this._cache.all||[];if(e.length)return e;var t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e}},{key:"getDecimalForValue",value:function(e){return(Pie(this._table,e)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Pie(this._table,n*this._tableRange+this._minPos,!0)}}]),n}(Oie);Fie.id="timeseries",Fie.defaults=Oie.defaults;var Die=["click","dblclick"],Lie=["enter","leave"],zie=Die.concat(Lie);function jie(e,t,n){if(e.listened)switch(t.type){case"mousemove":case"mouseout":!function(e,t){if(!e.moveListened)return;var n;"mousemove"===t.type&&(n=Wie(e.elements,t));var r=e.hovered;e.hovered=n,function(e,t,n){var r=t.previous,a=t.element;r&&r!==a&&Bie(r.options.leave||e.listeners.leave,r,n);a&&a!==r&&Bie(a.options.enter||e.listeners.enter,a,n)}(e,{previous:r,element:n},t)}(e,t);break;case"click":!function(e,t,n){var r=e.listeners,a=Wie(e.elements,t);if(a){var i=a.options,o=i.dblclick||r.dblclick,s=i.click||r.click;a.clickTimeout?(clearTimeout(a.clickTimeout),delete a.clickTimeout,Bie(o,a,t)):o?a.clickTimeout=setTimeout((function(){delete a.clickTimeout,Bie(s,a,t)}),n.dblClickSpeed):Bie(s,a,t)}}(e,t,n)}}function Bie(e,t,n){u9(e,[t.$context,n])}function Wie(e,t){var n=Number.POSITIVE_INFINITY;return e.filter((function(e){return e.options.display&&e.inRange(t.x,t.y)})).reduce((function(e,r){var a=r.getCenterPoint(),i=W9(t,a);return i<n?(e=[r],n=i):i===n&&e.push(r),e}),[]).sort((function(e,t){return e._index-t._index})).slice(0,1)[0]}function Uie(e,t,n){var r=function(e,t){var n,r=e.axis,a=e.id,i=r+"ScaleID",o={min:o9(e.min,Number.NEGATIVE_INFINITY),max:o9(e.max,Number.POSITIVE_INFINITY)},s=bC(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;u.scaleID===a?qie(u,e,["value","endValue"],o):u[i]===a&&qie(u,e,[r+"Min",r+"Max",r+"Value"],o)}}catch(bfe){s.e(bfe)}finally{s.f()}return o}(t,n),a=Vie(t,r,"min","suggestedMin");(a=Vie(t,r,"max","suggestedMax")||a)&&"function"===typeof t.handleTickRangeOptions&&t.handleTickRangeOptions()}function Vie(e,t,n,r){if(a9(t[n])&&!function(e,t,n){return x9(e[t])||x9(e[n])}(e.options,n,r)){var a=e[n]!==t[n];return e[n]=t[n],a}}function Hie(e,t){for(var n=0,r=["scaleID","xScaleID","yScaleID"];n<r.length;n++){var a=r[n];e[a]&&!t[e[a]]&&Gie(e,a)&&console.warn("No scale found with id '".concat(e[a],"' for annotation '").concat(e.id,"'"))}}function Gie(e,t){if("scaleID"===t)return!0;for(var n=t.charAt(0),r=0,a=["Min","Max","Value"];r<a.length;r++){if(x9(e[n+a[r]]))return!0}return!1}function qie(e,t,n,r){var a,i=bC(n);try{for(i.s();!(a=i.n()).done;){var o=e[a.value];if(x9(o)){var s=t.parse(o);r.min=Math.min(r.min,s),r.max=Math.max(r.max,s)}}}catch(bfe){i.e(bfe)}finally{i.f()}}var Xie=.001,Yie=function(e,t,n){return Math.min(n,Math.max(t,e))};function Kie(e,t,n){for(var r=0,a=Object.keys(e);r<a.length;r++){var i=a[r];e[i]=Yie(e[i],t,n)}return e}function $ie(e,t,n,r){var a=n.x,i=n.y,o=n.width,s=n.height,u=r/2;return e>=a-u-Xie&&e<=a+o+u+Xie&&t>=i-u-Xie&&t<=i+s+u+Xie}function Zie(e,t){var n=e.getProps(["x","y"],t);return{x:n.x,y:n.y}}var Qie=function(e,t){return t>e||e.length>t.length&&e.substr(0,t.length)===t};var Jie=function(e){return"string"===typeof e&&e.endsWith("%")},eoe=function(e){return Yie(parseFloat(e)/100,0,1)};function toe(e,t){return"start"===t?0:"end"===t?e:Jie(t)?eoe(t)*e:e/2}function noe(e,t){return"number"===typeof t?t:Jie(t)?eoe(t)*e:e}function roe(e){return r9(e)?{x:o9(e.x,"center"),y:o9(e.y,"center")}:{x:e=o9(e,"center"),y:e}}function aoe(e){return e&&(x9(e.xValue)||x9(e.yValue))}var ioe=new Map;function ooe(e){if(e&&"object"===typeof e){var t=e.toString();return"[object HTMLImageElement]"===t||"[object HTMLCanvasElement]"===t}}function soe(e,t,n){if(n){var r=t.getCenterPoint();e.translate(r.x,r.y),e.rotate(L9(n)),e.translate(-r.x,-r.y)}}function uoe(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle,e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle,e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function loe(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function coe(e,t){var n=t.content;if(ooe(n))return{width:noe(n.width,t.width),height:noe(n.height,t.height)};var r=ste(t.font),a=t.textStrokeWidth,i=n9(n)?n:[n],o=i.join()+r.string+a+(e._measureText?"-spriting":"");if(!ioe.has(o)){e.save(),e.font=r.string;for(var s=i.length,u=0,l=0;l<s;l++){var c=i[l];u=Math.max(u,e.measureText(c).width+a)}e.restore();var f=s*r.lineHeight+a;ioe.set(o,{width:u,height:f})}return ioe.get(o)}function foe(e,t,n){var r=t.x,a=t.y,i=t.width,o=t.height;e.save(),loe(e,n);var s=uoe(e,n);e.fillStyle=n.backgroundColor,e.beginPath(),Jee(e,{x:r,y:a,w:i,h:o,radius:Kie(ite(o9(n.cornerRadius,n.borderRadius)),0,Math.min(i,o)/2)}),e.closePath(),e.fill(),s&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}function doe(e,t,n){var r=n.content;if(ooe(r))e.drawImage(r,t.x,t.y,t.width,t.height);else{var a=n9(r)?r:[r],i=ste(n.font),o=i.lineHeight,s=function(e,t){var n=e.x,r=e.width,a=t.textAlign;return"center"===a?n+r/2:"end"===a||"right"===a?n+r:n}(t,n),u=t.y+o/2+n.textStrokeWidth/2;e.save(),e.font=i.string,e.textBaseline="middle",e.textAlign=n.textAlign,function(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}(e,n)&&a.forEach((function(t,n){return e.strokeText(t,s,u+n*o)})),e.fillStyle=n.color,a.forEach((function(t,n){return e.fillText(t,s,u+n*o)})),e.restore()}}function hoe(e){var t=e.x,n=e.y;return{x:t+e.width/2,y:n+e.height/2}}function poe(e,t,n){var r=Math.cos(n),a=Math.sin(n),i=t.x,o=t.y;return{x:i+r*(e.x-i)-a*(e.y-o),y:o+a*(e.x-i)+r*(e.y-o)}}function voe(e,t,n){return t="number"===typeof t?t:e.parse(t),a9(t)?e.getPixelForValue(t):n}function goe(e,t){if(e){var n=voe(e,t.min,t.start),r=voe(e,t.max,t.end);return{start:Math.min(n,r),end:Math.max(n,r)}}return{start:t.start,end:t.end}}function moe(e,t){var n=e.chartArea,r=e.scales,a=r[t.xScaleID],i=r[t.yScaleID],o=n.width/2,s=n.height/2;return a&&(o=voe(a,t.xValue,o)),i&&(s=voe(i,t.yValue,s)),{x:o,y:s}}function yoe(e,t){var n=e.scales[t.xScaleID],r=e.scales[t.yScaleID],a=e.chartArea,i=a.top,o=a.left,s=a.bottom,u=a.right;if(!n&&!r)return{};var l=goe(n,{min:t.xMin,max:t.xMax,start:o,end:u});o=l.start,u=l.end;var c=goe(r,{min:t.yMin,max:t.yMax,start:i,end:s});return{x:o,y:i=c.start,x2:u,y2:s=c.end,width:u-o,height:s-i}}function boe(e,t){if(!aoe(t)){var n=yoe(e,t),r=hoe(n),a=t.radius;return a&&!isNaN(a)||(a=Math.min(n.width,n.height)/2,t.radius=a),{x:r.x+t.xAdjust,y:r.y+t.yAdjust,width:2*a,height:2*a}}return function(e,t){var n=moe(e,t);return{x:n.x+t.xAdjust,y:n.y+t.yAdjust,width:2*t.radius,height:2*t.radius}}(e,t)}var xoe=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"inRange",value:function(e,t,n){var r=poe({x:e,y:t},this.getCenterPoint(n),L9(-this.options.rotation));return $ie(r.x,r.y,this.getProps(["x","y","width","height"],n),this.options.borderWidth)}},{key:"getCenterPoint",value:function(e){return hoe(this.getProps(["x","y","width","height"],e))}},{key:"draw",value:function(e){e.save(),soe(e,this,this.options.rotation),foe(e,this,this.options),e.restore()}},{key:"drawLabel",value:function(e){var t=this.x,n=this.y,r=this.width,a=this.height,i=this.options,o=i.label,s=i.borderWidth,u=s/2,l=roe(o.position),c=ote(o.padding),f=coe(e,o),d={x:koe(this,f,l,c),y:woe(this,f,l,c),width:f.width,height:f.height};e.save(),soe(e,this,o.rotation),e.beginPath(),e.rect(t+u+c.left,n+u+c.top,r-s-c.width,a-s-c.height),e.clip(),doe(e,d,o),e.restore()}},{key:"resolveElementProperties",value:function(e,t){return yoe(e,t)}}]),n}(Fre);function koe(e,t,n,r){var a=e.x,i=e.x2,o=e.width,s=e.options.label,u=s.xAdjust,l=s.borderWidth;return Soe({start:a,end:i,size:o},{position:n.x,padding:{start:r.left,end:r.right},adjust:u,borderWidth:l,size:t.width})}function woe(e,t,n,r){var a=e.y,i=e.y2,o=e.height,s=e.options.label,u=s.yAdjust,l=s.borderWidth;return Soe({start:a,end:i,size:o},{position:n.y,padding:{start:r.top,end:r.bottom},adjust:u,borderWidth:l,size:t.height})}function Soe(e,t){var n=e.start,r=e.end,a=t.position,i=t.padding,o=i.start,s=i.end,u=t.adjust,l=t.borderWidth;return n+l/2+u+o+toe(r-l-n-o-s-t.size,a)}xoe.id="boxAnnotation",xoe.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,cornerRadius:void 0,display:!0,label:{borderWidth:void 0,color:"black",content:null,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,xAdjust:0,yAdjust:0,width:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"},xoe.defaultRoutes={borderColor:"color",backgroundColor:"color"},xoe.descriptors={label:{_fallback:!0}};var _oe=function(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}},Coe=function(e,t,n){return _oe(t,n,Math.abs((e-t.y)/(n.y-t.y))).x},Eoe=function(e,t,n){return _oe(t,n,Math.abs((e-t.x)/(n.x-t.x))).y},Aoe=function(e){return e*e},Ioe=.001;function Toe(e,t){var n=e.x,r=e.y,a=e.x2,i=e.y2,o=t.top,s=t.right,u=t.bottom,l=t.left;return!(n<l&&a<l||n>s&&a>s||r<o&&i<o||r>u&&i>u)}function Roe(e,t,n){var r=e.x,a=e.y,i=n.top,o=n.right,s=n.bottom,u=n.left;return r<u&&(a=Eoe(u,{x:r,y:a},t),r=u),r>o&&(a=Eoe(o,{x:r,y:a},t),r=o),a<i&&(r=Coe(i,{x:r,y:a},t),a=i),a>s&&(r=Coe(s,{x:r,y:a},t),a=s),{x:r,y:a}}var Noe=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"intersects",value:function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ioe,i=arguments.length>3?arguments[3]:void 0,o=this.getProps(["x","y","x2","y2"],i),s=o.x,u=o.y,l=o.x2,c=o.y2,f=l-s,d=c-u,h=Aoe(f)+Aoe(d),p=0===h?-1:((e-s)*f+(t-u)*d)/h;return p<0?(n=s,r=u):p>1?(n=l,r=c):(n=s+p*f,r=u+p*d),Aoe(e-n)+Aoe(t-r)<=a}},{key:"labelIsVisible",value:function(e,t){var n=this.options.label;return!(!n||!n.enabled)&&(!t||Toe(this.getProps(["x","y","x2","y2"],e),t))}},{key:"isOnLabel",value:function(e,t,n){if(!this.labelIsVisible(n))return!1;var r=this.getProps(["labelX","labelY","labelWidth","labelHeight","labelRotation"],n),a=r.labelX,i=r.labelY,o=r.labelWidth,s=r.labelHeight,u=poe({x:e,y:t},{x:a,y:i},-r.labelRotation),l=u.x,c=u.y,f=this.options.label.borderWidth/2||0,d=o/2+f,h=s/2+f;return l>=a-d-Ioe&&l<=a+d+Ioe&&c>=i-h-Ioe&&c<=i+h+Ioe}},{key:"inRange",value:function(e,t,n){var r=Aoe(this.options.borderWidth/2);return this.intersects(e,t,r,n)||this.isOnLabel(e,t,n)}},{key:"getCenterPoint",value:function(){return{x:(this.x2+this.x)/2,y:(this.y2+this.y)/2}}},{key:"draw",value:function(e){var t=this.x,n=this.y,r=this.x2,a=this.y2,i=this.options;if(e.save(),!uoe(e,i))return e.restore();loe(e,i);var o=Math.atan2(a-n,r-t),s=Math.sqrt(Math.pow(r-t,2)+Math.pow(a-n,2)),u=function(e){var t=e.options,n=t.arrowHeads&&t.arrowHeads.start,r=t.arrowHeads&&t.arrowHeads.end;return{startOpts:n,endOpts:r,startAdjust:Foe(e,n),endAdjust:Foe(e,r)}}(this),l=u.startOpts,c=u.endOpts,f=u.startAdjust,d=u.endAdjust;e.translate(t,n),e.rotate(o),e.beginPath(),e.moveTo(0+f,0),e.lineTo(s-d,0),e.shadowColor=i.borderShadowColor,e.stroke(),Doe(e,0,f,l),Doe(e,s,-d,c),e.restore()}},{key:"drawLabel",value:function(e,t){if(this.labelIsVisible(!1,t)){var n=this.labelX,r=this.labelY,a=this.labelWidth,i=this.labelHeight,o=this.labelRotation,s=this.labelPadding,u=this.labelTextSize,l=this.options.label;e.save(),e.translate(n,r),e.rotate(o),foe(e,{x:-a/2,y:-i/2,width:a,height:i},l),doe(e,{x:-a/2+s.left+l.borderWidth/2,y:-i/2+s.top+l.borderWidth/2,width:u.width,height:u.height},l),e.restore()}}},{key:"resolveElementProperties",value:function(e,t){var n,r,a=e.scales[t.scaleID],i=e.chartArea,o=i.top,s=i.left,u=i.bottom,l=i.right;if(a)n=voe(a,t.value,NaN),r=voe(a,t.endValue,n),a.isHorizontal()?(s=n,l=r):(o=n,u=r);else{var c=e.scales[t.xScaleID],f=e.scales[t.yScaleID];c&&(s=voe(c,t.xMin,s),l=voe(c,t.xMax,l)),f&&(o=voe(f,t.yMin,o),u=voe(f,t.yMax,u))}var d=Toe({x:s,y:o,x2:l,y2:u},e.chartArea)?function(e,t,n){var r=Roe(e,t,n),a=r.x,i=r.y,o=Roe(t,e,n),s=o.x,u=o.y;return{x:a,y:i,x2:s,y2:u,width:Math.abs(s-a),height:Math.abs(u-i)}}({x:s,y:o},{x:l,y:u},e.chartArea):{x:s,y:o,x2:l,y2:u,width:Math.abs(l-s),height:Math.abs(u-o)},h=t.label;return h&&h.content?function(e,t,n){var r=n.padding,a=n.xPadding,i=n.yPadding,o=n.borderWidth,s=function(e,t,n){var r=e;(t||n)&&(r={x:t||6,y:n||6});return ote(r)}(r,a,i),u=coe(t.ctx,n),l=u.width+s.width+o,c=u.height+s.height+o,f=function(e,t,n,r){var a=n.width,i=n.height,o=n.padding,s=t.xAdjust,u=t.yAdjust,l={x:e.x,y:e.y},c={x:e.x2,y:e.y2},f="auto"===t.rotation?function(e){var t=e.x,n=e.y,r=e.x2,a=e.y2,i=Math.atan2(a-n,r-t);return i>S9/2?i-S9:i<S9/-2?i+S9:i}(e):L9(t.rotation),d=function(e,t,n){var r=Math.cos(n),a=Math.sin(n);return{w:Math.abs(e*r)+Math.abs(t*a),h:Math.abs(e*a)+Math.abs(t*r)}}(a,i,f),h=function(e,t,n,r){var a,i=function(e,t){var n=e.x,r=e.x2,a=e.y,i=e.y2,o=Math.min(a,i)-t.top,s=Math.min(n,r)-t.left,u=t.bottom-Math.max(a,i),l=t.right-Math.max(n,r);return{x:Math.min(s,l),y:Math.min(o,u),dx:s<=l?1:-1,dy:o<=u?1:-1}}(e,r);a="start"===t.position?Ooe({w:e.x2-e.x,h:e.y2-e.y},n,t,i):"end"===t.position?1-Ooe({w:e.x-e.x2,h:e.y-e.y2},n,t,i):toe(1,t.position);return a}(e,t,{labelSize:d,padding:o},r),p=_oe(l,c,h),v={size:d.w,min:r.left,max:r.right,padding:o.left},g={size:d.h,min:r.top,max:r.bottom,padding:o.top};return{x:Poe(p.x,v)+s,y:Poe(p.y,g)+u,width:a,height:i,rotation:f}}(e,n,{width:l,height:c,padding:s},t.chartArea);return e.labelX=f.x,e.labelY=f.y,e.labelWidth=f.width,e.labelHeight=f.height,e.labelRotation=f.rotation,e.labelPadding=s,e.labelTextSize=u,e}(d,e,h):d}}]),n}(Fre);Noe.id="lineAnnotation";var Moe={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,enabled:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};function Ooe(e,t,n,r){var a=t.labelSize,i=t.padding,o=e.w*r.dx,s=e.h*r.dy,u=o>0&&(a.w/2+i.left-r.x)/o,l=s>0&&(a.h/2+i.top-r.y)/s;return Yie(Math.max(u,l),0,.25)}function Poe(e,t){var n=t.size,r=t.min,a=t.max,i=t.padding,o=n/2;return n>a-r?(a+r)/2:(r>=e-i-o&&(e=r+i+o),a<=e+i+o&&(e=a-i-o),e)}function Foe(e,t){if(!t||!t.enabled)return 0;var n=t.length,r=t.width,a=e.options.borderWidth/2,i={x:n,y:r+a},o={x:0,y:a};return Math.abs(Coe(0,i,o))}function Doe(e,t,n,r){if(r&&r.enabled){var a=r.length,i=r.width,o=r.fill,s=r.backgroundColor,u=r.borderColor,l=Math.abs(t-a)+n;e.beginPath(),loe(e,r),uoe(e,r),e.moveTo(l,-i),e.lineTo(t+n,0),e.lineTo(l,i),!0===o?(e.fillStyle=s||u,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=r.borderShadowColor,e.stroke()}}Noe.defaults={adjustScaleRange:!0,arrowHeads:{enabled:!1,end:Object.assign({},Moe),fill:!1,length:12,start:Object.assign({},Moe),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,display:!0,endValue:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,color:"#fff",content:null,cornerRadius:void 0,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xPadding:void 0,yAdjust:0,yPadding:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"},Noe.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}},Noe.defaultRoutes={borderColor:"color"};var Loe=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"inRange",value:function(e,t,n){return function(e,t,n,r){var a=t.width,i=t.height,o=t.getCenterPoint(!0),s=a/2,u=i/2;if(s<=0||u<=0)return!1;var l=L9(n||0),c=r/2||0,f=Math.cos(l),d=Math.sin(l),h=Math.pow(f*(e.x-o.x)+d*(e.y-o.y),2),p=Math.pow(d*(e.x-o.x)-f*(e.y-o.y),2);return h/Math.pow(s+c,2)+p/Math.pow(u+c,2)<=1.0001}({x:e,y:t},this.getProps(["width","height"],n),this.options.rotation,this.options.borderWidth)}},{key:"getCenterPoint",value:function(e){return hoe(this.getProps(["x","y","width","height"],e))}},{key:"draw",value:function(e){var t=this.width,n=this.height,r=this.options,a=this.getCenterPoint();e.save(),soe(e,this,r.rotation),loe(e,this.options),e.beginPath(),e.fillStyle=r.backgroundColor;var i=uoe(e,r);e.ellipse(a.x,a.y,n/2,t/2,S9/2,0,2*S9),e.fill(),i&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore()}},{key:"resolveElementProperties",value:function(e,t){return yoe(e,t)}}]),n}(Fre);Loe.id="ellipseAnnotation",Loe.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"},Loe.defaultRoutes={borderColor:"color",backgroundColor:"color"};var zoe=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"inRange",value:function(e,t,n){var r=poe({x:e,y:t},this.getCenterPoint(n),L9(-this.options.rotation));return $ie(r.x,r.y,this.getProps(["x","y","width","height"],n),this.options.borderWidth)}},{key:"getCenterPoint",value:function(e){return hoe(this.getProps(["x","y","width","height"],e))}},{key:"draw",value:function(e){if(this.options.content){var t=this.labelX,n=this.labelY,r=this.labelWidth,a=this.labelHeight,i=this.options;e.save(),soe(e,this,i.rotation),function(e,t){var n=t.pointX,r=t.pointY,a=t.calloutPosition,i=t.options;if(!a||t.inRange(n,r))return;var o=i.callout;if(e.save(),e.beginPath(),!uoe(e,o))return e.restore();var s=function(e,t){var n,r,a=e.x,i=e.y,o=e.width,s=e.height,u=function(e,t){var n=e.width,r=e.height,a=e.options,i=a.callout.margin+a.borderWidth/2;if("right"===t)return n+i;if("bottom"===t)return r+i;return-i}(e,t);r="left"===t||"right"===t?{x:(n={x:a+u,y:i}).x,y:n.y+s}:{x:(n={x:a,y:i+u}).x+o,y:n.y};return{separatorStart:n,separatorEnd:r}}(t,a),u=s.separatorStart,l=s.separatorEnd,c=function(e,t,n){var r,a,i=e.y,o=e.width,s=e.height,u=e.options,l=u.callout.start,c=function(e,t){var n=t.side;if("left"===e||"top"===e)return-n;return n}(t,u.callout);a="left"===t||"right"===t?{x:(r={x:n.x,y:i+noe(s,l)}).x+c,y:r.y}:{x:(r={x:n.x+noe(o,l),y:n.y}).x,y:r.y+c};return{sideStart:r,sideEnd:a}}(t,a,u),f=c.sideStart,d=c.sideEnd;(o.margin>0||0===i.borderWidth)&&(e.moveTo(u.x,u.y),e.lineTo(l.x,l.y));e.moveTo(f.x,f.y),e.lineTo(d.x,d.y);var h=poe({x:n,y:r},t.getCenterPoint(),L9(-i.rotation));e.lineTo(h.x,h.y),e.stroke(),e.restore()}(e,this),foe(e,this,i),doe(e,{x:t,y:n,width:r,height:a},i),e.restore()}}},{key:"resolveElementProperties",value:function(e,t){var n=aoe(t)?moe(e,t):hoe(yoe(e,t)),r=ote(t.padding),a=coe(e.ctx,t),i=function(e,t,n,r){var a=t.width+r.width+n.borderWidth,i=t.height+r.height+n.borderWidth,o=roe(n.position);return{x:joe(e.x,a,n.xAdjust,o.x),y:joe(e.y,i,n.yAdjust,o.y),width:a,height:i}}(n,a,t,r),o=t.borderWidth/2,s=Y7(Y7({pointX:n.x,pointY:n.y},i),{},{labelX:i.x+r.left+o,labelY:i.y+r.top+o,labelWidth:a.width,labelHeight:a.height});return s.calloutPosition=t.callout.enabled&&function(e,t,n){var r=t.position;if("left"===r||"right"===r||"top"===r||"bottom"===r)return r;return function(e,t,n){for(var r=e.x,a=e.y,i=e.width,o=e.height,s=e.pointX,u=e.pointY,l={x:r+i/2,y:a+o/2},c=t.start,f=noe(i,c),d=noe(o,c),h=[r,r+f,r+f,r+i],p=[a+d,a+o,a,a+d],v=[],g=0;g<4;g++){var m=poe({x:h[g],y:p[g]},l,L9(n));v.push({position:Boe[g],distance:W9(m,{x:s,y:u})})}return v.sort((function(e,t){return e.distance-t.distance}))[0].position}(e,t,n)}(s,t.callout,t.rotation),s}}]),n}(Fre);function joe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return e-toe(t,r)+n}zoe.id="labelAnnotation",zoe.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,enabled:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0},zoe.defaultRoutes={borderColor:"color"};var Boe=["left","bottom","top","right"];var Woe=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"inRange",value:function(e,t,n){var r=this.getProps(["width"],n).width;return function(e,t,n,r){if(!e||!t||n<=0)return!1;var a=r/2||0;return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(n+a,2)}({x:e,y:t},this.getCenterPoint(n),r/2,this.options.borderWidth)}},{key:"getCenterPoint",value:function(e){return Zie(this,e)}},{key:"draw",value:function(e){var t=this.options,n=t.borderWidth;if(!(t.radius<.1)){e.save(),e.fillStyle=t.backgroundColor,loe(e,t);var r=uoe(e,t);t.borderWidth=0,Hee(e,t,this.x,this.y),r&&!ooe(t.pointStyle)&&(e.shadowColor=t.borderShadowColor,e.stroke()),e.restore(),t.borderWidth=n}}},{key:"resolveElementProperties",value:function(e,t){return boe(e,t)}}]),n}(Fre);Woe.id="pointAnnotation",Woe.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0},Woe.defaultRoutes={borderColor:"color",backgroundColor:"color"};var Uoe=function(e){tR(n,e);var t=oR(n);function n(){return gC(this,n),t.apply(this,arguments)}return yC(n,[{key:"inRange",value:function(e,t,n){return this.options.radius>=.1&&this.elements.length>1&&function(e,t,n,r){var a,i=!1,o=e[e.length-1].getProps(["bX","bY"],r),s=bC(e);try{for(s.s();!(a=s.n()).done;){var u=a.value.getProps(["bX","bY"],r);u.bY>n!==o.bY>n&&t<(o.bX-u.bX)*(n-u.bY)/(o.bY-u.bY)+u.bX&&(i=!i),o=u}}catch(bfe){s.e(bfe)}finally{s.f()}return i}(this.elements,e,t,n)}},{key:"getCenterPoint",value:function(e){return Zie(this,e)}},{key:"draw",value:function(e){var t=this.elements,n=this.options;e.save(),e.beginPath(),e.fillStyle=n.backgroundColor,loe(e,n);var r,a=uoe(e,n),i=!0,o=bC(t);try{for(o.s();!(r=o.n()).done;){var s=r.value;i?(e.moveTo(s.x,s.y),i=!1):e.lineTo(s.x,s.y)}}catch(bfe){o.e(bfe)}finally{o.f()}e.closePath(),e.fill(),a&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}},{key:"resolveElementProperties",value:function(e,t){for(var n=boe(e,t),r=n.x,a=n.y,i=n.width,o=n.height,s=t.sides,u=t.radius,l=t.rotation,c=t.borderWidth/2,f=[],d=2*S9/s,h=l*A9,p=0;p<s;p++,h+=d){var v=Math.sin(h),g=Math.cos(h);f.push({type:"point",optionScope:"point",properties:{x:r+v*u,y:a-g*u,bX:r+v*(u+c),bY:a-g*(u+c)}})}return{x:r,y:a,width:i,height:o,elements:f,initProperties:{x:r,y:a}}}}]),n}(Fre);Uoe.id="polygonAnnotation",Uoe.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0},Uoe.defaultRoutes={borderColor:"color",backgroundColor:"color"};var Voe={box:xoe,ellipse:Loe,label:zoe,line:Noe,point:Woe,polygon:Uoe};Object.keys(Voe).forEach((function(e){jee.describe("elements.".concat(Voe[e].id),{_fallback:"plugins.annotation"})}));var Hoe={update:Object.assign};function Goe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"line";return Voe[e]?e:(console.warn("Unknown annotation type: '".concat(e,"', defaulting to 'line'")),"line")}function qoe(e,t,n,r){for(var a=function(e,t,n){if("reset"===n||"none"===n||"resize"===n)return Hoe;return new yne(e,t)}(e,n.animations,r),i=t.annotations,o=function(e,t){var n=t.length,r=e.length;if(r<n){var a=n-r;e.splice.apply(e,[r,0].concat(pd(new Array(a))))}else r>n&&e.splice(n,r-n);return e}(t.elements,i),s=0;s<i.length;s++){var u=i[s],l=Koe(o,s,u.type),c=u.setContext(Qoe(e,l,u)),f=l.resolveElementProperties(e,c);f.skip=Xoe(f),"elements"in f&&(Yoe(l,f,c,a),delete f.elements),x9(l.x)||Object.assign(l,f),f.options=$oe(c),a.update(l,f)}}function Xoe(e){return isNaN(e.x)||isNaN(e.y)}function Yoe(e,t,n,r){var a=t.elements,i=t.initProperties,o=e.elements||(e.elements=[]);o.length=a.length;for(var s=0;s<a.length;s++){var u=a[s],l=u.properties,c=Koe(o,s,u.type,i),f=n[u.optionScope].override(u);l.options=$oe(f),r.update(c,l)}}function Koe(e,t,n,r){var a=Voe[Goe(n)],i=e[t];return i&&i instanceof a||(i=e[t]=new a,r9(r)&&Object.assign(i,r)),i}function $oe(e){var t=Voe[Goe(e.type)],n={};n.id=e.id,n.type=e.type,n.drawTime=e.drawTime,Object.assign(n,Zoe(e,t.defaults),Zoe(e,t.defaultRoutes));var r,a=bC(zie);try{for(a.s();!(r=a.n()).done;){var i=r.value;n[i]=e[i]}}catch(bfe){a.e(bfe)}finally{a.f()}return n}function Zoe(e,t){for(var n={},r=0,a=Object.keys(t);r<a.length;r++){var i=a[r],o=t[i],s=e[i];n[i]=r9(o)?Zoe(s,o):s}return n}function Qoe(e,t,n){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,id:n.id,type:"annotation"}))}var Joe=new Map,ese={id:"annotation",version:"1.4.0",afterRegister:function(){xae.register(Voe),function(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=n.split("."),o=0,s=bC(t.split("."));try{for(s.s();!(r=s.n()).done;){var u=r.value,l=i[o++];if(parseInt(u,10)<parseInt(l,10))break;if(Qie(l,u)){if(a)throw new Error("".concat(e," v").concat(n," is not supported. v").concat(t," or newer is required."));return!1}}}catch(bfe){s.e(bfe)}finally{s.f()}return!0}("chart.js","3.7",xae.version,!1)||(console.warn("".concat("chartjs-plugin-annotation"," has known issues with chart.js versions prior to 3.7, please consider upgrading.")),xae.defaults.set("elements.lineAnnotation",{callout:{},font:{},padding:6}))},afterUnregister:function(){xae.unregister(Voe)},beforeInit:function(e){Joe.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1})},beforeUpdate:function(e,t,n){var r=Joe.get(e).annotations=[],a=n.annotations;r9(a)?Object.keys(a).forEach((function(e){var t=a[e];r9(t)&&(t.id=e,r.push(t))})):n9(a)&&r.push.apply(r,pd(a)),function(e,t){var n,r=bC(e);try{for(r.s();!(n=r.n()).done;)Hie(n.value,t)}catch(bfe){r.e(bfe)}finally{r.f()}}(r,e.scales)},afterDataLimits:function(e,t){var n=Joe.get(e);Uie(0,t.scale,n.annotations.filter((function(e){return e.display&&e.adjustScaleRange})))},afterUpdate:function(e,t,n){var r=Joe.get(e);!function(e,t,n){t.listened=!1,t.moveListened=!1,zie.forEach((function(e){"function"===typeof n[e]?(t.listened=!0,t.listeners[e]=n[e]):x9(t.listeners[e])&&delete t.listeners[e]})),Lie.forEach((function(e){"function"===typeof n[e]&&(t.moveListened=!0)})),t.listened&&t.moveListened||t.annotations.forEach((function(e){t.listened||Die.forEach((function(n){"function"===typeof e[n]&&(t.listened=!0)})),t.moveListened||Lie.forEach((function(n){"function"===typeof e[n]&&(t.listened=!0,t.moveListened=!0)}))}))}(0,r,n),qoe(e,r,n,t.mode),r.visibleElements=r.elements.filter((function(e){return!e.skip&&e.options.display}))},beforeDatasetsDraw:function(e,t,n){tse(e,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw:function(e,t,n){tse(e,"afterDatasetsDraw",n.clip)},beforeDraw:function(e,t,n){tse(e,"beforeDraw",n.clip)},afterDraw:function(e,t,n){tse(e,"afterDraw",n.clip)},beforeEvent:function(e,t,n){jie(Joe.get(e),t.event,n)},destroy:function(e){Joe.delete(e)},_getState:function(e){return Joe.get(e)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","pointX","pointY","labelX","labelY","labelWidth","labelHeight","radius"],type:"number"}},clip:!0,dblClickSpeed:350,drawTime:"afterDatasetsDraw",label:{drawTime:null}},descriptors:{_indexable:!1,_scriptable:function(e){return!zie.includes(e)},annotations:{_allKeys:!1,_fallback:function(e,t){return"elements.".concat(Voe[Goe(t.type)].id)}}},additionalOptionScopes:[""]};function tse(e,t,n){var r=e.ctx,a=e.chartArea,i=Joe.get(e).visibleElements;n&&qee(r,a),nse(r,i,t),function(e,t,n){var r,a=bC(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;n9(i.elements)&&nse(e,i.elements,n)}}catch(bfe){a.e(bfe)}finally{a.f()}}(r,i,t),n&&Xee(r),i.forEach((function(e){if("drawLabel"in e){var n=e.options.label;n&&n.enabled&&n.content&&(n.drawTime||e.options.drawTime)===t&&e.drawLabel(r,a)}}))}function nse(e,t,n){var r,a=bC(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;i.options.drawTime===n&&i.draw(e)}}catch(bfe){a.e(bfe)}finally{a.f()}}function rse(e,t){if(null==e)return{};var n,r,a=$b(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ase=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],ise="label";function ose(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function sse(e,t){e.labels=t}function use(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ise,r=[];e.datasets=t.map((function(t){var a=e.datasets.find((function(e){return e[n]===t[n]}));return a&&t.data&&!r.includes(a)?(r.push(a),Object.assign(a,t),a):Y7({},t)}))}function lse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ise,n={labels:[],datasets:[]};return sse(n,e.labels),use(n,e.datasets,t),n}function cse(e,n){var r=e.height,a=void 0===r?150:r,i=e.width,o=void 0===i?300:i,s=e.redraw,u=void 0!==s&&s,l=e.datasetIdKey,c=e.type,f=e.data,d=e.options,h=e.plugins,p=void 0===h?[]:h,v=e.fallbackContent,g=e.updateMode,m=rse(e,ase),y=(0,t.useRef)(null),b=(0,t.useRef)(),x=function(){y.current&&(b.current=new xae(y.current,{type:c,data:lse(f,l),options:d,plugins:p}),ose(n,b.current))},k=function(){ose(n,null),b.current&&(b.current.destroy(),b.current=null)};return(0,t.useEffect)((function(){var e,t;!u&&b.current&&d&&(e=b.current,t=d,e.options=Y7({},t))}),[u,d]),(0,t.useEffect)((function(){!u&&b.current&&sse(b.current.config.data,f.labels)}),[u,f.labels]),(0,t.useEffect)((function(){!u&&b.current&&f.datasets&&use(b.current.config.data,f.datasets,l)}),[u,f.datasets]),(0,t.useEffect)((function(){b.current&&(u?(k(),setTimeout(x)):b.current.update(g))}),[u,d,f.labels,f.datasets,g]),(0,t.useEffect)((function(){return x(),function(){return k()}}),[]),t.createElement("canvas",Object.assign({ref:y,role:"img",height:a,width:o},m),v)}var fse=(0,t.forwardRef)(cse);function dse(e,n){return xae.register(n),(0,t.forwardRef)((function(n,r){return t.createElement(fse,Object.assign({},n,{ref:r,type:e}))}))}var hse=dse("doughnut",Wne),pse=dse("scatter",qne);xae.register(pie,jae,Lae,uie,Kae,ese);var vse={plugins:{autocolors:!1,annotation:{annotations:{line1:{type:"line",yMin:0,yMax:100,borderColor:"lightgreen",borderWidth:2}}}},scales:{y:{beginAtZero:!0,min:0,max:100},x:{beginAtZero:!0,min:0,max:100}}};var gse=function(e){var t=e.dataArray,n=e.errorAccept,r=e.offArray,a=e.label1,i={datasets:[{label:e.label2,backgroundColor:"rgba(144,238,144,1)",data:n},{label:a,backgroundColor:"lightgray",data:t},{label:e.label3,backgroundColor:"red",data:r}]};return(0,Fb.jsx)(pse,{options:vse,data:i})},mse=__webpack_require__(304),yse=__webpack_require__.p+"static/media/data.03564a0a6b94bb5f8c6a.csv";xae.register(Iae,uie,Kae);var bse=function(e){var t={labels:["% Below Error Acceptance","% Within Error Acceptance","% Above Error Acceptance","> 500% error"],datasets:[{data:e.dataArray,backgroundColor:["rgba(173,216,230,0.4)","rgba(11,156,49,0.3)","rgba(173,216,230,0.7)","red"],borderColor:["rgba(173,216,230,1)","rgba(75, 192, 192, 1)","rgba(173,216,230,1)","red"],borderWidth:1}]};return(0,Fb.jsx)(hse,{data:t})};var xse=function(){var e=Pf((0,t.useState)(void 0),2),n=e[0],r=e[1],a=Pf((0,t.useState)([]),2),i=a[0],o=a[1],s=Pf((0,t.useState)(void 0),2),u=s[0],l=s[1],c=Pf((0,t.useState)([]),2),f=c[0],d=c[1],h=Pf((0,t.useState)([]),2),p=h[0],v=h[1],g=Pf((0,t.useState)(void 0),2),m=g[0],y=g[1],b=Pf((0,t.useState)([]),2),x=b[0],k=b[1],w=Pf((0,t.useState)(void 0),2),S=w[0],_=w[1],C=Pf((0,t.useState)(.1),2),E=C[0],A=C[1],I=Pf((0,t.useState)(!0),2),T=I[0],R=I[1],N=Pf((0,t.useState)(void 0),2),M=N[0],O=N[1],P=Pf((0,t.useState)(void 0),2),F=P[0],D=P[1],L=Pf((0,t.useState)(void 0),2),z=L[0],j=L[1],B=Pf((0,t.useState)(void 0),2),W=B[0],U=B[1];function V(){return V=vC(hC().mark((function e(){var t,r,a,i,s,u,c,f,h,p,g,m,b;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.filter((function(e){return e.Guess<100&&e.Real<100})),r=t.length,a=[],i=[],s=[],u=[],c=[],f=[],h=[0,0,0,0],p=[0,0,0,0],g=0,m=0,e.next=14,t.forEach((function(e,t){if(0!==e.Real){var n=e.Guess/e.Real,r=e.Calc/e.Real;g+=Math.abs(parseFloat(e.Guess-e.Real)),m+=Math.abs(parseFloat(e.Calc-e.Real)),n>=1-E&&n<=1+E?(a.push({x:e.Real,y:e.Guess}),h[1]+=1):Math.abs((e.Guess-e.Real)/e.Guess)>5||Math.abs((e.Real-e.Guess)/e.Real)>5?(c.push({x:e.Real,y:e.Guess}),h[3]+=1):(s.push({x:e.Real,y:e.Guess}),n>=1+E?h[2]+=1:h[0]+=1),r>=1-E&&r<=1+E?(i.push({x:e.Real,y:e.Calc}),p[1]+=1):Math.abs((e.Calc-e.Real)/e.Calc)>5||Math.abs((e.Real-e.Calc)/e.Real)>5?(f.push({x:e.Real,y:e.Calc}),p[3]+=1):(u.push({x:e.Real,y:e.Calc}),r>=1+E?p[2]+=1:p[0]+=1)}}));case 14:for(b=0;b<=3;b++)p[b]=(p[b]/r*100).toFixed(2),h[b]=(h[b]/r*100).toFixed(2);y(m/r),l(g/r),k(i),d(a),v(u),o(s),_(r),O(h),D(p),U(f),j(c);case 26:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function H(){return G.apply(this,arguments)}function G(){return G=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mse.text(yse,(function(e){var t=mse.csv.parse(e);r(t)}));case 2:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}return(0,t.useEffect)((function(){vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()}),[]),(0,t.useEffect)((function(){void 0!==n&&(!function(){V.apply(this,arguments)}(),R(!1))}),[n,E]),T?(0,Fb.jsx)(Ul,{}):(0,Fb.jsxs)(bb,{direction:"column",backgroundColor:"gray.50",padding:10,paddingTop:3,overflowY:"auto",minHeight:"100vh",children:[(0,Fb.jsx)(fC,{title:"TIME ESTIMATION",section:"Analytics"}),(0,Fb.jsx)(bb,{borderWidth:2,bg:"white",shadow:"md",h:"15%",w:"100%",m:10,direction:"column",minHeight:"15vh",rounded:"xl",minWidth:"400px",alignSelf:"center",justify:"center",children:(0,Fb.jsxs)(Ob,{pr:20,pl:20,children:[(0,Fb.jsxs)(Ab,{spacing:-1,children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"18",children:"Std Deviation Calculated"}),void 0!==u&&(0,Fb.jsxs)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",children:[m.toFixed(1),"h"]}),void 0===u&&(0,Fb.jsx)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",children:"undefined"})]}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(Ab,{spacing:-1,children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"18",children:"Std Deviation Guess"}),void 0!==u&&(0,Fb.jsxs)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",children:[u.toFixed(1),"h"]}),void 0===u&&(0,Fb.jsx)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",children:"undefined"})]}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(Ab,{spacing:-1,children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"18",children:"Accuracy"}),S&&(0,Fb.jsxs)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",children:[(f.length/S*100).toFixed(1),"%"]})]}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(Ab,{spacing:-1,children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"18",children:"Error acceptance"}),(0,Fb.jsxs)(V7,{color:"blue.500",fontWeight:"bold",fontSize:"18",variant:"unstyled",w:"80px",_hover:{bg:"gray.100"},cursor:"pointer",value:E,onChange:function(e){return A(parseFloat(e.target.value))},children:[(0,Fb.jsx)("option",{value:"0.1",children:"10%"}),(0,Fb.jsx)("option",{value:"0.2",children:"20%"}),(0,Fb.jsx)("option",{value:"0.3",children:"30%"}),(0,Fb.jsx)("option",{value:"0.4",children:"40%"}),(0,Fb.jsx)("option",{value:"0.5",children:"50%"})]})]})]})}),(0,Fb.jsxs)(Ob,{direction:"row",align:"center",justify:"center",children:[(0,Fb.jsxs)(bb,{p:5,borderWidth:2,bg:"white",shadow:"md",w:"49%",direction:"column",rounded:"xl",minWidth:"400px",alignSelf:"center",children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"15",children:" Actual vs Calculated"}),(0,Fb.jsx)(Eb,{h:"100%",w:"100%",children:(0,Fb.jsx)(bb,{p:3,h:"105%",w:"100%",mt:5,minWidth:300,minHeight:"300px",children:(0,Fb.jsx)(gse,{dataArray:p,errorAccept:x,offArray:W,label1:"Outside error acceptance",label2:"Within error acceptance",label3:"> 500% error"})})})]}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(bb,{p:5,borderWidth:2,bg:"white",shadow:"md",w:"49%",direction:"column",rounded:"xl",minWidth:"400px",alignSelf:"center",children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"15",children:" Actual vs Guess"}),(0,Fb.jsx)(Eb,{h:"100%",w:"100%",children:(0,Fb.jsx)(bb,{p:3,h:"105%",w:"100%",mt:5,minWidth:300,minHeight:"300px",children:(0,Fb.jsx)(gse,{dataArray:i,errorAccept:f,offArray:z,label1:"Outside error acceptance",label2:"Within error acceptance",label3:"> 500% error"})})})]})]}),(0,Fb.jsxs)(Ob,{direction:"row",mb:20,align:"center",justify:"center",mt:5,children:[(0,Fb.jsxs)(bb,{p:5,borderWidth:2,bg:"white",shadow:"md",h:"100%",w:"49%",direction:"column",rounded:"xl",minWidth:"400px",alignSelf:"center",children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"15",children:" Calculated"}),(0,Fb.jsx)(Eb,{h:"80%",w:"80%",alignSelf:"center",justifySelf:"center",mt:5,children:(0,Fb.jsx)(bb,{p:3,w:"90%",mt:5,minWidth:300,minHeight:"300px",children:void 0!==F&&(0,Fb.jsx)(bse,{dataArray:F})})})]}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(bb,{p:5,borderWidth:2,bg:"white",shadow:"md",w:"49%",direction:"column",rounded:"xl",minWidth:"400px",alignSelf:"center",children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"15",children:" Guess"}),(0,Fb.jsx)(Eb,{h:"80%",w:"80%",alignSelf:"center",justifySelf:"center",mt:5,children:(0,Fb.jsx)(bb,{p:3,w:"90%",mt:5,minWidth:300,minHeight:"300px",children:void 0!==M&&(0,Fb.jsx)(bse,{dataArray:M})})})]})]})]})},kse=__webpack_require__(7),wse=__webpack_require__.n(kse);function Sse(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(t){i(t)}}function s(e){try{u(r.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function _se(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}Object.create;function Cse(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function Ese(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var Ase=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Ise(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=Ase.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var Tse=[".DS_Store","Thumbs.db"];function Rse(e){return"object"===typeof e&&null!==e}function Nse(e){return Fse(e.target.files).map((function(e){return Ise(e)}))}function Mse(e){return Sse(this,void 0,void 0,(function(){return _se(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return Ise(e)}))]}}))}))}function Ose(e,t){return Sse(this,void 0,void 0,(function(){var n;return _se(this,(function(r){switch(r.label){case 0:return e.items?(n=Fse(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(Dse))]):[3,2];case 1:return[2,Pse(Lse(r.sent()))];case 2:return[2,Pse(Fse(e.files).map((function(e){return Ise(e)})))]}}))}))}function Pse(e){return e.filter((function(e){return-1===Tse.indexOf(e.name)}))}function Fse(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function Dse(e){if("function"!==typeof e.webkitGetAsEntry)return zse(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Bse(t):zse(e)}function Lse(e){return e.reduce((function(e,t){return Ese(Ese([],Cse(e),!1),Cse(Array.isArray(t)?Lse(t):[t]),!1)}),[])}function zse(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=Ise(t);return Promise.resolve(n)}function jse(e){return Sse(this,void 0,void 0,(function(){return _se(this,(function(t){return[2,e.isDirectory?Bse(e):Wse(e)]}))}))}function Bse(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function a(){var i=this;t.readEntries((function(t){return Sse(i,void 0,void 0,(function(){var i,o,s;return _se(this,(function(u){switch(u.label){case 0:if(t.length)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return i=u.sent(),e(i),[3,4];case 3:return o=u.sent(),n(o),[3,4];case 4:return[3,6];case 5:s=Promise.all(t.map(jse)),r.push(s),a(),u.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function Wse(e){return Sse(this,void 0,void 0,(function(){return _se(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=Ise(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var Use=__webpack_require__(593);function Vse(e){return function(e){if(Array.isArray(e))return Xse(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qse(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hse(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gse(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(bfe){s=!0,a=bfe}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||qse(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qse(e,t){if(e){if("string"===typeof e)return Xse(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xse(e,t):void 0}}function Xse(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yse="file-invalid-type",Kse="file-too-large",$se="file-too-small",Zse="too-many-files",Qse=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:Yse,message:"File type must be ".concat(t)}},Jse=function(e){return{code:Kse,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},eue=function(e){return{code:$se,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},tue={code:Zse,message:"Too many files"};function nue(e,t){var n="application/x-moz-file"===e.type||(0,Use.Z)(e,t);return[n,n?null:Qse(t)]}function rue(e,t,n){if(aue(e.size))if(aue(t)&&aue(n)){if(e.size>n)return[!1,Jse(n)];if(e.size<t)return[!1,eue(t)]}else{if(aue(t)&&e.size<t)return[!1,eue(t)];if(aue(n)&&e.size>n)return[!1,Jse(n)]}return[!0,null]}function aue(e){return void 0!==e&&null!==e}function iue(e){var t=e.files,n=e.accept,r=e.minSize,a=e.maxSize,i=e.multiple,o=e.maxFiles,s=e.validator;return!(!i&&t.length>1||i&&o>=1&&t.length>o)&&t.every((function(e){var t=Gse(nue(e,n),1)[0],i=Gse(rue(e,r,a),1)[0],o=s?s(e):null;return t&&i&&!o}))}function oue(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function sue(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function uue(e){e.preventDefault()}function lue(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function cue(e){return-1!==e.indexOf("Edge/")}function fue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return lue(e)||cue(e)}function due(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t.some((function(t){return!oue(e)&&t&&t.apply(void 0,[e].concat(r)),oue(e)}))}}function hue(){return"showOpenFilePicker"in window}function pue(e){return aue(e)?Object.entries(e).filter((function(e){var t=Gse(e,2),n=t[0],r=t[1],a=!0;return yue(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),Array.isArray(r)&&r.every(bue)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),a=!1),a})).map((function(e){var t=Gse(e,2);return{accept:Hse({},t[0],t[1])}})):e}function vue(e){if(aue(e))return Object.entries(e).reduce((function(e,t){var n=Gse(t,2),r=n[0],a=n[1];return[].concat(Vse(e),[r],Vse(a))}),[]).filter((function(e){return yue(e)||bue(e)})).join(",")}function gue(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}function mue(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}function yue(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function bue(e){return/^.*\.[\w]+$/.test(e)}var xue=["children"],kue=["open"],wue=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Sue=["refKey","onChange","onClick"];function _ue(e){return function(e){if(Array.isArray(e))return Aue(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Eue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(bfe){s=!0,a=bfe}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||Eue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eue(e,t){if(e){if("string"===typeof e)return Aue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aue(e,t):void 0}}function Aue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iue(Object(n),!0).forEach((function(t){Rue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nue(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Mue=(0,t.forwardRef)((function(e,n){var r=e.children,a=Fue(Nue(e,xue)),i=a.open,o=Nue(a,kue);return(0,t.useImperativeHandle)(n,(function(){return{open:i}}),[i]),t.createElement(t.Fragment,null,r(Tue(Tue({},o),{},{open:i})))}));Mue.displayName="Dropzone";var Oue={disabled:!1,getFilesFromEvent:function(e){return Sse(this,void 0,void 0,(function(){return _se(this,(function(t){return Rse(e)&&Rse(e.dataTransfer)?[2,Ose(e.dataTransfer,e.type)]:function(e){return Rse(e)&&Rse(e.target)}(e)?[2,Nse(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,Mse(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Mue.defaultProps=Oue,Mue.propTypes={children:wse().func,accept:wse().objectOf(wse().arrayOf(wse().string)),multiple:wse().bool,preventDropOnDocument:wse().bool,noClick:wse().bool,noKeyboard:wse().bool,noDrag:wse().bool,noDragEventsBubbling:wse().bool,minSize:wse().number,maxSize:wse().number,maxFiles:wse().number,disabled:wse().bool,getFilesFromEvent:wse().func,onFileDialogCancel:wse().func,onFileDialogOpen:wse().func,useFsAccessApi:wse().bool,autoFocus:wse().bool,onDragEnter:wse().func,onDragLeave:wse().func,onDragOver:wse().func,onDrop:wse().func,onDropAccepted:wse().func,onDropRejected:wse().func,onError:wse().func,validator:wse().func};var Pue={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Fue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Tue(Tue({},Oue),e),r=n.accept,a=n.disabled,i=n.getFilesFromEvent,o=n.maxSize,s=n.minSize,u=n.multiple,l=n.maxFiles,c=n.onDragEnter,f=n.onDragLeave,d=n.onDragOver,h=n.onDrop,p=n.onDropAccepted,v=n.onDropRejected,g=n.onFileDialogCancel,m=n.onFileDialogOpen,y=n.useFsAccessApi,b=n.autoFocus,x=n.preventDropOnDocument,k=n.noClick,w=n.noKeyboard,S=n.noDrag,_=n.noDragEventsBubbling,C=n.onError,E=n.validator,A=(0,t.useMemo)((function(){return vue(r)}),[r]),I=(0,t.useMemo)((function(){return pue(r)}),[r]),T=(0,t.useMemo)((function(){return"function"===typeof m?m:Lue}),[m]),R=(0,t.useMemo)((function(){return"function"===typeof g?g:Lue}),[g]),N=(0,t.useRef)(null),M=(0,t.useRef)(null),O=(0,t.useReducer)(Due,Pue),P=Cue(O,2),F=P[0],D=P[1],L=F.isFocused,z=F.isFileDialogActive,j=(0,t.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&hue()),B=function(){!j.current&&z&&setTimeout((function(){M.current&&(M.current.files.length||(D({type:"closeDialog"}),R()))}),300)};(0,t.useEffect)((function(){return window.addEventListener("focus",B,!1),function(){window.removeEventListener("focus",B,!1)}}),[M,z,R,j]);var W=(0,t.useRef)([]),U=function(e){N.current&&N.current.contains(e.target)||(e.preventDefault(),W.current=[])};(0,t.useEffect)((function(){return x&&(document.addEventListener("dragover",uue,!1),document.addEventListener("drop",U,!1)),function(){x&&(document.removeEventListener("dragover",uue),document.removeEventListener("drop",U))}}),[N,x]),(0,t.useEffect)((function(){return!a&&b&&N.current&&N.current.focus(),function(){}}),[N,b,a]);var V=(0,t.useCallback)((function(e){C?C(e):console.error(e)}),[C]),H=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),re(e),W.current=[].concat(_ue(W.current),[e.target]),sue(e)&&Promise.resolve(i(e)).then((function(t){if(!oue(e)||_){var n=t.length,r=n>0&&iue({files:t,accept:A,minSize:s,maxSize:o,multiple:u,maxFiles:l,validator:E});D({isDragAccept:r,isDragReject:n>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}})).catch((function(e){return V(e)}))}),[i,c,V,_,A,s,o,u,l,E]),G=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),re(e);var t=sue(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&d&&d(e),!1}),[d,_]),q=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),re(e);var t=W.current.filter((function(e){return N.current&&N.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),W.current=t,t.length>0||(D({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),sue(e)&&f&&f(e))}),[N,f,_]),X=(0,t.useCallback)((function(e,t){var n=[],r=[];e.forEach((function(e){var t=Cue(nue(e,A),2),a=t[0],i=t[1],u=Cue(rue(e,s,o),2),l=u[0],c=u[1],f=E?E(e):null;if(a&&l&&!f)n.push(e);else{var d=[i,c];f&&(d=d.concat(f)),r.push({file:e,errors:d.filter((function(e){return e}))})}})),(!u&&n.length>1||u&&l>=1&&n.length>l)&&(n.forEach((function(e){r.push({file:e,errors:[tue]})})),n.splice(0)),D({acceptedFiles:n,fileRejections:r,type:"setFiles"}),h&&h(n,r,t),r.length>0&&v&&v(r,t),n.length>0&&p&&p(n,t)}),[D,u,A,s,o,l,h,p,v,E]),Y=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),re(e),W.current=[],sue(e)&&Promise.resolve(i(e)).then((function(t){oue(e)&&!_||X(t,e)})).catch((function(e){return V(e)})),D({type:"reset"})}),[i,X,V,_]),K=(0,t.useCallback)((function(){if(j.current){D({type:"openDialog"}),T();var e={multiple:u,types:I};window.showOpenFilePicker(e).then((function(e){return i(e)})).then((function(e){X(e,null),D({type:"closeDialog"})})).catch((function(e){gue(e)?(R(e),D({type:"closeDialog"})):mue(e)?(j.current=!1,M.current?(M.current.value=null,M.current.click()):V(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):V(e)}))}else M.current&&(D({type:"openDialog"}),T(),M.current.value=null,M.current.click())}),[D,T,R,y,X,V,I,u]),$=(0,t.useCallback)((function(e){N.current&&N.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),K()))}),[N,K]),Z=(0,t.useCallback)((function(){D({type:"focus"})}),[]),Q=(0,t.useCallback)((function(){D({type:"blur"})}),[]),J=(0,t.useCallback)((function(){k||(fue()?setTimeout(K,0):K())}),[k,K]),ee=function(e){return a?null:e},te=function(e){return w?null:ee(e)},ne=function(e){return S?null:ee(e)},re=function(e){_&&e.stopPropagation()},ae=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,i=e.onKeyDown,o=e.onFocus,s=e.onBlur,u=e.onClick,l=e.onDragEnter,c=e.onDragOver,f=e.onDragLeave,d=e.onDrop,h=Nue(e,wue);return Tue(Tue(Rue({onKeyDown:te(due(i,$)),onFocus:te(due(o,Z)),onBlur:te(due(s,Q)),onClick:ee(due(u,J)),onDragEnter:ne(due(l,H)),onDragOver:ne(due(c,G)),onDragLeave:ne(due(f,q)),onDrop:ne(due(d,Y)),role:"string"===typeof r&&""!==r?r:"presentation"},n,N),a||w?{}:{tabIndex:0}),h)}}),[N,$,Z,Q,J,H,G,q,Y,w,S,a]),ie=(0,t.useCallback)((function(e){e.stopPropagation()}),[]),oe=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,a=e.onClick,i=Nue(e,Sue),o=Rue({accept:A,multiple:u,type:"file",style:{display:"none"},onChange:ee(due(r,Y)),onClick:ee(due(a,ie)),tabIndex:-1},n,M);return Tue(Tue({},o),i)}}),[M,r,u,Y,a]);return Tue(Tue({},F),{},{isFocused:L&&!a,getRootProps:ae,getInputProps:oe,rootRef:N,inputRef:M,open:ee(K)})}function Due(e,t){switch(t.type){case"focus":return Tue(Tue({},e),{},{isFocused:!0});case"blur":return Tue(Tue({},e),{},{isFocused:!1});case"openDialog":return Tue(Tue({},Pue),{},{isFileDialogActive:!0});case"closeDialog":return Tue(Tue({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Tue(Tue({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Tue(Tue({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Tue({},Pue);default:return e}}function Lue(){}var zue=__webpack_require__(560),jue=["onKeyDown","onKeyPress","onKeyUp"],Bue=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Wue=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],Uue=[].concat(["onCopy","onCut","onPaste"],["onCompositionEnd","onCompositionStart","onCompositionUpdate"],jue,["onFocus","onBlur"],["onChange","onInput","onInvalid","onReset","onSubmit"],["onError","onLoad"],Bue,["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],["onSelect"],Wue,["onScroll"],["onWheel"],["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],["onLoad","onError"],["onAnimationStart","onAnimationEnd","onAnimationIteration"],["onTransitionEnd"],["onToggle"]),Vue=function(e,t){var n={};return Uue.forEach((function(r){r in e&&(n[r]=t?function(n){return e[r](n,t(r))}:e[r])})),n};function Hue(e){var t=!1,n=new Promise((function(n,r){e.then((function(){return!t&&n.apply(void 0,arguments)})).catch((function(e){return!t&&r(e)}))}));return{promise:n,cancel:function(){t=!0}}}function Gue(){return Array.prototype.slice.call(arguments).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return"string"===typeof e})).join(" ")}var que="Invariant failed";function Xue(e,t){if(!e)throw new Error(que)}var Yue=function(e,t){},Kue=(0,t.createContext)(null);function $ue(e){var n=e.children,r=e.type;return t.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(r)},n)}$ue.propTypes={children:wse().node,type:wse().oneOf(["error","loading","no-data"]).isRequired};var Zue=function(){function e(){gC(this,e),this.externalLinkTarget=null,this.externalLinkRel=null}return yC(e,[{key:"setDocument",value:function(e){this.pdfDocument=e}},{key:"setViewer",value:function(e){this.pdfViewer=e}},{key:"setExternalLinkRel",value:function(e){this.externalLinkRel=e}},{key:"setExternalLinkTarget",value:function(e){this.externalLinkTarget=e}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(e){this.pdfViewer.currentPageNumber=e}},{key:"rotation",get:function(){return 0},set:function(e){}},{key:"goToDestination",value:function(e){var t=this;new Promise((function(n){"string"===typeof e?t.pdfDocument.getDestination(e).then(n):Array.isArray(e)?n(e):e.then(n)})).then((function(n){Xue(Array.isArray(n),'"'.concat(n,'" is not a valid destination array.'));var r=n[0];new Promise((function(e){r instanceof Object?t.pdfDocument.getPageIndex(r).then((function(t){e(t)})).catch((function(){Xue(!1,'"'.concat(r,'" is not a valid page reference.'))})):"number"===typeof r?e(r):Xue(!1,'"'.concat(r,'" is not a valid destination reference.'))})).then((function(n){var r=n+1;Xue(r>=1&&r<=t.pagesCount,'"'.concat(r,'" is not a valid page number.')),t.pdfViewer.scrollPageIntoView({dest:e,pageIndex:n,pageNumber:r})}))}))}},{key:"navigateTo",value:function(e){this.goToDestination(e)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(e,t,n){e.href=t,e.rel=this.externalLinkRel||"noopener noreferrer nofollow",e.target=n?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),e}(),Que={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Jue="undefined"!==typeof window,ele=Jue&&"file:"===window.location.protocol;function tle(e){return"undefined"!==typeof e}function nle(e){return tle(e)&&null!==e}function rle(e){return e instanceof ArrayBuffer}function ale(e){return Xue(Jue),e instanceof Blob}function ile(e){return Xue(Jue),e instanceof File}function ole(e){return function(e){return"string"===typeof e}(e)&&/^data:/.test(e)}function sle(e){Xue(ole(e));var t=Pf(e.split(","),2),n=t[0],r=t[1];return-1!==n.split(";").indexOf("base64")?atob(r):unescape(r)}var ule="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function lle(){Yue(!ele,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(ule))}function cle(e){e&&e.cancel&&e.cancel()}function fle(e,t){return Object.defineProperty(e,"width",{get:function(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get:function(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),e}function dle(e){return"RenderingCancelledException"===e.name}function hle(e){return new Promise((function(t,n){var r=new FileReader;return r.onload=function(){return t(new Uint8Array(r.result))},r.onerror=function(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case e.target.error.NOT_READABLE_ERR:return n(new Error("Error while reading a file: File not readable."));case e.target.error.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case e.target.error.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},r.readAsArrayBuffer(e),null}))}var ple=function(){var e={};return[].concat(pd(Bue),pd(Wue),pd(jue)).forEach((function(t){e[t]=wse().func})),e}(),vle=[wse().string,wse().instanceOf(ArrayBuffer),wse().shape({data:wse().oneOfType([wse().object,wse().string]),httpHeaders:wse().object,range:wse().object,url:wse().string,withCredentials:wse().bool})];"undefined"!==typeof File&&vle.push(wse().instanceOf(File)),"undefined"!==typeof Blob&&vle.push(wse().instanceOf(Blob));var gle=wse().oneOfType([wse().string,wse().arrayOf(wse().string)]),mle=wse().oneOfType(vle),yle=wse().instanceOf(Zue),ble=(wse().oneOf(["_self","_blank","_parent","_top"]),wse().shape({_transport:wse().shape({fontLoader:wse().object.isRequired}).isRequired,commonObjs:wse().shape({_objs:wse().object.isRequired}).isRequired,getAnnotations:wse().func.isRequired,getTextContent:wse().func.isRequired,getViewport:wse().func.isRequired,render:wse().func.isRequired})),xle=wse().oneOfType([wse().shape({getDestination:wse().func.isRequired,getOutline:wse().func.isRequired,getPage:wse().func.isRequired,numPages:wse().number.isRequired}),wse().bool]),kle=wse().oneOfType([wse().func,wse().shape({current:wse().any})]),wle=wse().oneOf(["canvas","none","svg"]),Sle=wse().oneOf([0,90,180,270]),_le=["url"];function Cle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ele(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cle(Object(n),!0).forEach((function(t){Gf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cle(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ale(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}var Ile=zue.PDFDataRangeTransport,Tle=function(e){tR(r,e);var n=Ale(r);function r(){var e;gC(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return Gf(aR(e=n.call.apply(n,[this].concat(a))),"state",{pdf:null}),Gf(aR(e),"viewer",{scrollPageIntoView:function(t){var n=t.dest,r=t.pageIndex,a=t.pageNumber,i=e.props.onItemClick;if(i)i({dest:n,pageIndex:r,pageNumber:a});else{var o=e.pages[r];o?o.scrollIntoView():Yue(!1,"An internal link leading to page ".concat(a," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}}),Gf(aR(e),"linkService",new Zue),Gf(aR(e),"loadDocument",(function(){cle(e.runningTask),e.loadingTask&&e.loadingTask.destroy();var t=Hue(e.findDocumentSource());e.runningTask=t,t.promise.then((function(t){if(e.onSourceSuccess(),t){e.setState((function(e){return e.pdf?{pdf:null}:null}));var n=e.props,r=n.options,a=n.onLoadProgress,i=n.onPassword;e.loadingTask=zue.getDocument(Ele(Ele({},t),r)),e.loadingTask.onPassword=i,a&&(e.loadingTask.onProgress=a);var o=Hue(e.loadingTask.promise);e.runningTask=o,o.promise.then((function(t){e.setState((function(e){return e.pdf&&e.pdf.fingerprint===t.fingerprint?null:{pdf:t}}),e.onLoadSuccess)})).catch((function(t){e.onLoadError(t)}))}})).catch((function(t){e.onSourceError(t)}))})),Gf(aR(e),"setupLinkService",(function(){var t=e.props,n=t.externalLinkRel,r=t.externalLinkTarget;e.linkService.setViewer(e.viewer),e.linkService.setExternalLinkRel(n),e.linkService.setExternalLinkTarget(r)})),Gf(aR(e),"onSourceSuccess",(function(){var t=e.props.onSourceSuccess;t&&t()})),Gf(aR(e),"onSourceError",(function(t){Yue(t);var n=e.props.onSourceError;n&&n(t)})),Gf(aR(e),"onLoadSuccess",(function(){var t=e.props.onLoadSuccess,n=e.state.pdf;t&&t(n),e.pages=new Array(n.numPages),e.linkService.setDocument(n)})),Gf(aR(e),"onLoadError",(function(t){e.setState({pdf:!1}),Yue(t);var n=e.props.onLoadError;n&&n(t)})),Gf(aR(e),"findDocumentSource",(function(){return new Promise((function(t){var n=e.props.file;if(n||t(null),"string"===typeof n){if(ole(n)){var r=sle(n);t({data:r})}lle(),t({url:n})}if(n instanceof Ile&&t({range:n}),rle(n)&&t({data:n}),Jue&&(ale(n)||ile(n)))hle(n).then((function(e){t({data:e})}));else{if(Xue("object"===dC(n)),Xue(n.url||n.data||n.range),"string"===typeof n.url){if(ole(n.url)){var a=n.url,i=rse(n,_le),o=sle(a);t(Ele({data:o},i))}lle()}t(n)}}))})),Gf(aR(e),"registerPage",(function(t,n){e.pages[t]=n})),Gf(aR(e),"unregisterPage",(function(t){delete e.pages[t]})),e}return yC(r,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(e){this.props.file!==e.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){cle(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var e=this.linkService,t=this.registerPage,n=this.unregisterPage,r=this.props,a=r.imageResourcesPath,i=r.renderMode,o=r.rotate;return{imageResourcesPath:a,linkService:e,pdf:this.state.pdf,registerPage:t,renderMode:i,rotate:o,unregisterPage:n}}},{key:"eventProps",get:function(){var e=this;return Vue(this.props,(function(){return e.state.pdf}))}},{key:"renderChildren",value:function(){var e=this.props.children;return t.createElement(Kue.Provider,{value:this.childContext},e)}},{key:"renderContent",value:function(){var e=this.props.file,n=this.state.pdf;if(!e){var r=this.props.noData;return t.createElement($ue,{type:"no-data"},"function"===typeof r?r():r)}if(null===n){var a=this.props.loading;return t.createElement($ue,{type:"loading"},"function"===typeof a?a():a)}if(!1===n){var i=this.props.error;return t.createElement($ue,{type:"error"},"function"===typeof i?i():i)}return this.renderChildren()}},{key:"render",value:function(){var e=this.props,n=e.className,r=e.inputRef;return t.createElement("div",oe({className:Gue("react-pdf__Document",n),ref:r},this.eventProps),this.renderContent())}}]),r}(t.PureComponent);Tle.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF\u2026",noData:"No PDF file specified.",onPassword:function(e,t){switch(t){case Que.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case Que.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."))}}};var Rle=wse().oneOfType([wse().func,wse().node]);Tle.propTypes=Ele(Ele({},ple),{},{children:wse().node,className:gle,error:Rle,externalLinkRel:wse().string,externalLinkTarget:wse().string,file:mle,imageResourcesPath:wse().string,inputRef:kle,loading:Rle,noData:Rle,onItemClick:wse().func,onLoadError:wse().func,onLoadProgress:wse().func,onLoadSuccess:wse().func,onPassword:wse().func,onSourceError:wse().func,onSourceSuccess:wse().func,rotate:wse().number});var Nle=(0,t.createContext)(null),Mle=function(){function e(t){var n=t.num,r=t.gen;gC(this,e),this.num=n,this.gen=r}return yC(e,[{key:"toString",value:function(){var e="".concat(this.num,"R");return 0!==this.gen&&(e+=this.gen),e}}]),e}(),Ole=["item"];function Ple(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}var Fle=function(e){tR(r,e);var n=Ple(r);function r(){var e;gC(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return Gf(aR(e=n.call.apply(n,[this].concat(a))),"getDestination",(function(){return new Promise((function(t,n){var r=e.props,a=r.item,i=r.pdf;return tle(e.destination)||("string"===typeof a.dest?i.getDestination(a.dest).then(t).catch(n):t(a.dest)),e.destination})).then((function(t){return e.destination=t,t}))})),Gf(aR(e),"getPageIndex",(function(){return new Promise((function(t,n){var r=e.props.pdf;tle(e.pageIndex)&&t(e.pageIndex),e.getDestination().then((function(e){if(e){var a=Pf(e,1)[0];r.getPageIndex(new Mle(a)).then(t).catch(n)}}))})).then((function(t){return e.pageIndex=t,e.pageIndex}))})),Gf(aR(e),"getPageNumber",(function(){return new Promise((function(t,n){tle(e.pageNumber)&&t(e.pageNumber),e.getPageIndex().then((function(e){t(e+1)})).catch(n)})).then((function(t){return e.pageNumber=t,t}))})),Gf(aR(e),"onClick",(function(t){var n=e.props.onClick;return t.preventDefault(),!!n&&Promise.all([e.getDestination(),e.getPageIndex(),e.getPageNumber()]).then((function(e){var t=Pf(e,3),r=t[0],a=t[1],i=t[2];n({dest:r,pageIndex:a,pageNumber:i})}))})),e}return yC(r,[{key:"renderSubitems",value:function(){var e=this.props,n=e.item,a=rse(e,Ole);if(!n.items||!n.items.length)return null;var i=n.items;return t.createElement("ul",null,i.map((function(e,n){return t.createElement(r,oe({key:"string"===typeof e.destination?e.destination:n,item:e},a))})))}},{key:"render",value:function(){var e=this.props.item;return t.createElement("li",null,t.createElement("a",{href:"#",onClick:this.onClick},e.title),this.renderSubitems())}}]),r}(t.PureComponent),Dle=wse().oneOfType([wse().string,wse().arrayOf(wse().any)]);Fle.propTypes={item:wse().shape({dest:Dle,items:wse().arrayOf(wse().shape({dest:Dle,title:wse().string})),title:wse().string}).isRequired,onClick:wse().func,pdf:xle.isRequired};var Lle=function(e){return t.createElement(Kue.Consumer,null,(function(n){return t.createElement(Nle.Consumer,null,(function(r){return t.createElement(Fle,oe({},n,r,e))}))}))};function zle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jle(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}var Ble=function(e){tR(r,e);var n=jle(r);function r(){var e;gC(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return Gf(aR(e=n.call.apply(n,[this].concat(a))),"state",{outline:null}),Gf(aR(e),"loadOutline",(function(){var t=e.props.pdf;e.setState((function(e){return e.outline?{outline:null}:null}));var n=Hue(t.getOutline());e.runningTask=n,n.promise.then((function(t){e.setState({outline:t},e.onLoadSuccess)})).catch((function(t){e.onLoadError(t)}))})),Gf(aR(e),"onLoadSuccess",(function(){var t=e.props.onLoadSuccess,n=e.state.outline;t&&t(n)})),Gf(aR(e),"onLoadError",(function(t){e.setState({outline:!1}),Yue(t);var n=e.props.onLoadError;n&&n(t)})),Gf(aR(e),"onItemClick",(function(t){var n=t.dest,r=t.pageIndex,a=t.pageNumber,i=e.props.onItemClick;i&&i({dest:n,pageIndex:r,pageNumber:a})})),e}return yC(r,[{key:"componentDidMount",value:function(){Xue(this.props.pdf),this.loadOutline()}},{key:"componentDidUpdate",value:function(e){var t=this.props.pdf;e.pdf&&t!==e.pdf&&this.loadOutline()}},{key:"componentWillUnmount",value:function(){cle(this.runningTask)}},{key:"childContext",get:function(){return{onClick:this.onItemClick}}},{key:"eventProps",get:function(){var e=this;return Vue(this.props,(function(){return e.state.outline}))}},{key:"renderOutline",value:function(){var e=this.state.outline;return t.createElement("ul",null,e.map((function(e,n){return t.createElement(Lle,{key:"string"===typeof e.destination?e.destination:n,item:e})})))}},{key:"render",value:function(){var e=this.props.pdf,n=this.state.outline;if(!e||!n)return null;var r=this.props,a=r.className,i=r.inputRef;return t.createElement("div",oe({className:Gue("react-pdf__Outline",a),ref:i},this.eventProps),t.createElement(Nle.Provider,{value:this.childContext},this.renderOutline()))}}]),r}(t.PureComponent);Ble.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zle(Object(n),!0).forEach((function(t){Gf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zle(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:gle,inputRef:kle,onItemClick:wse().func,onLoadError:wse().func,onLoadSuccess:wse().func,pdf:xle},ple);function Wle(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){r.forEach((function(t){"function"===typeof t?t(e):t.current=e}))}}var Ule=(0,t.createContext)(null);function Vle(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}var Hle=zue.AnnotationMode,Gle=function(e){tR(r,e);var n=Vle(r);function r(){var e;gC(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return Gf(aR(e=n.call.apply(n,[this].concat(i))),"canvasElement",(0,t.createRef)()),Gf(aR(e),"onRenderSuccess",(function(){e.renderer=null;var t=e.props,n=t.onRenderSuccess,r=t.page,a=t.scale;n&&n(fle(r,a))})),Gf(aR(e),"onRenderError",(function(t){if(!dle(t)){Yue(t);var n=e.props.onRenderError;n&&n(t)}})),Gf(aR(e),"drawPageOnCanvas",(function(){var t=e.canvasElement.current;if(!t)return null;var n=aR(e),r=n.renderViewport,a=n.viewport,i=e.props,o=i.canvasBackground,s=i.page,u=i.renderForms;t.width=r.width,t.height=r.height,t.style.width="".concat(Math.floor(a.width),"px"),t.style.height="".concat(Math.floor(a.height),"px");var l={annotationMode:u?Hle.ENABLE_FORMS:Hle.ENABLE,get canvasContext(){return t.getContext("2d")},viewport:r};return o&&(l.background=o),e.cancelRenderingTask(),e.renderer=s.render(l),e.renderer.promise.then(e.onRenderSuccess).catch(e.onRenderError)})),e}return yC(r,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.canvasBackground,r=t.page,a=t.renderForms;n===e.canvasBackground&&a===e.renderForms||(r.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask();var e=this.canvasElement.current;e&&(e.width=0,e.height=0)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"renderViewport",get:function(){var e=this.props,t=e.page,n=e.rotate,r=e.scale,a=Jue&&window.devicePixelRatio||1;return t.getViewport({scale:r*a,rotation:n})}},{key:"viewport",get:function(){var e=this.props,t=e.page,n=e.rotate,r=e.scale;return t.getViewport({scale:r,rotation:n})}},{key:"render",value:function(){var e=this.props.canvasRef;return t.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:Wle(e,this.canvasElement),style:{display:"block",userSelect:"none"}})}}]),r}(t.PureComponent);function qle(e){return t.createElement(Ule.Consumer,null,(function(n){return t.createElement(Gle,oe({},n,e))}))}function Xle(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}Gle.propTypes={canvasBackground:wse().string,canvasRef:kle,onRenderError:wse().func,onRenderSuccess:wse().func,page:ble.isRequired,renderForms:wse().bool,rotate:Sle,scale:wse().number.isRequired};var Yle=function(e){tR(r,e);var n=Xle(r);function r(){var e;gC(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return Gf(aR(e=n.call.apply(n,[this].concat(a))),"state",{svg:null}),Gf(aR(e),"onRenderSuccess",(function(){e.renderer=null;var t=e.props,n=t.onRenderSuccess,r=t.page,a=t.scale;n&&n(fle(r,a))})),Gf(aR(e),"onRenderError",(function(t){if(!dle(t)){Yue(t);var n=e.props.onRenderError;n&&n(t)}})),Gf(aR(e),"renderSVG",(function(){var t=e.props.page;return e.renderer=t.getOperatorList(),e.renderer.then((function(n){var r=new zue.SVGGraphics(t.commonObjs,t.objs);e.renderer=r.getSVG(n,e.viewport).then((function(t){e.setState({svg:t},e.onRenderSuccess)})).catch(e.onRenderError)})).catch(e.onRenderError)})),Gf(aR(e),"drawPageOnContainer",(function(t){var n=e.state.svg;if(t&&n){t.firstElementChild||t.appendChild(n);var r=e.viewport,a=r.width,i=r.height;n.setAttribute("width",a),n.setAttribute("height",i)}})),e}return yC(r,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var e=this.props,t=e.page,n=e.rotate,r=e.scale;return t.getViewport({scale:r,rotation:n})}},{key:"render",value:function(){var e=this,n=this.viewport,r=n.width,a=n.height;return t.createElement("div",{className:"react-pdf__Page__svg",ref:function(t){return e.drawPageOnContainer(t)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:r,height:a,userSelect:"none"}})}}]),r}(t.PureComponent);function Kle(e){return t.createElement(Ule.Consumer,null,(function(n){return t.createElement(Yle,oe({},n,e))}))}function $le(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}Yle.propTypes={onRenderError:wse().func,onRenderSuccess:wse().func,page:ble.isRequired,rotate:Sle,scale:wse().number.isRequired};var Zle=function(e){tR(r,e);var n=$le(r);function r(){var e;gC(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return Gf(aR(e=n.call.apply(n,[this].concat(i))),"itemElement",(0,t.createRef)()),Gf(aR(e),"getElementWidth",(function(t){var n=aR(e).sideways;return t.getBoundingClientRect()[n?"height":"width"]})),e}return yC(r,[{key:"componentDidMount",value:function(){this.alignTextItem()}},{key:"componentDidUpdate",value:function(){this.alignTextItem()}},{key:"unrotatedViewport",get:function(){var e=this.props,t=e.page,n=e.scale;return t.getViewport({scale:n})}},{key:"rotate",get:function(){var e=this.props,t=e.page;return e.rotate-t.rotate}},{key:"sideways",get:function(){return this.rotate%180!==0}},{key:"defaultSideways",get:function(){return this.unrotatedViewport.rotation%180!==0}},{key:"fontSize",get:function(){var e=this.props.transform,t=this.defaultSideways,n=Pf(e,2),r=n[0],a=n[1];return t?a:r}},{key:"top",get:function(){var e=this.props.transform,t=this.unrotatedViewport,n=this.defaultSideways,r=Pf(e,6),a=r[2],i=r[3],o=r[4],s=r[5],u=Pf(t.viewBox,4),l=u[1],c=u[3];return n?o+a+l:c-(s+i)}},{key:"left",get:function(){var e=this.props.transform,t=this.unrotatedViewport,n=this.defaultSideways,r=Pf(e,6),a=r[4],i=r[5],o=Pf(t.viewBox,1)[0];return n?i-o:a-o}},{key:"getFontData",value:function(e){var t=this.props.page;return new Promise((function(n){t.commonObjs.get(e,n)}))}},{key:"alignTextItem",value:function(){var e=this,t=this.itemElement.current;if(t){t.style.transform="";var n=this.props,r=n.fontName,a=n.scale,i=n.width;t.style.fontFamily="".concat(r,", sans-serif"),this.getFontData(r).then((function(n){var o=n?n.fallbackName:"sans-serif";t.style.fontFamily="".concat(r,", ").concat(o);var s=i*a,u=e.getElementWidth(t),l="scaleX(".concat(s/u,")"),c=n?n.ascent:0;c&&(l+=" translateY(".concat(100*(1-c),"%)")),t.style.transform=l,t.style.WebkitTransform=l}))}}},{key:"render",value:function(){var e=this.fontSize,n=this.top,r=this.left,a=this.props,i=a.customTextRenderer,o=a.scale,s=a.str;return t.createElement("span",{ref:this.itemElement,style:{height:"1em",fontFamily:"sans-serif",fontSize:"".concat(e*o,"px"),position:"absolute",top:"".concat(n*o,"px"),left:"".concat(r*o,"px"),transformOrigin:"left bottom",whiteSpace:"pre",pointerEvents:"all"}},i?i(this.props):s)}}]),r}(t.PureComponent);function Qle(e){return t.createElement(Ule.Consumer,null,(function(n){return t.createElement(Zle,oe({},n,e))}))}function Jle(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}Zle.propTypes={customTextRenderer:wse().func,fontName:wse().string.isRequired,itemIndex:wse().number.isRequired,page:ble.isRequired,rotate:Sle,scale:wse().number,str:wse().string.isRequired,transform:wse().arrayOf(wse().number).isRequired,width:wse().number.isRequired};var ece=function(e){tR(r,e);var n=Jle(r);function r(){var e;gC(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return Gf(aR(e=n.call.apply(n,[this].concat(a))),"state",{textItems:null}),Gf(aR(e),"loadTextItems",(function(){var t=Hue(e.props.page.getTextContent());e.runningTask=t,t.promise.then((function(t){var n=t.items;e.setState({textItems:n},e.onLoadSuccess)})).catch((function(t){e.onLoadError(t)}))})),Gf(aR(e),"onLoadSuccess",(function(){var t=e.props.onGetTextSuccess,n=e.state.textItems;t&&t(n)})),Gf(aR(e),"onLoadError",(function(t){e.setState({textItems:!1}),Yue(t);var n=e.props.onGetTextError;n&&n(t)})),e}return yC(r,[{key:"componentDidMount",value:function(){Xue(this.props.page),this.loadTextItems()}},{key:"componentDidUpdate",value:function(e){var t=this.props.page;e.page&&t!==e.page&&this.loadTextItems()}},{key:"componentWillUnmount",value:function(){cle(this.runningTask)}},{key:"unrotatedViewport",get:function(){var e=this.props,t=e.page,n=e.scale;return t.getViewport({scale:n})}},{key:"rotate",get:function(){var e=this.props,t=e.page;return e.rotate-t.rotate}},{key:"renderTextItems",value:function(){var e=this.state.textItems;return e?e.map((function(e,n){return t.createElement(Qle,oe({key:n,itemIndex:n},e))})):null}},{key:"render",value:function(){var e=this.unrotatedViewport,n=this.rotate;return t.createElement("div",{className:"react-pdf__Page__textContent",style:{position:"absolute",top:"50%",left:"50%",width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),color:"transparent",transform:"translate(-50%, -50%) rotate(".concat(n,"deg)"),WebkitTransform:"translate(-50%, -50%) rotate(".concat(n,"deg)"),pointerEvents:"none"}},this.renderTextItems())}}]),r}(t.PureComponent);function tce(e){return t.createElement(Ule.Consumer,null,(function(n){return t.createElement(ece,oe({},n,e))}))}function nce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}ece.propTypes={onGetTextError:wse().func,onGetTextSuccess:wse().func,page:ble.isRequired,rotate:Sle,scale:wse().number};var rce=function(e){tR(r,e);var n=nce(r);function r(){var e;gC(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return Gf(aR(e=n.call.apply(n,[this].concat(i))),"state",{annotations:null}),Gf(aR(e),"layerElement",(0,t.createRef)()),Gf(aR(e),"loadAnnotations",(function(){var t=Hue(e.props.page.getAnnotations());e.runningTask=t,t.promise.then((function(t){e.setState({annotations:t},e.onLoadSuccess)})).catch((function(t){e.onLoadError(t)}))})),Gf(aR(e),"onLoadSuccess",(function(){var t=e.props.onGetAnnotationsSuccess,n=e.state.annotations;t&&t(n)})),Gf(aR(e),"onLoadError",(function(t){e.setState({annotations:!1}),Yue(t);var n=e.props.onGetAnnotationsError;n&&n(t)})),Gf(aR(e),"onRenderSuccess",(function(){var t=e.props.onRenderAnnotationLayerSuccess;t&&t()})),Gf(aR(e),"onRenderError",(function(t){Yue(t);var n=e.props.onRenderAnnotationLayerError;n&&n(t)})),e}return yC(r,[{key:"componentDidMount",value:function(){Xue(this.props.page),this.loadAnnotations()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.page,r=t.renderForms;(e.page&&n!==e.page||r!==e.renderForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){cle(this.runningTask)}},{key:"viewport",get:function(){var e=this.props,t=e.page,n=e.rotate,r=e.scale;return t.getViewport({scale:r,rotation:n})}},{key:"renderAnnotationLayer",value:function(){var e=this.state.annotations;if(e){var t=this.props,n=t.imageResourcesPath,r=t.linkService,a=t.page,i=t.renderForms,o=this.viewport.clone({dontFlip:!0}),s={annotations:e,div:this.layerElement.current,imageResourcesPath:n,linkService:r,page:a,renderForms:i,viewport:o};this.layerElement.current.innerHTML="";try{zue.AnnotationLayer.render(s),this.onRenderSuccess()}catch(u){this.onRenderError(u)}}}},{key:"render",value:function(){return t.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:this.layerElement},this.renderAnnotationLayer())}}]),r}(t.PureComponent);rce.propTypes={imageResourcesPath:wse().string,linkService:yle.isRequired,onGetAnnotationsError:wse().func,onGetAnnotationsSuccess:wse().func,onRenderAnnotationLayerError:wse().func,onRenderAnnotationLayerSuccess:wse().func,page:ble,renderForms:wse().bool,rotate:Sle,scale:wse().number};var ace=function(e){return t.createElement(Kue.Consumer,null,(function(n){return t.createElement(Ule.Consumer,null,(function(r){return t.createElement(rce,oe({},n,r,e))}))}))};function ice(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ice(Object(n),!0).forEach((function(t){Gf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ice(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nR(e);if(t){var a=nR(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iR(this,n)}}var uce=function(e){tR(r,e);var n=sce(r);function r(){var e;gC(this,r);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return Gf(aR(e=n.call.apply(n,[this].concat(i))),"state",{page:null}),Gf(aR(e),"pageElement",(0,t.createRef)()),Gf(aR(e),"onLoadSuccess",(function(){var t=e.props,n=t.onLoadSuccess,r=t.registerPage,a=e.state.page;n&&n(fle(a,e.scale)),r&&r(e.pageIndex,e.pageElement.current)})),Gf(aR(e),"onLoadError",(function(t){e.setState({page:!1}),Yue(t);var n=e.props.onLoadError;n&&n(t)})),Gf(aR(e),"loadPage",(function(){var t=e.props.pdf,n=e.getPageNumber();if(n){e.setState((function(e){return e.page?{page:null}:null}));var r=Hue(t.getPage(n));e.runningTask=r,r.promise.then((function(t){e.setState({page:t},e.onLoadSuccess)})).catch((function(t){e.onLoadError(t)}))}})),e}return yC(r,[{key:"componentDidMount",value:function(){Xue(this.props.pdf),this.loadPage()}},{key:"componentDidUpdate",value:function(e){var t=this.props.pdf;if(e.pdf&&t!==e.pdf||this.getPageNumber()!==this.getPageNumber(e)){var n=this.props.unregisterPage;n&&n(this.getPageIndex(e)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var e=this.props.unregisterPage;e&&e(this.pageIndex),cle(this.runningTask)}},{key:"childContext",get:function(){var e=this.state.page;if(!e)return{};var t=this.props,n=t.canvasBackground,r=t.customTextRenderer,a=t.onGetAnnotationsError,i=t.onGetAnnotationsSuccess,o=t.onGetTextError,s=t.onGetTextSuccess,u=t.onRenderAnnotationLayerError,l=t.onRenderAnnotationLayerSuccess,c=t.onRenderError,f=t.onRenderSuccess,d=t.renderForms,h=t.renderInteractiveForms;return{canvasBackground:n,customTextRenderer:r,onGetAnnotationsError:a,onGetAnnotationsSuccess:i,onGetTextError:o,onGetTextSuccess:s,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:l,onRenderError:c,onRenderSuccess:f,page:e,renderForms:null!==d&&void 0!==d?d:h,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return nle(e.pageNumber)?e.pageNumber-1:nle(e.pageIndex)?e.pageIndex:null}},{key:"getPageNumber",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return nle(e.pageNumber)?e.pageNumber:nle(e.pageIndex)?e.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var e=this.props.rotate;if(nle(e))return e;var t=this.state.page;return t?t.rotate:null}},{key:"scale",get:function(){var e=this.state.page;if(!e)return null;var t=this.props,n=t.scale,r=t.width,a=t.height,i=this.rotate,o=1,s=null===n?1:n;if(r||a){var u=e.getViewport({scale:1,rotation:i});o=r?r/u.width:a/u.height}return s*o}},{key:"eventProps",get:function(){var e=this;return Vue(this.props,(function(){var t=e.state.page;return t?fle(t,e.scale):t}))}},{key:"pageKey",get:function(){var e=this.state.page;return"".concat(e.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){var e=this.state.page;return"".concat(e.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var e=this.props,n=e.canvasRef;switch(e.renderMode){case"none":return null;case"svg":return t.createElement(Kle,{key:"".concat(this.pageKeyNoScale,"_svg")});default:return t.createElement(qle,{key:"".concat(this.pageKey,"_canvas"),canvasRef:n})}}},{key:"renderTextLayer",value:function(){var e=this.props.renderTextLayer;return e?t.createElement(tce,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){var e=this.props.renderAnnotationLayer;return e?t.createElement(ace,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var e=this.props.children;return t.createElement(Ule.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),e)}},{key:"renderContent",value:function(){var e=this.pageNumber,n=this.props.pdf,r=this.state.page;if(!e){var a=this.props.noData;return t.createElement($ue,{type:"no-data"},"function"===typeof a?a():a)}if(null===n||null===r){var i=this.props.loading;return t.createElement($ue,{type:"loading"},"function"===typeof i?i():i)}if(!1===n||!1===r){var o=this.props.error;return t.createElement($ue,{type:"error"},"function"===typeof o?o():o)}return this.renderChildren()}},{key:"render",value:function(){var e=this.pageNumber,n=this.props,r=n.className,a=n.inputRef;return t.createElement("div",oe({className:Gue("react-pdf__Page",r),"data-page-number":e,ref:Wle(a,this.pageElement),style:{position:"relative"}},this.eventProps),this.renderContent())}}]),r}(t.PureComponent);uce.defaultProps={error:"Failed to load the page.",loading:"Loading page\u2026",noData:"No page specified.",renderAnnotationLayer:!0,renderForms:!1,renderMode:"canvas",renderTextLayer:!0,scale:1};var lce=wse().oneOfType([wse().func,wse().node]);function cce(e,n){return t.createElement(Kue.Consumer,null,(function(r){return t.createElement(uce,oe({ref:n},r,e))}))}uce.propTypes=oce(oce({},ple),{},{canvasBackground:wse().string,children:wse().node,className:gle,customTextRenderer:wse().func,error:lce,height:wse().number,imageResourcesPath:wse().string,inputRef:kle,loading:lce,noData:lce,onGetTextError:wse().func,onGetTextSuccess:wse().func,onLoadError:wse().func,onLoadSuccess:wse().func,onRenderError:wse().func,onRenderSuccess:wse().func,pageIndex:function(e,t,n){var r=e[t],a=e.pageNumber,i=e.pdf;if(!tle(i))return null;if(tle(r)){if("number"!==typeof r)return new Error("`".concat(t,"` of type `").concat(dC(r),"` supplied to `").concat(n,"`, expected `number`."));if(r<0)return new Error("Expected `".concat(t,"` to be greater or equal to 0."));var o=i.numPages;if(r+1>o)return new Error("Expected `".concat(t,"` to be less or equal to ").concat(o-1,"."))}else if(!tle(a))return new Error("`".concat(t,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(n,"`."));return null},pageNumber:function(e,t,n){var r=e[t],a=e.pageIndex,i=e.pdf;if(!tle(i))return null;if(tle(r)){if("number"!==typeof r)return new Error("`".concat(t,"` of type `").concat(dC(r),"` supplied to `").concat(n,"`, expected `number`."));if(r<1)return new Error("Expected `".concat(t,"` to be greater or equal to 1."));var o=i.numPages;if(r>o)return new Error("Expected `".concat(t,"` to be less or equal to ").concat(o,"."))}else if(!tle(a))return new Error("`".concat(t,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(n,"`."));return null},pdf:xle,registerPage:wse().func,renderAnnotationLayer:wse().bool,renderForms:wse().bool,renderInteractiveForms:wse().bool,renderMode:wle,renderTextLayer:wse().bool,rotate:Sle,scale:wse().number,unregisterPage:wse().func,width:wse().number});var fce=t.forwardRef(cce);Yue(!ele,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(ule)),zue.GlobalWorkerOptions.workerSrc="pdf.worker.js";var dce=function(){var e=Pf((0,t.useState)([]),2),n=e[0],r=e[1],a=Pf((0,t.useState)(!1),2),i=a[0],o=a[1],s=qt(),u=s.isOpen,l=s.onOpen,c=s.onClose,f=Pf((0,t.useState)(0),2),d=f[0],h=f[1],p=Pf((0,t.useState)(["-"]),2),v=p[0],g=p[1],m=window.location.origin;zue.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(zue.version,"/pdf.worker.js");var y=Fue({onDrop:function(e){o(!0),r(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),b=y.getRootProps,x=y.getInputProps,k=function(e){var t=new FormData;t.append("pdfFile",n[0]),t.append("type",n[0].type),fetch(m+"/invoice/extract-text",{method:"post",body:t}).then((function(e){return e.text()})).then((function(e){var t=w(e.trim());h(t.sum),g(t.dates)}))},w=function(e){var t=pd(e.matchAll(/\d{1,3}( \d{3})*[,|.]\d{2}/g)),n=[];for(var r in t)n.push(t[r][0]);n.sort((function(e,t){var n=e.replace(",",".").replace(" ",""),r=t.replace(",",".").replace(" ","");return parseFloat(r)-parseFloat(n)}));var a=pd(e.matchAll(/(\d{2}[\.\-/]){2}\d{4}/g)),i=[];for(var o in a){var s=a[o][0],u=s.split(".");u[2]<"1980"||u[2]>"2050"||u[0]>31||u[1]>31||i.push(s)}return{sum:n[0],dates:i}};return(0,Fb.jsxs)(bb,{direction:"column",backgroundColor:"gray.50",padding:10,pt:5,overflowY:"auto",overflowX:"auto",minHeight:"100vh",children:[(0,Fb.jsx)(fC,{title:"INVOICE READER",section:"Demo"}),(0,Fb.jsxs)(Ob,Y7(Y7({rounded:"xl",shadow:"md",alignSelf:"center",mt:5,pt:5},b()),{},{backgroundColor:"white",borderWidth:2,minHeight:"100px",h:"15vh",w:"100%",_hover:{bg:"gray.100"},justify:"center",direction:"column",borderStyle:"dashed",borderColor:"gray.300",children:[(0,Fb.jsx)("input",Y7({},x())),(0,Fb.jsx)(Tb,{color:"gray.400",textAlign:"center",children:"Drop or upload file here"}),(0,Fb.jsx)(pb,{children:(0,Fb.jsx)(ql,{ml:"5",color:"gray.400",w:10,h:10,children:(0,Fb.jsx)(y_,{})})})]})),(0,Fb.jsxs)(Ob,{direction:"row",mt:5,children:[(0,Fb.jsx)(Ob,{justify:"center",w:"49%",rounded:"xl",minWidth:"400px",children:i?null===n||void 0===n?void 0:n.map((function(e){return(0,Fb.jsxs)(bb,{direction:"column",maxWidth:"100%",children:[(0,Fb.jsx)(hb,{maxHeight:"50vh",overflowY:"auto",cursor:"pointer",borderWidth:2,children:(0,Fb.jsx)(Tle,{file:e,onClick:l,maxWidth:"100%",children:(0,Fb.jsx)(fce,{pageNumber:1})})}),(0,Fb.jsx)(qb,{onClick:k,backgroundColor:"white",borderWidth:2,mt:"3",children:"Submit"})]},e.name)})):(0,Fb.jsx)(bb,{direction:"column",justify:"center",backgroundColor:"white",h:"50vh",w:"100%",borderWidth:2,children:(0,Fb.jsx)(pb,{children:(0,Fb.jsx)(ql,{color:"gray.400",ml:"8",boxSize:20,children:(0,Fb.jsx)(m_,{})})})})}),(0,Fb.jsxs)(Ob,{borderWidth:2,bg:"white",shadow:"md",w:"49%",paddingTop:10,p:8,direction:"column",rounded:"xl",minWidth:"400px",children:[(0,Fb.jsx)(Tb,{color:"gray.400",fontWeight:"bold",fontSize:"15",children:" Result"}),(0,Fb.jsxs)(Ob,{direction:"row",align:"center",pt:5,pb:8,children:[(0,Fb.jsx)(ql,{as:v_,color:"gray.500",boxSize:"10",mr:4}),(0,Fb.jsx)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",children:" Price:  "}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"20",children:[" ",d,",- "]})]}),(0,Fb.jsx)(mb,{}),(0,Fb.jsxs)(Ob,{pt:5,children:[(0,Fb.jsx)(ql,{as:p_,color:"gray.500",boxSize:"9",mr:4}),(0,Fb.jsx)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"18",children:"Dates: "}),(0,Fb.jsx)(kb,{}),(0,Fb.jsx)(Ab,{spacing:4,children:v.length&&v.map((function(e){return(0,Fb.jsxs)(Tb,{color:"blue.500",fontWeight:"bold",fontSize:"20",children:[e," "]})}))})]})]})]}),(0,Fb.jsxs)(nS,{isOpen:u,onClose:c,size:"2xl",closeOnEsc:"true",children:[(0,Fb.jsx)(oS,{}),(0,Fb.jsxs)(aS,{children:[(0,Fb.jsx)(sS,{alignSelf:"center",children:"Preview"}),(0,Fb.jsx)(lS,{}),(0,Fb.jsx)(uS,{w:"100%",children:(0,Fb.jsx)(pb,{children:null===n||void 0===n?void 0:n.map((function(e){return(0,Fb.jsx)(Tle,{file:e,onClick:l,cursor:"pointer",overflowY:"auto",children:(0,Fb.jsx)(fce,{pageNumber:1})})}))})})]})]})]})},hce=!1,pce=null,vce=!1,gce=new Set,mce="undefined"!==typeof window&&null!=window.navigator&&/^Mac/.test(window.navigator.platform);function yce(e,t){gce.forEach((function(n){return n(e,t)}))}function bce(e){vce=!0,function(e){return!(e.metaKey||!mce&&e.altKey||e.ctrlKey)}(e)&&(pce="keyboard",yce("keyboard",e))}function xce(e){pce="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(vce=!0,yce("pointer",e))}function kce(e){e.target!==window&&e.target!==document&&(vce||(pce="keyboard",yce("keyboard",e)),vce=!1)}function wce(){vce=!1}function Sce(){return"pointer"!==pce}function _ce(e){!function(){if("undefined"!==typeof window&&!hce){var e=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){vce=!0;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.apply(this,n)},document.addEventListener("keydown",bce,!0),document.addEventListener("keyup",bce,!0),window.addEventListener("focus",kce,!0),window.addEventListener("blur",wce,!1),"undefined"!==typeof PointerEvent?(document.addEventListener("pointerdown",xce,!0),document.addEventListener("pointermove",xce,!0),document.addEventListener("pointerup",xce,!0)):(document.addEventListener("mousedown",xce,!0),document.addEventListener("mousemove",xce,!0),document.addEventListener("mouseup",xce,!0)),hce=!0}}(),e(Sce());var t=function(){return e(Sce())};return gce.add(t),function(){gce.delete(t)}}function Cce(){return Cce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cce.apply(this,arguments)}var Ece=Dt({name:"CheckboxGroupContext",strict:!1}),Ace=Ece[0],Ice=Ece[1],Tce=function(e){var n=e.colorScheme,r=e.size,a=e.variant,i=e.children,o=e.isDisabled,s=function(e){void 0===e&&(e={});var n=e,r=n.defaultValue,a=n.value,i=n.onChange,o=n.isDisabled,s=n.isNative,u=Ut({value:a,defaultValue:r||[],onChange:jt(i)}),l=u[0],c=u[1],f=(0,t.useCallback)((function(e){if(l){var t=Ke(e)?e.target.checked:!l.includes(e),n=Ke(e)?e.target.value:e,r=t?je(l,n):l.filter((function(e){return String(e)!==String(n)}));c(r)}}),[c,l]),d=(0,t.useCallback)((function(e){var t;return void 0===e&&(e={}),Cce({},e,((t={})[s?"checked":"isChecked"]=l.some((function(t){return String(e.value)===String(t)})),t.onChange=f,t))}),[f,s,l]);return{value:l,isDisabled:o,onChange:f,setValue:c,getCheckboxProps:d}}(e),u=s.value,l=s.onChange,c=t.useMemo((function(){return{size:r,onChange:l,colorScheme:n,value:u,variant:a,isDisabled:o}}),[r,l,n,u,a,o]);return t.createElement(Ace,{value:c},i)};function Rce(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Nce=["isIndeterminate","isChecked"];var Mce=function(e){var t=uy;return"custom"in t&&"function"===typeof t.custom?t.custom(e):t(e)}(qa.svg),Oce=function(e){return t.createElement(Mce,Cce({width:"1.2em",viewBox:"0 0 12 10",variants:{unchecked:{opacity:0,strokeDashoffset:16},checked:{opacity:1,strokeDashoffset:0,transition:{duration:.2}}},style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16}},e),t.createElement("polyline",{points:"1.5 6 4.5 9 10.5 1"}))},Pce=function(e){return t.createElement(Mce,Cce({width:"1.2em",viewBox:"0 0 24 24",variants:{unchecked:{scaleX:.65,opacity:0},checked:{scaleX:1,opacity:1,transition:{scaleX:{duration:0},opacity:{duration:.02}}}},style:{stroke:"currentColor",strokeWidth:4}},e),t.createElement("line",{x1:"21",x2:"3",y1:"12",y2:"12"}))},Fce=function(e){var n=e.open,r=e.children;return t.createElement(hy,{initial:!1},n&&t.createElement(uy.div,{variants:{unchecked:{scale:.5},checked:{scale:1}},initial:"unchecked",animate:"checked",exit:"unchecked",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},r))},Dce=function(e){var n=e.isIndeterminate,r=e.isChecked,a=Rce(e,Nce),i=n?Pce:Oce;return t.createElement(Fce,{open:r||n},t.createElement(i,a))},Lce=["defaultChecked","isChecked","isFocusable","onChange","isIndeterminate","name","value","tabIndex","aria-label","aria-labelledby","aria-invalid"];function zce(e){e.preventDefault(),e.stopPropagation()}var jce=["spacing","className","children","iconColor","iconSize","icon","isChecked","isDisabled","onChange","inputProps"],Bce=qa("span",{baseStyle:{display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0}}),Wce=qa("label",{baseStyle:{cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"}}),Uce=Wa((function(e,n){var r=Ice(),a=Ga("Checkbox",Cce({},r,e)),i=Ma(e),o=i.spacing,s=void 0===o?"0.5rem":o,u=i.className,l=i.children,c=i.iconColor,f=i.iconSize,d=i.icon,h=void 0===d?t.createElement(Dce,null):d,p=i.isChecked,v=i.isDisabled,g=void 0===v?null==r?void 0:r.isDisabled:v,m=i.onChange,y=i.inputProps,b=Rce(i,jce),x=p;null!=r&&r.value&&i.value&&(x=r.value.includes(i.value));var k=m;null!=r&&r.onChange&&i.value&&(k=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){null==t||t(e)}))}}(r.onChange,m));var w=function(e){void 0===e&&(e={});var n=O_(e),r=n.isDisabled,a=n.isReadOnly,i=n.isRequired,o=n.isInvalid,s=n.id,u=n.onBlur,l=n.onFocus,c=n["aria-describedby"],f=e,d=f.defaultChecked,h=f.isChecked,p=f.isFocusable,v=f.onChange,g=f.isIndeterminate,m=f.name,y=f.value,b=f.tabIndex,x=void 0===b?void 0:b,k=f["aria-label"],w=f["aria-labelledby"],S=f["aria-invalid"],_=$e(Rce(f,Lce),["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),C=jt(v),E=jt(u),A=jt(l),I=(0,t.useState)(!1),T=I[0],R=I[1],N=Bt(),M=N[0],O=N[1],P=Bt(),F=P[0],D=P[1],L=Bt(),z=L[0],j=L[1];(0,t.useEffect)((function(){return _ce(R)}),[]);var B=(0,t.useRef)(null),W=(0,t.useState)(!0),U=W[0],V=W[1],H=(0,t.useState)(!!d),G=H[0],q=H[1],X=Wt(h,G),Y=X[0],K=X[1],$=(0,t.useCallback)((function(e){a||r?e.preventDefault():(Y||q(K?e.target.checked:!!g||e.target.checked),null==C||C(e))}),[a,r,K,Y,g,C]);zt((function(){B.current&&(B.current.indeterminate=Boolean(g))}),[g]),Xt((function(){r&&O.off()}),[r,O]),zt((function(){var e=B.current;null!=e&&e.form&&(e.form.onreset=function(){q(!!d)})}),[]);var Z=r&&!p,Q=(0,t.useCallback)((function(e){" "===e.key&&j.on()}),[j]),J=(0,t.useCallback)((function(e){" "===e.key&&j.off()}),[j]);zt((function(){B.current&&B.current.checked!==K&&q(B.current.checked)}),[B.current]);var ee=(0,t.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),Cce({},e,{ref:t,"data-active":ht(z),"data-hover":ht(F),"data-checked":ht(K),"data-focus":ht(M),"data-focus-visible":ht(M&&T),"data-indeterminate":ht(g),"data-disabled":ht(r),"data-invalid":ht(o),"data-readonly":ht(a),"aria-hidden":!0,onMouseDown:Ct(e.onMouseDown,(function(e){e.preventDefault(),j.on()})),onMouseUp:Ct(e.onMouseUp,j.off),onMouseEnter:Ct(e.onMouseEnter,D.on),onMouseLeave:Ct(e.onMouseLeave,D.off)})}),[z,K,r,M,T,F,g,o,a,j,D.off,D.on]),te=(0,t.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),Cce({},_,e,{ref:Ft(t,(function(e){e&&V("LABEL"===e.tagName)})),onClick:Ct(e.onClick,(function(){var e;U||(null==(e=B.current)||e.click(),Rt(B.current,{nextTick:!0}))})),"data-disabled":ht(r),"data-checked":ht(K),"data-invalid":ht(o)})}),[_,r,K,o,U]),ne=(0,t.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),Cce({},e,{ref:Ft(B,t),type:"checkbox",name:m,value:y,id:s,tabIndex:x,onChange:Ct(e.onChange,$),onBlur:Ct(e.onBlur,E,O.off),onFocus:Ct(e.onFocus,A,O.on),onKeyDown:Ct(e.onKeyDown,Q),onKeyUp:Ct(e.onKeyUp,J),required:i,checked:K,disabled:Z,readOnly:a,"aria-label":k,"aria-labelledby":w,"aria-invalid":S?Boolean(S):o,"aria-describedby":c,"aria-disabled":r,style:Ll})}),[m,y,s,$,O.off,O.on,E,A,Q,J,i,K,Z,a,k,w,S,o,c,r,x]),re=(0,t.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),Cce({},e,{ref:t,onMouseDown:Ct(e.onMouseDown,zce),onTouchStart:Ct(e.onTouchStart,zce),"data-disabled":ht(r),"data-checked":ht(K),"data-invalid":ht(o)})}),[K,r,o]);return{state:{isInvalid:o,isFocused:M,isChecked:K,isActive:z,isHovered:F,isIndeterminate:g,isDisabled:r,isReadOnly:a,isRequired:i},getRootProps:te,getCheckboxProps:ee,getInputProps:ne,getLabelProps:re,htmlProps:_}}(Cce({},b,{isDisabled:g,isChecked:x,onChange:k})),S=w.state,_=w.getInputProps,C=w.getCheckboxProps,E=w.getLabelProps,A=w.getRootProps,I=t.useMemo((function(){return Cce({opacity:S.isChecked||S.isIndeterminate?1:0,transform:S.isChecked||S.isIndeterminate?"scale(1)":"scale(0.95)",fontSize:f,color:c},a.icon)}),[c,f,S.isChecked,S.isIndeterminate,a.icon]),T=t.cloneElement(h,{__css:I,isIndeterminate:S.isIndeterminate,isChecked:S.isChecked});return t.createElement(Wce,Cce({__css:a.container,className:vt("chakra-checkbox",u)},A()),t.createElement("input",Cce({className:"chakra-checkbox__input"},_(y,n))),t.createElement(Bce,Cce({__css:a.control,className:"chakra-checkbox__control"},C()),T),l&&t.createElement(qa.span,Cce({className:"chakra-checkbox__label"},E(),{__css:Cce({marginStart:s},a.label)}),l))}));function Vce(){return Vce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vce.apply(this,arguments)}function Hce(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var Gce=["htmlSize"],qce=Wa((function(e,n){var r=e.htmlSize,a=Hce(e,Gce),i=Ga("Input",a),o=M_(Ma(a)),s=vt("chakra-input",e.className);return t.createElement(qa.input,Vce({size:r},o,{__css:i.field,ref:n,className:s}))}));qce.id="Input";var Xce=Ra("InputGroup"),Yce=(Xce[0],Xce[1]);var Kce=["placement"],$ce={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},Zce=qa("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),Qce=Wa((function(e,n){var r,a=e.placement,i=void 0===a?"left":a,o=Hce(e,Kce),s=null!=(r=$ce[i])?r:{},u=Yce();return t.createElement(Zce,Vce({ref:n},o,{__css:Vce({},u.addon,s)}))}));var Jce=Wa((function(e,n){return t.createElement(Qce,Vce({ref:n,placement:"left"},e,{className:vt("chakra-input__left-addon",e.className)}))}));Jce.id="InputLeftAddon";var efe=Wa((function(e,n){return t.createElement(Qce,Vce({ref:n,placement:"right"},e,{className:vt("chakra-input__right-addon",e.className)}))}));efe.id="InputRightAddon";var tfe=["placement"],nfe=["className"],rfe=["className"],afe=qa("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),ife=Wa((function(e,n){var r,a,i,o=e.placement,s=void 0===o?"left":o,u=Hce(e,tfe),l=Yce(),c=l.field,f=Vce(((i={})["left"===s?"insetStart":"insetEnd"]="0",i.width=null!=(r=null==c?void 0:c.height)?r:null==c?void 0:c.h,i.height=null!=(a=null==c?void 0:c.height)?a:null==c?void 0:c.h,i.fontSize=null==c?void 0:c.fontSize,i),l.element);return t.createElement(afe,Vce({ref:n,__css:f},u))}));ife.id="InputElement";var ofe=Wa((function(e,n){var r=e.className,a=Hce(e,nfe),i=vt("chakra-input__left-element",r);return t.createElement(ife,Vce({ref:n,placement:"left",className:i},a))}));ofe.id="InputLeftElement";var sfe=Wa((function(e,n){var r=e.className,a=Hce(e,rfe),i=vt("chakra-input__right-element",r);return t.createElement(ife,Vce({ref:n,placement:"right",className:i},a))}));sfe.id="InputRightElement";var ufe=function(){return(0,Fb.jsxs)(Ab,{alignItems:"left",spacing:7,p:5,pt:0,children:[(0,Fb.jsxs)(Ab,{spacing:2,children:[(0,Fb.jsx)(Tb,{fontSize:16,children:"Dette er en prototype av bildeklassifisereren til Drifti. Ideen er \xe5 automatisk gi bilder kategorieforslag s\xe5 vi kan strukturere bildene bedre og p\xe5 sikt bruke dette til \xe5 forbedre andre deler av Dritiproduktet.  "}),(0,Fb.jsx)(Tb,{fontSize:16,children:" Med denne prototypen \xf8nsker vi \xe5 teste hvor god maskinl\xe6ringsmodellen vi har er, og i tillegg bruke dere som tester den til \xe5 trene modellen. "})]}),(0,Fb.jsxs)(Ab,{alignItems:"left",spacing:.5,children:[(0,Fb.jsx)(Tb,{fontSize:17,fontWeight:"bold",color:"blue.500",as:"u",children:"Slik fungerer prototypen:  "}),(0,Fb.jsx)(Tb,{fontSize:16,children:" P\xe5 venstre side ser du et bilde som er tatt av en r\xf8rlegger. P\xe5 h\xf8yre side vil du f\xe5 opp ulike etiketter. Huk av for de etikettene du mener passer for bildet som vises."})]}),(0,Fb.jsxs)(Ab,{alignItems:"left",spacing:.5,children:[(0,Fb.jsx)(Tb,{fontSize:16,color:"blue.500",children:"Mangler det en passende etikett?   "}),(0,Fb.jsx)(Tb,{fontSize:16,children:" Legg til alternativ i innskrivnings-feltet \u201dSavner du et alternativ\u201d"})]}),(0,Fb.jsxs)(Ab,{alignItems:"left",spacing:.5,children:[(0,Fb.jsx)(Tb,{fontSize:16,color:"blue.500",children:"Ferdig?"}),(0,Fb.jsx)(Tb,{fontSize:16,children:' Trykk p\xe5 "Lagre og g\xe5 videre". Da vil svarene dine bli registrert, og du f\xe5r opp et nytt bilde.'})]}),(0,Fb.jsxs)(Ab,{alignItems:"left",spacing:.5,children:[(0,Fb.jsx)(Tb,{fontSize:16,color:"blue.500",children:"Usikker p\xe5 hvilke etiketter som passer?"}),(0,Fb.jsx)(Tb,{fontSize:16,children:' Trykk p\xe5 "Hopp over" for \xe5 hoppe over bildet, og g\xe5 videre til neste'})]})]})},lfe=window.location.origin,cfe=function(){function e(){gC(this,e),this.articles={0:"ARBEIDSPLASS",1:"UTEKRAN",2:"DRENERING",3:"R\xd8ROPPLEGG",4:"AV",5:"BUNNLEDNING",6:"RADIATOR",7:"UTE",8:"KJ\xd8KKEN",9:"VASKEROM",10:"VA",11:"TOALETT",12:"KONTOR",13:"BADEROM",14:"KVITTERING",15:"SLUK",16:"AVL\xd8P",17:"VARMTVANNSBEREDER",18:"R\xd8RARBEID",19:"DUSJ",20:"SERVANT",21:"LAGER",22:"VARMEKABLER",23:"FORDELERSKAP",24:"VARMEPUMPE",25:"ARBEIDSTEGNINGER"}}return yC(e,[{key:"load",value:function(){var e=vC(hC().mark((function e(){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cH(lfe+"/image/imagemodel/model.json");case 2:return this.model=e.sent,e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dom_to_pixels",value:function(e){return DM(e)}},{key:"classify",value:function(){var e=vC(hC().mark((function e(t){var n,r,a,i,o,s,u,l,c=arguments;return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:5,224===(r=t).shape[0]&&224===r.shape[1]||(r=AD.resizeBilinear(r,[224,224],!0)),r=SO(r,[-1,224,224,3]),a=this.model.predict(r),a=HP(a),e.next=8,a.array();case 8:for(i=(i=e.sent)[0],o=[],s=0;s<i.length;s++)o.push({index:this.articles[s],value:i[s]});n&&o.sort((function(e,t){return t.value-e.value})),u={},l=0;case 15:if(!(l<o.length)){e.next=22;break}if(u[o[l].index]=o[l].value,!(n&&u.length>=n)){e.next=19;break}return e.abrupt("break",22);case 19:l++,e.next=15;break;case 22:return e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=vC(hC().mark((function e(t,n){return hC().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ffe=new cfe;ffe.load();var dfe=ffe;var hfe=function(){var e=qt(),n=e.isOpen,r=e.onOpen,a=e.onClose,i=Pf((0,t.useState)(),2),o=i[0],s=i[1],u=Pf((0,t.useState)([]),2),l=u[0],c=u[1],f=Pf((0,t.useState)([]),2),d=f[0],h=f[1],p=Pf((0,t.useState)(),2),v=p[0],g=p[1],m=Pf((0,t.useState)(new Array(l.length).fill(!1)),2),y=m[0],b=m[1],x=window.location.origin;function k(){fetch(x+"/image/api/random").then((function(e){e.text().then((function(e){s(e)}))}))}function w(e){return"WC"==e?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}return(0,t.useEffect)((function(){o||k(),0==l.length&&fetch(x+"/image/api/labels").then((function(e){e.json().then((function(e){if(e.length>0)c(e),b(new Array(e.length).fill(!1));else{var t=["R\xf8r","Vask","Baderom","WC","Dusj","Vaskemaskin","Avl\xf8p","Sluk"];c(t),b(new Array(t.length).fill(!1))}}))}))}),[y]),(0,Fb.jsxs)(bb,{direction:"column",backgroundColor:"gray.50",padding:10,paddingTop:0,overflowY:"auto",overflowX:"auto",minHeight:"100vh",children:[(0,Fb.jsx)("script",{src:"https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"}),(0,Fb.jsxs)(Ob,{spacing:4,alignItems:"left",direction:"row",p:5,children:[(0,Fb.jsx)(fC,{title:"BILDEGJENKJENNING",section:"Trening av modell"}),(0,Fb.jsx)(kb,{}),(0,Fb.jsx)(qb,{color:"blue.500",fontWeight:"bold",fontSize:"18",size:"md",background:"transparent",onClick:r,children:"Lurer du p\xe5 noe?"})]}),(0,Fb.jsxs)(nS,{isOpen:n,onClose:a,size:"2xl",closeOnEsc:"true",children:[(0,Fb.jsx)(oS,{}),(0,Fb.jsxs)(aS,{children:[(0,Fb.jsx)(sS,{color:"blue.500",fontWeight:"bold",fontSize:"20",alignSelf:"center",children:"Forklaring"}),(0,Fb.jsx)(lS,{}),(0,Fb.jsx)(uS,{children:(0,Fb.jsx)(ufe,{})})]})]}),(0,Fb.jsxs)(Ob,{children:[(0,Fb.jsx)(hb,{p:5,w:"50%",minWidth:"400px",maxWidth:"650px",children:(0,Fb.jsx)(_S,{src:o,onLoad:function(e){var t=dfe.dom_to_pixels(e.target);dfe.classify(t,0).then((function(e){}))},crossOrigin:"anonymous",alt:"Random Image"})}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(bb,{p:20,pb:10,pt:10,borderWidth:2,shadow:"md",w:"49%",direction:"column",rounded:"xl",minHeight:"450px",minWidth:"400px",alignSelf:"center",children:[(0,Fb.jsx)(Tb,{mb:5,color:"blue.500",fontSize:15,fontWeight:"bold",children:"Etiketter"}),(0,Fb.jsx)(Tce,{variant:"filled",children:(0,Fb.jsx)(Ob,{spacing:"24px",children:l.map((function(e,t){return(0,Fb.jsx)(Uce,{type:"text",value:e,onChange:function(){return function(e){var t=e,n=y.map((function(e,n){return n===t?!e:e}));3===t&&(n[2]=!0),b(n);for(var r=[],a=0;a<n.length;a++)n[a]&&r.push(l[a]);h(r),console.log(d)}(t)},checked:y[t],children:w(e)},t)}))})}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(Ob,{direction:"column",mt:8,children:[(0,Fb.jsx)(Tb,{color:"blue.500",fontSize:15,fontWeight:"bold",children:"Savner du et alternativ?"}),(0,Fb.jsxs)(Ob,{direction:"row",children:[(0,Fb.jsx)(qce,{borderColor:"blue.400",fontSize:15,variant:"outline",maxWidth:"75%",placeholder:"Legg til her..",onChange:function(e){g(e.target.value)}}),(0,Fb.jsx)(kb,{}),(0,Fb.jsx)(qb,{borderWidth:1,backgroundColor:"transparent",borderColor:"blue.400",color:"blue.500",onClick:function(e){!l.includes(v)&&v?(c([].concat(pd(l),[v])),b([].concat(pd(y),[!1]))):v?alert("Etikett eksisterer allerede"):alert("Kan ikke legge til tom etikett")},children:"Legg til"})]})]}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(Eb,{children:[(0,Fb.jsx)(qb,{borderWidth:1,backgroundColor:"transparent",borderColor:"blue.400",color:"blue.500",onClick:function(e){k()},children:" Hopp over "}),(0,Fb.jsx)(qb,{borderWidth:1,backgroundColor:"transparent",borderColor:"blue.400",color:"blue.500",onClick:function(e){var t={};t[o]=d.map((function(e){e.toUpperCase()})),console.log(t),fetch(x+"/image/api/add",{method:"POST",body:JSON.stringify(t),credentials:"include",cache:"no-cache",headers:new Headers({"content-type":"application/json"})}).then((function(e){e.text().then((function(e){}))})),k()},children:" Lagre og g\xe5 videre"})]})]})]})]})};var pfe=function(){var e=qt(),n=e.isOpen,r=e.onOpen,a=e.onClose,i=Pf((0,t.useState)("../../assets/images/img1.jpg"),2),o=i[0],s=i[1],u=Pf((0,t.useState)([]),2),l=u[0],c=u[1],f=window.location.origin;function d(e){return"WC"==e?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function h(){fetch(f+"/image/api/random").then((function(e){e.text().then((function(e){s(e)}))}))}return(0,t.useEffect)((function(){h()}),[]),(0,Fb.jsxs)(bb,{direction:"column",backgroundColor:"gray.50",padding:10,paddingTop:0,overflowY:"auto",overflowX:"auto",minHeight:"100vh",children:[(0,Fb.jsxs)(Ob,{spacing:4,alignItems:"left",direction:"row",p:5,children:[(0,Fb.jsx)(fC,{title:"BILDEGJENKJENNING",section:"Trening av modell"}),(0,Fb.jsx)(kb,{}),(0,Fb.jsx)(qb,{color:"blue.500",fontWeight:"bold",fontSize:"18",size:"md",background:"transparent",onClick:r,children:"Lurer du p\xe5 noe?"})]}),(0,Fb.jsxs)(nS,{isOpen:n,onClose:a,size:"2xl",closeOnEsc:"true",children:[(0,Fb.jsx)(oS,{}),(0,Fb.jsxs)(aS,{children:[(0,Fb.jsx)(sS,{color:"blue.500",fontWeight:"bold",fontSize:"20",alignSelf:"center",children:"Forklaring"}),(0,Fb.jsx)(lS,{}),(0,Fb.jsx)(uS,{children:(0,Fb.jsx)(ufe,{})})]})]}),(0,Fb.jsxs)(Ob,{children:[(0,Fb.jsx)(hb,{p:5,w:"50%",minWidth:"400px",maxWidth:"650px",children:(0,Fb.jsx)(_S,{src:o,onLoad:function(e){var t=dfe.dom_to_pixels(e.target);dfe.classify(t,0).then((function(e){c(e),console.log(l)}))},crossOrigin:"anonymous",alt:"Random Image"})}),(0,Fb.jsx)(kb,{}),(0,Fb.jsxs)(bb,{p:20,pb:10,pt:10,borderWidth:2,shadow:"md",w:"49%",direction:"column",rounded:"xl",minHeight:"450px",minWidth:"400px",alignSelf:"center",children:[(0,Fb.jsx)(Tb,{mb:5,color:"blue.500",fontSize:15,fontWeight:"bold",children:"Etiketter"}),(0,Fb.jsx)(Ob,{spacing:"24px",style:{padding:"12px"},children:Object.keys(l).map((function(e){return(0,Fb.jsx)(hb,{style:{backgroundColor:"rgba(25, 243, 47, "+l[e]+")",border:"#3365ff",margin:"5px",color:"#3365ff",borderRadius:"15px",fontSize:"22px",padding:"8px",paddingRight:"12px",paddingLeft:"12px"},type:"text",value:e,children:d(e)},Math.random())}))}),(0,Fb.jsx)(kb,{}),(0,Fb.jsx)(kb,{}),(0,Fb.jsx)(Eb,{children:(0,Fb.jsx)(qb,{borderWidth:1,backgroundColor:"transparent",borderColor:"blue.400",color:"blue.500",onClick:function(e){h()},children:" G\xe5 Videre"})})]})]})]})};var vfe=function(){return(0,Fb.jsx)("div",{children:(0,Fb.jsxs)(cb,{children:[(0,Fb.jsx)(__,{}),(0,Fb.jsxs)(ub,{children:[(0,Fb.jsx)(ob,{path:"/",element:(0,Fb.jsx)(D7,{})}),(0,Fb.jsx)(ob,{path:"/cte/Demo",element:(0,Fb.jsx)(D7,{})}),(0,Fb.jsx)(ob,{path:"/cte/Stat",element:(0,Fb.jsx)(xse,{})}),(0,Fb.jsx)(ob,{path:"/imageLabelling/Training",element:(0,Fb.jsx)(hfe,{})}),(0,Fb.jsx)(ob,{path:"/imageLabelling/Demo",element:(0,Fb.jsx)(pfe,{})}),(0,Fb.jsx)(ob,{path:"/invoiceReader/Demo",element:(0,Fb.jsx)(dce,{})})]})]})})},gfe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[].concat(t),a=t[t.length-1];return Fl(a)&&r.length>1?r=r.slice(0,r.length-1):a=Dl,Tt.apply(void 0,r.map((function(e){return function(t){return Ue(e)?e(t):Ay(t,e)}})))(a)}({fonts:{heading:"'arial'",body:"'arial'"}}),mfe=gfe;Ry.createRoot(document.getElementById("root")).render((0,Fb.jsxs)(Ey,{theme:mfe,children:[(0,Fb.jsx)(An,{initialColorMode:"light"}),(0,Fb.jsx)(vfe,{})]}))}()})();
//# sourceMappingURL=main.a461252f.js.map